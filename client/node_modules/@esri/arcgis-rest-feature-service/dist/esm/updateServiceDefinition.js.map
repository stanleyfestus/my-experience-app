{"version":3,"file":"updateServiceDefinition.js","sourceRoot":"","sources":["../../src/updateServiceDefinition.ts"],"names":[],"mappings":"AAAA;gBACgB;AAEhB,OAAO,EACL,OAAO,EACP,QAAQ,EAET,MAAM,2BAA2B,CAAC;AAWnC;;;;;;;;;;;;;;;GAeG;AACH,MAAM,UAAU,uBAAuB,CACrC,GAAW,EACX,cAA+C;IAE/C,MAAM,QAAQ,GAAG,GAAG,QAAQ,CAAC,GAAG,CAAC,CAAC,OAAO,CACvC,gBAAgB,EAChB,sBAAsB,CACvB,mBAAmB,CAAC;IAErB,cAAc,CAAC,MAAM,mBACnB,gBAAgB,EAAE,EAAE,IACjB,cAAc,CAAC,MAAM,CACzB,CAAC;IAEF,IAAI,cAAc,CAAC,gBAAgB,EAAE;QACnC,cAAc,CAAC,MAAM,CAAC,gBAAgB,GAAG,cAAc,CAAC,gBAAgB,CAAC;KAC1E;IAED,OAAO,OAAO,CAAC,QAAQ,EAAE,cAAc,CAAC,CAAC;AAC3C,CAAC","sourcesContent":["/* Copyright (c) 2018-2019 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\n\nimport {\n  request,\n  cleanUrl,\n  IUserRequestOptions\n} from \"@esri/arcgis-rest-request\";\nimport { IFeatureServiceDefinition } from \"./helpers.js\";\n\nexport interface IUpdateServiceDefinitionOptions extends IUserRequestOptions {\n  updateDefinition?: Partial<IFeatureServiceDefinition>;\n}\n\nexport interface IUpdateServiceDefinitionResult {\n  success: boolean;\n}\n\n/**\n * Update a definition property in a hosted feature service. See the [REST Documentation](https://developers.arcgis.com/rest/services-reference/online/update-definition-feature-service-.htm) for more information.\n *\n * ```js\n * import { updateServiceDefinition } from '@esri/arcgis-rest-service-admin';\n * //\n * updateServiceDefinition(serviceurl, {\n *   authentication: ArcGISIdentityManager,\n *   updateDefinition: serviceDefinition\n * });\n * ```\n *\n * @param url - URL of feature service\n * @param requestOptions - Options for the request\n * @returns A Promise that resolves with success or error\n */\nexport function updateServiceDefinition(\n  url: string,\n  requestOptions: IUpdateServiceDefinitionOptions\n): Promise<IUpdateServiceDefinitionResult> {\n  const adminUrl = `${cleanUrl(url).replace(\n    `/rest/services`,\n    `/rest/admin/services`\n  )}/updateDefinition`;\n\n  requestOptions.params = {\n    updateDefinition: {},\n    ...requestOptions.params\n  };\n\n  if (requestOptions.updateDefinition) {\n    requestOptions.params.updateDefinition = requestOptions.updateDefinition;\n  }\n\n  return request(adminUrl, requestOptions);\n}\n"]}