{"version":3,"file":"addAttachment.js","sourceRoot":"","sources":["../../src/addAttachment.ts"],"names":[],"mappings":";AAAA;gBACgB;;;AAEhB,mEAA8D;AAkB9D;;;;;;;;;;;;;;;;GAgBG;AACH,SAAgB,aAAa,CAC3B,cAAqC;IAErC,MAAM,OAAO,mBACX,MAAM,EAAE,EAAE,IACP,cAAc,CAClB,CAAC;IAEF,8BAA8B;IAC9B,OAAO,CAAC,MAAM,CAAC,UAAU,GAAG,cAAc,CAAC,UAAU,CAAC;IAEtD,OAAO,IAAA,6BAAO,EACZ,GAAG,IAAA,8BAAQ,EAAC,OAAO,CAAC,GAAG,CAAC,IAAI,OAAO,CAAC,SAAS,gBAAgB,EAC7D,OAAO,CACR,CAAC;AACJ,CAAC;AAfD,sCAeC","sourcesContent":["/* Copyright (c) 2018 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\n\nimport { request, cleanUrl } from \"@esri/arcgis-rest-request\";\nimport { IGetLayerOptions, IEditFeatureResult } from \"./helpers.js\";\n\n/**\n * Request options for adding a related attachment to a feature by id. See [Add Attachment](https://developers.arcgis.com/rest/services-reference/add-attachment.htm) for more information.\n *\n */\nexport interface IAddAttachmentOptions extends IGetLayerOptions {\n  /**\n   * Unique identifier of feature to add related attachment.\n   */\n  featureId: number;\n  /**\n   * File to be attached.\n   */\n  attachment: File;\n}\n\n/**\n * Attach a file to a feature by id. See [Add Attachment](https://developers.arcgis.com/rest/services-reference/add-attachment.htm) for more information.\n *\n * ```js\n * import { addAttachment } from '@esri/arcgis-rest-feature-service';\n * //\n * addAttachment({\n *   url: \"https://sampleserver6.arcgisonline.com/arcgis/rest/services/ServiceRequest/FeatureServer/0\",\n *   featureId: 8484,\n *   attachment: myFileInput.files[0]\n * })\n *   .then(response)\n * ```\n *\n * @param requestOptions - Options for the request.\n * @returns A Promise that will resolve with the `addAttachment()` response.\n */\nexport function addAttachment(\n  requestOptions: IAddAttachmentOptions\n): Promise<{ addAttachmentResult: IEditFeatureResult }> {\n  const options: IAddAttachmentOptions = {\n    params: {},\n    ...requestOptions\n  };\n\n  // `attachment` --> params: {}\n  options.params.attachment = requestOptions.attachment;\n\n  return request(\n    `${cleanUrl(options.url)}/${options.featureId}/addAttachment`,\n    options\n  );\n}\n"]}