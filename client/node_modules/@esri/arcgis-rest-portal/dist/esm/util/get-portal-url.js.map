{"version":3,"file":"get-portal-url.js","sourceRoot":"","sources":["../../../src/util/get-portal-url.ts"],"names":[],"mappings":"AAAA;gBACgB;AAEhB,OAAO,EAAmB,QAAQ,EAAE,MAAM,2BAA2B,CAAC;AAGtE;;;;;;;GAOG;AACH,MAAM,UAAU,YAAY,CAAC,iBAAkC,EAAE;IAC/D,qCAAqC;IACrC,IAAI,cAAc,CAAC,MAAM,EAAE;QACzB,OAAO,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC;KACxC;IAED,sCAAsC;IACtC,IACE,cAAc,CAAC,cAAc;QAC7B,OAAO,cAAc,CAAC,cAAc,KAAK,QAAQ,EACjD;QACA,yDAAyD;QACzD,OAAO,cAAc,CAAC,cAAc,CAAC,MAAM,CAAC;KAC7C;IAED,wBAAwB;IACxB,OAAO,qCAAqC,CAAC;AAC/C,CAAC","sourcesContent":["/* Copyright (c) 2017 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\n\nimport { IRequestOptions, cleanUrl } from \"@esri/arcgis-rest-request\";\nimport { request } from \"http\";\n\n/**\n * Helper that returns the appropriate portal url for a given request. `requestOptions.portal` is given\n * precedence over `authentication.portal`. If neither `portal` nor `authentication` is present,\n * `www.arcgis.com/sharing/rest` is returned.\n *\n * @param requestOptions - Request options that may have authentication manager\n * @returns Portal url to be used in API requests\n */\nexport function getPortalUrl(requestOptions: IRequestOptions = {}): string {\n  // use portal in options if specified\n  if (requestOptions.portal) {\n    return cleanUrl(requestOptions.portal);\n  }\n\n  // if auth was passed, use that portal\n  if (\n    requestOptions.authentication &&\n    typeof requestOptions.authentication !== \"string\"\n  ) {\n    // the portal url is already scrubbed in the auth package\n    return requestOptions.authentication.portal;\n  }\n\n  // default to arcgis.com\n  return \"https://www.arcgis.com/sharing/rest\";\n}\n"]}