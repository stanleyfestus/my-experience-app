{"version":3,"file":"notification.js","sourceRoot":"","sources":["../../../src/users/notification.ts"],"names":[],"mappings":"AAAA;gBACgB;AAEhB,OAAO,EAAE,OAAO,EAAuB,MAAM,2BAA2B,CAAC;AAEzE,OAAO,EAAE,YAAY,EAAE,MAAM,2BAA2B,CAAC;AAqBzD;;;;;;;;;;;;;GAaG;AACH,MAAM,UAAU,oBAAoB,CAClC,cAAmC;IAEnC,IAAI,OAAO,GAAG,EAAE,UAAU,EAAE,KAAK,EAAyB,CAAC;IAE3D,MAAM,QAAQ,GAAG,kBAAkB,CAAC,cAAc,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;IAC5E,MAAM,SAAS,GAAG,YAAY,CAAC,cAAc,CAAC,CAAC;IAC/C,MAAM,GAAG,GAAG,GAAG,SAAS,oBAAoB,QAAQ,gBAAgB,CAAC;IACrE,OAAO,mCAAQ,cAAc,GAAK,OAAO,CAAE,CAAC;IAE5C,mBAAmB;IACnB,OAAO,OAAO,CAAC,GAAG,EAAE,OAAO,CAAC,CAAC;AAC/B,CAAC;AAED;;;;;GAKG;AACH,MAAM,UAAU,kBAAkB,CAChC,cAA0C;IAE1C,MAAM,QAAQ,GAAG,kBAAkB,CAAC,cAAc,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;IAC5E,MAAM,SAAS,GAAG,YAAY,CAAC,cAAc,CAAC,CAAC;IAC/C,MAAM,GAAG,GAAG,GAAG,SAAS,oBAAoB,QAAQ,kBAAkB,cAAc,CAAC,EAAE,SAAS,CAAC;IAEjG,OAAO,OAAO,CAAC,GAAG,EAAE,cAAc,CAAC,CAAC;AACtC,CAAC","sourcesContent":["/* Copyright (c) 2018 Environmental Systems Research Institute, Inc.\n * Apache-2.0 */\n\nimport { request, IUserRequestOptions } from \"@esri/arcgis-rest-request\";\n\nimport { getPortalUrl } from \"../util/get-portal-url.js\";\n\nexport interface INotification {\n  id: string;\n  type: string;\n  target: string;\n  targetType: string;\n  received: number;\n  data: { [key: string]: any };\n}\n\nexport interface IRemoveNotificationOptions extends IUserRequestOptions {\n  /**\n   * Unique identifier of the item.\n   */\n  id: string;\n}\nexport interface INotificationResult {\n  notifications: INotification[];\n}\n\n/**\n * Get notifications for a user.\n *\n * ```js\n * import { getUserNotifications } from '@esri/arcgis-rest-portal';\n *\n * getUserNotifications({ authentication })\n *   .then(results) // results.notifications.length) => 3\n * ```\n *\n *\n * @param requestOptions - options to pass through in the request\n * @returns A Promise that will resolve with the user's notifications\n */\nexport function getUserNotifications(\n  requestOptions: IUserRequestOptions\n): Promise<INotificationResult> {\n  let options = { httpMethod: \"GET\" } as IUserRequestOptions;\n\n  const username = encodeURIComponent(requestOptions.authentication.username);\n  const portalUrl = getPortalUrl(requestOptions);\n  const url = `${portalUrl}/community/users/${username}/notifications`;\n  options = { ...requestOptions, ...options };\n\n  // send the request\n  return request(url, options);\n}\n\n/**\n * Delete a notification.\n *\n * @param requestOptions - Options for the request\n * @returns A Promise that will resolve with the success/failure status of the request\n */\nexport function removeNotification(\n  requestOptions: IRemoveNotificationOptions\n): Promise<{ success: boolean; notificationId: string }> {\n  const username = encodeURIComponent(requestOptions.authentication.username);\n  const portalUrl = getPortalUrl(requestOptions);\n  const url = `${portalUrl}/community/users/${username}/notifications/${requestOptions.id}/delete`;\n\n  return request(url, requestOptions);\n}\n"]}