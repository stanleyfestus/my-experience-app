{"version":3,"file":"combobox-item.js","sourceRoot":"","sources":["../../../../src/components/combobox-item/combobox-item.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  Element,\n  Event,\n  EventEmitter,\n  h,\n  Host,\n  Prop,\n  VNode,\n  Watch,\n} from \"@stencil/core\";\nimport {\n  ConditionalSlotComponent,\n  connectConditionalSlotComponent,\n  disconnectConditionalSlotComponent,\n} from \"../../utils/conditionalSlot\";\nimport { getSlotted } from \"../../utils/dom\";\nimport { guid } from \"../../utils/guid\";\nimport {\n  InteractiveComponent,\n  InteractiveContainer,\n  updateHostInteraction,\n} from \"../../utils/interactive\";\nimport { ComboboxChildElement } from \"../combobox/interfaces\";\nimport { getAncestors, getDepth, isSingleLike } from \"../combobox/utils\";\nimport { Scale, SelectionMode } from \"../interfaces\";\nimport { getIconScale } from \"../../utils/component\";\nimport { IconNameOrString } from \"../icon/interfaces\";\nimport { CSS, SLOTS } from \"./resources\";\n\n/**\n * @slot - A slot for adding nested `calcite-combobox-item`s.\n * @slot content-end - A slot for adding non-actionable elements after the component's content.\n */\n@Component({\n  tag: \"calcite-combobox-item\",\n  styleUrl: \"combobox-item.scss\",\n  shadow: true,\n})\nexport class ComboboxItem implements ConditionalSlotComponent, InteractiveComponent {\n  // --------------------------------------------------------------------------\n  //\n  //  Properties\n  //\n  // --------------------------------------------------------------------------\n\n  /** When `true`, the component is active. */\n  @Prop({ reflect: true }) active = false;\n\n  /** Specifies the parent and grandparent items, which are set on `calcite-combobox`. */\n  @Prop({ mutable: true }) ancestors: ComboboxChildElement[];\n\n  /**\n   * A description for the component, which displays below the label.\n   */\n  @Prop() description: string;\n\n  /** When `true`, interaction is prevented and the component is displayed with lower opacity. */\n  @Prop({ reflect: true }) disabled = false;\n\n  @Watch(\"disabled\")\n  @Watch(\"textLabel\")\n  handleComboboxItemPropsChange(): void {\n    this.calciteInternalComboboxItemChange.emit();\n  }\n\n  /**\n   * When `true`, omits the component from the `calcite-combobox` filtered search results.\n   */\n  @Prop({ reflect: true }) filterDisabled: boolean;\n\n  /**\n   * Pattern for highlighting filter text matches.\n   *\n   * @internal\n   */\n  @Prop({ reflect: true }) filterTextMatchPattern: RegExp;\n\n  /** The `id` attribute of the component. When omitted, a globally unique identifier is used. */\n  @Prop({ reflect: true }) guid = guid();\n\n  /** Specifies an icon to display. */\n  @Prop({ reflect: true }) icon: IconNameOrString;\n\n  /** When `true`, the icon will be flipped when the element direction is right-to-left (`\"rtl\"`). */\n  @Prop({ reflect: true }) iconFlipRtl = false;\n\n  @Watch(\"selected\")\n  selectedWatchHandler(): void {\n    this.calciteComboboxItemChange.emit();\n  }\n\n  /**\n   * Provides additional metadata to the component used in filtering.\n   */\n  @Prop() metadata: Record<string, unknown>;\n\n  /**\n   * Specifies the size of the component inherited from the `calcite-combobox`, defaults to `m`.\n   *\n   * @internal\n   */\n  @Prop() scale: Scale = \"m\";\n\n  /**\n   * When `true`, the component is selected.\n   */\n  @Prop({ reflect: true, mutable: true }) selected = false;\n\n  /**\n   * Specifies the selection mode of the component, where:\n   *\n   * `\"multiple\"` allows any number of selections,\n   *\n   * `\"single\"` allows only one selection,\n   *\n   * `\"single-persist\"` allows one selection and prevents de-selection, and\n   *\n   * `\"ancestors\"` allows multiple selections, but shows ancestors of selected items as selected, with only deepest children shown in chips.\n   *\n   * @internal\n   */\n  @Prop({ reflect: true }) selectionMode: Extract<\n    \"single\" | \"single-persist\" | \"ancestors\" | \"multiple\",\n    SelectionMode\n  > = \"multiple\";\n\n  /**\n   * The component's short heading.\n   *\n   * When provided, the short heading will be displayed in the component's selection.\n   *\n   * It is recommended to use 5 characters or fewer.\n   */\n  @Prop() shortHeading: string;\n\n  /** The component's text. */\n  @Prop() heading: string;\n\n  /**\n   * The component's text.\n   *\n   * @deprecated Use `heading` instead.\n   */\n  @Prop({ reflect: true }) textLabel!: string;\n\n  /** The component's value. */\n  @Prop() value!: any;\n\n  /** The component's label. */\n  @Prop() label: any;\n\n  // --------------------------------------------------------------------------\n  //\n  //  Private Properties\n  //\n  // --------------------------------------------------------------------------\n\n  @Element() el: HTMLCalciteComboboxItemElement;\n\n  // --------------------------------------------------------------------------\n  //\n  //  Lifecycle\n  //\n  // --------------------------------------------------------------------------\n\n  connectedCallback(): void {\n    this.ancestors = getAncestors(this.el);\n    connectConditionalSlotComponent(this);\n  }\n\n  disconnectedCallback(): void {\n    disconnectConditionalSlotComponent(this);\n  }\n\n  componentDidRender(): void {\n    updateHostInteraction(this);\n  }\n\n  // --------------------------------------------------------------------------\n  //\n  //  Events\n  //\n  // --------------------------------------------------------------------------\n\n  /**\n   * Fires whenever the component is selected or unselected.\n   *\n   */\n  @Event({ cancelable: false }) calciteComboboxItemChange: EventEmitter<void>;\n\n  /**\n   * Fires whenever a property the parent combobox needs to know about is changed.\n   *\n   * @internal\n   */\n  @Event({ cancelable: false }) calciteInternalComboboxItemChange: EventEmitter<void>;\n\n  // --------------------------------------------------------------------------\n  //\n  //  Private Methods\n  //\n  // --------------------------------------------------------------------------\n\n  toggleSelected(): Promise<void> {\n    const isSinglePersistSelect = this.selectionMode === \"single-persist\";\n\n    if (this.disabled || (isSinglePersistSelect && this.selected)) {\n      return;\n    }\n\n    this.selected = !this.selected;\n  }\n\n  private itemClickHandler = (): void => {\n    this.toggleSelected();\n  };\n\n  // --------------------------------------------------------------------------\n  //\n  //  Render Methods\n  //\n  // --------------------------------------------------------------------------\n\n  renderIcon(iconPath: IconNameOrString): VNode {\n    return this.icon ? (\n      <calcite-icon\n        class={{\n          [CSS.custom]: !!this.icon,\n          [CSS.iconActive]: this.icon && this.selected,\n        }}\n        flipRtl={this.iconFlipRtl}\n        icon={this.icon || iconPath}\n        key=\"icon\"\n        scale={getIconScale(this.scale)}\n      />\n    ) : null;\n  }\n\n  renderSelectIndicator(showDot: boolean): VNode;\n  renderSelectIndicator(showDot: boolean, iconPath: IconNameOrString): VNode;\n  renderSelectIndicator(showDot: boolean, iconPath?: IconNameOrString): VNode {\n    return showDot ? (\n      <span\n        class={{\n          [CSS.icon]: true,\n          [CSS.dot]: true,\n        }}\n      />\n    ) : (\n      <calcite-icon\n        class={{\n          [CSS.icon]: true,\n          [CSS.iconActive]: this.selected,\n        }}\n        flipRtl={this.iconFlipRtl}\n        icon={iconPath}\n        key=\"indicator\"\n        scale={getIconScale(this.scale)}\n      />\n    );\n  }\n\n  renderChildren(): VNode {\n    if (getSlotted(this.el)) {\n      return (\n        <ul key=\"default-slot-container\">\n          <slot />\n        </ul>\n      );\n    }\n\n    return null;\n  }\n\n  render(): VNode {\n    const { disabled, heading, label, textLabel, value } = this;\n    const isSingleSelect = isSingleLike(this.selectionMode);\n    const defaultIcon = isSingleSelect ? undefined : \"check\";\n    const headingText = heading || textLabel;\n    const iconPath = disabled ? undefined : defaultIcon;\n    const itemLabel = label || value;\n    const showDot = isSingleSelect && !disabled;\n\n    const classes = {\n      [CSS.label]: true,\n      [CSS.selected]: this.selected,\n      [CSS.active]: this.active,\n      [CSS.single]: isSingleSelect,\n    };\n    const depth = getDepth(this.el) + 1;\n\n    return (\n      <Host aria-hidden=\"true\" aria-label={itemLabel}>\n        <InteractiveContainer disabled={disabled}>\n          <div\n            class={{\n              [CSS.container]: true,\n              [CSS.scale(this.scale)]: true,\n            }}\n            style={{ \"--calcite-combobox-item-spacing-indent-multiplier\": `${depth}` }}\n          >\n            <li class={classes} id={this.guid} onClick={this.itemClickHandler}>\n              {this.renderSelectIndicator(showDot, iconPath)}\n              {this.renderIcon(iconPath)}\n              <div class={CSS.centerContent}>\n                <div class={CSS.title}>{this.renderTextContent(headingText)}</div>\n                {this.description ? (\n                  <div class={CSS.description}>{this.renderTextContent(this.description)}</div>\n                ) : null}\n              </div>\n              {this.shortHeading ? (\n                <div class={CSS.shortText}>{this.renderTextContent(this.shortHeading)}</div>\n              ) : null}\n              <slot name={SLOTS.contentEnd} />\n            </li>\n            {this.renderChildren()}\n          </div>\n        </InteractiveContainer>\n      </Host>\n    );\n  }\n\n  private renderTextContent(text: string): string | (string | VNode)[] {\n    const pattern = this.filterTextMatchPattern;\n\n    if (!pattern || !text) {\n      return text;\n    }\n\n    const parts: (string | VNode)[] = text.split(pattern);\n\n    if (parts.length > 1) {\n      // we only highlight the first match\n      parts[1] = <mark class={CSS.filterMatch}>{parts[1]}</mark>;\n    }\n\n    return parts;\n  }\n}\n"]}