{"version":3,"file":"AlertManager.js","sourceRoot":"","sources":["../../../../src/components/alert/AlertManager.ts"],"names":[],"mappings":"AAAA,MAAM,CAAC,MAAM,mBAAmB,GAAG,GAAG,CAAC;AAEvC,MAAM,CAAC,OAAO,OAAO,YAAY;IAAjC;QACE,6EAA6E;QAC7E,EAAE;QACF,sBAAsB;QACtB,EAAE;QACF,6EAA6E;QAErE,uBAAkB,GAA8B,EAAE,CAAC;QAEnD,mBAAc,GAAW,IAAI,CAAC;IA6DxC,CAAC;IA3DC,6EAA6E;IAC7E,EAAE;IACF,kBAAkB;IAClB,EAAE;IACF,6EAA6E;IAE7E,eAAe,CAAC,KAA8B;QAC5C,MAAM,EAAE,kBAAkB,EAAE,GAAG,IAAI,CAAC;QAEpC,IAAI,CAAC,kBAAkB,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAE,CAAC;YACxC,QAAQ,KAAK,CAAC,KAAK,EAAE,CAAC;gBACpB,KAAK,WAAW;oBACd,kBAAkB,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;oBAClC,MAAM;gBACR,KAAK,MAAM;oBACT,kBAAkB,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;oBACvC,MAAM;gBACR,KAAK,MAAM;oBACT,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;oBAC/B,MAAM;YACV,CAAC;YAED,IAAI,CAAC,YAAY,EAAE,CAAC;QACtB,CAAC;IACH,CAAC;IAED,iBAAiB,CAAC,KAA8B;QAC9C,MAAM,EAAE,kBAAkB,EAAE,GAAG,IAAI,CAAC;QAEpC,MAAM,KAAK,GAAG,kBAAkB,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAEhD,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE,CAAC;YACjB,kBAAkB,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;QACtC,CAAC;QAED,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC;QACrB,IAAI,CAAC,YAAY,EAAE,CAAC;IACtB,CAAC;IAED,6EAA6E;IAC7E,EAAE;IACF,mBAAmB;IACnB,EAAE;IACF,6EAA6E;IAErE,YAAY;QAClB,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;QACzC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAE3B,IAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,KAAK,EAAE,EAAE;YAC/C,KAAK,CAAC,cAAc,GAAG,IAAI,CAAC,kBAAkB,CAAC,MAAM,CAAC;YAEtD,IAAI,KAAK,KAAK,CAAC,EAAE,CAAC;gBAChB,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,EAAE,mBAAmB,CAAC,CAAC;YAC5F,CAAC;iBAAM,CAAC;gBACN,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC;YACvB,CAAC;QACH,CAAC,CAAC,CAAC;IACL,CAAC;CACF","sourcesContent":["export const alertQueueTimeoutMs = 300;\n\nexport default class AlertManager {\n  // --------------------------------------------------------------------------\n  //\n  //  Private Properties\n  //\n  // --------------------------------------------------------------------------\n\n  private registeredElements: HTMLCalciteAlertElement[] = [];\n\n  private queueTimeoutId: number = null;\n\n  // --------------------------------------------------------------------------\n  //\n  //  Public Methods\n  //\n  // --------------------------------------------------------------------------\n\n  registerElement(alert: HTMLCalciteAlertElement): void {\n    const { registeredElements } = this;\n\n    if (!registeredElements.includes(alert)) {\n      switch (alert.queue) {\n        case \"immediate\":\n          registeredElements.unshift(alert);\n          break;\n        case \"next\":\n          registeredElements.splice(1, 0, alert);\n          break;\n        case \"last\":\n          registeredElements.push(alert);\n          break;\n      }\n\n      this.updateAlerts();\n    }\n  }\n\n  unregisterElement(alert: HTMLCalciteAlertElement): void {\n    const { registeredElements } = this;\n\n    const index = registeredElements.indexOf(alert);\n\n    if (index !== -1) {\n      registeredElements.splice(index, 1);\n    }\n\n    alert.active = false;\n    this.updateAlerts();\n  }\n\n  // --------------------------------------------------------------------------\n  //\n  //  Private Methods\n  //\n  // --------------------------------------------------------------------------\n\n  private updateAlerts(): void {\n    window.clearTimeout(this.queueTimeoutId);\n    this.queueTimeoutId = null;\n\n    this.registeredElements.forEach((alert, index) => {\n      alert.openAlertCount = this.registeredElements.length;\n\n      if (index === 0) {\n        this.queueTimeoutId = window.setTimeout(() => (alert.active = true), alertQueueTimeoutMs);\n      } else {\n        alert.active = false;\n      }\n    });\n  }\n}\n"]}