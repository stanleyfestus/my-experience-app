/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */
import{l as e,m as n,n as r,o as t,p as i,d as a,r as u}from"./p-0fb1c54a.js";import{f as o}from"./p-c02c27fd.js";
/*!
* focus-trap 7.6.0
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function f(e,n,r){return(n=l(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function c(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function s(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?c(Object(r),!0).forEach((function(n){f(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function v(e,n){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,n||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}function l(e){var n=v(e,"string");return"symbol"==typeof n?n:n+""}var d={activateTrap:function e(n,r){if(n.length>0){var t=n[n.length-1];if(t!==r){t.pause()}}var i=n.indexOf(r);if(i===-1){n.push(r)}else{n.splice(i,1);n.push(r)}},deactivateTrap:function e(n,r){var t=n.indexOf(r);if(t!==-1){n.splice(t,1)}if(n.length>0){n[n.length-1].unpause()}}};var b=function e(n){return n.tagName&&n.tagName.toLowerCase()==="input"&&typeof n.select==="function"};var p=function e(n){return(n===null||n===void 0?void 0:n.key)==="Escape"||(n===null||n===void 0?void 0:n.key)==="Esc"||(n===null||n===void 0?void 0:n.keyCode)===27};var w=function e(n){return(n===null||n===void 0?void 0:n.key)==="Tab"||(n===null||n===void 0?void 0:n.keyCode)===9};var m=function e(n){return w(n)&&!n.shiftKey};var y=function e(n){return w(n)&&n.shiftKey};var h=function e(n){return setTimeout(n,0)};var F=function e(n,r){var t=-1;n.every((function(e,n){if(r(e)){t=n;return false}return true}));return t};var k=function e(n){for(var r=arguments.length,t=new Array(r>1?r-1:0),i=1;i<r;i++){t[i-1]=arguments[i]}return typeof n==="function"?n.apply(void 0,t):n};var O=function e(n){return n.target.shadowRoot&&typeof n.composedPath==="function"?n.composedPath()[0]:n.target};var j=[];var T=function a(u,o){var f=(o===null||o===void 0?void 0:o.document)||document;var c=(o===null||o===void 0?void 0:o.trapStack)||j;var v=s({returnFocusOnDeactivate:true,escapeDeactivates:true,delayInitialFocus:true,isKeyForward:m,isKeyBackward:y},o);var l={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:false,paused:false,delayInitialFocusTimer:undefined,recentNavEvent:undefined};var T;var D=function e(n,r,t){return n&&n[r]!==undefined?n[r]:v[t||r]};var g=function e(n,r){var t=typeof(r===null||r===void 0?void 0:r.composedPath)==="function"?r.composedPath():undefined;return l.containerGroups.findIndex((function(e){var r=e.container,i=e.tabbableNodes;return r.contains(n)||(t===null||t===void 0?void 0:t.includes(r))||i.find((function(e){return e===n}))}))};var E=function e(n){var r=v[n];if(typeof r==="function"){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++){i[a-1]=arguments[a]}r=r.apply(void 0,i)}if(r===true){r=undefined}if(!r){if(r===undefined||r===false){return r}throw new Error("`".concat(n,"` was specified but was not a node, or did not return a node"))}var u=r;if(typeof r==="string"){u=f.querySelector(r);if(!u){throw new Error("`".concat(n,"` as selector refers to no known node"))}}return u};var N=function n(){var r=E("initialFocus");if(r===false){return false}if(r===undefined||!e(r,v.tabbableOptions)){if(g(f.activeElement)>=0){r=f.activeElement}else{var t=l.tabbableGroups[0];var i=t&&t.firstTabbableNode;r=i||E("fallbackFocus")}}if(!r){throw new Error("Your focus-trap needs to have at least one focusable element")}return r};var P=function e(){l.containerGroups=l.containers.map((function(e){var a=n(e,v.tabbableOptions);var u=r(e,v.tabbableOptions);var o=a.length>0?a[0]:undefined;var f=a.length>0?a[a.length-1]:undefined;var c=u.find((function(e){return t(e)}));var s=u.slice().reverse().find((function(e){return t(e)}));var l=!!a.find((function(e){return i(e)>0}));return{container:e,tabbableNodes:a,focusableNodes:u,posTabIndexesFound:l,firstTabbableNode:o,lastTabbableNode:f,firstDomTabbableNode:c,lastDomTabbableNode:s,nextTabbableNode:function e(n){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var i=a.indexOf(n);if(i<0){if(r){return u.slice(u.indexOf(n)+1).find((function(e){return t(e)}))}return u.slice(0,u.indexOf(n)).reverse().find((function(e){return t(e)}))}return a[i+(r?1:-1)]}}}));l.tabbableGroups=l.containerGroups.filter((function(e){return e.tabbableNodes.length>0}));if(l.tabbableGroups.length<=0&&!E("fallbackFocus")){throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")}if(l.containerGroups.find((function(e){return e.posTabIndexesFound}))&&l.containerGroups.length>1){throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")}};var A=function e(n){var r=n.activeElement;if(!r){return}if(r.shadowRoot&&r.shadowRoot.activeElement!==null){return A(r.shadowRoot)}return r};var x=function e(n){if(n===false){return}if(n===A(document)){return}if(!n||!n.focus){x(N());return}n.focus({preventScroll:!!v.preventScroll});l.mostRecentlyFocusedNode=n;if(b(n)){n.select()}};var B=function e(n){var r=E("setReturnFocus",n);return r?r:r===false?false:n};var R=function n(r){var a=r.target,u=r.event,o=r.isBackward,f=o===void 0?false:o;a=a||O(u);P();var c=null;if(l.tabbableGroups.length>0){var s=g(a,u);var d=s>=0?l.containerGroups[s]:undefined;if(s<0){if(f){c=l.tabbableGroups[l.tabbableGroups.length-1].lastTabbableNode}else{c=l.tabbableGroups[0].firstTabbableNode}}else if(f){var b=F(l.tabbableGroups,(function(e){var n=e.firstTabbableNode;return a===n}));if(b<0&&(d.container===a||e(a,v.tabbableOptions)&&!t(a,v.tabbableOptions)&&!d.nextTabbableNode(a,false))){b=s}if(b>=0){var p=b===0?l.tabbableGroups.length-1:b-1;var m=l.tabbableGroups[p];c=i(a)>=0?m.lastTabbableNode:m.lastDomTabbableNode}else if(!w(u)){c=d.nextTabbableNode(a,false)}}else{var y=F(l.tabbableGroups,(function(e){var n=e.lastTabbableNode;return a===n}));if(y<0&&(d.container===a||e(a,v.tabbableOptions)&&!t(a,v.tabbableOptions)&&!d.nextTabbableNode(a))){y=s}if(y>=0){var h=y===l.tabbableGroups.length-1?0:y+1;var k=l.tabbableGroups[h];c=i(a)>=0?k.firstTabbableNode:k.firstDomTabbableNode}else if(!w(u)){c=d.nextTabbableNode(a)}}}else{c=E("fallbackFocus")}return c};var C=function e(n){var r=O(n);if(g(r,n)>=0){return}if(k(v.clickOutsideDeactivates,n)){T.deactivate({returnFocus:v.returnFocusOnDeactivate});return}if(k(v.allowOutsideClick,n)){return}n.preventDefault()};var S=function e(n){var r=O(n);var t=g(r,n)>=0;if(t||r instanceof Document){if(t){l.mostRecentlyFocusedNode=r}}else{n.stopImmediatePropagation();var a;var u=true;if(l.mostRecentlyFocusedNode){if(i(l.mostRecentlyFocusedNode)>0){var o=g(l.mostRecentlyFocusedNode);var f=l.containerGroups[o].tabbableNodes;if(f.length>0){var c=f.findIndex((function(e){return e===l.mostRecentlyFocusedNode}));if(c>=0){if(v.isKeyForward(l.recentNavEvent)){if(c+1<f.length){a=f[c+1];u=false}}else{if(c-1>=0){a=f[c-1];u=false}}}}}else{if(!l.containerGroups.some((function(e){return e.tabbableNodes.some((function(e){return i(e)>0}))}))){u=false}}}else{u=false}if(u){a=R({target:l.mostRecentlyFocusedNode,isBackward:v.isKeyBackward(l.recentNavEvent)})}if(a){x(a)}else{x(l.mostRecentlyFocusedNode||N())}}l.recentNavEvent=undefined};var I=function e(n){var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;l.recentNavEvent=n;var t=R({event:n,isBackward:r});if(t){if(w(n)){n.preventDefault()}x(t)}};var G=function e(n){if(v.isKeyForward(n)||v.isKeyBackward(n)){I(n,v.isKeyBackward(n))}};var K=function e(n){if(p(n)&&k(v.escapeDeactivates,n)!==false){n.preventDefault();T.deactivate()}};var M=function e(n){var r=O(n);if(g(r,n)>=0){return}if(k(v.clickOutsideDeactivates,n)){return}if(k(v.allowOutsideClick,n)){return}n.preventDefault();n.stopImmediatePropagation()};var U=function e(){if(!l.active){return}d.activateTrap(c,T);l.delayInitialFocusTimer=v.delayInitialFocus?h((function(){x(N())})):x(N());f.addEventListener("focusin",S,true);f.addEventListener("mousedown",C,{capture:true,passive:false});f.addEventListener("touchstart",C,{capture:true,passive:false});f.addEventListener("click",M,{capture:true,passive:false});f.addEventListener("keydown",G,{capture:true,passive:false});f.addEventListener("keydown",K);return T};var Y=function e(){if(!l.active){return}f.removeEventListener("focusin",S,true);f.removeEventListener("mousedown",C,true);f.removeEventListener("touchstart",C,true);f.removeEventListener("click",M,true);f.removeEventListener("keydown",G,true);f.removeEventListener("keydown",K);return T};var L=function e(n){var r=n.some((function(e){var n=Array.from(e.removedNodes);return n.some((function(e){return e===l.mostRecentlyFocusedNode}))}));if(r){x(N())}};var q=typeof window!=="undefined"&&"MutationObserver"in window?new MutationObserver(L):undefined;var z=function e(){if(!q){return}q.disconnect();if(l.active&&!l.paused){l.containers.map((function(e){q.observe(e,{subtree:true,childList:true})}))}};T={get active(){return l.active},get paused(){return l.paused},activate:function e(n){if(l.active){return this}var r=D(n,"onActivate");var t=D(n,"onPostActivate");var i=D(n,"checkCanFocusTrap");if(!i){P()}l.active=true;l.paused=false;l.nodeFocusedBeforeActivation=f.activeElement;r===null||r===void 0||r();var a=function e(){if(i){P()}U();z();t===null||t===void 0||t()};if(i){i(l.containers.concat()).then(a,a);return this}a();return this},deactivate:function e(n){if(!l.active){return this}var r=s({onDeactivate:v.onDeactivate,onPostDeactivate:v.onPostDeactivate,checkCanReturnFocus:v.checkCanReturnFocus},n);clearTimeout(l.delayInitialFocusTimer);l.delayInitialFocusTimer=undefined;Y();l.active=false;l.paused=false;z();d.deactivateTrap(c,T);var t=D(r,"onDeactivate");var i=D(r,"onPostDeactivate");var a=D(r,"checkCanReturnFocus");var u=D(r,"returnFocus","returnFocusOnDeactivate");t===null||t===void 0||t();var o=function e(){h((function(){if(u){x(B(l.nodeFocusedBeforeActivation))}i===null||i===void 0||i()}))};if(u&&a){a(B(l.nodeFocusedBeforeActivation)).then(o,o);return this}o();return this},pause:function e(n){if(l.paused||!l.active){return this}var r=D(n,"onPause");var t=D(n,"onPostPause");l.paused=true;r===null||r===void 0||r();Y();z();t===null||t===void 0||t();return this},unpause:function e(n){if(!l.paused||!l.active){return this}var r=D(n,"onUnpause");var t=D(n,"onPostUnpause");l.paused=false;r===null||r===void 0||r();P();U();z();t===null||t===void 0||t();return this},updateContainerElements:function e(n){var r=[].concat(n).filter(Boolean);l.containers=r.map((function(e){return typeof e==="string"?f.querySelector(e):e}));if(l.active){P()}z();return this}};T.updateContainerElements(u);return T};function D(e,n){const{el:r}=e;const t=n?.focusTrapEl||r;if(!t){return}const i={clickOutsideDeactivates:true,escapeDeactivates:false,fallbackFocus:t,setReturnFocus:e=>{a(e);return false},...n?.focusTrapOptions,document:r.ownerDocument,tabbableOptions:u,trapStack:o};e.focusTrap=T(t,i)}function g(e,n){if(!e.focusTrapDisabled){e.focusTrap?.activate(n)}}function E(e,n){e.focusTrap?.deactivate(n)}function N(e){e.focusTrap?.updateContainerElements(e.el)}export{g as a,D as c,E as d,N as u};
//# sourceMappingURL=p-b531ae23.js.map