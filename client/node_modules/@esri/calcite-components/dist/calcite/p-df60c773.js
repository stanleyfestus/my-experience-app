/*!
 * All material copyright ESRI, All Rights Reserved, unless otherwise specified.
 * See https://github.com/Esri/calcite-design-system/blob/dev/LICENSE.md for details.
 * v2.13.2
 */
import{g as t}from"./p-18cf26c8.js";import{d as s,e as i}from"./p-0fb1c54a.js";import{d as e}from"./p-6e30bcc2.js";import{h as n}from"./p-67e556ed.js";import{I as o}from"./p-49632699.js";const c={heading:"heading",container:"container",indented:"container--indented"};const a={parentItem:"parent-item"};function r(){this.setUpItems();this.setUpFilter();this.deselectRemovedItems()}const l=["ArrowUp","ArrowDown"];function f(){this.setUpItems();this.setUpFilter();this.emitCalciteListChange=e(F.bind(this),0);this.emitCalciteListFilter=e(x.bind(this),0)}function h(){this.mutationObserver?.observe(this.el,{childList:true,subtree:true})}function u(){this.mutationObserver?.disconnect()}function d(t){const{selectedValues:i}=this;const{item:e,value:n,selected:o,shiftPressed:c}=t.detail;if(o){if(this.multiple&&c){this.selectSiblings(e)}if(!this.multiple){this.deselectSiblingItems(e)}i.set(n,e)}else{i.delete(n);if(this.multiple&&c){this.selectSiblings(e,true)}}if(!this.multiple){E(e,o);if(o){s(e)}}this.lastSelectedItem=e;this.emitCalciteListChange()}function m(t){const s=t.detail.oldValue;const i=this.selectedValues;if(i.has(s)){const e=i.get(s);i.delete(s);i.set(t.detail.newValue,e)}t.stopPropagation()}function p(t){return!!l.find((s=>s===t))}function g(t){const{el:s,items:i,multiple:e,selectedValues:n}=this;if(e){return}const o=s.contains(t.relatedTarget);if(o){return}A(i).forEach((s=>{E(s,n.size===0?s.contains(t.target)||t.target===s:s.selected)}))}function b(t){const{key:i,target:e}=t;if(!p(i)){return}const{items:n,multiple:o,selectionFollowsFocus:c}=this;const{length:a}=n;const r=n.indexOf(e);if(!a||r===-1){return}t.preventDefault();const l=v(this,e,i==="ArrowUp"?"up":"down");const f=n[l];n.forEach((t=>E(t,t===f)));if(!o&&c){f.selected=true}s(f)}function v(s,i,e){const{items:n}=s;const{length:o}=n;const c=n.indexOf(i);const a=e==="up"?-1:1;let r=1;let l=t(c+a*r++,o);const f=l;while(n[l].disabled){l=t(c+a*r++,o);if(l===f){break}}return l}function w(t,s){const{items:i}=t;return i.indexOf(s)}function A(t){return t.filter((t=>!t.disabled))}function x(){this.calciteListFilter.emit()}function F(){this.calciteListChange.emit(this.selectedValues)}function k(t){if(t.defaultPrevented){return}const s=t.target;const i=this.selectedValues;if(s.parentElement.tagName==="CALCITE-PICK-LIST-GROUP"&&s.slot===a.parentItem){s.parentElement.remove();Array.from(s.parentElement.children).forEach((t=>i.delete(t.value)))}else{s.remove();i.delete(s.value)}this.emitCalciteListChange()}function E(t,s){if(t.disabled){return}if(s){t.removeAttribute("tabindex")}else{t.setAttribute("tabindex","-1")}}async function y(t){if(this.filterEnabled&&t==="filter"){await s(this.filterEl);return}const{items:i,multiple:e,selectionFollowsFocus:n}=this;if(i.length===0){return}if(e){return A(i)[0]?.setFocus()}const o=A(i);const c=o.find((t=>t.selected))||o[0];if(n&&c){c.selected=true}return c.setFocus()}function C(t){this.items=Array.from(this.el.querySelectorAll(t));let s=false;const{items:i}=this;i.forEach((t=>{t.icon=this.getIconType();if(!this.multiple){t.deselectDisabled=true;E(t,false)}if(t.selected){s=true;E(t,true);this.selectedValues.set(t.value,t)}}));const[e]=i;if(!s&&e&&!e.disabled){E(e,true)}}function I(){const t=this.selectedValues;const s=this.items.map((({value:t})=>t));t.forEach((t=>{if(!s.includes(t.value)){this.selectedValues.delete(t.value)}}))}function j(t){this.items.forEach((s=>{if(s.value!==t.value){s.toggleSelected(false);if(this.selectedValues.has(s.value)){this.selectedValues.delete(s.value)}}}))}function S(t,s=false){if(!this.lastSelectedItem){return}const{items:i}=this;const e=i.findIndex((t=>t.value===this.lastSelectedItem.value));const n=i.findIndex((s=>s.value===t.value));i.slice(Math.min(e,n),Math.max(e,n)).forEach((t=>{t.toggleSelected(!s);if(!s){this.selectedValues.set(t.value,t)}else{this.selectedValues.delete(t.value)}}))}let L;function P(t=false){const{filteredData:s,filterText:e}=this;const n=s.map((t=>t.value));let o=false;if(!L){L=new Set}const c=this.items?.filter((t=>{const s=t.parentElement;const i=s.matches("calcite-pick-list-group");if(i){L.add(s)}const c=e?n.includes(t.value):true;t.hidden=!c;if(!o){o=c&&t.selected}return c}))||[];L.forEach((t=>{const s=c.some((s=>t.contains(s)));t.hidden=!s;if(!s){return}const e=i(t,"parent-item");if(e){e.hidden=false;if(c.includes(e)){Array.from(t.children).forEach((t=>t.hidden=false))}}}));L.clear();if(c.length>0&&!o&&!this.multiple){E(c[0],true)}this.setFilteredItems(c);if(t){this.emitCalciteListFilter()}}function T(){const t=this.filterEl?.filteredItems;if(t){this.filteredData=t}this.handleFilter()}function q(t){t.stopPropagation();const{filteredItems:s,value:i}=t.currentTarget;this.filterText=i;this.filteredData=s;this.handleFilter(true)}function D(){return this.items.map((t=>({label:t.label,description:t.description,metadata:t.metadata,value:t.value})))}const U={sticky:"sticky-pos"};const M={circle:"circle",square:"square",grip:"grip"};const V={menuActions:"menu-actions"};const G=({props:{disabled:t,loading:s,filterEnabled:i,dataForFilter:e,handleFilterEvent:c,filterPlaceholder:a,filterText:r,setFilterEl:l,dragEnabled:f,storeAssistiveEl:h}})=>{const u=n("slot",null);return n(o,{disabled:t},n("section",null,f?n("span",{"aria-live":"assertive",class:"assistive-text",ref:h}):null,n("header",{class:{[U.sticky]:true}},i?n("calcite-filter",{"aria-label":a,disabled:t,items:e,onCalciteFilterChange:c,placeholder:a,ref:l,value:r}):null,n("slot",{name:V.menuActions})),s?n("calcite-scrim",{loading:s}):null,u))};const K={actions:"actions",actionsEnd:"actions--end",actionsStart:"actions--start",description:"description",handle:"handle",handleActivated:"handle--activated",highlight:"highlight",icon:"icon",iconDot:"icon-dot",label:"label",remove:"remove",title:"title",textContainer:"text-container"};const O={checked:"check",remove:"x"};const R={actionsEnd:"actions-end",actionsStart:"actions-start"};export{K as C,M as I,G as L,R as S,j as a,q as b,D as c,I as d,v as e,h as f,w as g,P as h,f as i,T as j,b as k,u as l,r as m,g as n,d as o,m as p,C as q,k as r,S as s,y as t,a as u,c as v,O as w};
//# sourceMappingURL=p-df60c773.js.map