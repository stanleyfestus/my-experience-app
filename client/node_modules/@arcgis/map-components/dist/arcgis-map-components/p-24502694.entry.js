/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.0-next.58
 */
import{r as i,c as s,h as t,g as h}from"./p-8305d662.js";import{l as e}from"./p-c956d5f4.js";import{u as r,r as a,g as o,a as c,m as n}from"./p-5bfa67be.js";import{h as g,a6 as d,a7 as w}from"./p-3c121fb0.js";import{p,c as y,e as v,b as V}from"./p-cf4815f5.js";const u=n(d),m=n(w),l=class{constructor(t){i(this,t),this.arcgisViewReadyChange=s(this,"arcgisViewReadyChange",7),this.arcgisViewChange=s(this,"arcgisViewChange",7),this.arcgisViewClick=s(this,"arcgisViewClick",7),this.arcgisViewDoubleClick=s(this,"arcgisViewDoubleClick",7),this.arcgisViewDrag=s(this,"arcgisViewDrag",7),this.arcgisViewHold=s(this,"arcgisViewHold",7),this.arcgisViewImmediateClick=s(this,"arcgisViewImmediateClick",7),this.arcgisViewImmediateDoubleClick=s(this,"arcgisViewImmediateDoubleClick",7),this.arcgisViewKeyDown=s(this,"arcgisViewKeyDown",7),this.arcgisViewKeyUp=s(this,"arcgisViewKeyUp",7),this.arcgisViewLayerviewCreate=s(this,"arcgisViewLayerviewCreate",7),this.arcgisViewLayerviewCreateError=s(this,"arcgisViewLayerviewCreateError",7),this.arcgisViewLayerviewDestroy=s(this,"arcgisViewLayerviewDestroy",7),this.arcgisViewMouseWheel=s(this,"arcgisViewMouseWheel",7),this.arcgisViewPointerDown=s(this,"arcgisViewPointerDown",7),this.arcgisViewPointerEnter=s(this,"arcgisViewPointerEnter",7),this.arcgisViewPointerLeave=s(this,"arcgisViewPointerLeave",7),this.arcgisViewPointerMove=s(this,"arcgisViewPointerMove",7),this.arcgisViewPointerUp=s(this,"arcgisViewPointerUp",7),this.manager=r(this),this.reactiveUtils=e(g),this._map=u(this,{editConstructorProperties:this._editMapProperties}),this._setChildElement=i=>{this.el.childElem=i},this.autoDestroyDisabled=!1,this.view=a(m(this,{editConstructorProperties:this._editViewProperties})),this.map=this.view.map,this.allLayerViews=this.view.allLayerViews,this.alphaCompositingEnabled=this.view.alphaCompositingEnabled,this.analyses=this.view.analyses,this.basemapView=this.view.basemapView,this.basemap=this._map.basemap,this.camera=o(void 0,{get:()=>this.view.camera,set:(i,s)=>(this.view.camera=y(s,i)?i:s,this.view.camera)}),this.center=o(void 0,{get:i=>this.view.center??i,set:i=>{const s=p(i,this.ready?this.view:void 0);return this.ready?(this.view.center=s,this.view.center):s}}),this.clippingArea=o(this.view.clippingArea,{set:(i,s)=>s?.equals(i)?s:i}),this.constraints=this.view.constraints,this.environment=o(this.view.environment,{set:(i,s)=>v(s,i)?i:s}),this.extent=o(void 0,{get:i=>this.view.extent??i,set:(i,s)=>this.view.ready?(i&&!s?.equals(i)&&(this.view.extent=i),this.view.extent):i}),this.fatalError=this.view.fatalError,this.floors=this.view.floors,this.gamepad=o(void 0,{get:()=>this.ready?this.view.input.gamepad:void 0,set:"ignore"}),this.graphics=this.view.graphics,this.ground=this._map.ground,this.groundView=this.view.groundView,this.highlightOptions=this.view.highlightOptions,this.interacting=o(!1,{get:()=>this.view.interacting,set:"ignore"}),this.itemId=o(void 0,{get:i=>this._map.portalItem?.id??i,set:i=>(this.ready&&c.reCreate(this._map,this).then((()=>{this.view.map=this._map})).catch(console.error),i)}),this.layerViews=this.view.layerViews,this.magnifier=this.view.magnifier,this.navigating=o(!1,{get:()=>this.view.navigating,set:"ignore"}),this.navigation=this.view.navigation,this.padding=this.view.padding,this.performanceInfo=o(void 0,{get:()=>this.view.performanceInfo,set:"ignore"}),this.popup=this.view.popup,this.popupDisabled=this.view.popupEnabled,this.qualityProfile=this.view.qualityProfile,this.ready=this.view.ready,this.resolution=o(void 0,{get:()=>this.view.resolution,set:"ignore"}),this.scale=o(void 0,{get:i=>this.view.scale??i,set:i=>(this.ready&&(this.view.scale=i),i)}),this.spatialReference=o(this.view.spatialReference,{set:(i,s)=>s?.equals(i)?s:i}),this.stationary=o(!0,{get:()=>this.view.stationary,set:"ignore"}),this.suspended=this.view.suspended,this.theme=this.view.theme,this.timeExtent=this.view.timeExtent,this.toMap=a(((...i)=>this.view.toMap(...i))),this.toScreen=a(((...i)=>this.view.toScreen(...i))),this.updating=this.view.updating,this.viewingMode=this.view.viewingMode,this.viewpoint=o(void 0,{get:()=>this.view.viewpoint,set:(i,s)=>V(s,i)?i:s}),this.zoom=o(void 0,{get:i=>this.view.zoom??i,set:i=>(this.ready&&(this.view.zoom=i),i)})}async addLayer(i,s){this.map?.add(i,s)}async addLayers(i,s){this.map?.addMany(i,s)}async closePopup(){this.view?.closePopup()}async destroy(){await this.manager.destroy()}async goTo(i,s){return await(this.view?.goTo(i,s))}async hitTest(i,s){return await(this.view?.hitTest(i,s))}async openPopup(i){await(this.view?.openPopup(i))}async takeScreenshot(i){return await(this.view?.takeScreenshot(i))}async tryFatalErrorRecovery(){this.view?.tryFatalErrorRecovery()}async whenAnalysisView(i){return await(this.view?.whenAnalysisView(i))}async whenLayerView(i){return await(this.view?.whenLayerView(i))}componentDidLoad(){var i;(i=this.view).container??(i.container=this.el.childElem);const{watch:s}=this.reactiveUtils;this.manager.onLifecycle((()=>[s((()=>this.view.stationary),(()=>{this.arcgisViewChange.emit()}),{initial:!0}),s((()=>this.view.ready),(()=>this.arcgisViewReadyChange.emit()),{initial:this.view.ready})])),c.reEmitAccessorEvents(this.manager,this.view,this.reactiveUtils,"arcgisView")}render(){return t("div",{key:"3954f72b45b30eabbb33ec2fd96000d72ec862b9",class:"arcgis-scene",ref:this._setChildElement})}_editMapProperties(i){this.map&&(this._map=this.map),this.itemId?i.portalItem={id:this.itemId}:this.basemap||(i.basemap="topo-vector");const{basemap:s,...t}=i;return s||(i=t),i}_editViewProperties(i){this.view.ui||(i.ui={components:["attribution"]}),i.map??(i.map=this._map);const s=p(this.center,void 0);return s&&(i.center=s),this.viewpoint&&(i.viewpoint=this.viewpoint),void 0!==this.scale&&(i.scale=this.scale),this.extent&&(i.extent=this.extent),this.camera&&(i.camera=this.camera),void 0!==this.zoom&&(i.zoom=this.zoom),i}get el(){return h(this)}};l.style=".arcgis-scene{padding:0;margin:0;height:100%;width:100%}";export{l as arcgis_scene}