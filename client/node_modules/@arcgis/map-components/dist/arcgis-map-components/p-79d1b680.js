/*!
 * All material copyright Esri, All Rights Reserved, unless otherwise specified.
 * See https://js.arcgis.com/4.31/esri/copyright.txt for details.
 * v4.31.0-next.58
 */
import{m as s}from"./p-c956d5f4.js";import{a as t}from"./p-8305d662.js";import{p as i,A as h,a as e,w as o}from"./p-5bfa67be.js";import{a}from"./p-cf4815f5.js";const r=s(t),c=s=>(t,i)=>n(t,s,i),n=i(class extends h{hostConnected(){this.component.manager.loadedCalled&&a(this.component)}async hostLoad(){await super.hostLoad(),this.component.manager.destroyed||(this._watchMetaProperties(),e.reEmitAccessorEvents(this,this._instance,this.reactiveUtils,"viewModel"))}hostLoaded(){const{el:s}=this.component;s.childElem=s.shadowRoot?.firstElementChild??s.firstElementChild??void 0??s.childElem;let t=!1;const i=this.component.el.view;Object.defineProperty(this.component.el,"view",{get:()=>this._instance.view,set:s=>{const i=this.component.el.view,h=s;this._instance.view=h,this._instance.map=h?.map,this._watchViewDestroy(),this.component.requestUpdate("view",i),s&&!t&&(t=!0,this.component.arcgisReady.emit())},configurable:!0,enumerable:!0}),i&&(this._instance.view=i),this.component.el.isConnected&&(a(this.component),this._watchViewDestroy())}hostDisconnected(){"object"==typeof this.component.el.childElem&&this.component.el.view?.ui?.remove(this.component.el.childElem)}hostDestroy(){super.hostDestroy(),this._watchViewDestroyHandle?.remove()}_watchMetaProperties(){o(this.component,"position",(s=>{null!=this.component.el.childElem&&"string"==typeof s&&a(this.component)})),o(this.component,"referenceElement",(()=>a(this.component)))}_watchViewDestroy(){this._watchViewDestroyHandle?.remove(),this._watchViewDestroyHandle=this.reactiveUtils.when((()=>!0===this.component.el.view?.destroyed),(()=>{this.component.destroy().catch(console.error)}),{sync:!0})}});export{c as m,r as u}