/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import{_ as e}from"../chunks/tslib.es6.js";import r from"../PopupTemplate.js";import"../renderers/ClassBreaksRenderer.js";import"../renderers/DictionaryRenderer.js";import"../renderers/DotDensityRenderer.js";import"../renderers/HeatmapRenderer.js";import"../renderers/PieChartRenderer.js";import"../renderers/Renderer.js";import"../renderers/SimpleRenderer.js";import"../renderers/UniqueValueRenderer.js";import"../renderers/support/jsonUtils.js";import{rendererTypes as t}from"../renderers/support/types.js";import{ClonableMixin as o}from"../core/Clonable.js";import i from"../core/Collection.js";import{MultiOriginJSONMixin as s}from"../core/MultiOriginJSONSupport.js";import{property as p}from"../core/accessorSupport/decorators/property.js";import{subclass as n}from"../core/accessorSupport/decorators/subclass.js";import a from"../geometry/SpatialReference.js";import l from"./Layer.js";import{ParquetSource as m}from"./graphics/sources/ParquetSource.js";import{BlendLayer as d}from"./mixins/BlendLayer.js";import{CustomParametersMixin as u}from"./mixins/CustomParametersMixin.js";import{FeatureEffectLayer as y}from"./mixins/FeatureEffectLayer.js";import{FeatureReductionLayer as f}from"./mixins/FeatureReductionLayer.js";import{OperationalLayer as c}from"./mixins/OperationalLayer.js";import{OrderedLayer as j}from"./mixins/OrderedLayer.js";import{PortalLayer as h}from"./mixins/PortalLayer.js";import{ScaleRangeLayer as g}from"./mixins/ScaleRangeLayer.js";import{TemporalLayer as I}from"./mixins/TemporalLayer.js";import{labelsVisible as v}from"./support/commonProperties.js";import b from"./support/FeatureTemplate.js";import x from"./support/Field.js";import{defineFieldProperties as S}from"./support/fieldProperties.js";import{fixRendererFields as F,fixTimeInfoFields as P}from"./support/fieldUtils.js";import R from"./support/LabelClass.js";import{reader as w}from"./support/labelingInfo.js";import{parquetGeometryTypeKebabDict as T}from"./support/parquetLayerUtils.js";import L from"../rest/support/Query.js";import{createPopupTemplate as O}from"../support/popupUtils.js";const q=S();let D=class extends(f(y(d(j(I(g(c(h(s(u(o(l)))))))))))){constructor(e){super(e),this.copyright=null,this.fields=null,this.fieldsIndex=null,this.geometrySourceInfo=null,this.metadata=null,this.labelsVisible=!0,this.labelingInfo=null,this.objectIdField=null,this.outFields=null,this.popupTemplate=null,this.source=null,this.spatialReference=a.WGS84,this.templates=null,this.title="Parquet",this.type="parquet",this.urls=new i}async load(e){return this.addResolvingPromise(this._load(e)),this}get defaultPopupTemplate(){return this.createPopupTemplate()}get geometryType(){return this.source.geometryInfo.geometryType}set renderer(e){F(e,this.fieldsIndex),this._set("renderer",e)}createPopupTemplate(e){return O(this,e)}createQuery(){const e=new L;return e.returnGeometry=!0,e.outFields=["*"],e}async createSource(e){const r=new m({loadOptions:{objectIdField:this.objectIdField,geometrySourceInfo:this.geometrySourceInfo,url:this.urls.getItemAt(0)??"",metadata:this.metadata},customParameters:this.customParameters??void 0});return await r.load(e),r}getFieldDomain(e,r){return null}getField(e){return this.fieldsIndex.get(e)}async _load(e){const r=await this.createSource(e);this._set("source",r),this.read(r.sourceJSON,{origin:"service"}),this.revert(["objectIdField","fields","timeInfo"],"service"),F(this.renderer,this.fieldsIndex),P(this.timeInfo,this.fieldsIndex)}};e([p({type:String})],D.prototype,"copyright",void 0),e([p({readOnly:!0})],D.prototype,"defaultPopupTemplate",null),e([p({type:[x],json:{name:"layerDefinition.fields",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"fields"}}}})],D.prototype,"fields",void 0),e([p(q.fieldsIndex)],D.prototype,"fieldsIndex",void 0),e([p({type:Object})],D.prototype,"geometrySourceInfo",void 0),e([p({type:["point"],json:{read:{reader:T.read}}})],D.prototype,"geometryType",null),e([p()],D.prototype,"metadata",void 0),e([p(v)],D.prototype,"labelsVisible",void 0),e([p({type:[R],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:w},write:!0}})],D.prototype,"labelingInfo",void 0),e([p({type:String,json:{name:"layerDefinition.objectIdField",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"objectIdField"}}}})],D.prototype,"objectIdField",void 0),e([p(q.outFields)],D.prototype,"outFields",void 0),e([p({type:r,json:{name:"popupInfo",write:!0}})],D.prototype,"popupTemplate",void 0),e([p({types:t,json:{name:"layerDefinition.drawingInfo.renderer",write:!0,origins:{service:{name:"drawingInfo.renderer"}}}})],D.prototype,"renderer",null),e([p({json:{read:!1},cast:null,type:m,readOnly:!0})],D.prototype,"source",void 0),e([p({type:a})],D.prototype,"spatialReference",void 0),e([p({type:[b]})],D.prototype,"templates",void 0),e([p()],D.prototype,"title",void 0),e([p({json:{read:!1},readOnly:!0})],D.prototype,"type",void 0),e([p({type:i.ofType(String)})],D.prototype,"urls",void 0),D=e([n("esri.layers.ParquetLayer")],D);const C=D;export{C as default};
