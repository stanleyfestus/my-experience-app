/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import{P as e}from"./Transformation2D.js";import{c as t,G as n,t as r,g as o}from"./Geometry.js";import{t as i,q as s}from"./QuadraticBezier.js";function u(){return a(new e,-1,Number.NaN)}function a(e,t,n){return{m_coordinate:e.clone(),m_vertexIndex:t,m_geometryIndex:0,m_distance:n,m_bRightSide:!1,isEmpty:c}}function c(){return Number.isNaN(this.m_distance)}function g(e,r,o=-1,s=-1){if(e.isEmpty())return 3;const u=e.getGeometryType();if(t(u))return m(e,r,o,s);if(u===n.enumPolygon)return f(e,r,o,s);if(u===n.enumPolyline)return x(e,r,o,s);if(u===n.enumEnvelope){const t=new i;return e.queryEnvelope(t),t.contains(r)?t.containsExclusive(r)?1:2:0}return 3}function m(t,n,o,i){if(o>=0||i>=0)return r("");if(t.isDegenerate(0))return t.getStartXY().equals(n)?2:3;if(!t.isCurve()){const r=e.orientationRobust(n,t.getStartXY(),t.getEndXY());return r<0?1:r>0?0:2}const s=t.getClosestCoordinate(n,!1),u=t.getTangent(s),a=t.getCoord2D(s),c=e.orientationRobust(n,a,a.add(u));return c<0?1:c>0?0:2}function f(e,t,n,o){(n>=0||o>=0)&&r("");const u=new i;e.queryEnvelope(u);const a=s(e,t,0);return 0===a?0:1===a?1:2}function x(t,n,o,i){(o<0&&i>=0||o>=0&&i<0)&&r("");const s=t.querySegmentIterator();if(o<0){let t=Number.MAX_VALUE,r=0;for(;s.nextPath();)for(;s.hasNextSegment();){const u=s.nextSegment(),a=u.getClosestCoordinate(n,!1),c=u.getCoord2D(a),g=e.sqrDistance(c,n);g<t?(r=1,o=s.getStartPointIndex(),i=s.getPathIndex(),t=g):g===t&&r++}if(0===r)return 3;if(1===r){s.resetToVertex(o,i);return g(s.nextSegment(),n)}}const u=d();if(-1!==u.i1&&-1===u.i2)return u.bRight1?1:0;if(-1!==u.i1&&-1!==u.i2){if(u.bRight1===u.bRight2)return u.bRight1?1:0;{s.resetToVertex(u.i1,-1);const e=s.nextSegment().getTangent(1);s.resetToVertex(u.i2,-1);const t=s.nextSegment().getTangent(0);return e.crossProduct(t)>=0?1:0}}s.resetToVertex(o,i);return g(s.nextSegment(),n)}function d(e,t,n,r){return o(0),{}}export{a,g as c,u as m};
