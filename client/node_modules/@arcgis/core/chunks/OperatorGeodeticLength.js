/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import{b as e,c as t}from"./tslib.es6.js";import{t as r,a as n,G as a,c as o}from"./Geometry.js";import{O as s}from"./OperatorShapePreservingLength.js";import{av as c,b as i,O as m,N as u,aw as g,ax as l,K as y,a0 as p,a1 as x,a2 as f}from"./QuadraticBezier.js";import{E as h}from"./Transformation2D.js";class S{getOperatorType(){return 10311}supportsCurves(){return!0}accelerateGeometry(e,t,r){return!1}canAccelerateGeometry(e){return!1}execute(e,t,p,x){if(4===p)return(new s).execute(e,t,x);if(0===t.getCoordinateSystemType()&&r(""),n(e),e.isEmpty()||e.getDimension()<1)return 0;const S=t.getGCS(),d=f();S.querySpheroidData(d);const E=d.majorSemiAxis,G=d.e2,P=S.getUnit().getUnitToBaseFactor();let v;const T=e.getGeometryType();if(T===a.enumPolygon?v=e.getBoundary():T===a.enumEnvelope?v=c(e):o(T)?(v=new i({vd:e.getDescription()}),v.addSegment(e,!0)):v=e,v.hasNonLinearSegments()){v=(new m).execute(v,0,t.getTolerance(0),0,x)}if(S!==t){const r=t.getSRToGCSTransform();if(t.isPannable()){v=u(v,t),T===a.enumPolyline&&v===e&&(v=e.clone());const r=new h;t.getPannableExtent().queryIntervalX(r);for(let e=0,t=v.getPointCount();e<t;e++){const t=v.getXY(e);t.x=g(t.x,r),v.setXY(e,t)}}const n=v.createInstance();v=l(r,v,n,x)?n:(new y).execute(v,r,x)}return this._ExecuteMultiPathGeodeticLength(v,p,E,G,P)}_ExecuteMultiPathGeodeticLength(r,n,a,o,s){const c={stack:[],error:void 0,hasError:!1};try{const t=e(c,new p,!1);let i=0;const m=r.querySegmentIterator();for(;m.nextPath();)for(;m.hasNextSegment();){const e=m.nextSegment(),r=e.getStartXY(),c=e.getEndXY();r.scale(s),c.scale(s),x.geodeticDistance(a,o,r.x,r.y,c.x,c.y,t,null,null,n),i+=t.val}return i}catch(i){c.error=i,c.hasError=!0}finally{t(c)}}}export{S as OperatorGeodeticLength};
