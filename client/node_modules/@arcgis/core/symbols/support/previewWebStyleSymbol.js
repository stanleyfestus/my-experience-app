/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import t from"../../request.js";import{pt2px as e}from"../../core/screenUtils.js";import{SymbolSizeDefaults as i}from"./previewUtils.js";import{fetchWebStyleSymbol as n}from"./utils.js";function r(e,i,r){const h=e.thumbnail?.url;return h?t(h,{responseType:"image"}).then((t=>{const e=s(t.data,r);return r?.node?(r.node.appendChild(e),r.node):e})):n(e).then((t=>t?i(t,r):null))}function s(t,n){const r=!/\\.svg$/i.test(t.src)&&n?.disableUpsampling,s=Math.max(t.width,t.height);let h=null!=n?.maxSize?e(n.maxSize):i.maxSize;r&&(h=Math.min(s,h));const o="number"==typeof n?.size?n?.size:null,m=Math.min(h,null!=o?e(o):s);if(m!==s){const e=0!==t.width&&0!==t.height?t.width/t.height:1;e>=1?(t.width=m,t.height=m/e):(t.width=m*e,t.height=m)}return t}export{r as previewWebStyleSymbol};
