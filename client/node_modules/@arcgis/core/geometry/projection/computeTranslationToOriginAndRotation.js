/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import{deg2rad as r}from"../../core/mathUtils.js";import{fromTranslation as t,identity as o}from"../../core/libs/gl-matrix-2/math/mat4.js";import{create as n}from"../../core/libs/gl-matrix-2/factories/vec3f64.js";import{computeENUToPCPFLocalRotation as i,computePCPFToENULocalRotation as l}from"./localRotationUtils.js";import{classifySpatialReference as s,sourceClassificationCache as e,destClassificationCache as m,ProjectionID as c,projectionTable as f}from"./projectors.js";import{equals as u}from"../support/spatialReferenceUtils.js";function C(r,n,C,R){if(null==r||null==R)return!1;const p=s(r,e),a=s(R,m);if(p===a&&!E(a)&&(p!==c.UNKNOWN||u(r,R)))return t(C,n),!0;if(E(a)){const r=f[p][c.LON_LAT],t=f[c.LON_LAT][a];return null!=r&&null!=t&&(r(n,0,A,0),t(A,0,L,0),i(_*A[0],_*A[1],C),C[12]=L[0],C[13]=L[1],C[14]=L[2],!0)}const O=E(p);if((a===c.WEB_MERCATOR||a===c.PLATE_CARREE||a===c.WGS84||a===c.CGCS2000)&&(p===c.WGS84||O||p===c.WEB_MERCATOR||p===c.CGCS2000)){const r=f[p][c.LON_LAT],t=f[c.LON_LAT][a];return null!=r&&null!=t&&(r(n,0,A,0),t(A,0,L,0),O?l(_*A[0],_*A[1],C):o(C),C[12]=L[0],C[13]=L[1],C[14]=L[2],!0)}return!1}function E(r){return r===c.SPHERICAL_ECEF||r===c.SPHERICAL_MARS_PCPF||r===c.SPHERICAL_MOON_PCPF||r===c.WGS84_ECEF}const _=r(1),A=n(),L=n();export{C as computeTranslationToOriginAndRotation};
