/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import{i as o,d as n,e as t,n as s}from"../../../../../chunks/vec32.js";import{create as e}from"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js";function r(o,n){if(o.components)for(const t of o.components)t.faces&&"smooth"===t.shading&&c(t,n)}function c(e,r){null==r.normal&&(r.normal=new Float32Array(r.position.length));const c=e.faces,{position:m,normal:p}=r,h=c.length/3;for(let s=0;s<h;++s){const e=3*c[3*s],r=3*c[3*s+1],l=3*c[3*s+2],h=o(a,m[e],m[e+1],m[e+2]),g=o(i,m[r],m[r+1],m[r+2]),u=o(f,m[l],m[l+1],m[l+2]),d=n(g,g,h),j=n(u,u,h),v=t(d,d,j);p[e]+=v[0],p[e+1]+=v[1],p[e+2]+=v[2],p[r]+=v[0],p[r+1]+=v[1],p[r+2]+=v[2],p[l]+=v[0],p[l+1]+=v[1],p[l+2]+=v[2]}for(let n=0;n<p.length;n+=3)o(l,p[n],p[n+1],p[n+2]),s(l,l),p[n]=l[0],p[n+1]=l[1],p[n+2]=l[2]}const a=e(),i=e(),f=e(),l=e();export{r as smoothNormals};
