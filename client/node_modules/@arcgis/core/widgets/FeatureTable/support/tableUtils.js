/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import{isGroupColumn as t}from"./columnUtils.js";import{loadCalciteComponents as e}from"../../support/componentsUtils.js";const n={action:"EsriFeatureTableActionColumn",attachments:"EsriFeatureTableAttachmentsColumn",relationship:"EsriFeatureTableRelationshipColumn"},i=()=>e({action:()=>import("@esri/calcite-components/dist/components/calcite-action.js"),button:()=>import("@esri/calcite-components/dist/components/calcite-button.js"),dropdown:()=>import("@esri/calcite-components/dist/components/calcite-dropdown.js"),"dropdown-item":()=>import("@esri/calcite-components/dist/components/calcite-dropdown-item.js"),"dropdown-group":()=>import("@esri/calcite-components/dist/components/calcite-dropdown-group.js"),icon:()=>import("@esri/calcite-components/dist/components/calcite-icon.js")}),o=()=>Promise.all([e({input:()=>import("@esri/calcite-components/dist/components/calcite-input.js"),option:()=>import("@esri/calcite-components/dist/components/calcite-option.js"),select:()=>import("@esri/calcite-components/dist/components/calcite-select.js"),"input-date-picker":()=>import("@esri/calcite-components/dist/components/calcite-input-date-picker.js"),"input-time-picker":()=>import("@esri/calcite-components/dist/components/calcite-input-time-picker.js")}),i()]),r=()=>Promise.all([e({"action-bar":()=>import("@esri/calcite-components/dist/components/calcite-action-bar.js")}),o()]);function c(t){return t&&"selection"===t.type}function s(t){return null!=t&&"object"==typeof t&&"createQuery"in t&&"getField"in t&&"queryFeatureCount"in t&&"queryFeatures"in t&&"queryObjectIds"in t&&"capabilities"in t&&"fields"in t&&"fieldsIndex"in t&&"id"in t&&"load"in t&&"objectIdField"in t&&"type"in t&&"when"in t}function a(t){return s(t)&&"queryAttachments"in t}function l(t){return a(t)&&"addAttachment"in t&&"deleteAttachments"in t&&"updateAttachment"in t}function p(t){return s(t)&&"editingEnabled"in t&&"applyEdits"in t}function u(t){return s(t)&&"relationships"in t&&"queryRelatedFeatures"in t&&"queryRelatedFeaturesCount"in t}function m(t){return null!=t&&"object"==typeof t&&"type"in t&&"map-image"===t.type}function d(t,e,{relatedTableId:n}){if(!e?.map)return;const i="scene"===t.type&&t.associatedLayer?t.associatedLayer.url:t.url,o=e=>!(!u(e)||e===t)&&("sublayer"===e.type&&e.layer?.url===t.url?e.id===n:i===e.url&&e.layerId===n);if("sublayer"===t.type&&m(t.parent)){const e=e=>u(e)&&e!==t&&e.id===n,i=t.parent,o=i.sublayers?.find(e)||i.subtables?.find(e);if(u(o))return o}const r=[...e.map.allLayers,...e.map.allTables];let c=null;for(const s of r)if(m(s)){const t=s.sublayers?.find(o)||s.subtables?.find(o);if(t){c=t;break}}else if(o(s)){c=s;break}return u(c)?c:void 0}function f(t,e){return null!=t&&Number.isInteger(t)&&t>-1&&t<e}function y(t){return null==t||0===t.trim().length}function b(t,e){return(t.relationships??[]).filter((t=>!(t.id===e&&"one-to-one"===t.cardinality))).map((({id:t})=>({relationshipId:t})))}function j(t,e){return t.relationships?.find((({id:t})=>t===e))}function h(t,e){return null==e?null:t?.fields?.find((t=>e.toLowerCase()===t.name?.toLowerCase()))}function w(t,e){return e.some((e=>!("group"!==e.type||!w(t,e.columnTemplates))||e.fieldName===t))}function F(e,n){return n?.some((n=>!(!t(n)||!F(e,n.columns))||n.fieldName===e))??!1}export{h as findField,d as findRelatedLayer,j as findRelationship,b as getRelationshipIdsToShow,F as hasColumnForField,w as hasTemplateForField,y as isEmptyStringOrWhitespace,s as isIFeatureTableSupportedLayer,a as isIFeatureTableSupportedLayerWithAttachments,l as isIFeatureTableSupportedLayerWithAttachmentsEditing,p as isIFeatureTableSupportedLayerWithEditing,u as isIFeatureTableSupportedLayerWithRelationships,m as isMapImageLayer,f as isPageIndexValid,c as isSelectionFilter,i as loadColumnComponents,o as loadEditorColumnComponents,r as loadFieldColumnComponents,n as uniqueColumnNames};
