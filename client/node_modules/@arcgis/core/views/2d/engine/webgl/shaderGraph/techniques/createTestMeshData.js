/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import"../../../../../../geometry.js";import{getJsonType as e}from"../../../../../../geometry/support/jsonUtils.js";import t from"../../../../../../layers/support/FieldsIndex.js";import{MeshData as r}from"../../mesh/MeshData.js";import{createMeshWriter as o}from"./createMeshWriter.js";import{AResourceProxy as s}from"./mesh/AResourceProxy.js";import{ComputedAttributeStorage as m}from"../../../../layers/features/support/ComputedAttributeStorage.js";import{FeatureMetadata as a}from"../../../../layers/features/support/FeatureMetadata.js";import{FeatureSetReaderJSON as n}from"../../../../layers/features/support/FeatureSetReaderJSON.js";import i from"../../../../../../geometry/SpatialReference.js";async function p(s){const p=new r("0.0.0.0"),d=new u,f={},c={fields:new t,spatialReference:i.WebMercator},l={$view:{scale:0,timeZone:null}},h=new m(c);for(const t of s){const r=await o(h,d,f,t.instanceId,t.meshParams,t.meshWriterClass);t.feature.displayId=t.feature.attributes.objectId;const s=n.fromFeatures([t.feature],a.minimal(e(t.feature.geometry),"objectId",[]));s.next(),p.entityStart(s.getDisplayId(),0),r.write(p,d,s,l,0),p.entityEnd()}return p.serialize().message}class u extends s{fetchDictionaryResourceImmediate(e){throw new Error("Method not implemented.")}fetchResourceImmediate(e){throw new Error("Method not implemented.")}enqueueRequest(e){throw new Error("Method not implemented.")}fetchEnqueuedResources(){throw new Error("Method not implemented.")}getResource(e){throw new Error("Method not implemented.")}}export{p as createTestMeshData};
