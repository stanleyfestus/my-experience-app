/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import{_ as o,a as t}from"../../../../../../../chunks/tslib.es6.js";import{location as e,uniform as i,GraphShaderModule as r,VertexInput as n,UniformGroup as s,FragmentOutput as a,input as p,FragmentInput as l}from"../../GraphShaderModule.js";import{Vec3 as d,Vec4 as c,abs as y,fract as h,min as m,Float as f,Vec2 as g,smoothstep as v,Int as x,round as u,intMod as w,ifElse as j,lessThan as C,greaterThan as L,multiply as b,step as W,mix as P,Mat3 as I}from"../../graph/glsl.js";class k extends n{}o([e(0,g)],k.prototype,"position",void 0);class F extends l{}class G extends s{}o([i(I)],G.prototype,"dvs",void 0);class M extends s{}o([i(f)],M.prototype,"halfWidth",void 0),o([i(f)],M.prototype,"aaWidth",void 0),o([i(f)],M.prototype,"pxPerCell",void 0),o([i(c)],M.prototype,"minorLineColor",void 0),o([i(c)],M.prototype,"majorLineColor",void 0),o([i(x)],M.prototype,"majorLineInterval",void 0);class S extends r{vertex(o){const t=o.position.multiply(2).subtract(1);return{gridPos:this.transform.dvs.multiply(new d(t,1)).xy,glPosition:new c(t,0,1)}}fragment(o){const t=y(o.gridPos),e=h(t),i=m(e.x,new f(1).subtract(e.x)),r=m(e.y,new f(1).subtract(e.y)),n=new g(i,r).multiply(this.config.pxPerCell).subtract(this.config.halfWidth),s=m(n.x,n.y),p=new f(1).subtract(v(new f(0),this.config.aaWidth,s)),l=new x(u(t.x)),d=new x(u(t.y)),c=new f(w(l,this.config.majorLineInterval)),I=new f(w(d,this.config.majorLineInterval)),k=j(C(n.x,n.y),c,I),F=L(b(W(n.x,this.config.aaWidth),W(n.y,this.config.aaWidth)),new f(.5)),G=m(c,I),M=j(F,G,k),S=P(this.config.majorLineColor,this.config.minorLineColor,m(M,new f(1))),_=new a;return _.glFragColor=S.multiply(p),_}}o([i(G)],S.prototype,"transform",void 0),o([i(M)],S.prototype,"config",void 0),o([t(0,p(k))],S.prototype,"vertex",null),o([t(0,p(F))],S.prototype,"fragment",null);export{S as GridShader};
