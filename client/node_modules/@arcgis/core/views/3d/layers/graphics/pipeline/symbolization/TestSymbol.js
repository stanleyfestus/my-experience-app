/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import{_ as e}from"../../../../../../chunks/tslib.es6.js";import r from"../../../../../../core/Accessor.js";import"../../../../../../core/Logger.js";import"../../../../../../core/has.js";import"../../../../../../core/RandomLCG.js";import"../../../../../../core/Error.js";import{subclass as t}from"../../../../../../core/accessorSupport/decorators/subclass.js";import{create as o}from"../../../../../../core/libs/gl-matrix-2/factories/mat4f64.js";import{FeatureDataItem as a}from"../featureData/interfaces.js";import{inputAttributesToAttributesMap as i}from"./symbolizationUtils.js";import{Attribute as s}from"../../../../webgl-engine/lib/Attribute.js";import{VertexAttribute as n}from"../../../../webgl-engine/lib/VertexAttribute.js";let l=class extends r{constructor(e){super(),this._context=e,this.materialId=null,this._loaded=!1}get loaded(){return this._loaded}async load(e){this.materialId=e.createMaterial("hud"),e.createDirectRenderer(this.materialId),this._loaded=!0}async add(e,r){if(null==this.materialId)throw new Error("expected material not to be null");await this._provisionFeatureData(e);const{numFeatures:t,tileId:a,renderCoordinates:l,tileCenterRenderCoordinates:m}=e,d=new Float64Array([0,0,1]),c=new Float64Array([255,255,255,255]),p=new Float64Array([24,24]),w=new Float64Array([0,0,0,1]),y=new Float64Array([0,0]),u=new Float64Array([0]),A=new Uint32Array(t);for(let o=0;o<t;++o)A[o]=o;const E=new Uint32Array(t);for(let o=0;o<t;++o)E[o]=0;const I=new s(l,A,3,!0),R=new s(d,E,3,!0),f=new s(y,E,2,!0),h=new s(c,E,4,!0),b=new s(u,E,1,!0),j=new s(p,E,2,!0),O=new s(w,E,4,!0),_=[[n.POSITION,I],[n.NORMAL,R],[n.UV0,f],[n.COLOR,h],[n.ROTATION,b],[n.SIZE,j],[n.CENTEROFFSETANDDISTANCE,O]],D={attributes:i(_),objectAndLayerIdColor:void 0,transformation:o(),materialId:this.materialId};r.addDirectRendererGeometry(a,D,m)}async remove(e,r){r.removeDirectRendererGeometry(e.tileId)}async _provisionFeatureData(e){await e.provision([a.GEOMETRY_RENDER_COORDINATES,a.TILE_CENTER_RENDER_COORDINATES],this._context)}};l=e([t("esri.views.3d.layers.graphics.pipeline.symbolization.TestSymbol")],l);export{l as TestSymbol};
