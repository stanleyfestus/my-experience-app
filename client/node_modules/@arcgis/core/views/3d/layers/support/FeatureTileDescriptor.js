/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import{getReferenceEllipsoid as i}from"../../../../geometry/ellipsoidUtils.js";import{create as e}from"../../../../geometry/support/aaBoundingRect.js";class t{constructor(i,t,s,l){this.lij=[0,0,0],this.extent=e(),this.resolution=0,this.loadPriority=0,this.measures=new h,this.used=!1,this.acquire(i,t,s,l)}get planetRadius(){return i(this.tilingScheme.spatialReference).radius}acquire(i,e,s,h){this.tilingScheme=h,this.id=t.id(i,e,s),this.lij[0]=i,this.lij[1]=e,this.lij[2]=s,h.getExtent(i,e,s,this.extent),this.measures.effectiveLevelForLod=i,this.updateResolution()}updateResolution(){this.resolution=this.tilingScheme.resolutionAtLevel(this.measures.effectiveLevelForLod)}release(){this.tilingScheme=null}getChildren(i){const e=this.lij[0]+1,s=2*this.lij[1],h=2*this.lij[2];return i?i.acquire(e,s,h,this.tilingScheme):[new t(e,s,h,this.tilingScheme),new t(e,s+1,h,this.tilingScheme),new t(e,s,h+1,this.tilingScheme),new t(e,s+1,h+1,this.tilingScheme)]}copyMeasurementsFrom(i){this.measures.copyFrom(i.measures),this.updateResolution()}static id(i,e,t){return`${i}/${e}/${t}`}}var s;!function(i){i[i.INVISIBLE=0]="INVISIBLE",i[i.VISIBLE=1]="VISIBLE"}(s||(s={}));class h{constructor(){this.visibility=s.VISIBLE,this.distance=0,this.shouldSplit=!1,this.effectiveLevelForLod=0}copyFrom(i){return this.visibility=i.visibility,this.distance=i.distance,this.shouldSplit=i.shouldSplit,this.effectiveLevelForLod=i.effectiveLevelForLod,this}}export{t as FeatureTileDescriptor,s as Visibility};
