/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import{isColorOrColorEmission as e}from"../ShaderOutput.js";import{VertexTextureCoordinates as s}from"../attributes/VertexTextureCoordinates.glsl.js";import{Float3DrawUniform as i}from"../../shaderModules/Float3DrawUniform.js";import{Float3PassUniform as r}from"../../shaderModules/Float3PassUniform.js";import{glsl as o,If as t}from"../../shaderModules/interfaces.js";import{Texture2DDrawUniform as m}from"../../shaderModules/Texture2DDrawUniform.js";import{Texture2DPassUniform as n}from"../../shaderModules/Texture2DPassUniform.js";import{BindType as a}from"../../shaderTechnique/BindType.js";import{GLEmissiveTexturePassParameters as u}from"../../../lib/GLTextureMaterial.js";var d;!function(e){e[e.None=0]="None",e[e.Value=1]="Value",e[e.Texture=2]="Texture",e[e.COUNT=3]="COUNT"}(d||(d={}));class f extends u{}function c(u,f){if(!e(f.output))return;const{emissionSource:c,hasEmissiveTextureTransform:x,bindType:l}=f,p=c===d.Texture;p&&(u.include(s,f),u.fragment.uniforms.add(l===a.Pass?new n("texEmission",(e=>e.textureEmissive)):new m("texEmission",(e=>e.textureEmissive))));const v=c===d.Value||p;v&&u.fragment.uniforms.add(l===a.Pass?new r("emissionFactor",(e=>e.emissiveFactor)):new i("emissionFactor",(e=>e.emissiveFactor))),u.fragment.code.add(o`
    vec4 getEmissions() {
      vec4 emissions = ${v?"vec4(emissionFactor, 1.0)":"vec4(0.0)"};
      ${t(p,`emissions *= textureLookup(texEmission, ${x?"emissiveUV":"vuv0"});\n         emissions.w = emissions.rgb == vec3(0.0) ? 0.0: emissions.w;`)};
      return emissions;
    }
  `)}export{d as EmissionSource,c as Emissions,f as EmissionsParameters};
