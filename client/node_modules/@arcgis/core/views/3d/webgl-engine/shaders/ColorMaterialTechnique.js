/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import{ZEROS as e}from"../../../../core/libs/gl-matrix-2/factories/vec4f64.js";import{ShaderOutput as r}from"../core/shaderLibrary/ShaderOutput.js";import{ReloadableShaderModule as t}from"../core/shaderTechnique/ReloadableShaderModule.js";import{ShaderTechnique as s}from"../core/shaderTechnique/ShaderTechnique.js";import{OITPass as i}from"../lib/OITPass.js";import{blending as l,oitDepthTest as o,depthWrite as n,getDrawBuffers as a,getOITPolygonOffset as c}from"../lib/OrderIndependentTransparency.js";import{stencilWriteMaskOn as p,stencilToolMaskBaseParams as u,stencilBaseAllZerosParams as m}from"../lib/StencilUtils.js";import{VisualVariablePassParameters as f}from"../materials/VisualVariablePassParameters.js";import{C as d}from"../../../../chunks/ColorMaterial.glsl.js";import{SpecialDrawBuffers as h}from"../../../webgl/enums.js";import{makePipelineState as b,cullingParams as j,defaultColorWrite as P}from"../../../webgl/renderState.js";class g extends f{constructor(){super(...arguments),this.color=e}}class O extends s{constructor(e,r,s){super(e,r,new t(d,(()=>import("./ColorMaterial.glsl.js"))),s)}_createPipeline(e,t){const{oitPass:s,output:f,transparent:d,cullFace:g,draped:O,hasOccludees:T,polygonOffset:_,enableOffset:w}=e,x=s===i.NONE,y=s===i.FrontFace;return b({blending:f===r.Color&&d?l(s):null,culling:j(g),depthTest:O?null:{func:o(s)},depthWrite:n(e),drawBuffers:f===r.Depth?{buffers:[h.NONE]}:a(s,f),colorWrite:P,stencilWrite:T?p:null,stencilTest:T?t?u:m:null,polygonOffset:x||y?_?S:null:c(w)})}initializePipeline(e){return this._occludeePipelineState=this._createPipeline(e,!0),this._createPipeline(e,!1)}getPipeline(e){return e?this._occludeePipelineState:super.getPipeline()}}const S={factor:1,units:1};export{g as ColorMaterialPassParameters,O as ColorMaterialTechnique};
