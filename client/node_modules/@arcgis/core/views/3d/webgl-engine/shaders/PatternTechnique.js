/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import{ShaderOutput as e}from"../core/shaderLibrary/ShaderOutput.js";import{ReloadableShaderModule as t}from"../core/shaderTechnique/ReloadableShaderModule.js";import{ShaderTechnique as r}from"../core/shaderTechnique/ShaderTechnique.js";import{olidEnabled as i}from"../effects/geometry/olidUtils.js";import{OITPass as s}from"../lib/OITPass.js";import{blending as l,oitDepthTest as n,depthWrite as o,getDrawBuffers as p,getOITPolygonOffset as a}from"../lib/OrderIndependentTransparency.js";import{stencilWriteMaskOn as u,stencilToolMaskBaseParams as c,stencilBaseAllZerosParams as O}from"../lib/StencilUtils.js";import{VertexAttribute as f}from"../lib/VertexAttribute.js";import{P as m}from"../../../../chunks/Pattern.glsl.js";import{SpecialDrawBuffers as d}from"../../../webgl/enums.js";import{makePipelineState as T,cullingParams as P,defaultColorWrite as h}from"../../../webgl/renderState.js";class E extends r{constructor(e,r,s){super(e,r,new t(m,(()=>import("./Pattern.glsl.js"))),s,i()?b:R)}_setPipelineState(t,r){const{oitPass:i,output:f,cullFace:m,draped:E,hasOccludees:R,polygonOffset:b,enableOffset:j}=t,g=i===s.NONE,A=i===s.FrontFace;return T({blending:f===e.Color?l(i):null,culling:P(m),depthTest:E?null:{func:n(i)},depthWrite:o(t),drawBuffers:f===e.Depth?{buffers:[d.NONE]}:p(i,f),colorWrite:h,stencilWrite:R?u:null,stencilTest:R?r?c:O:null,polygonOffset:g||A?b?S:null:a(j)})}initializePipeline(e){return this._occludeePipelineState=this._setPipelineState(e,!0),this._setPipelineState(e,!1)}getPipeline(e){return e?this._occludeePipelineState:super.getPipeline()}}const S={factor:1,units:1},R=new Map([[f.POSITION,0],[f.COLOR,3],[f.UVMAPSPACE,4],[f.COLORFEATUREATTRIBUTE,5],[f.BOUNDINGRECT,6]]),b=new Map([[f.POSITION,0],[f.COLOR,3],[f.UVMAPSPACE,4],[f.COLORFEATUREATTRIBUTE,5],[f.BOUNDINGRECT,6],[f.OBJECTANDLAYERIDCOLOR,9]]);export{E as PatternTechnique,R as vertexAttributeLocations,b as vertexAttributeLocationsOID};
