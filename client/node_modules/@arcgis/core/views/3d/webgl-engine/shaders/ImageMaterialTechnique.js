/*
All material copyright ESRI, All Rights Reserved, unless otherwise specified.
See https://js.arcgis.com/4.31/esri/copyright.txt for details.
*/
import{ShaderOutput as e}from"../core/shaderLibrary/ShaderOutput.js";import{NoParameters as t}from"../core/shaderModules/interfaces.js";import{ReloadableShaderModule as r}from"../core/shaderTechnique/ReloadableShaderModule.js";import{ShaderTechnique as i}from"../core/shaderTechnique/ShaderTechnique.js";import{OITPass as s}from"../lib/OITPass.js";import{oitBlending as l,oitDepthTest as n,depthWrite as o,getDrawBuffers as a,getOITPolygonOffset as c}from"../lib/OrderIndependentTransparency.js";import{stencilWriteMaskOn as p,stencilToolMaskBaseParams as u,stencilBaseAllZerosParams as d}from"../lib/StencilUtils.js";import{VertexAttribute as m}from"../lib/VertexAttribute.js";import{I as f}from"../../../../chunks/ImageMaterial.glsl.js";import{makePipelineState as h,blendWithPremultipliedAlpha as g,cullingParams as P,defaultColorWrite as j}from"../../../webgl/renderState.js";class b extends t{}class I extends i{constructor(e,t,i){super(e,t,new r(f,(()=>import("./ImageMaterial.glsl.js"))),i,S)}_getPipelineState(t,r){const{oitPass:i,output:m,hasOccludees:f,enableOffset:b,cullFace:I}=t,S=i===s.NONE,O=i===s.FrontFace;return h({blending:m===e.Color?S?g:l(i):null,culling:P(I),depthTest:{func:n(i)},depthWrite:o(t),drawBuffers:a(i,m),colorWrite:j,stencilWrite:f?p:null,stencilTest:f?r?u:d:null,polygonOffset:S||O?null:c(b)})}initializePipeline(e){return this._occludeePipeline=this._getPipelineState(e,!0),this._getPipelineState(e,!1)}getPipeline(e){return e?this._occludeePipeline:super.getPipeline()}}const S=new Map([[m.POSITION,0],[m.UV0,2],[m.PERSPECTIVEDIVIDE,3]]);export{b as ImageMaterialPassParameters,I as ImageMaterialTechnique,S as vertexAttributeLocations};
