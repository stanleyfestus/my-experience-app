System.register(["jimu-core","jimu-for-builder","jimu-for-builder/templates","jimu-layouts/layout-builder","jimu-layouts/layout-runtime","jimu-theme","jimu-ui","jimu-ui/advanced/resource-selector","jimu-ui/advanced/setting-components","jimu-ui/advanced/style-setting-components","jimu-ui/basic/color-picker","jimu-ui/basic/list-tree"],(function(e,t){var i={},s={},o={},n={},a={},l={},r={},c={},d={},p={},g={},u={};return{setters:[function(e){i.APP_FRAME_NAME_IN_BUILDER=e.APP_FRAME_NAME_IN_BUILDER,i.AnimationPlayMode=e.AnimationPlayMode,i.AnimationType=e.AnimationType,i.AppMode=e.AppMode,i.BrowserSizeMode=e.BrowserSizeMode,i.ContainerType=e.ContainerType,i.DataActionManager=e.DataActionManager,i.DataSourceManager=e.DataSourceManager,i.DialogInteractionType=e.DialogInteractionType,i.DialogMode=e.DialogMode,i.ECookieBannerLayout=e.ECookieBannerLayout,i.ErrorBoundary=e.ErrorBoundary,i.FixedPosition=e.FixedPosition,i.Immutable=e.Immutable,i.LayoutItemType=e.LayoutItemType,i.LayoutParentType=e.LayoutParentType,i.LayoutType=e.LayoutType,i.LinkType=e.LinkType,i.PageMode=e.PageMode,i.PagePart=e.PagePart,i.PageType=e.PageType,i.React=e.React,i.ReactRedux=e.ReactRedux,i.WidgetType=e.WidgetType,i.appActions=e.appActions,i.classNames=e.classNames,i.css=e.css,i.defaultMessages=e.defaultMessages,i.getAppStore=e.getAppStore,i.getMessageTypeLabel=e.getMessageTypeLabel,i.getNextAnimationId=e.getNextAnimationId,i.hooks=e.hooks,i.i18n=e.i18n,i.injectIntl=e.injectIntl,i.jsx=e.jsx,i.lodash=e.lodash,i.moduleLoader=e.moduleLoader,i.polished=e.polished,i.urlUtils=e.urlUtils,i.utils=e.utils},function(e){s.AppDataActionManager=e.AppDataActionManager,s.AppMessageManager=e.AppMessageManager,s.WidgetSettingManager=e.WidgetSettingManager,s.appConfigUtils=e.appConfigUtils,s.builderAppSync=e.builderAppSync,s.getAppConfigAction=e.getAppConfigAction,s.helpUtils=e.helpUtils,s.messageActionUtils=e.messageActionUtils,s.utils=e.utils},function(e){o.getScreenTemplates=e.getScreenTemplates},function(e){n.AccordionLayoutItemSetting=e.AccordionLayoutItemSetting,n.ColumnLayoutItemSetting=e.ColumnLayoutItemSetting,n.FixedLayoutItemSetting=e.FixedLayoutItemSetting,n.FlowLayoutItemSetting=e.FlowLayoutItemSetting,n.FlowLayoutSetting=e.FlowLayoutSetting,n.GridLayoutItemSetting=e.GridLayoutItemSetting,n.GridLayoutSetting=e.GridLayoutSetting,n.RowLayoutItemSetting=e.RowLayoutItemSetting,n.getLabelOfGridTab=e.getLabelOfGridTab},function(e){a.DEFAULT_AUTOPLAY_INTERVAL=e.DEFAULT_AUTOPLAY_INTERVAL,a.defaultMessages=e.defaultMessages,a.searchUtils=e.searchUtils,a.utils=e.utils},function(e){l.getTheme=e.getTheme,l.styled=e.styled,l.withTheme=e.withTheme},function(e){r.AdvancedSelect=e.AdvancedSelect,r.Button=e.Button,r.ButtonGroup=e.ButtonGroup,r.Checkbox=e.Checkbox,r.CollapsableCheckbox=e.CollapsableCheckbox,r.CollapsablePanel=e.CollapsablePanel,r.CollapsableRadio=e.CollapsableRadio,r.Collapse=e.Collapse,r.DEFAULT_FIXED_POSITION_SIZE_JSON=e.DEFAULT_FIXED_POSITION_SIZE_JSON,r.DistanceUnits=e.DistanceUnits,r.Dropdown=e.Dropdown,r.DropdownButton=e.DropdownButton,r.DropdownItem=e.DropdownItem,r.DropdownMenu=e.DropdownMenu,r.FillType=e.FillType,r.Icon=e.Icon,r.Label=e.Label,r.Link=e.Link,r.Loading=e.Loading,r.LoadingType=e.LoadingType,r.MultiSelect=e.MultiSelect,r.NumericInput=e.NumericInput,r.PanelHeader=e.PanelHeader,r.Radio=e.Radio,r.Select=e.Select,r.Slider=e.Slider,r.Switch=e.Switch,r.Tab=e.Tab,r.Tabs=e.Tabs,r.TextArea=e.TextArea,r.TextInput=e.TextInput,r.Tooltip=e.Tooltip,r.defaultMessages=e.defaultMessages,r.utils=e.utils},function(e){c.IconPicker=e.IconPicker},function(e){d.DirectionSelector=e.DirectionSelector,d.LinkSelectorSidePopper=e.LinkSelectorSidePopper,d.OpenTypes=e.OpenTypes,d.SettingCollapse=e.SettingCollapse,d.SettingRow=e.SettingRow,d.SettingSection=e.SettingSection,d.SidePopper=e.SidePopper,d.TemplateSelector=e.TemplateSelector},function(e){p.AnimationSettingComponent=e.AnimationSettingComponent,p.BackgroundSetting=e.BackgroundSetting,p.FixedPositionSize=e.FixedPositionSize,p.InputUnit=e.InputUnit,p.Padding=e.Padding,p.ThemeBackgroundSection=e.ThemeBackgroundSection,p.ThemeBorderSection=e.ThemeBorderSection,p.ThemeBoxShadowSection=e.ThemeBoxShadowSection},function(e){g.ThemeColorPicker=e.ThemeColorPicker},function(e){u.List=e.List,u.TreeItemActionType=e.TreeItemActionType}],execute:function(){e((()=>{var e={6499:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m6.036 12.157 8.01-8.01a.5.5 0 1 1 .707.707l-8.01 8.01a1 1 0 0 1-1.415 0L1.146 8.682a.5.5 0 1 1 .708-.707z"></path></svg>'},1027:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M12 6.5c0 .527-.074 1.036-.212 1.518l.912.438a6.5 6.5 0 1 0-6.586 4.533l-.077-1.008A5.5 5.5 0 1 1 12 6.5m-9 0a3.5 3.5 0 0 0 2.88 3.445L5.8 8.901a2.501 2.501 0 1 1 3.194-2.224l.949.456A3.5 3.5 0 1 0 3 6.5M15.5 11l-5 1-3 4-1-9.5zm-5.57.094-1.702 2.269-.542-5.152 4.76 2.38z" clip-rule="evenodd"></path></svg>'},5879:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M1 3a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H8.5v1.5H12a.5.5 0 0 1 0 1H4a.5.5 0 0 1 0-1h3.5V12H3a2 2 0 0 1-2-2zm2-1h10a1 1 0 0 1 1 1v5.5H2V3a1 1 0 0 1 1-1M2 9.5v.5a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-.5z" clip-rule="evenodd"></path></svg>'},8739:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M4.974 2.078c.311-.36.75-.578 1.226-.578h3.6c.476 0 .915.219 1.226.578a2 2 0 0 1 .474 1.307v9.23a2 2 0 0 1-.474 1.307c-.311.36-.75.578-1.226.578H6.2c-.476 0-.915-.219-1.226-.578a2 2 0 0 1-.474-1.307v-9.23a2 2 0 0 1 .474-1.307M6.2 2.5a.63.63 0 0 0-.47.233 1 1 0 0 0-.23.652v9.23a1 1 0 0 0 .23.652c.138.16.31.233.47.233h3.6c.16 0 .332-.073.47-.233a1 1 0 0 0 .23-.652v-9.23a1 1 0 0 0-.23-.652.63.63 0 0 0-.47-.233zm.3 9.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1H7a.5.5 0 0 1-.5-.5" clip-rule="evenodd"></path></svg>'},4651:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2 7a1 1 0 1 0 0 2 1 1 0 0 0 0-2m5 1a1 1 0 1 1 2 0 1 1 0 0 1-2 0m6 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0" clip-rule="evenodd"></path></svg>'},3303:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M9.438.994c.213 0 .397.146.44.35q.227 1.084.316 1.852.562.242 1.048.599l1.728-.676a.455.455 0 0 1 .556.188l1.42 2.394a.43.43 0 0 1-.091.547 22 22 0 0 1-1.49 1.194q.03.27.03.552 0 .32-.038.63l1.465 1.12a.43.43 0 0 1 .111.563l-1.42 2.394a.454.454 0 0 1-.53.197 23 23 0 0 1-1.807-.66q-.49.35-1.055.586l-.263 1.794a.446.446 0 0 1-.445.376H6.574a.446.446 0 0 1-.44-.35 21 21 0 0 1-.317-1.853 5.3 5.3 0 0 1-1.047-.598l-1.728.675a.455.455 0 0 1-.556-.187l-1.42-2.395a.43.43 0 0 1 .091-.546q.85-.735 1.49-1.194a5.167 5.167 0 0 1 .008-1.183L1.19 6.243a.43.43 0 0 1-.112-.562l1.42-2.395a.455.455 0 0 1 .531-.196q1.078.35 1.807.66c.324-.233.679-.43 1.056-.587l.262-1.794A.446.446 0 0 1 6.6.994zm-.365 1H6.985l-.28 1.866-.467.19q-.353.144-.672.34l-.207.136-.42.293-.476-.197q-.492-.205-1.169-.433l-.221-.074-1.045 1.719L3.59 6.999l-.06.479a4 4 0 0 0-.021.816l.014.144.058.492-.419.294q-.433.304-.979.746l-.177.145 1.043 1.72 1.845-.703.406.29q.307.219.645.384l.228.103.474.199.059.49q.06.507.19 1.177l.043.219h2.088l.282-1.867.466-.19q.354-.144.672-.34l.207-.136.419-.293.476.198q.495.204 1.17.433l.22.072 1.044-1.718-1.56-1.165.06-.479a4 4 0 0 0 .02-.815l-.013-.144-.06-.492.42-.295a18 18 0 0 0 .98-.746l.176-.146-1.043-1.72-1.844.705-.406-.29a4.5 4.5 0 0 0-.646-.385l-.228-.103-.474-.199-.058-.49q-.049-.405-.14-.916zm-1.067 3a3 3 0 1 1 0 6 3 3 0 0 1 0-6m0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4" clip-rule="evenodd"></path></svg>'},7781:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M3.086 1.586A2 2 0 0 1 4.5 1h7a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V3a2 2 0 0 1 .586-1.414M4.5 2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h7a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1zM6 12.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1-.5-.5" clip-rule="evenodd"></path></svg>'},5549:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M6 5H2v6h4zM1 4v8h6V4zM14 5h-4v6h4zM9 4v8h6V4z" clip-rule="evenodd"></path></svg>'},6371:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#fff" d="M2.5 6.4h15v1.2h-15zM11.25 8.8H2.5V10h8.75zM6.25 12.4c0-.663.56-1.2 1.25-1.2H10c.69 0 1.25.537 1.25 1.2s-.56 1.2-1.25 1.2H7.5c-.69 0-1.25-.537-1.25-1.2M13.75 11.2c-.69 0-1.25.537-1.25 1.2s.56 1.2 1.25 1.2h2.5c.69 0 1.25-.537 1.25-1.2s-.56-1.2-1.25-1.2z"></path><path fill="#fff" fill-rule="evenodd" d="M0 4v12h20V4zm18.75 1.2H1.25v9.6h17.5z" clip-rule="evenodd"></path></svg>'},7528:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2 2h12v4H2zM1 7V1h14v6zm1 3h12v4H2zm-1 5V9h14v6z" clip-rule="evenodd"></path></svg>'},9027:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#000" d="M13.5 3a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1M15.5 3a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1M18 2.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0M17 10.5a.5.5 0 0 0-.5-.5h-13a.5.5 0 0 0 0 1h13a.5.5 0 0 0 .5-.5M17 14.5a.5.5 0 0 0-.5-.5h-7a.5.5 0 0 0 0 1h7a.5.5 0 0 0 .5-.5"></path><path fill="#000" fill-rule="evenodd" d="M18 0a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm0 1H2a1 1 0 0 0-.993.883L1 2v2h18V2a1 1 0 0 0-.883-.993zm1 4H1v13a1 1 0 0 0 .883.993L2 19h16a1 1 0 0 0 .993-.883L19 18z" clip-rule="evenodd"></path></svg>'},8485:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#000" d="M2.5 3a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1M4.5 3a.5.5 0 1 0 0-1 .5.5 0 0 0 0 1M7 2.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0M3 10.5a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13a.5.5 0 0 1-.5-.5M3 14.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5"></path><path fill="#000" fill-rule="evenodd" d="M18 0a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2zm0 1H2a1 1 0 0 0-.993.883L1 2v2h18V2a1 1 0 0 0-.883-.993zm1 4H1v13a1 1 0 0 0 .883.993L2 19h16a1 1 0 0 0 .993-.883L19 18z" clip-rule="evenodd"></path></svg>'},2606:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#000" fill-rule="evenodd" d="M1.25 2.5h17.5v11.25H1.25zM0 2.5c0-.69.56-1.25 1.25-1.25h17.5c.69 0 1.25.56 1.25 1.25v11.25c0 .69-.56 1.25-1.25 1.25H1.25C.56 15 0 14.44 0 13.75zm3.75 16.25h2.5V17.5h-2.5zm7.5 0h-2.5V17.5h2.5zm2.5 0h2.5V17.5h-2.5z" clip-rule="evenodd"></path></svg>'},6490:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m1.373 8 2.07-2.071.83.828L2.2 8.828a3.515 3.515 0 0 0 4.97 4.971l2.072-2.071.828.828L8 14.627A4.686 4.686 0 1 1 1.373 8M13.799 7.172l-2.071 2.07.828.83L14.627 8A4.686 4.686 0 1 0 8 1.373l-2.071 2.07.828.83L8.828 2.2a3.515 3.515 0 0 1 4.971 4.97"></path><path fill="#000" d="M5.515 9.657a.586.586 0 0 0 .828.828l4.142-4.142a.586.586 0 0 0-.828-.828z"></path></svg>'},6300:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M15 7.5a.52.52 0 0 1-.516.527H2.976L6.473 11.6a.535.535 0 0 1 0 .746.51.51 0 0 1-.73 0L1 7.5l4.743-4.846a.51.51 0 0 1 .73 0 .535.535 0 0 1 0 .746L2.976 6.973h11.508c.285 0 .516.236.516.527"></path></svg>'},655:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2.146 4.653a.485.485 0 0 1 .708 0L8 10.24l5.146-5.587a.485.485 0 0 1 .708 0 .54.54 0 0 1 0 .738l-5.5 5.956a.485.485 0 0 1-.708 0l-5.5-5.956a.54.54 0 0 1 0-.738" clip-rule="evenodd"></path></svg>'},8081:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M13.5 14a.5.5 0 0 0 0-1h-6l3.953-3.459a.5.5 0 0 0-.658-.752L8 11.234V1.5a.5.5 0 0 0-1 0v9.734L4.206 8.789a.5.5 0 0 0-.659.752L7.5 13h-6a.5.5 0 0 0 0 1z" clip-rule="evenodd"></path></svg>'},8710:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M7.5 0a.5.5 0 0 0-.5.5v14a.5.5 0 0 0 1 0V.5a.5.5 0 0 0-.5-.5M0 7.5c0 .291.231.527.516.527h3.508L2.527 9.6a.535.535 0 0 0 0 .746.51.51 0 0 0 .73 0L6 7.5 3.257 4.654a.51.51 0 0 0-.73 0 .535.535 0 0 0 0 .746l1.497 1.573H.516A.52.52 0 0 0 0 7.5m15 0a.52.52 0 0 1-.516.527h-3.508L12.473 9.6a.535.535 0 0 1 0 .746.51.51 0 0 1-.73 0L9 7.5l2.743-2.846a.51.51 0 0 1 .73 0 .535.535 0 0 1 0 .746l-1.497 1.573h3.508c.285 0 .516.236.516.527" clip-rule="evenodd"></path></svg>'},2491:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M1 13.5a.5.5 0 0 0 1 0v-6l3.459 3.953a.5.5 0 0 0 .752-.658L3.766 8H13.5a.5.5 0 0 0 0-1H3.766l2.445-2.794a.5.5 0 1 0-.752-.659L2 7.5v-6a.5.5 0 0 0-1 0z" clip-rule="evenodd"></path></svg>'},9566:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M14 1.5a.5.5 0 0 0-1 0v6L9.541 3.547a.5.5 0 1 0-.752.658L11.234 7H1.5a.5.5 0 0 0 0 1h9.734l-2.445 2.794a.5.5 0 1 0 .752.659L13 7.5v6a.5.5 0 0 0 1 0z" clip-rule="evenodd"></path></svg>'},3593:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M1.5 1a.5.5 0 0 0 0 1h6L3.547 5.459a.5.5 0 1 0 .658.752L7 3.766V13.5a.5.5 0 0 0 1 0V3.766l2.794 2.445a.5.5 0 1 0 .659-.752L7.5 2h6a.5.5 0 0 0 0-1z" clip-rule="evenodd"></path></svg>'},5356:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2 2h4v4H2zM1 7V1h6v6zm1 3h4v4H2zm-1 5V9h6v6zM14 2h-4v4h4zM9 1v6h6V1zm2.5 14v-2.5H9v-1h2.5V9h1v2.5H15v1h-2.5V15z" clip-rule="evenodd"></path></svg>'},2838:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746z"></path></svg>'},2046:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M11.227 1.312c-.404-.404-1.045-.417-1.432-.03L2.49 8.587l-.48 2.674a.637.637 0 0 0 .73.73l2.673-.48 7.305-7.306c.387-.387.374-1.028-.03-1.431zm-8.114 9.575.32-1.781 4.991-4.992 1.462 1.462-4.992 4.991zm7.473-6.012 1.402-1.4-1.462-1.463-1.401 1.402z" clip-rule="evenodd"></path><path fill="#000" d="M1.5 14a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1z"></path></svg>'},6420:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M6.973 11.484c0 .285.236.516.527.516a.52.52 0 0 0 .527-.516V1.976L10.6 4.473c.206.202.54.202.746 0a.51.51 0 0 0 0-.73L7.5 0 3.654 3.743a.51.51 0 0 0 0 .73c.206.202.54.202.746 0l2.573-2.497zM1 8v7h13V8h1v8H0V8z" clip-rule="evenodd"></path></svg>'},3387:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M12 8.002a.5.5 0 0 1-1 0V1H1v12.003h3.5a.5.5 0 1 1 0 1H1a1 1 0 0 1-1-1V1A1 1 0 0 1 .044.706.498.498 0 0 1 .5 0H11a1 1 0 0 1 1 1zm2.218 1.486a.5.5 0 0 0-.708 0l-5.657 5.658a.5.5 0 0 0 .708.707l5.657-5.658a.5.5 0 0 0 0-.707M11 9.928c.376 0 .794.041 1.23.141l-.871.871a5 5 0 0 0-.359-.012c-1 0-2.731.297-3.83 2 .313.486.677.857 1.062 1.14l-.676.676A6.1 6.1 0 0 1 6 12.928c1.333-2.334 3.5-3 5-3m0 5c-.219 0-.472-.014-.746-.054l-.824.825a5.6 5.6 0 0 0 1.57.23c1.5 0 3.667-.667 5-3a6 6 0 0 0-1.804-1.998l-.684.684c.478.299.936.721 1.319 1.313-1.1 1.704-2.831 2-3.831 2M2.5 3.502A.5.5 0 0 1 3 3h6a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5M3 6a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1z" clip-rule="evenodd"></path></svg>'},7408:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="m2 1 12 7-12 7zm9.983 6.999L3 2.723v10.553z" clip-rule="evenodd"></path></svg>'},3662:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M7.5 0a.5.5 0 0 0-.5.5V7H.5a.5.5 0 0 0 0 1H7v6.5a.5.5 0 0 0 1 0V8h6.5a.5.5 0 0 0 0-1H8V.5a.5.5 0 0 0-.5-.5"></path></svg>'},170:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0m-1.27 4.936a6.5 6.5 0 1 1 .707-.707l4.136 4.137a.5.5 0 1 1-.707.707z" clip-rule="evenodd"></path></svg>'},6745:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0m1 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-7.676 2.228H7.34c-.213-1.138.621-2.13 1.375-3.025C9.28 6.532 9.8 5.914 9.8 5.328 9.8 4.5 9.2 3.9 7.976 3.9c-.816 0-1.572.36-2.268 1.092l-.648-.6C5.852 3.552 6.788 3 8.096 3c1.692 0 2.772.864 2.772 2.244 0 .864-.652 1.628-1.3 2.387-.71.831-1.413 1.655-1.244 2.597m.3 2.172c0 .48-.348.792-.768.792-.432 0-.78-.312-.78-.792s.348-.804.78-.804c.42 0 .768.324.768.804" clip-rule="evenodd"></path></svg>'},5508:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5"></path><path fill="#000" fill-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14" clip-rule="evenodd"></path></svg>'},4189:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjEwN3B4IiBoZWlnaHQ9IjY4cHgiIHZpZXdCb3g9IjAgMCAxMDcgNjgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA2MS4xICg4OTY1MCkgLSBodHRwczovL3NrZXRjaC5jb20gLS0+DQogICAgPHRpdGxlPkF1dG88L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxnIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPg0KICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNTA2LjAwMDAwMCwgLTMwOC4wMDAwMDApIj4NCiAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwNS4wMDAwMDAsIDMwNy4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxLjAwMDAwMCwgMS4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEwNyIgaGVpZ2h0PSI2OCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBmaWxsPSIjNTI1MjUyIiB4PSI2IiB5PSIxNCIgd2lkdGg9IjkwIiBoZWlnaHQ9IjQwIj48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxyZWN0IGZpbGw9IiM2QTZBNkEiIHg9IjEwMSIgeT0iMyIgd2lkdGg9IjMiIGhlaWdodD0iNDAiIHJ4PSIxLjUiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4="},2113:e=>{e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjEwN3B4IiBoZWlnaHQ9IjY4cHgiIHZpZXdCb3g9IjAgMCAxMDcgNjgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA2MS4xICg4OTY1MCkgLSBodHRwczovL3NrZXRjaC5jb20gLS0+DQogICAgPHRpdGxlPkN1c3RvbTwvdGl0bGU+DQogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+DQogICAgPGcgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0zODcuMDAwMDAwLCAtMzA4LjAwMDAwMCkiPg0KICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMzg2LjAwMDAwMCwgMzA3LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEuMDAwMDAwLCAxLjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBmaWxsPSIjNTI1MjUyIiB4PSIyOCIgeT0iMTQiIHdpZHRoPSI1MCIgaGVpZ2h0PSI0MCI+PC9yZWN0Pg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBmaWxsPSIjMjgyODI4IiB4PSI4NyIgeT0iMCIgd2lkdGg9IjIwIiBoZWlnaHQ9IjY4Ij48L3JlY3Q+DQogICAgICAgICAgICAgICAgICAgIDxsaW5lIHgxPSI4NyIgeTE9IjAiIHgyPSI4NyIgeTI9IjY4IiBzdHJva2U9IiM1MjUyNTIiIHN0cm9rZS1saW5lY2FwPSJzcXVhcmUiIHN0cm9rZS1kYXNoYXJyYXk9IjQsNCI+PC9saW5lPg0KICAgICAgICAgICAgICAgICAgICA8cmVjdCBmaWxsPSIjMjgyODI4IiB4PSIwIiB5PSIwIiB3aWR0aD0iMjAiIGhlaWdodD0iNjgiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICAgICAgPGxpbmUgeDE9IjIwIiB5MT0iMCIgeDI9IjIwIiB5Mj0iNjgiIHN0cm9rZT0iIzUyNTI1MiIgc3Ryb2tlLWxpbmVjYXA9InNxdWFyZSIgc3Ryb2tlLWRhc2hhcnJheT0iNCw0Ij48L2xpbmU+DQogICAgICAgICAgICAgICAgICAgIDxyZWN0IGZpbGw9IiM2QTZBNkEiIHg9IjEwMSIgeT0iMyIgd2lkdGg9IjMiIGhlaWdodD0iNDAiIHJ4PSIxLjUiPjwvcmVjdD4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4="},4142:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAABQCAYAAAD83pAbAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHCSURBVHgB7duxisJAFIXhu4uCha2FoIWFYOv7v4O2goWFgi9gEUhglxsIbLUmd7KZnM3/1V4DOZNMclAzAAAAAAAAAAAAAAAiPt594HA4fBkGc7lcfs3k0yCFwMQQmBgCE0NgYghMDIGJITAxBCZmZkHr9dr2+73NZuGvGFxRFHa73ez5fJqq8Nne7XZSYbnFYlEvsj4Cm8/nttls6oXr3/uOLxY/7uPxsLIsLSp8xtXCalRVZak8rOPxaMvlsvWMh+qLfLVa2fl8DocW3sOu12u9apR4WH5LTOVXVpewfvI5n48KXyZ+eSvvBSn8Npg6H104PCUGtNmz/mqewAJSt4KUeQILSN0KUuYJLOB+v9vr9bIIn/P5KM1n88z8afN0Otl2u+38HuZhpbxa0HQENa8IfbwmdBG+JSo3HcrCgU256ciJpkMMTYcYnhKD5Nr6KZNs66csZ1tPYAF9tPVRBBaQs62Xbzpy/E7Dj5ly0rO09WNpOnK0F5Jt/ZiajqHbi5xtvXzTkaO9aNp6P27bc9Dcun0uZYHxD8yR4R+Y/wyBiSEwMQQmhsDEEJgYAhNDYGIIDAAAAAAAAAAAAACASfgGhL/ln9+em+EAAAAASUVORK5CYII="},2384:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAABQCAYAAAD83pAbAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHXSURBVHgB7d2xisJAFIXhu4uChS8gaGEh2Pr+D2ErWFgo+AIWgsIuN7CwsK7J7J3Jeib/V8stcsw4noTEDAAAAADQp7e2D6zX6w9Db3a73dNM3g1SCEwMgYkhMDEEJobAxIwsYDab2Wq1stEoNGYwrterHQ4HO5/P9lehM2y5XBJWgslk0nzBI0KBEVa6+/1uEaHA9vt9c5qjGw/Ll8SI0Cnia3FkPUY6doliCEwMgYkhMDEEJoamo0c0HWJoOgTRdAih6RggdoliCEwMgYkhMDEEJoamo0c0HWJoOgTRdAih6RggdoliCEwMgYkhMDEEJoamo0WOdiInmo4WOdqJnGg6Ooi2EznRdLTI0U7kRNMhhl2iGAITQ2BiCEwMgYkhMDEEJobAxFTTLY3HY5vP500h7f1fCm9rvAA4nU52u93+ZX5XVTxC1g/mZrOx6XRqEZfLxbbb7Y+DWnr+d4N4hKx/86MH0/kMn9X3/BRVBObLVMlZpeenqCKw1N+U1Fml56eoIrCcl3gezSo9P0UVgeW8xPNoVun5KaoI7Hg8NjuwKJ/hs/qen6KaN0P47QqLxSL0P8kP5m+3A5Se/6VtW8+rPF4Mr/KoDIGJITAxBAYAAAAAwBOfNFL4K95cNL0AAAAASUVORK5CYII="},92:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjgiIGhlaWdodD0iMjYiIHZpZXdCb3g9IjAgMCA2OCAyNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxyZWN0IHg9IjQiIHk9IjkiIHdpZHRoPSI2IiBoZWlnaHQ9IjYiIHJ4PSIyIiBmaWxsPSIjNkE2QTZBIi8+DQo8cmVjdCB4PSIxNCIgeT0iMTAiIHdpZHRoPSI1MCIgaGVpZ2h0PSI0IiBmaWxsPSIjNkE2QTZBIi8+DQo8L3N2Zz4NCg=="},9119:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjgiIGhlaWdodD0iMjYiIHZpZXdCb3g9IjAgMCA2OCAyNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxyZWN0IHg9IjQiIHk9IjkiIHdpZHRoPSI2IiBoZWlnaHQ9IjYiIHJ4PSIyIiBmaWxsPSIjNkE2QTZBIi8+DQo8cmVjdCB4PSI1MSIgeT0iOSIgd2lkdGg9IjEzIiBoZWlnaHQ9IjYiIHJ4PSIyIiBmaWxsPSIjNkE2QTZBIi8+DQo8cmVjdCB4PSIxNCIgeT0iMTAiIHdpZHRoPSIzMyIgaGVpZ2h0PSI0IiBmaWxsPSIjNkE2QTZBIi8+DQo8L3N2Zz4NCg=="},6542:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjgiIGhlaWdodD0iMjYiIHZpZXdCb3g9IjAgMCA2OCAyNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxyZWN0IHg9IjQiIHk9IjkiIHdpZHRoPSI2IiBoZWlnaHQ9IjYiIHJ4PSIyIiBmaWxsPSIjNkE2QTZBIi8+DQo8cmVjdCB4PSI1MSIgeT0iMTYiIHdpZHRoPSIxMyIgaGVpZ2h0PSI2IiByeD0iMiIgZmlsbD0iIzZBNkE2QSIvPg0KPHJlY3QgeD0iMTQiIHk9IjEwIiB3aWR0aD0iMzMiIGhlaWdodD0iNCIgZmlsbD0iIzZBNkE2QSIvPg0KPC9zdmc+DQo="},9244:e=>{"use strict";e.exports=i},4108:e=>{"use strict";e.exports=s},6884:e=>{"use strict";e.exports=o},6055:e=>{"use strict";e.exports=n},1496:e=>{"use strict";e.exports=a},1888:e=>{"use strict";e.exports=l},4321:e=>{"use strict";e.exports=r},5809:e=>{"use strict";e.exports=c},9298:e=>{"use strict";e.exports=d},5562:e=>{"use strict";e.exports=p},4337:e=>{"use strict";e.exports=g},8640:e=>{"use strict";e.exports=u}},t={};function h(i){var s=t[i];if(void 0!==s)return s.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,h),o.exports}h.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return h.d(t,{a:t}),t},h.d=(e,t)=>{for(var i in t)h.o(t,i)&&!h.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},h.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),h.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},h.p="";var m={};return h.p=window.jimuConfig.baseUrl,(()=>{"use strict";h.r(m),h.d(m,{__set_webpack_public_path__:()=>vs,default:()=>fs});var e=h(9244),t=h(4108),i=h(4321);class s extends e.React.PureComponent{constructor(){super(...arguments),this.formatMessage=e=>this.props.formatMessage(e),this.onSettingChange=(e,i)=>{const s=(0,t.getAppConfigAction)();if(s.appConfig)return s.editWidget(e,i).exec()},this.renderWidgetSetting=s=>{const o=this.props.widgetsSettingRuntimeInfo[s]&&this.props.widgetsSettingRuntimeInfo[s].isClassLoaded?t.WidgetSettingManager.getInstance().getWidgetSettingClass(s):null;return o&&this.props.widgetJson.config?e.React.createElement(e.ErrorBoundary,null,e.React.createElement(o,{key:s,widgetId:s,onSettingChange:this.onSettingChange})):e.React.createElement(i.Loading,{type:i.LoadingType.Secondary})}}componentDidUpdate(){this.loadWidgetSettingClass()}componentDidMount(){this.loadWidgetSettingClass()}loadWidgetSettingClass(){const{widgetId:e}=this.props;e&&!t.WidgetSettingManager.getInstance().getWidgetSettingClass(e)&&t.WidgetSettingManager.getInstance().loadWidgetSettingClass(e)}render(){if(!this.props.widgetJson)return e.React.createElement(i.Loading,{type:i.LoadingType.Secondary});const{widgetId:t}=this.props;return e.React.createElement("div",{className:"setting-container"},t?this.renderWidgetSetting(t):e.React.createElement("div",null,"\xa0\xa0",this.formatMessage("noWidget")))}}const o=e.ReactRedux.connect(((e,t)=>({widgetJson:e.appStateInBuilder&&e.appStateInBuilder.appConfig&&e.appStateInBuilder.appConfig.widgets[t.widgetId]})))(s);var n=h(9298),a=h(4337),l=h(5562);const r={width:110};class c extends e.React.PureComponent{constructor(s){super(s),this.isOpen=()=>{const{pagePart:e,pageId:t}=this.props,i=this.getAppConfig();return"body"===e||!!(i&&i.pages[t]&&i[e]&&i.pages[t][e])},this.formatMessage=e=>this.props.formatMessage(e),this.onSwitchChange=()=>{const{pageId:i,pagePart:s}=this.props,o=this.getAppConfig(),n=o.pages[i],a=o[s],l=(0,t.getAppConfigAction)();a||("header"===s?l.initHeaderLayout().editHeaderProperty(`height.${e.BrowserSizeMode.Large}`,75):l.initFooterLayout().editFooterProperty(`height.${e.BrowserSizeMode.Large}`,75));const r=n.set(s,!n[s]);l.editPageProperty(i,s,!n[s]).exec(),"body"===s||r[s]||t.builderAppSync.publishActivePagePartChangeToApp(e.PagePart.Body),this.setState({isOpen:r[s]})},this.onHeightChange=e=>{const s=i.utils.stringOfLinearUnit(e),{pagePart:o,browserSizeMode:n}=this.props;"header"===o?(0,t.getAppConfigAction)().editHeaderProperty(`height.${n}`,s).exec():(0,t.getAppConfigAction)().editFooterProperty(`height.${n}`,s).exec()},this.onStickHeaderChange=e=>{(0,t.getAppConfigAction)().editHeaderProperty("sticky",e.target.checked).exec()},this.onBackgroundColorChange=e=>{const{pageId:i,pagePart:s}=this.props;"body"===s?(0,t.getAppConfigAction)().editPageProperty(i,"bodyBackgroundColor",e).exec():"header"===s?(0,t.getAppConfigAction)().editHeaderProperty("backgroundColor",e).exec():(0,t.getAppConfigAction)().editFooterProperty("backgroundColor",e).exec()},this.state={isOpen:this.isOpen()}}getAppConfig(){return(0,e.getAppStore)().getState().appStateInBuilder&&(0,e.getAppStore)().getState().appStateInBuilder.appConfig||{pages:{empty:{}}}}componentDidUpdate(e){if(this.props.pageId!==e.pageId){const{pageJson:e,pagePart:t}=this.props;this.setState({isOpen:"body"===t||e&&e[t]})}}render(){var t,s,o,c,d,p,g,u,h,m,f;const v={body:this.formatMessage("body"),header:this.formatMessage("header"),footer:this.formatMessage("footer")},{pageId:x,pagePart:b,browserSizeMode:w,theme:y,header:I}=this.props,S=this.getAppConfig(),j=S.pages[x];let C;C="body"===b?j.bodyBackgroundColor:null===(t=S[b])||void 0===t?void 0:t.backgroundColor,!C&&y&&(C="header"===b?null===(o=null===(s=y.comp)||void 0===s?void 0:s.Header.root.vars)||void 0===o?void 0:o.bg:"footer"===b?null===(d=null===(c=y.comp)||void 0===c?void 0:c.Footer.root.vars)||void 0===d?void 0:d.bg:null===(p=y.sys.color.surface)||void 0===p?void 0:p.background);const A=e.React.createElement("div",{className:"setting-title d-flex justify-content-between"},e.React.createElement("div",null,e.React.createElement("span",null,v[this.props.pagePart])),e.React.createElement("div",{className:"d-flex align-items-center"},"body"===b?null:e.React.createElement(i.Switch,{checked:this.isOpen(),onChange:this.onSwitchChange,"aria-label":v[this.props.pagePart]}))),M=S.mainSizeMode,T=null===(u=null===(g=S[b])||void 0===g?void 0:g.height)||void 0===u?void 0:u[w],N=null===(m=null===(h=S[b])||void 0===h?void 0:h.height)||void 0===m?void 0:m[M],P=i.utils.stringOfLinearUnit(null!==(f=null!=T?T:N)&&void 0!==f?f:75);return e.React.createElement(n.SettingSection,{title:A,role:"group","aria-label":v[this.props.pagePart]},e.React.createElement(i.Collapse,{isOpen:this.state.isOpen},"body"===b?null:e.React.createElement(n.SettingRow,{label:`${this.formatMessage("dynamicHeight")}`},e.React.createElement(l.InputUnit,{value:P,min:0,onChange:this.onHeightChange,style:r,"aria-label":`${this.formatMessage("dynamicHeight")}`})),e.React.createElement(n.SettingRow,{"aria-label":this.formatMessage("dsFill"),label:this.formatMessage("dsFill")},e.React.createElement(a.ThemeColorPicker,{specificTheme:y,value:C,onChange:this.onBackgroundColorChange})),"header"===b&&j.mode===e.PageMode.AutoScroll&&e.React.createElement(n.SettingRow,{flow:"wrap"},e.React.createElement(i.Label,{centric:!0},e.React.createElement(i.Checkbox,{className:"mr-2",checked:Boolean(null==I?void 0:I.sticky),onChange:this.onStickHeaderChange}),this.formatMessage("keepFixedOnScroll")))))}}var d=h(6055),p=h(1496),g=h(5508),u=h.n(g),f=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const v=t=>{const i=window.SVG,{className:s}=t,o=f(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:n,src:u()},o)):e.React.createElement("svg",Object.assign({className:n},o))},x={};class b extends e.React.PureComponent{constructor(i){super(i),this.onMaxWidthChange=e=>{const i=this.props.pageJson;(0,t.getAppConfigAction)().editPageProperty(i.id,"maxWidth",e).exec()},this.formatMessage=e=>this.props.formatMessage(e),this.setPageWidthModeAuto=()=>{let e=this.props.pageJson;e=e.without("maxWidth"),(0,t.getAppConfigAction)().editPageProperty(e.id,"maxWidth",void 0).exec()},this.setPageWidthModeFixed=()=>{const e=this.props.pageJson;(0,t.getAppConfigAction)().editPageProperty(e.id,"maxWidth",1024).exec()},this.openWithDialogChanged=e=>{const i=this.props.pageJson;(0,t.getAppConfigAction)().editPageProperty(i.id,"autoOpenDialogId",e.target.value).exec()},this.onEffectSettingChange=(i,s)=>{const{pageJson:o}=this.props;(0,t.getAppConfigAction)().editPageProperty(o.id,"oneByOneEffect",s).exec(),(null==s?void 0:s.type)!==e.AnimationType.None&&t.builderAppSync.publishAnimationPreviewToApp({pageId:o.id,playMode:i,id:(0,e.getNextAnimationId)()})},this.previewAnimation=i=>{const{pageJson:s}=this.props;s.oneByOneEffect&&s.oneByOneEffect.type!==e.AnimationType.None&&t.builderAppSync.publishAnimationPreviewToApp({pageId:s.id,playMode:i,id:(0,e.getNextAnimationId)()})},this.state={isSetImageUrl:!1,currentImgUrlInput:""},this.fileInput=e.React.createRef()}getAppConfig(){return(0,e.getAppStore)().getState().appStateInBuilder&&(0,e.getAppStore)().getState().appStateInBuilder.appConfig||{pages:{empty:{}}}}layoutSetting(){var t;const{pageId:i,appTheme:s}=this.props,o=this.getAppConfig(),n=o.pages[i];if(n&&n.layout){const i=p.searchUtils.findLayoutId(n.layout,null===(t=(0,e.getAppStore)().getState().appStateInBuilder)||void 0===t?void 0:t.browserSizeMode,o.mainSizeMode),a=o.layouts[i];if((null==a?void 0:a.type)===e.LayoutType.FlowLayout)return(0,e.jsx)(d.FlowLayoutSetting,{layoutId:i,formatMessage:this.props.formatMessage});if((null==a?void 0:a.type)===e.LayoutType.GridLayout)return(0,e.jsx)(d.GridLayoutSetting,{layouts:n.layout,appTheme:s,formatMessage:this.props.formatMessage})}}getDialogList(){const t=[{value:"",index:-1,label:this.formatMessage("none")}],i=this.props.dialogs;return i&&(Object.keys(i).forEach((s=>{i[s].isSplash||i[s].mode!==e.DialogMode.Fixed||t.push({value:s,index:i[s].index,label:i[s].label})})),t.sort(((e,t)=>e.index-t.index))),t}getStyle(){const{theme:t}=this.props;return e.css`
    .image-setting-input {
      opacity: 0;
      position: absolute;
      left: 88px;
      width: 70px !important;
      height: 30px !important;
    }
    input, select {
      width: 130px;
      max-width: 130px;
    }
    .setting-row-label{
      line-height: 30px;
      font-size: 0.8125rem;
      font-weight: 500;
      margin-bottom: 0.5rem;
      color: ${t.ref.palette.neutral[900]};
    }
    .content-width-item {
      width: calc(50% - 4px);
      .img-container {
        width: auto;
        height: auto;
        cursor: pointer;
        outline: 1px solid ${t.ref.palette.neutral[700]};
        background-color: ${t.ref.palette.white} !important;
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 8px;
        &.active {
          outline: 2px solid ${t.sys.color.primary.light};
        }
      }
      span {
        overflow: hidden;
        text-overflow: ellipsis;
        width: 100%;
      }
    }

    `}render(){const{pageMode:t,maxWidth:s,pageJson:o,pageId:a,appTheme:r,browserSizeMode:d,header:p,footer:g,dispatch:u}=this.props;if(!o)return null;const m=o.autoOpenDialogId||"",f=o.oneByOneEffect,b=o.maxWidth>0?0:1,w=window.isExpressBuilder;return(0,e.jsx)("div",{className:"setting-pane widget-builder-page-setting",css:this.getStyle()},!w&&(0,e.jsx)(n.SettingSection,null,(0,e.jsx)("div",{className:"setting-row-label d-flex justify-content-between"},(0,e.jsx)("span",null,this.formatMessage("openWithWindow")),(0,e.jsx)(i.Tooltip,{title:this.formatMessage("openWithWindowTip"),placement:"bottom"},(0,e.jsx)(i.Button,{icon:!0,type:"tertiary",disableHoverEffect:!0,disableRipple:!0,className:"d-inline jimu-outline-inside"},(0,e.jsx)(v,null)))),(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(i.Select,{size:"sm",value:m,onChange:this.openWithDialogChanged,"aria-label":this.formatMessage("openWithWindow")},this.getDialogList().map(((t,i)=>(0,e.jsx)("option",{value:t.value,key:i,selected:t.value===m},t.label)))))),t===e.PageMode.AutoScroll&&(0,e.jsx)(n.SettingSection,{role:"group",title:this.formatMessage("contentWidth"),"aria-label":this.formatMessage("contentWidth")},(0,e.jsx)(n.SettingRow,null,(0,e.jsx)("div",{className:"d-flex w-100 justify-content-between"},(0,e.jsx)("div",{className:"d-flex flex-column align-items-center content-width-item"},(0,e.jsx)(i.Button,{icon:!0,type:"tertiary",className:"img-container p-0 "+(0===b?"active":""),"aria-label":this.formatMessage("dsCustom"),"aria-pressed":0===b,onClick:this.setPageWidthModeFixed},(0,e.jsx)(i.Icon,{autoFlip:!0,width:0===b?105:107,height:0===b?66:68,icon:h(2113)})),(0,e.jsx)("span",{title:this.formatMessage("dsCustom"),className:"text-center"},this.formatMessage("dsCustom"))),(0,e.jsx)("div",{className:"d-flex flex-column align-items-center content-width-item"},(0,e.jsx)(i.Button,{icon:!0,type:"tertiary",className:"img-container p-0 "+(1===b?"active":""),"aria-label":this.formatMessage("dsAuto"),"aria-pressed":1===b,onClick:this.setPageWidthModeAuto},(0,e.jsx)(i.Icon,{autoFlip:!0,width:1===b?105:107,height:1===b?66:68,icon:h(4189)})),(0,e.jsx)("span",{title:this.formatMessage("dsAuto"),className:"text-center"},this.formatMessage("dsAuto"))))),0===b&&(0,e.jsx)(n.SettingRow,{label:this.formatMessage("maxWidth")},(0,e.jsx)(i.NumericInput,{"aria-label":this.formatMessage("maxWidth"),className:"setting-input-select",min:300,onChange:this.onMaxWidthChange,value:isNaN(s)?"":s,style:{width:"110px"}}))),(0,e.jsx)(n.SettingSection,{role:"group","aria-label":this.formatMessage("animation"),title:this.formatMessage("animation")},(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(l.AnimationSettingComponent,{contentId:o.id,oneByOneSetting:f,onSettingChange:this.onEffectSettingChange,previewEnabled:!0,supportAsOne:!1,supportOneByOne:!0,isRoot:!0,onPreviewClicked:this.previewAnimation,formatMessage:this.formatMessage}))),(0,e.jsx)(c,{formatMessage:this.formatMessage,emptyLayout:x,dispatch:u,pageId:a,pagePart:"body",pageJson:o,theme:r,browserSizeMode:d}),(p||!w)&&(0,e.jsx)(c,{formatMessage:this.formatMessage,emptyLayout:x,dispatch:u,pageId:a,pagePart:"header",pageJson:o,header:p,theme:r,browserSizeMode:d}),(g||!w)&&(0,e.jsx)(c,{formatMessage:this.formatMessage,emptyLayout:x,dispatch:u,pageJson:o,pageId:a,pagePart:"footer",footer:g,theme:r,browserSizeMode:d}),this.layoutSetting())}}const w=e.ReactRedux.connect(((e,t)=>{var i,s,o,n,a,l,r,c;return{pageJson:null===(s=null===(i=e.appStateInBuilder)||void 0===i?void 0:i.appConfig)||void 0===s?void 0:s.pages[t.pageId],dialogs:null===(n=null===(o=e.appStateInBuilder)||void 0===o?void 0:o.appConfig)||void 0===n?void 0:n.dialogs,header:null===(l=null===(a=e.appStateInBuilder)||void 0===a?void 0:a.appConfig)||void 0===l?void 0:l.header,footer:null===(c=null===(r=e.appStateInBuilder)||void 0===r?void 0:r.appConfig)||void 0===c?void 0:c.footer}}))(b);var y=h(5879),I=h.n(y),S=h(7781),j=h.n(S),C=h(8739),A=h.n(C),M=h(92),T=h.n(M),N=h(9119),P=h.n(N),k=h(6542),R=h.n(k);const O="var(--light)",B="var(--dark-900)";class L extends e.React.PureComponent{constructor(s){var o,a;super(s),this.getDefaultText=(e=this.props.dialogJson.confirmBeforeClose)=>{let t="";return this.props.dialogJson.interactionType&&(t=this.formatMessage(e?"dialogConfirmationDefaultText":"dialogPreventDisplayAgainDefaultText")),t},this.formatMessage=e=>this.props.formatMessage(e),this.onTextChanged=e=>{this.setState({text:e.target.value})},this.onButtonTextChanged=e=>{this.setState({buttonText:e.target.value})},this.onTextBLur=e=>{const t=this.defaultText;this.textBlur("text",e,t)},this.onButtonTextBLur=e=>{const t=this.formatMessage("ok");this.textBlur("buttonText",e,t)},this.textBlur=(e,t,i)=>{if(i===(t=t.trim())&&(t=""),this.interactionStyles[e]!==t&&this.updateInteractionStyles(e,t),""===t){const t={};t[e]=i,this.setState(t)}},this.updateDialogMask=e=>{e=e||B,this.editDialogProperty("overlayColor",e)},this.getDialogBackground=()=>{var e;const{dialogJson:t}=this.props;return(null===(e=t.dialogBackground)||void 0===e?void 0:e.color)===O?t.dialogBackground.set("color",""):t.dialogBackground},this.updateDialogQuickBackground=e=>{var t,i;const{dialogJson:s}=this.props;(null===(t=s.dialogBackground)||void 0===t?void 0:t.image)&&(e.image=null===(i=s.dialogBackground)||void 0===i?void 0:i.image),this.editDialogProperty("dialogBackground",e)},this.updateDialogBackground=e=>{""===e.color?this.editDialogProperty("dialogBackground.color",O):this.editDialogProperty("dialogBackground",e)},this.updateBorder=e=>{this.editDialogProperty("border",e)},this.updateBorderRadius=e=>{this.editDialogProperty("borderRadius",e)},this.updateShadow=e=>{this.editDialogProperty("boxShadow",e)},this.onEffectSettingChange=(i,s)=>{const{dialogJson:o}=this.props,n=i===e.AnimationPlayMode.OneByOne?"oneByOneEffect":"effect";(0,t.getAppConfigAction)().editDialogProperty(o.id,n,s).exec(),t.builderAppSync.publishAnimationPreviewToApp({dialogId:o.id,playMode:i,id:(0,e.getNextAnimationId)()})},this.previewAnimation=i=>{const{dialogJson:s}=this.props;(s.effect||s.oneByOneEffect)&&t.builderAppSync.publishAnimationPreviewToApp({dialogId:s.id,playMode:i,id:(0,e.getNextAnimationId)()})},this.getBrowserIcons=t=>{if(window.isExpressBuilder)return null;const s=!this.props.dialogJson.layout[e.BrowserSizeMode.Medium],o=!this.props.dialogJson.layout[e.BrowserSizeMode.Small],n=this.props.browserSizeMode===e.BrowserSizeMode.Large||!this.props.dialogJson.layout[this.props.browserSizeMode],a=this.props.browserSizeMode===e.BrowserSizeMode.Large&&s||this.props.browserSizeMode===e.BrowserSizeMode.Medium||this.props.browserSizeMode===e.BrowserSizeMode.Small&&s&&o,l=this.props.browserSizeMode===e.BrowserSizeMode.Large&&o||this.props.browserSizeMode===e.BrowserSizeMode.Medium&&s&&o||this.props.browserSizeMode===e.BrowserSizeMode.Small,r=this.props.theme.ref.palette.neutral[800],c=this.props.formatMessage("applyToLargeScreen"),d=this.props.formatMessage("applyToMediumScreen"),p=this.props.formatMessage("applyToSmallScreen");return(0,e.jsx)("div",{className:"d-flex justify-content-between align-items-center"},n&&(0,e.jsx)(i.Tooltip,{title:c},(0,e.jsx)(i.Button,{icon:!0,size:"sm",type:"tertiary",disableHoverEffect:!0,disableRipple:!0,className:"p-0 border-0"},(0,e.jsx)(i.Icon,{size:t,icon:I(),color:r,className:"border-0"}))),a&&(0,e.jsx)(i.Tooltip,{title:d},(0,e.jsx)(i.Button,{icon:!0,size:"sm",type:"tertiary",disableHoverEffect:!0,disableRipple:!0,className:"p-0 border-0"},(0,e.jsx)(i.Icon,{size:t,icon:j(),color:r,className:"border-0"}))),l&&(0,e.jsx)(i.Tooltip,{title:p},(0,e.jsx)(i.Button,{icon:!0,size:"sm",type:"tertiary",disableHoverEffect:!0,disableRipple:!0,className:"p-0 border-0"},(0,e.jsx)(i.Icon,{size:t,icon:A(),color:r,className:"border-0"}))))},this.getConfirmationDOMs=t=>(0,e.jsx)("div",{className:"confirmation-container mt-4"},(0,e.jsx)(n.SettingRow,{className:"confirmation-item",label:this.formatMessage("checkboxText")}),(0,e.jsx)("div",{className:"confirmation-item"},(0,e.jsx)(i.TextArea,{className:"w-100",height:60,spellCheck:!1,placeholder:this.formatMessage("confirmationRequiredText"),value:this.state.text,"aria-label":this.formatMessage("checkboxText"),onChange:this.onTextChanged,onAcceptValue:this.onTextBLur})),(0,e.jsx)(n.SettingRow,{label:this.formatMessage("fontSize")},(0,e.jsx)(l.InputUnit,{style:{width:"80px"},units:[i.DistanceUnits.PIXEL,i.DistanceUnits.REM],value:this.getFontSize("textSize"),"aria-label":this.formatMessage("fontSize"),onChange:e=>{this.updateCheckboxTextSize("textSize",e.distance+e.unit)}})),t.interactionType!==e.DialogInteractionType.NoButton&&(0,e.jsx)("div",null,(0,e.jsx)(n.SettingRow,{className:"confirmation-item",label:this.formatMessage("checkboxButtonText")}),(0,e.jsx)(n.SettingRow,{className:"confirmation-item"},(0,e.jsx)(i.TextInput,{type:"text",size:"sm",className:"w-100",spellCheck:!1,placeholder:this.formatMessage("confirmationRequiredText"),value:this.state.buttonText,"aria-label":this.formatMessage("checkboxButtonText"),onChange:this.onButtonTextChanged,onAcceptValue:this.onButtonTextBLur})),(0,e.jsx)(n.SettingRow,{label:this.formatMessage("fontSize")},(0,e.jsx)(l.InputUnit,{style:{width:"80px"},units:[i.DistanceUnits.PIXEL,i.DistanceUnits.REM],value:this.getFontSize("buttonTextSize"),"aria-label":this.formatMessage("fontSize"),onChange:e=>{this.updateCheckboxTextSize("buttonTextSize",e.distance+e.unit)}})))),this.defaultText=this.getDefaultText(),this.state={interactionPanel:s.dialogJson.confirmBeforeClose?"confirmation":"prevent",text:(null===(o=this.interactionStyles)||void 0===o?void 0:o.text)||this.defaultText,buttonText:(null===(a=this.interactionStyles)||void 0===a?void 0:a.buttonText)||this.formatMessage("ok")},this.isRTL=(0,e.getAppStore)().getState().appContext.isRTL}componentDidUpdate(e){var t,i,s,o,n,a;const{dialogJson:l}=this.props;l.interactionStyles&&((null===(t=l.interactionStyles)||void 0===t?void 0:t.text)===(null===(i=e.dialogJson.interactionStyles)||void 0===i?void 0:i.text)&&(null===(s=l.interactionStyles)||void 0===s?void 0:s.buttonText)===(null===(o=e.dialogJson.interactionStyles)||void 0===o?void 0:o.buttonText)||(this.defaultText=this.getDefaultText(),this.setState({text:(null===(n=this.interactionStyles)||void 0===n?void 0:n.text)||this.defaultText,buttonText:(null===(a=this.interactionStyles)||void 0===a?void 0:a.buttonText)||this.formatMessage("ok")})),l.confirmBeforeClose!==e.dialogJson.confirmBeforeClose&&this.setState({interactionPanel:l.confirmBeforeClose?"confirmation":"prevent"}))}getDialogBrowserSizeMode(){return this.props.dialogJson.layout[this.props.browserSizeMode]?this.props.browserSizeMode:e.BrowserSizeMode.Large}defaultInteractionStyles(){return{text:"",textSize:"13px",buttonText:"",buttonTextSize:"16px"}}getAppConfig(){return(0,e.getAppStore)().getState().appStateInBuilder&&(0,e.getAppStore)().getState().appStateInBuilder.appConfig||{dialogs:{empty:{}}}}editDialogProperty(e,i){(0,t.getAppConfigAction)().editDialogProperty(this.props.dialogId,e,i).exec()}editDialog(e){(0,t.getAppConfigAction)().editDialog(e).exec()}getPixelFromPercentage(e){return e*parseFloat(e.split("%")[0])/100}getPixelValue(e="0px",t){return e.includes(i.DistanceUnits.PIXEL)?parseFloat(e.split("px")[0]):t*parseFloat(e.split("%")[0])/100}getPixelSizeFromFixedToAnchored(t,i){const s=t.sizeMode[i],o=e.utils.findViewportSize(this.getAppConfig(),this.props.browserSizeMode);let n,a;return n="CUSTOM"===s.widthMode?this.getPixelValue(s.width,o.width):o.width-this.getPixelValue(s.left,o.width)-this.getPixelValue(s.right,o.width),a="CUSTOM"===s.heightMode?this.getPixelValue(s.height,o.height):o.height-this.getPixelValue(s.top,o.height)-this.getPixelValue(s.bottom,o.height),{width:n,height:a}}setDialogMode(t){let i=this.props.dialogJson;if(t===i.mode)return;const s=this.getDialogBrowserSizeMode();if(t===e.DialogMode.Anchored){const{width:e,height:t}=this.getPixelSizeFromFixedToAnchored(i,s);i=i.setIn(["sizeMode",s],{width:e+"px",height:t+"px"}).set("overlayColor",null)}else{const t=i.sizeMode[s];i=i.setIn(["sizeMode",s],{position:e.FixedPosition.MiddleCenter,widthMode:"CUSTOM",heightMode:"CUSTOM",width:t.width,height:t.height}).set("overlayColor",B)}i=i.set("mode",t).set("interactionType",null).set("interactionStyles",null).set("confirmBeforeClose",!0).set("alwaysShowConfirmation",!1).set("blockPage",!0),this.editDialog(i)}handlePositionSizeChangeForFixed(e){const t=this.getDialogBrowserSizeMode(),i=this.props.dialogJson.setIn(["sizeMode",t],e);this.editDialog(i)}handleSizeChangeForAnchored(e,t){const i=this.getDialogBrowserSizeMode(),s=this.props.dialogJson.setIn(["sizeMode",i,e],t.distance.toFixed(2)+t.unit);this.editDialog(s)}getDialogSizeForAnchored(e){const t=this.props.dialogJson.sizeMode[this.getDialogBrowserSizeMode()][e];if(!t)return null;const s=t.indexOf(i.DistanceUnits.PIXEL)>=0?i.DistanceUnits.PIXEL:i.DistanceUnits.PERCENTAGE;return{distance:t.split(s)[0],unit:s}}getFontSize(e){const t=this.interactionStyles[e],s=t.indexOf(i.DistanceUnits.PIXEL)>=0?i.DistanceUnits.PIXEL:i.DistanceUnits.REM;return{distance:t.split(s)[0],unit:s}}setBlockPage(e){let t=this.props.dialogJson;t=t.set("blockPage",e).set("overlayColor",e?B:null).set("closeWhenClickOverlay",!1),this.editDialog(t)}setInteraction(t){let i=this.props.dialogJson;i=i.set("interactionType",t?e.DialogInteractionType.NoButton:null).set("interactionStyles",t?this.defaultInteractionStyles():null).set("confirmBeforeClose",!0).set("alwaysShowConfirmation",!1),this.editDialog(i),this.setState({interactionPanel:t?"confirmation":""})}changeInteractionType(e){let t=this.props.dialogJson;e!==t.interactionType&&(t=t.set("interactionType",e),this.editDialog(t))}setConfirmationType(e){this.defaultText=this.getDefaultText(e),""===this.props.dialogJson.interactionStyles.text&&this.setState({text:this.defaultText});let t=this.props.dialogJson;t=t.set("confirmBeforeClose",e).set("alwaysShowConfirmation",!e),this.editDialog(t),this.setState({interactionPanel:e?"confirmation":"prevent"})}updateInteractionStyles(e,t){this.editDialogProperty("interactionStyles",this.interactionStyles.set(e,t))}updateCheckboxTextSize(e,t){this.interactionStyles[e]!==t&&this.updateInteractionStyles(e,t)}getStyle(){return e.css`
      .mode-radio {
        cursor: pointer;
        &.mode-label-disabled {
          cursor: inherit;
        }
      }
      .mode-label {
        margin-left: 0.5rem;
        cursor: pointer;
        &.mode-label-disabled {
          cursor: inherit;
          color: var(--ref-palette-neutral-800);
        }
      }
      .confirmation-container {
        .confirmation-item{
          margin-top: 0.5rem;
          margin-bottom: 0.5rem;
        }
      }

      .size-setting {
        width: 100%;
        .size-container {
          height: 26px;
          display: flex;
          justify-content: space-between;
          .unit-container {
            display: flex;
            align-items: center;
            width: calc(50% - 10px);

            .size-label{
              color: var(--ref-palette-neutral-900);
              align-items: center;
              margin-bottom: 0;
            }
            .size-input {
              margin-left: 6px;
            }
          }
        }
      }

      .interaction-container {
        .interaction-type-container {
          display: flex;
          justify-content: space-between;
          .jimu-btn {
            padding: 0;
            background-color: var(--ref-palette-neutral-300);
            border: 2px solid transparent;
            &.active{
              border: 2px solid var(--sys-color-primary-main);
            }
          }
        }
      }

    `}render(){const{dialogJson:s}=this.props,o=s.isSplash||t.utils.getPageListByDialogId(this.getAppConfig().pages,s.id).length>0;if(!s.id)return null;const r=s.mode===e.DialogMode.Anchored?[i.DistanceUnits.PIXEL]:[i.DistanceUnits.PIXEL,i.DistanceUnits.PERCENTAGE];this.interactionStyles=s.interactionStyles?s.interactionStyles:this.defaultInteractionStyles();const c=s.sizeMode[this.getDialogBrowserSizeMode()],d=this.formatMessage(s.mode===e.DialogMode.Fixed?"positionAndSize":"size"),p=window.isExpressBuilder;return(0,e.jsx)("div",{className:"setting-pane widget-builder-page-setting",css:this.getStyle()},!p&&(0,e.jsx)(n.SettingSection,{role:"group",title:this.formatMessage("mode"),"aria-label":this.formatMessage("mode")},(0,e.jsx)(n.SettingRow,null,(0,e.jsx)("div",{className:"d-flex justify-content-between w-100 align-items-center"},(0,e.jsx)(i.Tooltip,{placement:"bottom",title:this.formatMessage("fixedModeTip")},(0,e.jsx)("div",{className:"align-items-center d-flex"},(0,e.jsx)(i.Radio,{className:"mode-radio",onChange:()=>{this.setDialogMode(e.DialogMode.Fixed)},name:"dialogMode",checked:s.mode===e.DialogMode.Fixed}),(0,e.jsx)("label",{className:"mode-label",onClick:()=>{this.setDialogMode(e.DialogMode.Fixed)}},this.formatMessage("fixedMode")))))),(0,e.jsx)(n.SettingRow,null,(0,e.jsx)("div",{className:"d-flex justify-content-between w-100 align-items-center"},(0,e.jsx)(i.Tooltip,{placement:"bottom",title:o?this.formatMessage(s.isSplash?"splashDlgWarning":"pageDlgWarning"):this.formatMessage("anchoredModeTip")},(0,e.jsx)("div",{className:"align-items-center d-flex"},(0,e.jsx)(i.Radio,{className:(0,e.classNames)("mode-radio",o?"mode-radio-disabled":""),onChange:()=>{this.setDialogMode(e.DialogMode.Anchored)},name:"dialogMode",checked:s.mode===e.DialogMode.Anchored,disabled:o}),(0,e.jsx)("label",{className:(0,e.classNames)("mode-label",o?"mode-label-disabled":""),onClick:()=>{!o&&this.setDialogMode(e.DialogMode.Anchored)}},this.formatMessage("anchoredMode"))))))),(p||!this.props.lockLayout)&&(0,e.jsx)(n.SettingSection,{role:"group","aria-label":d},(0,e.jsx)("div",{className:"d-flex mb-4"},(0,e.jsx)("h6",{className:"flex-lg-grow-1 mb-0 text-truncate title2 hint-paper"},d),this.getBrowserIcons(12)),s.mode===e.DialogMode.Fixed?(0,e.jsx)(l.FixedPositionSize,{fixedPositionSizeJson:c,onChange:e=>{this.handlePositionSizeChangeForFixed(e)}}):(0,e.jsx)("div",{className:"size-setting"},(0,e.jsx)("div",{className:"size-container"},(0,e.jsx)("div",{className:"unit-container",role:"group"},(0,e.jsx)(i.Tooltip,{placement:"bottom",title:this.formatMessage("width")},(0,e.jsx)("label",{className:"size-label"},"W")),(0,e.jsx)(l.InputUnit,{className:"size-input",units:r,value:this.getDialogSizeForAnchored("width"),"aria-label":this.formatMessage("width"),min:0,onChange:e=>{this.handleSizeChangeForAnchored("width",e)}})),(0,e.jsx)("div",{className:"unit-container"},(0,e.jsx)(i.Tooltip,{placement:"bottom",title:this.formatMessage("height")},(0,e.jsx)("label",{className:"size-label"},"H")),(0,e.jsx)(l.InputUnit,{className:"size-input",units:r,value:this.getDialogSizeForAnchored("height"),"aria-label":this.formatMessage("height"),min:0,onChange:e=>{this.handleSizeChangeForAnchored("height",e)}}))))),s.mode===e.DialogMode.Fixed&&(0,e.jsx)(n.SettingSection,{title:(0,e.jsx)("div",{className:"d-flex w-100 align-items-center justify-content-between"},(0,e.jsx)("div",{className:"text-truncate title2 hint-paper"},this.formatMessage("blockPage")),(0,e.jsx)(i.Switch,{"aria-label":this.formatMessage("blockPage"),checked:s.blockPage,onChange:(e,t)=>{this.setBlockPage(t)}}))},s.blockPage&&(0,e.jsx)(n.SettingRow,{label:this.formatMessage("maskColor")},(0,e.jsx)(a.ThemeColorPicker,{specificTheme:this.props.appTheme,value:s.overlayColor,"aria-label":this.formatMessage("maskColor"),onChange:this.updateDialogMask}))),(0,e.jsx)(n.SettingSection,{role:"group",title:this.formatMessage("closeOptions"),"aria-label":this.formatMessage("closeOptions")},(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(i.Label,{check:!0,centric:!0},(0,e.jsx)(i.Checkbox,{style:{cursor:"pointer"},className:"mr-2",checked:s.closeWhenClickOverlay,disabled:s.mode===e.DialogMode.Fixed&&!s.blockPage,onChange:()=>{this.editDialogProperty("closeWhenClickOverlay",!s.closeWhenClickOverlay)}}),this.formatMessage("clickOutside"))),s.mode===e.DialogMode.Fixed&&(0,e.jsx)("div",{className:"mt-4"},(0,e.jsx)(n.SettingRow,{label:this.formatMessage("interaction")},(0,e.jsx)(i.Switch,{"aria-label":this.formatMessage("interaction"),checked:!!s.interactionType,onChange:(e,t)=>{this.setInteraction(t)}})),s.interactionType&&(0,e.jsx)("div",{className:"interaction-container mt-4",role:"group","aria-label":this.formatMessage("style")},(0,e.jsx)(n.SettingRow,{className:"confirmation-item",label:this.formatMessage("style")}),(0,e.jsx)("div",{className:"interaction-type-container mt-4 mb-4"},(0,e.jsx)(i.Tooltip,{title:this.formatMessage("interactionStyle1"),placement:"bottom"},(0,e.jsx)(i.Button,{icon:!0,size:"sm",type:"tertiary","aria-pressed":s.interactionType===e.DialogInteractionType.NoButton,onClick:()=>{this.changeInteractionType(e.DialogInteractionType.NoButton)},active:s.interactionType===e.DialogInteractionType.NoButton},(0,e.jsx)(i.Icon,{width:65,height:26,icon:T(),flip:this.isRTL?"horizontal":null}))),(0,e.jsx)(i.Tooltip,{title:this.formatMessage("interactionStyle2"),placement:"bottom"},(0,e.jsx)(i.Button,{icon:!0,size:"sm",type:"tertiary","aria-pressed":s.interactionType===e.DialogInteractionType.ButtonInline,onClick:()=>{this.changeInteractionType(e.DialogInteractionType.ButtonInline)},active:s.interactionType===e.DialogInteractionType.ButtonInline},(0,e.jsx)(i.Icon,{width:65,height:26,icon:P(),flip:this.isRTL?"horizontal":null}))),(0,e.jsx)(i.Tooltip,{title:this.formatMessage("interactionStyle3"),placement:"bottom"},(0,e.jsx)(i.Button,{icon:!0,size:"sm",type:"tertiary","aria-pressed":s.interactionType===e.DialogInteractionType.ButtonBlock,onClick:()=>{this.changeInteractionType(e.DialogInteractionType.ButtonBlock)},active:s.interactionType===e.DialogInteractionType.ButtonBlock},(0,e.jsx)(i.Icon,{width:65,height:26,icon:R(),flip:this.isRTL?"horizontal":null})))),(0,e.jsx)("div",{className:"p-0 m-0",role:"group","aria-label":this.formatMessage("type")},(0,e.jsx)(n.SettingRow,{className:"confirmation-item",label:this.formatMessage("type")}),(0,e.jsx)("div",{role:"radiogroup",className:"mt-2"},(0,e.jsx)(i.CollapsableRadio,{name:"collapsable-confirmation-radio",label:this.formatMessage("confirmation"),role:"group","aria-label":this.formatMessage("confirmation"),wrapLabel:!0,disableActionForUnchecked:!0,checked:s.confirmBeforeClose,isOpen:"confirmation"===this.state.interactionPanel,onRequestOpen:()=>{this.setState({interactionPanel:"confirmation"})},onRequestClose:()=>{this.setState({interactionPanel:""})},onCheckedChange:()=>{this.setConfirmationType(!0)}},(0,e.jsx)("div",{className:"pl-1 pr-1 mb-2"},this.getConfirmationDOMs(s),(0,e.jsx)(n.SettingRow,{className:"mt-2 mb-4"},(0,e.jsx)(i.Label,{check:!0,centric:!0},(0,e.jsx)(i.Checkbox,{style:{cursor:"pointer"},className:"mr-2",checked:s.alwaysShowConfirmation,onChange:()=>{this.editDialogProperty("alwaysShowConfirmation",!s.alwaysShowConfirmation)}}),this.formatMessage("alwaysShow"))))),(0,e.jsx)(i.CollapsableRadio,{name:"collapsable-confirmation-radio",label:this.formatMessage("preventDisplayAgain"),role:"group","aria-label":this.formatMessage("preventDisplayAgain"),wrapLabel:!0,disableActionForUnchecked:!0,checked:!s.confirmBeforeClose,isOpen:"prevent"===this.state.interactionPanel,onRequestOpen:()=>{this.setState({interactionPanel:"prevent"})},onRequestClose:()=>{this.setState({interactionPanel:""})},onCheckedChange:()=>{this.setConfirmationType(!1)}},(0,e.jsx)("div",{className:"pl-1 pr-1 mb-2"},this.getConfirmationDOMs(s)))))))),(0,e.jsx)(n.SettingSection,{role:"group",title:this.formatMessage("animation"),"aria-label":this.formatMessage("animation")},(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(l.AnimationSettingComponent,{contentId:s.id,effectSetting:s.effect,oneByOneSetting:s.oneByOneEffect,onSettingChange:this.onEffectSettingChange,previewEnabled:!0,supportAsOne:!0,supportOneByOne:!0,onPreviewClicked:this.previewAnimation,formatMessage:this.formatMessage}))),(0,e.jsx)(l.ThemeBackgroundSection,{background:this.getDialogBackground(),onChange:this.updateDialogBackground}),(0,e.jsx)(l.ThemeBorderSection,{border:s.border,borderRadius:s.borderRadius,onBorderChange:this.updateBorder,onBorderRadiusChange:this.updateBorderRadius}),(0,e.jsx)(l.ThemeBoxShadowSection,{value:s.boxShadow,onChange:this.updateShadow}))}}const D=e.ReactRedux.connect(((e,t)=>{var i,s,o;return{lockLayout:null===(o=null===(s=null===(i=null==e?void 0:e.appStateInBuilder)||void 0===i?void 0:i.appConfig)||void 0===s?void 0:s.forBuilderAttributes)||void 0===o?void 0:o.lockLayout,dialogJson:e.appStateInBuilder&&e.appStateInBuilder.appConfig&&e.appStateInBuilder.appConfig.dialogs[t.dialogId]||{}}}))(L);var z=h(1888),E=h(2838),W=h.n(E),U=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const V=t=>{const i=window.SVG,{className:s}=t,o=U(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:n,src:W()},o)):e.React.createElement("svg",Object.assign({className:n},o))};var F=h(6499),H=h.n(F),G=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const $=t=>{const i=window.SVG,{className:s}=t,o=G(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:n,src:H()},o)):e.React.createElement("svg",Object.assign({className:n},o))};var Z=h(6490),_=h.n(Z),J=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const Q=t=>{const i=window.SVG,{className:s}=t,o=J(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:n,src:_()},o)):e.React.createElement("svg",Object.assign({className:n},o))},K={value:"",openType:n.OpenTypes.NewWindow,linkType:e.LinkType.WebAddress};class Y extends e.React.PureComponent{constructor(i){super(i),this.linkSettingTrigger=e.React.createRef(),this.getCurrentPageName=e=>{const{appConfig:t,pageId:i}=e;return t.pages[i].label||""},this.openBrowseImage=()=>{const e=this.fileInput.current.files;if(!e||!e[0])return;const t=new FileReader;t.readAsDataURL(e[0]),t.onload=e=>{const t=e.target;this.changeIcon(t.result)}},this.setImageUrl=()=>{const{currentImgUrlInput:e}=this.state;""!==e&&(this.setState({isSetImageUrl:!1}),this.changeIcon(e))},this.getPageType=e=>{const{pages:t}=this.props.appConfig;for(const i in t){const s=t[i];if(s.id===e)return s}return{}},this.settingLinkConfirm=e=>{this.setState({isShowLinkSetting:!1}),(e.value||""===e.value)&&this.setState({currentUrl:e.value}),this.changeUrl(e.value,e.openType)},this.changeUrl=(e,i)=>{(0,t.getAppConfigAction)().editPageProperty(this.props.pageId,"linkUrl",e||"#").editPageProperty(this.props.pageId,"openTarget",i).exec(),K.value=e,K.openType=i},this.changeIcon=e=>{(0,t.getAppConfigAction)().editPageProperty(this.props.pageId,"icon",e).exec()},this.formatMessage=e=>this.props.formatMessage(e),this.state={isSetImageUrl:!1,currentImgUrlInput:"",isShowLinkSetting:!1,currentUrl:this.props.currentUrl||""},this.fileInput=e.React.createRef()}resetLinkParam(){K.value="",K.openType=n.OpenTypes.NewWindow;const e=this.props.appConfig.pages[this.props.pageId];e&&e.linkUrl&&"#"!==e.linkUrl&&(K.value=e.linkUrl),e&&e.openTarget&&(K.openType=e.openTarget)}getStyle(t){return e.css`
    .image-setting-input {
      opacity: 0;
      position: absolute;
      left: 88px;
      width: 70px !important;
      height: 30px !important;
    }
    `}render(){var t;const{isSetImageUrl:s,currentImgUrlInput:o,isShowLinkSetting:a}=this.state;return this.resetLinkParam(),(0,e.jsx)("div",{className:"setting-pane widget-builder-page-setting widget-setting-image"},(0,e.jsx)(n.SettingSection,null,s&&(0,e.jsx)(n.SettingRow,null,(0,e.jsx)("div",{className:"d-flex flex-row justify-content-around border w-100 align-items-center"},(0,e.jsx)(i.TextInput,{className:"border-0 w-100",value:o,placeholder:`${this.formatMessage("urlIsHere")}...`,onChange:e=>{this.setState({currentImgUrlInput:e.target.value})},onKeyUp:this.setImageUrl}),(0,e.jsx)("div",{className:"btn btn-light pl-1 pr-1 h-100",onClick:this.setImageUrl},(0,e.jsx)($,{className:"float-right"})),(0,e.jsx)("div",{className:"btn btn-light pl-1 pr-1 h-100",onClick:()=>{this.setState({isSetImageUrl:!1})}},(0,e.jsx)(V,{className:"float-right"})))),(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(i.Button,{className:"w-100 text-default set-link-btn",onClick:()=>{this.setState({isShowLinkSetting:!a})},ref:this.linkSettingTrigger},(0,e.jsx)(Q,{className:"mr-4"}),"Set link"))),a&&(0,e.jsx)(n.LinkSelectorSidePopper,{isOpen:a,isLinkPageSetting:!0,linkParam:(0,e.Immutable)(K),onSettingCancel:()=>{this.setState({isShowLinkSetting:!1})},onSettingConfirm:this.settingLinkConfirm,trigger:null===(t=this.linkSettingTrigger)||void 0===t?void 0:t.current}))}}Y.mapExtraStateProps=e=>({pageId:e.appRuntimeInfo.currentPageId});const X=(0,z.withTheme)(Y);class q extends e.React.PureComponent{constructor(i){super(i),this.getCurrentPageName=e=>{const{appConfig:t,pageId:i}=e;return t.pages[i].label||""},this.openBrowseImage=()=>{const e=this.fileInput.current.files;if(!e||!e[0])return;const t=new FileReader;t.readAsDataURL(e[0]),t.onload=e=>{const t=e.target;this.changeIcon(t.result)}},this.setImageUrl=()=>{const{currentImgUrlInput:e}=this.state;""!==e&&(this.setState({isSetImageUrl:!1}),this.changeIcon(e))},this.formatMessage=e=>this.props.formatMessage(e),this.getPageType=e=>{const{pages:t}=this.props.appConfig;for(const i in t){const s=t[i];if(s.id===e)return s}return{}},this.changeIcon=e=>{(0,t.getAppConfigAction)().editPageProperty(this.props.pageId,"icon",e).exec()},this.state={isSetImageUrl:!1,currentImgUrlInput:""},this.fileInput=e.React.createRef()}getStyle(){return e.css`
    .image-setting-input {
      opacity: 0;
      position: absolute;
      left: 88px;
      width: 70px !important;
      height: 30px !important;
    }
    `}render(){const{isSetImageUrl:t,currentImgUrlInput:s}=this.state;return(0,e.jsx)("div",{className:"setting-pane widget-builder-page-setting widget-setting-image"},(0,e.jsx)(n.SettingSection,null,(0,e.jsx)(i.TextInput,{placeholder:this.formatMessage("noSettingOptions"),disabled:!0,style:{border:0,background:"transparent",userSelect:"none"}}),t&&(0,e.jsx)(n.SettingRow,null,(0,e.jsx)("div",{className:"d-flex flex-row justify-content-around border w-100 align-items-center"},(0,e.jsx)(i.TextInput,{className:"border-0 w-100",value:s,placeholder:`${this.formatMessage("urlIsHere")}...`,onChange:e=>{this.setState({currentImgUrlInput:e.target.value})},onKeyUp:this.setImageUrl}),(0,e.jsx)("div",{className:"btn btn-light pl-1 pr-1 h-100",onClick:this.setImageUrl},(0,e.jsx)($,{className:"float-right"})),(0,e.jsx)("div",{className:"btn btn-light pl-1 pr-1 h-100",onClick:()=>{this.setState({isSetImageUrl:!1})}},(0,e.jsx)(V,{className:"float-right"}))))))}}q.mapExtraStateProps=e=>({pageId:e.appRuntimeInfo.currentPageId});const ee=q;var te=h(8640),ie=h(4651),se=h.n(ie),oe=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const ne=t=>{const i=window.SVG,{className:s}=t,o=oe(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:n,src:se()},o)):e.React.createElement("svg",Object.assign({className:n},o))};var ae=h(2606),le=h.n(ae),re=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const ce=t=>{const i=window.SVG,{className:s}=t,o=re(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:n,src:le()},o)):e.React.createElement("svg",Object.assign({className:n},o))};class de extends e.React.PureComponent{constructor(i){super(i),this.formatMessage=e=>this.props.formatMessage(e),this._enableEditing=e=>{e.stopPropagation(),this.setState({isEditingLabel:!0})},this._handleLabelInputBlur=e=>{const t=e.target.value,{valid:i}=this._checkLabel(t);i?this.setState({isEditingLabel:!1}):this.setState({isEditingLabel:!1,currentLabel:this.props.view.label})},this._handleLabelInputEnter=e=>{if("Enter"===e.key){const e=this.inputRef.value,{valid:t}=this._checkLabel(e);t&&this.setState({isEditingLabel:!1})}},this._onLabelChange=e=>{this.setState({currentLabel:e.target.value})},this._onLabelUpdate=e=>{if(e&&e.trim().length>0){const{view:i}=this.props;(0,t.getAppConfigAction)().editViewProperty(i.id,"label",e).exec()}else this.setState({currentLabel:this.props.view.label})},this._checkLabel=e=>{if(e.includes(","))return{valid:!1,msg:this.props.formatMessage("noCommaInLabel")};const{view:i}=this.props,s=(0,t.getAppConfigAction)().appConfig;return t.appConfigUtils.isLabelDuplicated(s,"view",i.id,e)?{valid:!1,msg:this.props.formatMessage("duplicatedLabel")}:{valid:!0}},this.toggleDropDown=e=>{null==e||e.stopPropagation(),this.setState({isDropDownOpen:!this.state.isDropDownOpen})},this.state={currentLabel:this.props.view.label,isEditingLabel:!1,isDropDownOpen:!1},this.dropDownItems=[(0,e.Immutable)({label:this.formatMessage("rename"),event:this._enableEditing.bind(this),visible:!0,a11yFocusBack:!1}),(0,e.Immutable)({label:this.formatMessage("duplicate"),event:this._duplicateView.bind(this),visible:!0}),(0,e.Immutable)({label:this.formatMessage("sectionDelete"),event:this._removeView.bind(this),visible:!0})],this.readonlyDropDownItems=[this.dropDownItems[0]],this.dropDownItemsWithoutDelete=[this.dropDownItems[0],this.dropDownItems[1]]}componentDidUpdate(e,t){!t.isEditingLabel&&this.state.isEditingLabel&&this._focusInput(),e.view.label!==this.props.view.label&&this.setState({currentLabel:this.props.view.label})}_removeView(){const{view:e,sectionId:i,selected:s}=this.props,o=(0,t.getAppConfigAction)().appConfig.sections[i].views;if(s){const s=o.indexOf(e.id);let n;n=s>0?o[s-1]:o[1],t.builderAppSync.publishSectionNavInfoToApp(i,{currentViewId:n,useProgress:!1})}(0,t.getAppConfigAction)().removeView(e.id,i).exec()}_duplicateView(){if(!this.props.view)return;const i=(0,t.getAppConfigAction)(),s=i.duplicateView(this.props.view.id,this.props.sectionId,!0);i.exec(),e.lodash.defer((()=>{this.props.onSelect(s.id)}))}_focusInput(){this.inputRef&&(this.inputRef.select(),this.inputRef.focus())}_getStyle(){return e.css`
    padding: 2px;
    cursor: pointer;
    position: relative;
    .drop-down {
      text-align:right;
      .popover{
        .popover-inner {
          box-shadow: 0 0 0;
        }
      }
    }
    .view-item-drag:hover {
      cursor: pointer !important;
    }
    .label-con {
      max-width: 9rem;
    }
    .label-input {
      max-width: 9rem;
    }
    .view-item-drag {
      z-index: 1;
      background-color: transparent;
      box-shadow: none;
    }
    `}render(){const{editable:t,view:s}=this.props,{isEditingLabel:o,currentLabel:n}=this.state,a=t?this.props.canRemove?this.dropDownItems:this.dropDownItemsWithoutDelete:this.readonlyDropDownItems;return(0,e.jsx)("div",{css:this._getStyle(),className:"d-flex justify-content-between flex-grow-1","data-testid":"viewItem"},(0,e.jsx)("div",{className:"w-100 view-item-drag d-flex justify-content-start"},(0,e.jsx)("div",{className:"align-items-center d-flex",css:e.css`width: 22px;`},s.icon?(0,e.jsx)(i.Icon,{icon:s.icon.svg}):(0,e.jsx)(ce,null)),(0,e.jsx)("div",{className:"d-flex align-items-center"},!o&&(0,e.jsx)("div",{title:n,className:"label-con text-truncate",onDoubleClick:this._enableEditing},n),o&&(0,e.jsx)("div",null,(0,e.jsx)(i.TextInput,{title:n,className:"label-input",type:"text",value:n,ref:e=>{this.inputRef=e},checkValidityOnChange:this._checkLabel,checkValidityOnAccept:this._checkLabel,onChange:this._onLabelChange,onAcceptValue:this._onLabelUpdate,onBlur:this._handleLabelInputBlur,onKeyUp:this._handleLabelInputEnter}))),(0,e.jsx)("div",{className:"drop-down d-flex toc-item-icon ml-auto"},(0,e.jsx)("div",{title:this.formatMessage("options")},(0,e.jsx)(i.Dropdown,{direction:"down",size:"sm",useKeyUpEvent:!0,toggle:this.toggleDropDown,isOpen:this.state.isDropDownOpen},(0,e.jsx)(i.DropdownButton,{arrow:!1,icon:!0,onClick:this.toggleDropDown,type:"tertiary"},(0,e.jsx)(ne,{size:"s"})),(0,e.jsx)(i.DropdownMenu,null,a.map(((t,s)=>(0,e.jsx)(i.DropdownItem,{key:s,onClick:t.event,a11yFocusBack:t.a11yFocusBack},t.label)))))))))}}var pe=h(5809);class ge extends e.React.PureComponent{constructor(){super(...arguments),this.getEchoBackground=()=>{var e;const{view:t,appTheme:s}=this.props,o=t.backgroundPosition?t.backgroundPosition.toUpperCase():"";let n,a;n=null==t.backgroundColor&&s?null===(e=null==s?void 0:s.sys.color.surface)||void 0===e?void 0:e.background:""===t.backgroundColor?"rgba(0,0,0,0)":t.backgroundColor?t.backgroundColor:"",t.backgroundIMage&&(a="object"==typeof t.backgroundIMage?t.backgroundIMage:{});return{fillType:o?i.FillType[o]:i.FillType.FIT,color:n,image:a}},this.onBackgroundStyleChange=e=>{this.setState({config:e});const i=e.image?e.image:{},{view:s}=this.props;(0,t.getAppConfigAction)().editViewProperty(s.id,"backgroundPosition",e.fillType).editViewProperty(s.id,"backgroundColor",e.color?e.color:null).editViewProperty(s.id,"backgroundIMage",i).exec()},this.onIconChange=e=>{const{view:i}=this.props;(0,t.getAppConfigAction)().editViewProperty(i.id,"icon",e).exec()},this.onLazyLoadChange=e=>{const{view:i}=this.props;(0,t.getAppConfigAction)().editViewProperty(i.id,"lazyLoad",e.target.checked).exec()}}render(){var t,s;const{view:o}=this.props;if(!o)return null;const a=[{svg:le(),properties:{filename:this.props.formatMessage("view")}}];return(0,e.jsx)("div",{role:"group","aria-label":o.label},(0,e.jsx)(n.SettingSection,null,(0,e.jsx)(n.SettingRow,{role:"group",label:this.props.formatMessage("icon"),"aria-label":this.props.formatMessage("icon")},(0,e.jsx)(pe.IconPicker,{previewOptions:{color:!0},configurableOption:"none",className:"flex-none",icon:null!==(t=o.icon)&&void 0!==t?t:a[0],onChange:this.onIconChange,customIcons:a,setButtonUseColor:!1,hideRemove:!0}))),(0,e.jsx)(n.SettingSection,{title:this.props.formatMessage("background")},(0,e.jsx)(n.SettingRow,{role:"group","aria-label":this.props.formatMessage("background"),className:"background-setting-con",flow:"wrap"},(0,e.jsx)(l.BackgroundSetting,{background:this.getEchoBackground(),onChange:e=>{this.onBackgroundStyleChange(e)}}))),(0,e.jsx)(n.SettingSection,null,(0,e.jsx)(n.SettingRow,null,(0,e.jsx)("div",{className:"d-flex align-items-center w-100"},(0,e.jsx)("label",null,(0,e.jsx)(i.Checkbox,{checked:null!==(s=o.lazyLoad)&&void 0!==s&&s,onChange:this.onLazyLoadChange}),(0,e.jsx)("span",{className:"ml-2"},this.props.formatMessage("lazyLoading"))),(0,e.jsx)(i.Tooltip,{placement:"bottom",showArrow:!0,title:this.props.formatMessage("lazyLoadingTip")},(0,e.jsx)(i.Button,{className:"ml-auto",size:"sm",type:"tertiary",icon:!0},(0,e.jsx)(v,null)))))))}}var ue=h(2491),he=h.n(ue),me=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const fe=t=>{const i=window.SVG,{className:s}=t,o=me(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:n,src:he()},o)):e.React.createElement("svg",Object.assign({className:n},o))};var ve=h(3593),xe=h.n(ve),be=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const we=t=>{const i=window.SVG,{className:s}=t,o=be(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:n,src:xe()},o)):e.React.createElement("svg",Object.assign({className:n},o))};var ye=h(9566),Ie=h.n(ye),Se=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const je=t=>{const i=window.SVG,{className:s}=t,o=Se(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:n,src:Ie()},o)):e.React.createElement("svg",Object.assign({className:n},o))};var Ce=h(8081),Ae=h.n(Ce),Me=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const Te=t=>{const i=window.SVG,{className:s}=t,o=Me(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:n,src:Ae()},o)):e.React.createElement("svg",Object.assign({className:n},o))};class Ne extends e.React.PureComponent{constructor(){super(...arguments),this.snapLeft=()=>{this.props.onDirectionChange("l")},this.snapRight=()=>{this.props.onDirectionChange("r")},this.snapTop=()=>{this.props.onDirectionChange("t")},this.snapBottom=()=>{this.props.onDirectionChange("b")}}render(){const{direction:t,formatMessage:s}=this.props;return(0,e.jsx)(i.ButtonGroup,{variant:"contained",color:"default",size:"sm"},(0,e.jsx)(i.Tooltip,{placement:"bottom",title:p.utils.isRTL()?s("right"):s("left")},(0,e.jsx)(i.Button,{icon:!0,active:"l"===t,"aria-pressed":"l"===t,onClick:this.snapLeft},(0,e.jsx)(fe,{size:"s",autoFlip:!0}))),(0,e.jsx)(i.Tooltip,{placement:"bottom",title:s("top")},(0,e.jsx)(i.Button,{icon:!0,active:"t"===t,"aria-pressed":"t"===t,onClick:this.snapTop},(0,e.jsx)(we,{size:"s"}))),(0,e.jsx)(i.Tooltip,{placement:"bottom",title:p.utils.isRTL()?s("left"):s("right")},(0,e.jsx)(i.Button,{icon:!0,active:"r"===t,"aria-pressed":"r"===t,onClick:this.snapRight},(0,e.jsx)(je,{size:"s",autoFlip:!0}))),(0,e.jsx)(i.Tooltip,{placement:"bottom",title:s("bottom")},(0,e.jsx)(i.Button,{icon:!0,active:"b"===t,"aria-pressed":"b"===t,onClick:this.snapBottom},(0,e.jsx)(Te,{size:"s"}))))}}var Pe=h(3662),ke=h.n(Pe),Re=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const Oe=t=>{const i=window.SVG,{className:s}=t,o=Re(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:n,src:ke()},o)):e.React.createElement("svg",Object.assign({className:n},o))},Be=[i.DistanceUnits.PIXEL];class Le extends e.React.PureComponent{constructor(i){super(i),this._addView=()=>{const{section:i}=this.props,s=(0,t.getAppConfigAction)(),o=s.addView(i.id);s.exec(),e.lodash.defer((()=>{this._selectView(o)}))},this._duplicateView=()=>{const{activeViewId:i,sectionId:s}=this.props,o=(0,t.getAppConfigAction)(),n=o.duplicateView(i,s,!0);o.exec(),e.lodash.defer((()=>{this._selectView(n.id)}))},this._showViewList=()=>{this.setState({isShowViewList:!0})},this._hideViewList=()=>{this.setState({isShowViewList:!1})},this._selectView=(e,i=!1)=>{const{section:s,activeViewId:o}=this.props;o!==e&&t.builderAppSync.publishSectionNavInfoToApp(s.id,{previousViewId:this.props.activeViewId,currentViewId:e,useProgress:!1}),i&&this.setState({showViewSetting:!0})},this.getStyle=()=>e.css`
      .toc-dropzone {
        margin-top: 0.5rem;
      }
      .toc-dropzone .jimu-widget-setting--row.row{
        margin-top: 0;
      }
      .jimu-widget-setting--row-label{
        color:${this.props.theme.ref.palette.neutral[1e3]};
      }
    `,this.hideViewSetting=()=>{this.setState({showViewSetting:!1})},this.onAutoPlayChanged=e=>{const{section:i}=this.props;(0,t.getAppConfigAction)().editSectionProperty(i.id,"autoPlay",e.target.checked).exec()},this.onLoopChanged=e=>{const{section:i}=this.props;(0,t.getAppConfigAction)().editSectionProperty(i.id,"loop",e.target.checked).exec()},this.onIntervalChanged=e=>{const i=+e;if(i>=1){const{section:e}=this.props;(0,t.getAppConfigAction)().editSectionProperty(e.id,"interval",i).exec()}},this.updateNav=(e,i,s)=>{const{section:o}=this.props;(0,t.getAppConfigAction)().editSectionProperty(o.id,`${e}.${i}`,s).exec()},this.viewListRef=e.React.createRef(),this.popperRef=e.React.createRef(),this.state={showViewSetting:!1,isShowViewList:!0}}render(){var s,o,a,r,c,d,g,u,h,m,f,v,x,b,w,y,I,S,j;const{section:C,views:A,theme:M,dispatch:T,activeViewId:N,editable:P,formatMessage:k}=this.props,{showViewSetting:R}=this.state;if(!C)return null;const O=e.css`
      cursor:pointer;
      margin-top: ${e.polished.rem(-8)};

      .toggle-view {
        transform: ${this.state.isShowViewList?null:"rotate(180deg)"};
      }
    `,B=A.find((e=>e.id===N)),L=null!==(o=null===(s=C.dotsNav)||void 0===s?void 0:s.position)&&void 0!==o?o:"b";return(0,e.jsx)("div",{className:"flexbox-layout-setting h-100",css:this.getStyle()},(0,e.jsx)("div",{className:"h-100 w-100"},(0,e.jsx)(n.SettingCollapse,{css:e.css`border-bottom: 1px solid var(--ref-palette-neutral-700)`,label:k("views"),className:"p-4",isOpen:this.state.isShowViewList,onRequestOpen:this._showViewList,onRequestClose:this._hideViewList},(0,e.jsx)(n.SettingRow,{className:"mt-4"},(0,e.jsx)(i.Button,{ref:this.popperRef,css:O,className:"w-100",type:"primary",onClick:this._addView,title:k("newView")},(0,e.jsx)(Oe,{className:"mr-0"}),(0,e.jsx)("span",{className:"ml-2"},k("newView")))),(0,e.jsx)("div",{ref:this.viewListRef,className:"toc-dropzone"},(0,e.jsx)(te.List,{size:"sm",className:"selected-fields-list",itemsJson:Array.from(A).map(((e,t)=>({itemStateDetailContent:e,itemStateChecked:N===e.id,itemKey:`${t}`}))),dndEnabled:!0,onUpdateItem:(e,i)=>{const{itemJsons:s}=i.props,[,o]=s,n=o.map((e=>e.itemStateDetailContent));e.updateType===te.TreeItemActionType.HandleDidDrop&&(0,t.getAppConfigAction)().editSectionProperty(C.id,"views",n.map((e=>e.id))).exec(),this._selectView(N)},onClickItemBody:(e,t)=>{const{itemJsons:i}=t.props,s=i[0].itemStateDetailContent;this._selectView(s.id,!0)},overrideItemBlockInfo:({itemBlockInfo:e})=>({name:te.TreeItemActionType.RenderOverrideItem,children:[{name:te.TreeItemActionType.RenderOverrideItemDroppableContainer,children:[{name:te.TreeItemActionType.RenderOverrideItemDraggableContainer,children:[{name:te.TreeItemActionType.RenderOverrideItemBody,children:[{name:te.TreeItemActionType.RenderOverrideItemDragHandle},{name:te.TreeItemActionType.RenderOverrideItemMainLine}]}]}]}]}),renderOverrideItemMainLine:(t,i)=>{const{itemJsons:s}=i.props,o=s[0],n=o.itemStateDetailContent,a=+o.itemKey;return(0,e.jsx)(de,{index:a,canRemove:A.length>1,formatMessage:k,isLastItem:a===A.length-1,dispatch:T,sectionId:C.id,theme:M,view:n,isFirstItem:0===a,onSelect:e=>{this._selectView(e,!0)},selected:N===n.id,editable:P})}}))),(0,e.jsx)(n.SettingSection,{role:"group","aria-label":k("tools"),title:k("tools")},(0,e.jsx)(n.SettingRow,{label:k("arrows")},(0,e.jsx)(i.Switch,{"aria-label":k("arrows"),checked:null===(a=C.arrowsNav)||void 0===a?void 0:a.visible,onChange:()=>{var e,t;this.updateNav("arrowsNav","visible",!(null!==(t=null===(e=C.arrowsNav)||void 0===e?void 0:e.visible)&&void 0!==t&&t))}})),(null===(r=C.arrowsNav)||void 0===r?void 0:r.visible)&&(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(n.SettingRow,{role:"group",label:k("direction"),"aria-label":k("direction")},(0,e.jsx)(n.DirectionSelector,{size:"sm",vertical:"v"===C.arrowsNav.direction,onChange:e=>{this.updateNav("arrowsNav","direction",e?"v":"h")}})),(0,e.jsx)(n.SettingRow,{role:"group",label:k("size"),"aria-label":k("size"),flow:"wrap"},(0,e.jsx)(i.Slider,{min:5,max:100,step:1,value:null!==(c=C.arrowsNav.size)&&void 0!==c?c:20,css:e.css`width: 50%`,"aria-label":k("size"),onChange:e=>{this.updateNav("arrowsNav","size",e.target.value)}}),(0,e.jsx)(l.InputUnit,{min:5,max:100,units:Be,onChange:e=>{this.updateNav("arrowsNav","size",e.distance)},value:`${null!==(d=C.arrowsNav.size)&&void 0!==d?d:20}px`,css:e.css`width: 40%; margin-left: auto;`})),(0,e.jsx)(n.SettingRow,{role:"group",label:k("offset"),"aria-label":k("offset"),flow:"wrap"},(0,e.jsx)(i.Slider,{min:-100,max:100,step:1,value:null!==(g=C.arrowsNav.offset)&&void 0!==g?g:8,css:e.css`width: 50%`,"aria-label":k("offset"),onChange:e=>{this.updateNav("arrowsNav","offset",e.target.value)}}),(0,e.jsx)(l.InputUnit,{min:-100,max:100,units:Be,value:`${null!==(u=C.arrowsNav.offset)&&void 0!==u?u:8}px`,onChange:e=>{this.updateNav("arrowsNav","offset",e.distance)},css:e.css`width: 40%; margin-left: auto;`}))),(0,e.jsx)(n.SettingRow,{label:k("dots")},(0,e.jsx)(i.Switch,{checked:null===(h=C.dotsNav)||void 0===h?void 0:h.visible,"aria-label":k("dots"),onChange:()=>{var e,t;this.updateNav("dotsNav","visible",!(null!==(t=null===(e=C.dotsNav)||void 0===e?void 0:e.visible)&&void 0!==t&&t))}})),(null===(m=C.dotsNav)||void 0===m?void 0:m.visible)&&(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(n.SettingRow,{role:"group",label:k("position"),"aria-label":k("position")},(0,e.jsx)(Ne,{direction:L,formatMessage:k,onDirectionChange:e=>{this.updateNav("dotsNav","position",e)}})),(0,e.jsx)(n.SettingRow,{role:"group",label:k("size"),"aria-label":k("size"),flow:"wrap"},(0,e.jsx)(i.Slider,{min:5,max:30,step:1,value:null!==(f=C.dotsNav.size)&&void 0!==f?f:8,css:e.css`width: 50%`,"aria-label":k("size"),onChange:e=>{this.updateNav("dotsNav","size",e.target.value)}}),(0,e.jsx)(l.InputUnit,{min:5,max:30,units:Be,value:`${null!==(v=C.dotsNav.size)&&void 0!==v?v:8}px`,onChange:e=>{this.updateNav("dotsNav","size",e.distance)},css:e.css`width: 40%; margin-left: auto;`})),(0,e.jsx)(n.SettingRow,{role:"group",label:k("offset"),"aria-label":k("offset"),flow:"wrap"},(0,e.jsx)(i.Slider,{min:-100,max:100,step:1,value:null!==(x=C.dotsNav.offset)&&void 0!==x?x:50,css:e.css`width: 50%`,"aria-label":k("offset"),onChange:e=>{this.updateNav("dotsNav","offset",e.target.value)}}),(0,e.jsx)(l.InputUnit,{min:-100,max:100,units:Be,value:`${null!==(b=C.dotsNav.offset)&&void 0!==b?b:50}px`,onChange:e=>{this.updateNav("dotsNav","offset",e.distance)},css:e.css`width: 40%; margin-left: auto;`})),(0,e.jsx)(n.SettingRow,{role:"group",label:k("spacing"),"aria-label":k("spacing"),flow:"wrap"},(0,e.jsx)(i.Slider,{min:0,max:30,step:1,value:null!==(w=C.dotsNav.spacing)&&void 0!==w?w:10,css:e.css`width: 50%`,"aria-label":k("spacing"),onChange:e=>{this.updateNav("dotsNav","spacing",e.target.value)}}),(0,e.jsx)(l.InputUnit,{min:0,max:30,units:Be,value:`${null!==(y=C.dotsNav.spacing)&&void 0!==y?y:10}px`,onChange:e=>{this.updateNav("dotsNav","spacing",e.distance)},css:e.css`width: 40%; margin-left: auto;`})))),(0,e.jsx)(n.SettingSection,{role:"group"},(0,e.jsx)(n.SettingRow,{label:k("autoPlay")},(0,e.jsx)(i.Switch,{"aria-label":k("autoPlay"),checked:C.autoPlay,onChange:this.onAutoPlayChanged})),C.autoPlay&&(0,e.jsx)(n.SettingRow,{label:k("interval")},(0,e.jsx)(i.NumericInput,{size:"sm",css:e.css`width: 4rem`,value:null!==(I=C.interval)&&void 0!==I?I:p.DEFAULT_AUTOPLAY_INTERVAL,min:1,max:3600,"aria-label":k("interval"),onAcceptValue:this.onIntervalChanged})),C.autoPlay&&(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(i.Label,{check:!0},(0,e.jsx)(i.Checkbox,{checked:null===(S=C.loop)||void 0===S||S,onChange:this.onLoopChanged,className:"mr-2"}),k("loop")))),(0,e.jsx)(n.SidePopper,{isOpen:R,position:"right",toggle:this.hideViewSetting,trigger:null===(j=this.viewListRef)||void 0===j?void 0:j.current,title:null==B?void 0:B.label,backToFocusNode:this.popperRef.current},(0,e.jsx)(ge,{formatMessage:k,appTheme:this.props.appTheme,view:B}))))}}const De=e.ReactRedux.connect(((t,i)=>{var s,o,n,a,l,r,c,d,p,g;const{sectionId:u}=i,{appConfig:h}=t.appStateInBuilder,m=h.sections[u];if(!m)return null;const f=m.views.map((e=>h.views[e])),v=null===(n=null===(o=null===(s=t.appStateInBuilder)||void 0===s?void 0:s.appRuntimeInfo)||void 0===o?void 0:o.sectionNavInfos)||void 0===n?void 0:n[m.id],x=null!==(a=null==v?void 0:v.currentViewId)&&void 0!==a?a:m.views[0],b=null!==(d=null===(c=null===(r=null===(l=t.appStateInBuilder)||void 0===l?void 0:l.appConfig)||void 0===r?void 0:r.forBuilderAttributes)||void 0===c?void 0:c.lockLayout)&&void 0!==d&&d,w=null===(g=null===(p=t.appStateInBuilder)||void 0===p?void 0:p.appRuntimeInfo)||void 0===g?void 0:g.appMode;return{section:m,views:f,activeViewId:x,browserSizeMode:t.appStateInBuilder&&t.appStateInBuilder.browserSizeMode,editable:w===e.AppMode.Design&&!b}}))(Le);var ze=h(6884);class Ee extends e.React.PureComponent{constructor(i){super(i),this.formatMessage=e=>this.props.formatMessage(e),this._enableEditing=e=>{e.stopPropagation(),this.setState({isEditingLabel:!0})},this._disableEditing=()=>{this._onLabelUpdate(this.inputRef.value),this.setState({isEditingLabel:!1})},this._handleInputEnter=e=>{"Enter"===e.key&&this.setState({isEditingLabel:!1})},this._onLabelUpdate=e=>{const{screen:i}=this.props;e&&`${e}`.trim().length>0?(0,t.getAppConfigAction)().editScreenProperty(i.id,"label",e).exec():this.inputRef.value=i.label},this._onLabelChange=e=>{this.setState({currentLabel:e.target.value})},this.toggleDropDown=e=>{null==e||e.stopPropagation(),this.setState({isDropDownOpen:!this.state.isDropDownOpen})},this.state={isEditingLabel:!1,currentLabel:this.props.screen.label,isDropDownOpen:!1},this.dropDownItems=[(0,e.Immutable)({label:this.formatMessage("rename"),event:this._enableEditing.bind(this),visible:!0,a11yFocusBack:!1}),(0,e.Immutable)({label:this.formatMessage("duplicate"),event:this._duplicateView.bind(this),visible:!0}),(0,e.Immutable)({label:this.formatMessage("sectionDelete"),event:this._removeScreen.bind(this),visible:!0})],this.readonlyDropDownItems=[this.dropDownItems[0]],this.dropDownItemsWithoutDelete=[this.dropDownItems[0],this.dropDownItems[1]]}componentDidUpdate(e,t){!t.isEditingLabel&&this.state.isEditingLabel&&this._focusInput(),e.screen.label!==this.props.screen.label&&this.setState({currentLabel:this.props.screen.label})}_removeScreen(e){e.stopPropagation();const{index:t}=this.props;this.props.onRemove(t)}_duplicateView(){const{index:e}=this.props;this.props.onDuplicate(e)}_focusInput(){this.inputRef&&(this.inputRef.select(),this.inputRef.focus())}_getStyle(){const{theme:t}=this.props;return e.css`
      padding: 2px 2px 2px 10px;
      cursor: pointer;
      position: relative;
      height: ${e.polished.rem(32)};

      .drop-down {
        text-align: right;
        .popover {
          .popover-inner {
            box-shadow: 0 0 0;
          }
        }
      }
      .drag-icon {
        visibility: hidden;
        color: ${t.ref.palette.neutral[1e3]};
        cursor: move;
      }
      .screen-item-drag:hover {
        cursor: pointer !important;
      }
      .label-con {
        max-width: 9rem;
      }
      .label-input {
        max-width: 9rem;
      }
      .screen-item-drag {
        z-index: 1;
        background-color: transparent;
        box-shadow: none;
      }
    `}render(){const{index:t,browserSizeMode:s,editable:o}=this.props,{label:n}=this.props.screen,{isEditingLabel:a}=this.state,l=!o||s!==e.BrowserSizeMode.Large?this.readonlyDropDownItems:this.props.canRemove?this.dropDownItems:this.dropDownItemsWithoutDelete;return(0,e.jsx)("div",{css:this._getStyle(),className:"d-flex justify-content-between flex-grow-1","data-testid":"screenItem"},(0,e.jsx)("div",{className:"w-100 screen-item-drag d-flex justify-content-between","data-index":t},(0,e.jsx)("div",{className:"d-flex align-items-center"},!a&&(0,e.jsx)("div",{title:n,className:"label-con text-truncate",onDoubleClick:this._enableEditing},n),a&&(0,e.jsx)("div",null,(0,e.jsx)(i.TextInput,{title:n,className:"label-input",type:"text",value:this.state.currentLabel,ref:e=>{this.inputRef=e},onChange:this._onLabelChange,onAcceptValue:this._disableEditing,onKeyUp:this._handleInputEnter}))),(0,e.jsx)("div",{className:"drop-down d-flex toc-item-icon"},(0,e.jsx)("div",{title:this.formatMessage("options"),css:e.css`
              & > div {
                height: 100%;
              }
            `},(0,e.jsx)(i.Dropdown,{direction:"down",size:"sm",useKeyUpEvent:!0,toggle:this.toggleDropDown,isOpen:this.state.isDropDownOpen},(0,e.jsx)(i.DropdownButton,{arrow:!1,icon:!0,onClick:this.toggleDropDown,type:"tertiary"},(0,e.jsx)(ne,{size:"s"})),(0,e.jsx)(i.DropdownMenu,null,l.map(((t,s)=>(0,e.jsx)(i.DropdownItem,{key:s,onClick:t.event,a11yFocusBack:t.a11yFocusBack},t.label)))))))))}}const We=e.ReactRedux.connect(((e,t)=>{const{screenId:i}=t,{appConfig:s}=e.appStateInBuilder;return{screen:s.screens[i]}}))(Ee);var Ue=h(8710),Ve=h.n(Ue),Fe=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const He=t=>{const i=window.SVG,{className:s}=t,o=Fe(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:n,src:Ve()},o)):e.React.createElement("svg",Object.assign({className:n},o))},Ge=[i.DistanceUnits.PIXEL,i.DistanceUnits.PERCENTAGE];class $e extends e.React.PureComponent{constructor(s){super(s),this.onMainBackgroundChange=e=>{const{screen:i}=this.props;(0,t.getAppConfigAction)().editScreenProperty(i.id,"main.background",e).exec()},this.onSideBackgroundChange=e=>{const{screen:i}=this.props;(0,t.getAppConfigAction)().editScreenProperty(i.id,"panel.background",e).exec()},this.setOverlay=e=>{const{screen:i}=this.props,s=(0,t.getAppConfigAction)();s.editScreenProperty(i.id,"panel.overlay",e),e||(s.editScreenProperty(i.id,"panel.offset",0),"center"===i.panel.side&&s.editScreenProperty(i.id,"panel.side","left")),s.exec()},this.updateWidth=e=>{var s,o,n;const{screen:a,viewportSize:l}=this.props,{distance:r,unit:c}=e;let d;if(p.utils.isPercentage(null===(s=a.panel)||void 0===s?void 0:s.size)&&c===i.DistanceUnits.PIXEL){const t=p.utils.fromRatio(null===(o=a.panel)||void 0===o?void 0:o.size,l.width);d=`${Math.round(t)}${e.unit}`}else if(p.utils.isPercentage(null===(n=a.panel)||void 0===n?void 0:n.size)||c!==i.DistanceUnits.PERCENTAGE)d=`${e.distance}${e.unit}`;else{d=`${p.utils.toRatio(r,l.width)}`}(0,t.getAppConfigAction)().editScreenProperty(a.id,"panel.size",d).exec()},this.updateSide=e=>{const{screen:i}=this.props;(0,t.getAppConfigAction)().editScreenProperty(i.id,"panel.side",e).exec()},this.updateOffsetX=e=>{const{screen:i}=this.props;(0,t.getAppConfigAction)().editScreenProperty(i.id,"panel.offset",`${e}px`).exec()},this.updatePadding=e=>{const{screen:i}=this.props;(0,t.getAppConfigAction)().editScreenProperty(i.id,"panel.padding",e).exec()},this.handleGapChange=e=>{const{screen:i}=this.props,s=(0,t.getAppConfigAction)();s.editScreenProperty(i.id,"panel.gap",e.distance),Object.keys(i.panel.layout).map((e=>i.panel.layout[e])).forEach((t=>{s.editLayoutProperty(t,"setting.space",e.distance)})),s.exec()},this._getStyle=()=>{const t=this.props.theme?this.props.theme.ref.palette.neutral[1e3]:"#c5c5c5",i=this.props.theme?this.props.theme.ref.palette.neutral[1e3]:"#a8a8a8";return e.css`
      height: 100%;
      overflow: auto;
      & {
        width: 100%;
      }
      .inner-section {
        border-bottom: none;
        padding-bottom: 0;
      }
      .back-btn-con {
        margin: 1rem 0.25rem 0;
        cursor: pointer;
        align-items: center;
      }
      .screen-group-title {
        margin: 1rem 1rem 0;
      }
      .background-set-back {
        color: ${i};
        font-weight: 500;
      }
      .background-setting-con .form-group {
        margin-bottom: ${e.polished.rem(16)};
      }
      .background-setting-header {
        color: ${t};
        font-weight: 500;
      }
    `},this.isRTL=(0,e.getAppStore)().getState().appContext.isRTL}render(){var t,s,o;const{screen:a,formatMessage:r}=this.props;return a?(0,e.jsx)("div",{css:this._getStyle(),className:"pb-2"},(0,e.jsx)("div",{role:"group","aria-label":r("mainStage")},(0,e.jsx)("div",{className:"screen-group-title"},r("mainStage")),(0,e.jsx)(n.SettingSection,{title:r("background")},(0,e.jsx)(n.SettingRow,{role:"group","aria-label":r("background")},(0,e.jsx)(l.BackgroundSetting,{background:a.main.background,onChange:e=>{this.onMainBackgroundChange(e)}})))),a.panel&&(0,e.jsx)("div",{role:"group","aria-label":r("scrollingPanel")},(0,e.jsx)("div",{className:"screen-group-title"},r("scrollingPanel")),(0,e.jsx)(n.SettingSection,{className:"inner-section",role:"group","aria-label":r("mode"),title:r("mode")},(0,e.jsx)("div",null,(0,e.jsx)(i.Label,{className:"mr-4 d-flex align-items-center"},(0,e.jsx)(i.Radio,{className:"mr-2",onChange:()=>{this.setOverlay(!1)},value:"docked",checked:!(null!==(t=a.panel.overlay)&&void 0!==t&&t)}),r("docked"))),(0,e.jsx)("div",null,(0,e.jsx)(i.Label,{className:"mr-4 d-flex align-items-center"},(0,e.jsx)(i.Radio,{className:"mr-2",onChange:()=>{this.setOverlay(!0)},value:"floating",checked:a.panel.overlay}),r("floatingScreen")))),(0,e.jsx)(n.SettingSection,{className:"inner-section",role:"group","aria-label":r("size"),title:r("size")},(0,e.jsx)(n.SettingRow,{label:r("width")},(0,e.jsx)("div",{style:{width:110}},(0,e.jsx)(l.InputUnit,{"aria-label":r("width"),units:Ge,min:0,max:1/0,value:p.utils.normalizeLinearUnit(a.panel.size),onChange:this.updateWidth})))),(0,e.jsx)(n.SettingSection,{className:"inner-section",role:"group","aria-label":r("position"),title:r("position")},(0,e.jsx)(n.SettingRow,{label:r("align")},(0,e.jsx)(i.ButtonGroup,{size:"sm"},(0,e.jsx)(i.Tooltip,{title:r(this.isRTL?"right":"left"),placement:"bottom"},(0,e.jsx)(i.Button,{icon:!0,"aria-label":r("align"),active:"left"===a.panel.side,"aria-pressed":"left"===a.panel.side,onClick:()=>{this.updateSide("left")}},(0,e.jsx)(fe,{size:"s",autoFlip:!0}))),a.panel.overlay&&(0,e.jsx)(i.Tooltip,{title:r("center"),placement:"bottom"},(0,e.jsx)(i.Button,{icon:!0,"aria-label":r("align"),active:"center"===a.panel.side,"aria-pressed":"center"===a.panel.side,onClick:()=>{this.updateSide("center")}},(0,e.jsx)(He,{size:"s"}))),(0,e.jsx)(i.Tooltip,{title:r(this.isRTL?"left":"right"),placement:"bottom"},(0,e.jsx)(i.Button,{icon:!0,"aria-label":r("align"),active:"right"===a.panel.side,"aria-pressed":"right"===a.panel.side,onClick:()=>{this.updateSide("right")}},(0,e.jsx)(je,{size:"s",autoFlip:!0}))))),(null===(s=a.panel)||void 0===s?void 0:s.overlay)&&(0,e.jsx)(n.SettingRow,{label:r("offsetX")},(0,e.jsx)(i.NumericInput,{value:parseInt(null!==(o=a.panel.offset)&&void 0!==o?o:"0"),onChange:this.updateOffsetX,size:"sm",css:e.css`width: 110px`,"aria-label":r("offsetX")}))),(0,e.jsx)(n.SettingSection,{className:"inner-section",title:r("gap")},(0,e.jsx)(n.SettingRow,{role:"group"},(0,e.jsx)(l.InputUnit,{"aria-label":r("gap"),className:"w-100",value:{distance:a.panel.gap>=0?a.panel.gap:10,unit:void 0},min:0,onChange:this.handleGapChange}))),(0,e.jsx)(n.SettingSection,{className:"inner-section",title:r("padding")},(0,e.jsx)(n.SettingRow,{role:"group","aria-label":r("padding")},(0,e.jsx)(l.Padding,{value:a.panel.padding,onChange:this.updatePadding}))),(0,e.jsx)(n.SettingSection,{className:"inner-section",title:r("background")},(0,e.jsx)(n.SettingRow,{role:"group","aria-label":r("background")},(0,e.jsx)(l.BackgroundSetting,{background:a.panel.background,onChange:e=>{this.onSideBackgroundChange(e)}}))))):null}}const Ze=e.ReactRedux.connect(((t,i)=>{const{screenId:s}=i,{appConfig:o}=t.appStateInBuilder,n=e.utils.findViewportSize(o,t.browserSizeMode||e.BrowserSizeMode.Large);return{screen:o.screens[s],viewportSize:n}}))($e);class _e extends e.React.PureComponent{constructor(i){super(i),this.sidePopperTrigger=e.React.createRef(),this.formatMessage=(t,i=!1)=>i?this.props.intl.formatMessage({id:t,defaultMessage:e.defaultMessages[t]}):this.props.formatMessage(t),this._addScreen=e=>{const i=(0,t.getAppConfigAction)(),{screenGroupId:s}=this.props;i.createScreenFromTemplate(e.screenId,e).then((e=>{let o=i.appConfig;o=o.setIn(["screenGroups",s,"screens"],[].concat(o.screenGroups[s].screens,e)).setIn(["screens",e,"parent"],s),t.builderAppSync.publishAppConfigChangeToApp(o),t.builderAppSync.publishScreenGroupNavInfoToApp(s,o.screenGroups[s].screens.length-1)})),this.closeScreenPopper()},this._duplicateScreen=e=>{const{screenGroupId:i}=this.props,s=(0,t.getAppConfigAction)();s.duplicateScreenByIndex(e,i),s.exec(),t.builderAppSync.publishScreenGroupNavInfoToApp(i,e+1)},this._duplicateActiveScreen=()=>{this._duplicateScreen(this.props.activeScreen)},this._selectScreen=e=>{const{screenGroupId:i,activeScreen:s}=this.props;s!==e&&t.builderAppSync.publishScreenGroupNavInfoToApp(i,e),this.setState({showScreenSetting:!0})},this._removeScreen=e=>{const{screenGroupId:i,screens:s,activeScreen:o}=this.props;(0,t.getAppConfigAction)().removeScreen(s[e],i).exec(),(o>e||o===e&&o===s.length-1)&&t.builderAppSync.publishScreenGroupNavInfoToApp(i,o-1)},this.getStyle=()=>e.css`
      .screen-list {
        padding: 0 1rem;
      }

      .setting-header {
        margin-bottom: 1rem;
      }

      .screen-group-title {
        font-size: 14px;
        color: var(--ref-palette-neutral-1200);
      }
    `,this.hideScreenSetting=()=>{this.setState({showScreenSetting:!1})},this.toggleScreenPopper=()=>{if(this.props.hasPanel)this.setState({showPopper:!this.state.showPopper});else{const e=(0,ze.getScreenTemplates)().find((e=>"nopanel"===e.name));e&&this._addScreen(e)}},this.closeScreenPopper=()=>{this.setState({showPopper:!1})},this.popperRef=e.React.createRef(),this.state={showPopper:!1,showScreenSetting:!1}}showEditButtons(){const{editable:t,browserSizeMode:i}=this.props,s=i===e.BrowserSizeMode.Large;return t&&s}render(){var s;const{screenGroupId:o,screens:a,theme:l,dispatch:r,activeScreen:c,browserSizeMode:d,editable:p}=this.props,{showScreenSetting:g}=this.state;if(!a)return null;const u=e.css`
      cursor: pointer;
      margin-top: ${e.polished.rem(-8)};
    `;return(0,e.jsx)("div",{className:"screen-group-setting mb-5",css:this.getStyle(),role:"group","aria-label":this.formatMessage("screen")},(0,e.jsx)("div",{className:"h-100 screen-list",ref:this.sidePopperTrigger},(0,e.jsx)("div",{className:"d-flex align-items-center setting-header"},(0,e.jsx)("div",{title:this.formatMessage("screen"),className:"screen-group-title"},this.formatMessage("screen"))),this.showEditButtons()&&(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)("div",{className:"mt-4"},(0,e.jsx)(i.Button,{ref:this.popperRef,"aria-label":this.formatMessage("newScreen"),css:u,type:"primary",onClick:this.toggleScreenPopper,className:"w-100"},(0,e.jsx)(Oe,{className:"mr-0"}),(0,e.jsx)("span",{className:"ml-2"},this.formatMessage("newScreen")))),this.state.showPopper&&(0,e.jsx)(n.TemplateSelector,{templates:(0,ze.getScreenTemplates)(),referenceElement:this.popperRef.current,onItemSelect:this._addScreen,onClose:this.closeScreenPopper})),(0,e.jsx)(te.List,{size:"sm",className:"selected-fields-list mt-4",itemsJson:Array.from(a).map(((e,t)=>({itemStateDetailContent:e,itemStateChecked:a[c]===e,itemKey:`${t}`}))),dndEnabled:!0,onUpdateItem:(e,i)=>{const{itemJsons:s}=i.props,[,n]=s,l=n.map((e=>e.itemStateDetailContent)),r=a[c],d=l.indexOf(r);(0,t.getAppConfigAction)().editScreenGroupProperty(o,"screens",l).exec(),this._selectScreen(d)},onClickItemBody:(e,t)=>{const{itemJsons:i}=t.props,s=+i[0].itemKey;this._selectScreen(s)},overrideItemBlockInfo:({itemBlockInfo:e})=>({name:te.TreeItemActionType.RenderOverrideItem,children:[{name:te.TreeItemActionType.RenderOverrideItemDroppableContainer,children:[{name:te.TreeItemActionType.RenderOverrideItemDraggableContainer,children:[{name:te.TreeItemActionType.RenderOverrideItemBody,children:[{name:te.TreeItemActionType.RenderOverrideItemDragHandle},{name:te.TreeItemActionType.RenderOverrideItemMainLine}]}]}]}]}),renderOverrideItemMainLine:(t,i)=>{const{itemJsons:s}=i.props,n=s[0],g=n.itemStateDetailContent,u=+n.itemKey;return(0,e.jsx)(We,{key:g,index:u,screenGroupId:o,screenId:g,canRemove:a.length>1,formatMessage:this.formatMessage,dispatch:r,theme:l,editable:p,onRemove:this._removeScreen,onDuplicate:this._duplicateScreen,selected:a[c]===g,browserSizeMode:d})}})),(0,e.jsx)(n.SidePopper,{isOpen:g,position:"right",toggle:this.hideScreenSetting,trigger:null===(s=this.sidePopperTrigger)||void 0===s?void 0:s.current,title:this.props.activeScreenLabel,backToFocusNode:this.popperRef.current},(0,e.jsx)(Ze,{formatMessage:this.formatMessage,theme:this.props.theme,screenId:a[c],hideBackgroundWidget:this.hideScreenSetting})))}}const Je=e.ReactRedux.connect(((t,i)=>{var s,o,n,a,l,r,c,d,p,g,u,h;const{screenGroupId:m}=i,{appConfig:f}=t.appStateInBuilder,v=f.screenGroups[m];if(!v)return null;const x=f.screens[v.screens[0]],b=null!==(a=null===(n=null===(o=null===(s=t.appStateInBuilder)||void 0===s?void 0:s.appConfig)||void 0===o?void 0:o.forBuilderAttributes)||void 0===n?void 0:n.lockLayout)&&void 0!==a&&a,w=null===(r=null===(l=t.appStateInBuilder)||void 0===l?void 0:l.appRuntimeInfo)||void 0===r?void 0:r.appMode,y=v.screens,I=null!==(u=null===(g=null===(p=null===(d=null===(c=t.appStateInBuilder)||void 0===c?void 0:c.appRuntimeInfo)||void 0===d?void 0:d.screenGroupNavInfos)||void 0===p?void 0:p[m])||void 0===g?void 0:g.activeIndex)&&void 0!==u?u:0,S=y[I];return{screens:y,activeScreen:I,activeScreenLabel:null===(h=f.screens[S])||void 0===h?void 0:h.label,browserSizeMode:t.appStateInBuilder.browserSizeMode,hasPanel:null!=x.panel,editable:w===e.AppMode.Design&&!b}}))(_e);class Qe extends e.React.PureComponent{constructor(){super(...arguments),this.renderItemSetting=()=>{let i=null;if(this.props.layoutType===e.LayoutType.FixedLayout){let t=!1;const s=(0,e.getAppStore)().getState().appStateInBuilder.appConfig,o=s.layouts[this.props.layoutId];if(o.parent.type===e.LayoutParentType.Widget){const e=o.parent.id;"widgets/common/controller/"===s.widgets[e].uri&&(t=!0)}t||(i=d.FixedLayoutItemSetting)}else if(this.props.layoutType===e.LayoutType.FlowLayout)i=d.FlowLayoutItemSetting;else if(this.props.layoutType===e.LayoutType.ColumnLayout)i=d.ColumnLayoutItemSetting;else if(this.props.layoutType===e.LayoutType.RowLayout)i=d.RowLayoutItemSetting;else if(this.props.layoutType===e.LayoutType.GridLayout)i=d.GridLayoutItemSetting;else if(this.props.layoutType===e.LayoutType.AccordionLayout)i=d.AccordionLayoutItemSetting;else{const{containerWidgetId:e,hasLayoutSetting:s}=this.props;s&&(i=t.WidgetSettingManager.getInstance().getItemSettingClass(e))}return i?(0,e.jsx)(e.ErrorBoundary,null,(0,e.jsx)(i,{layoutId:this.props.layoutId,layoutItem:this.props.layoutItem,isLockLayout:this.props.isLockLayout,supportAutoSize:this.props.supportAutoSize,style:this.props.style,onSettingChange:this.props.onSettingChanged,onStyleChange:this.props.onStyleChange,onPosChange:this.props.onPosChanged,formatMessage:this.props.formatMessage})):(0,e.jsx)(n.SettingSection,null,(0,e.jsx)("div",{className:"w-100 justify-content-center d-flex"},this.props.formatMessage("noStyle")))}}componentDidUpdate(){this.loadItemSettingClass()}componentDidMount(){this.loadItemSettingClass()}loadItemSettingClass(){const{containerWidgetId:e,hasLayoutSetting:i}=this.props;e&&i&&!t.WidgetSettingManager.getInstance().getItemSettingClass(e)&&t.WidgetSettingManager.getInstance().loadItemSettingClass(e)}getStyle(){return e.css`
      &.single-setting {
        border-top: 1px solid var(--ref-palette-neutral-700);
      }
    `}render(){const{isSingle:t=!1}=this.props;return(0,e.jsx)("div",{className:(0,e.classNames)("setting-container",{"single-setting":t}),css:this.getStyle()},this.renderItemSetting())}}const Ke=e.ReactRedux.connect(((t,i)=>{var s,o,n,a,l,r,c,d,g,u,h,m;const{layoutId:f,layoutItemId:v}=i,x=null===(s=t.appStateInBuilder)||void 0===s?void 0:s.appConfig.layouts,b=null==x?void 0:x[f];let w=null,y=!0;if(!b)return null;const I=p.searchUtils.findLayoutItem(t.appStateInBuilder.appConfig,{layoutId:f,layoutItemId:v}),S=p.searchUtils.getWidgetIdThatUseTheLayoutId(t.appStateInBuilder.appConfig,f);let j=!1;if(S){j=null!==(a=null===(n=null===(o=t.appStateInBuilder.appConfig.widgets[S].manifest)||void 0===o?void 0:o.properties)||void 0===n?void 0:n.hasLayoutItemSettingPage)&&void 0!==a&&a}const C=null==I?void 0:I.type;if(C===e.LayoutItemType.Widget)if(I.widgetId){const e=t.appStateInBuilder.appConfig.widgets[I.widgetId];w=e.style,y=null===(c=null===(r=null===(l=e.manifest)||void 0===l?void 0:l.properties)||void 0===r?void 0:r.supportAutoSize)||void 0===c||c}else w=null===(d=I.setting)||void 0===d?void 0:d.placeholderStyle,y=!1;else C===e.LayoutItemType.Section&&(w=t.appStateInBuilder.appConfig.sections[I.sectionId].style,y=!1);return{containerWidgetId:S,hasLayoutSetting:j,style:w,supportAutoSize:y,layoutType:b.type,layoutItem:I,runtimeInfo:t.builder.widgetsSettingRuntimeInfo[S],isLockLayout:null!==(m=null===(h=null===(u=null===(g=t.appStateInBuilder)||void 0===g?void 0:g.appConfig)||void 0===u?void 0:u.forBuilderAttributes)||void 0===h?void 0:h.lockLayout)&&void 0!==m&&m}}))(Qe);var Ye=h(6300),Xe=h.n(Ye),qe=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const et=t=>{const i=window.SVG,{className:s}=t,o=qe(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:n,src:Xe()},o)):e.React.createElement("svg",Object.assign({className:n},o))};var tt;!function(e){e.MessageChoose="MESSAGECHOOSE",e.TargetChoose="TARGETCHOOSE",e.ActionChoose="ACTIONCHOOSE",e.ActionSetting="ACTIONSETTING"}(tt||(tt={}));class it extends e.React.PureComponent{getStyle(t){var i,s;return e.css`
      .setting-header {
        padding: ${e.polished.rem(16)} ${e.polished.rem(16)} ${e.polished.rem(0)} ${e.polished.rem(16)}
      }
      .panel-header {
        overflow: hidden;
      }
      .setting-title {
        font-size: ${e.polished.rem(16)};
        color: ${null===(s=null===(i=null==t?void 0:t.ref.palette)||void 0===i?void 0:i.neutral)||void 0===s?void 0:s[1e3]}
      }
      .back-setting {
        padding: 0;
        &:hover {
          svg {
            color: var(--ref-palette-black) !important;
          }
        }
      }
    `}render(){var t;return(0,e.jsx)("div",{className:"w-100 h-100",css:this.getStyle(this.props.theme)},(0,e.jsx)("div",{className:"w-100 d-flex align-items-center justify-content-between setting-header border-0"},(null===(t=this.props.Routes)||void 0===t?void 0:t.length)>1&&!this.props.hideBackArrow&&(0,e.jsx)(i.Button,{type:"tertiary",size:"sm",icon:!0,className:"d-flex align-items-center h-100 back-setting mr-2",style:{cursor:"pointer"},title:this.props.title,onClick:this.props.onBack},(0,e.jsx)(et,{autoFlip:!0})),(0,e.jsx)(i.PanelHeader,{level:1,className:"flex-grow-1 p-0",showClose:!0,onClose:this.props.onClose,title:this.props.title})),this.props.children)}}const st=(0,z.withTheme)(it);var ot=h(170),nt=h.n(ot),at=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const lt=t=>{const i=window.SVG,{className:s}=t,o=at(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:n,src:nt()},o)):e.React.createElement("svg",Object.assign({className:n},o))};var rt;!function(e){e.Small="SMALL",e.Medium="MEDIUM",e.Large="LARGE",e.Pending="PENDING"}(rt||(rt={}));const ct=(i,s)=>{var o,n;const a=(0,t.getAppConfigAction)().appConfig.widgets[i].manifest.publishMessages,l=e.i18n.getIntl(),r=[];if(a)for(let t=0;t<a.length;t++){let i=!1;if(s)for(let e=0;e<s.length;e++){const l=(null===(o=a[t])||void 0===o?void 0:o.messageType)?null===(n=a[t])||void 0===n?void 0:n.messageType:a[t];if(s[e].messageType===l){i=!0;break}}if(!i){const i=a[t],s=(null==i?void 0:i.messageType)||i;r.push({messageType:s,messageLabel:(0,e.getMessageTypeLabel)(s,l)})}}return(0,e.Immutable)(r)},dt=(e,i,s=!1)=>{const o=[];let n=[];const a=[],l=(0,t.getAppConfigAction)().appConfig,r=t.AppMessageManager.getInstance().getFilteredActions(e,i);for(let t=0;t<r.length;t++){const c=r[t].widgetId;if(c){const n=ft(c),d=xt(c),p=!n&&!d&&c,g=gt(e,i,r[t]).includes(c)&&s;if(!a.includes(c)&&(p||g)){a.push(c);const e=l.widgets[c];if(e){if(e.id===i)continue;o.push(e)}}}else{n=[{uri:r[t].id,label:"Framework"}]}}return{widgetTargets:o,frameWorkTargets:n}};function pt(e,i){const s=t.AppMessageManager.getInstance().getAllActions();let o=null,n=null;for(let t=0;t<s.length;t++)if(e.actionId.includes(s[t].id)){o=s[t];break}return o&&(n=t.AppMessageManager.getInstance().getActionSettingComponentUri(o,i,e.messageWidgetId)),n}function gt(e,i,s){var o;const n=s.widgetId;if(!n)return[];const a=null===(o=(0,t.getAppConfigAction)().appConfig)||void 0===o?void 0:o.messageConfigs,l=[];return Object.keys(a).forEach((t=>{const o=a[t];if((null==o?void 0:o.widgetId)===i&&e===(null==o?void 0:o.messageType)){((null==o?void 0:o.actions)||[]).forEach((e=>{(null==e?void 0:e.widgetId)===n&&l.push(n||(null==s?void 0:s.name))}))}})),l}const ut=(e,i,s)=>{const o=[],n=[];e.id;const a=t.AppMessageManager.getInstance().getFilteredActions(s,i);for(let t=0;t<a.length;t++)n.includes(a[t].name)||a[t].widgetId!==e.id||(n.push(a[t].name),o.push(a[t]));return o};const ht=(e,t,i)=>{const{useDataSources:s,config:o,actionId:n}=e;if(function(e,t){var i;const s=mt(e,t)||[],o=mt(t,e)||[];return(null===(i=s.concat(o))||void 0===i?void 0:i.length)>0}(null==i?void 0:i.config,o)&&n===(null==i?void 0:i.actionId)){const e=Object.assign([],t.actions);let a=null;for(let t=0;t<e.length;t++)if(e[t].actionId===n&&e[t].widgetId===i.widgetId){e[t]=e[t].set("config",o).set("useDataSources",s),a=e[t];break}return{action:a,message:t=t.set("actions",e)}}},mt=(e,t)=>{const i=[],s=(e,t,o)=>{for(const n in e){const a=e[n],l=null==t?void 0:t[n],r=o?`${o}.${n}`:n;"object"==typeof a&&"object"==typeof l?s(a,l,r):a!==l&&i.push(r)}};return s(e,t,""),i};function ft(e){if(!e)return!1;let t=!0;const i=yt();return Object.keys(i).forEach((s=>{i[s].includes(e)&&(t=!1)})),t}function vt(e){const t=[],i=wt(),s=bt();if(!(null==s?void 0:s.includes(e)))for(const s in i){i[s].includes(e)&&t.push(s)}return ft(e)&&0===(null==t?void 0:t.length)&&t.push(rt.Pending),t}function xt(e){const t=bt();if(null==t?void 0:t.includes(e))return!1;const i=wt();let s=!1;for(const t in i){i[t].includes(e)&&(s=!0)}return s}function bt(){const t=(0,e.getAppStore)().getState().appStateInBuilder.browserSizeMode,i=yt();return(null==i?void 0:i[t])||[]}function wt(){const t=yt(),i=(0,e.getAppStore)().getState().appStateInBuilder.browserSizeMode;return(null==t?void 0:t[i])&&(t[i]=[]),t}function yt(){const t={SMALL:[],MEDIUM:[],LARGE:[]},i=It(e.ContainerType.Page),s=It(e.ContainerType.Dialog),o=It(e.ContainerType.Header),n=It(e.ContainerType.Footer);for(const e in t){const a=i[e].concat(s[e]).concat(o[e]).concat(n[e]);t[e]=a}return t}function It(t){const i=(0,e.getAppStore)().getState().appStateInBuilder,s=null==i?void 0:i.appConfig,o=function(t){const i=(0,e.getAppStore)().getState().appStateInBuilder,s=null==i?void 0:i.appConfig,o=(null==s?void 0:s.pages)||{},n=(null==s?void 0:s.dialogs)||{};let a;switch(t){case e.ContainerType.Page:a=o;break;case e.ContainerType.Dialog:a=n;break;case e.ContainerType.Header:a={header:(null==s?void 0:s.header)||{}};break;case e.ContainerType.Footer:a={footer:(null==s?void 0:s.footer)||{}}}return a}(t),n={SMALL:[],MEDIUM:[],LARGE:[]};if(!o)return n;for(const i in o){const a=o[i];if(t===e.ContainerType.Page&&(!(null==a?void 0:a.layout)||(null==a?void 0:a.type)!==e.PageType.Normal))continue;const l=(null==a?void 0:a.layout)||{};for(const i in l){const o={type:t,id:null==a?void 0:a.id},l=p.searchUtils.getContentsInContainerRecursive(s,o,e.LayoutItemType.Widget,i);let r=(null==n?void 0:n[i])||[];r=r.concat(l),n[i]=r}}return n}class St extends e.React.PureComponent{constructor(){super(...arguments),this.searchItems=e=>{},this.onSelectMessageType=i=>{const s=t.messageActionUtils.getNewMessage(i,this.props.widgetId);this.props.onSelected((0,e.Immutable)(s))}}getStyle(t){return e.css`
      height: calc(100% - 3.125rem);
      overflow-y: auto;

      .choose-message-list {
        .list-item {
          color: ${t.ref.palette.black};
        }
        .searchIcon {
          cursor: pointer;
          position: absolute;
          right: 1.2rem;
          margin-top: 0.3rem;
          background-color: ${e.polished.rgba(t.ref.palette.white,1)};
          color: ${t.ref.palette.neutral[800]} !important;
        }

        .list{
          .list-item{
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            border: 1px solid transparent;
            cursor: pointer;
            background-color: ${t.ref.palette.neutral[500]};
            user-select: none;
            font-size: ${e.polished.rem(13)};
          }
          .list-item:hover{
            background-color: ${t.ref.palette.neutral[600]};
          }
          .list-item:active.list-item:hover{
            background-color: ${t.ref.palette.white};
          }
        }
      }
    `}render(){const{widgetId:t,messages:s}=this.props,o=ct(t,s);return(0,e.jsx)("div",{className:"w-100",css:this.getStyle(this.props.theme)},(0,e.jsx)("div",{className:"w-100 choose-message-list"},(0,e.jsx)(n.SettingSection,null,(0,e.jsx)(n.SettingRow,null,(0,e.jsx)("div",{className:"w-100",style:{display:"none"}},(0,e.jsx)(i.TextInput,{className:"w-100",placeholder:this.props.formatMessage("chooseSearchTrigger"),onChange:this.searchItems,value:""}),(0,e.jsx)(lt,{className:"p-0 searchIcon"})),(0,e.jsx)("div",{className:"w-100 list"},0===o.length&&(0,e.jsx)("div",{className:"d-flex mb-2 p-1 text-break"},this.props.formatMessage("noMessage")),o.length>0&&o.map(((t,s)=>(0,e.jsx)(i.Button,{variant:"text",color:"default",className:"justify-content-start list-item mb-2 pt-1 pb-1 pl-2 pr-2 w-100 align-items-center",key:s,onClick:()=>{this.onSelectMessageType(t.messageType)},title:t.messageLabel},(0,e.jsx)("div",{className:"w-100 text-left text-truncate"},t.messageLabel)))))))))}}const jt=(0,z.withTheme)((0,e.injectIntl)(St));class Ct extends e.React.PureComponent{constructor(){super(...arguments),this.searchItems=e=>{},this.onSelectAction=i=>{let s=this.props.message;const{target:o,widgetId:n}=this.props,a=t.messageActionUtils.getNewActionItem(o,i,n,s.messageType);s=s.set("actions",s.actions.concat(a)),this.props.onSelected(s,(0,e.Immutable)(a),i)}}getStyle(t){return e.css`
      height: calc(100% - 3.125rem);
      overflow-y: auto;

      .action-choose-list {

        .searchIcon {
          cursor: pointer;
          position: absolute;
          right: 1.2rem;
          margin-top: 0.3rem;
          background-color: ${e.polished.rgba(t.ref.palette.white,1)};
        }

        .list{
          .list-item{
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            border: 1px solid transparent;
            cursor: pointer;
            background-color: ${t.ref.palette.neutral[500]};
            user-select: none;
            font-size: ${e.polished.rem(13)};
          }
          .list-item:hover{
            background-color: ${t.ref.palette.neutral[600]};
          }
          .list-item:active.list-item:hover{
            background-color: ${t.ref.palette.white};
          }
        }
      }
    `}render(){const{target:t,widgetId:s,message:o}=this.props,a=ut(t,s,o.messageType);return(0,e.jsx)("div",{className:"w-100",css:this.getStyle(this.props.theme)},(0,e.jsx)("div",{className:"w-100 action-choose-list"},(0,e.jsx)(n.SettingSection,null,(0,e.jsx)(n.SettingRow,null,(0,e.jsx)("div",{className:"w-100",style:{display:"none"}},(0,e.jsx)(i.TextInput,{className:"w-100",placeholder:this.props.formatMessage("chooseSearchAction"),onChange:this.searchItems,value:""}),(0,e.jsx)(lt,{className:"p-0 searchIcon"})),(0,e.jsx)("div",{className:"w-100 list"},0===a.length&&(0,e.jsx)("div",{className:"d-flex mb-2 p-1 text-break"},this.props.formatMessage("noAction")),a.length>0&&a.map(((t,s)=>(0,e.jsx)(i.Button,{className:"text-truncate list-item mb-2 pt-1 pb-1 pl-2 pr-2 w-100 justify-content-start",key:s,title:t.label,onClick:()=>{this.onSelectAction(t)}},(0,e.jsx)("div",{className:"w-100 text-left text-truncate"},t.label)))))))))}}const At=(0,z.withTheme)(Ct);var Mt=h(8485),Tt=h.n(Mt),Nt=h(9027),Pt=h.n(Nt),kt=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const Rt=t=>{const i=window.SVG,{className:s}=t,o=kt(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component has-rtl-svg",s);return i?e.React.createElement(i,Object.assign({className:n,src:Tt(),srcRTL:Pt()},o)):e.React.createElement("svg",Object.assign({className:n},o))};class Ot extends e.React.PureComponent{constructor(){super(...arguments),this.searchItems=e=>{},this.onSelectTarget=e=>{this.props.onSelected(e)}}getStyle(t){return e.css`
      height: calc(100% - 3.125rem);
      overflow-y: auto;

      .target-choose-list {

        .searchIcon {
          cursor: pointer;
          position: absolute;
          right: 1.2rem;
          margin-top: 0.3rem;
          background-color: ${e.polished.rgba(t.ref.palette.white,1)};
        }

        .seperateline-mt {
          margin-top: ${e.polished.rem(5)};
        }

        .seperateline-mb {
          margin-bottom: ${e.polished.rem(1)};
        }

        .seperateline {
          border-top: 1px solid ${t.ref.palette.neutral[500]};
        }

        .widgets-title {
          font-weight: 600;
          font-size: ${e.polished.rem(14)};
          color: ${t.ref.palette.neutral[900]};
        }

        .nodata {
          font-size: ${e.polished.rem(13)};
        }

        button {
          color: ${t.ref.palette.black};
        }
        .widgets-list-con svg{
          color: ${t.sys.color.primary.text}!important;
        }

        .list{
          .list-item{
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            border: 1px solid transparent;
            cursor: pointer;
            background-color: ${t.ref.palette.neutral[500]};
            user-select: none;
            font-size: ${e.polished.rem(13)};
          }
          .list-item:hover{
            background-color: ${t.ref.palette.neutral[600]};
          }
          .list-item:active.list-item:hover{
            background-color: ${t.ref.palette.white};
          }
        }
      }
    `}render(){const{message:t}=this.props,s=dt(t.messageType,t.widgetId),o=s.frameWorkTargets,a=s.widgetTargets;return(0,e.jsx)("div",{className:"w-100",css:this.getStyle(this.props.theme)},(0,e.jsx)("div",{className:"w-100 target-choose-list"},(0,e.jsx)(n.SettingSection,null,(0,e.jsx)(n.SettingRow,null,(0,e.jsx)("div",{className:"w-100",style:{display:"none"}},(0,e.jsx)(i.TextInput,{className:"w-100",placeholder:this.props.formatMessage("chooseSearchTarget"),onChange:this.searchItems,value:""}),(0,e.jsx)(lt,{autoFlip:!0,className:"p-0 searchIcon",size:"m"})),(0,e.jsx)("div",{className:"w-100 list"},0===o.length&&0===a.length&&(0,e.jsx)("div",{className:"d-flex justify-content-center nodata text-break"},this.props.formatMessage("noTargetWidgets")),o.map(((t,s)=>(0,e.jsx)(i.Button,{variant:"text",color:"default",className:"list-item pt-1 pb-1 pl-2 pr-2 w-100 justify-content-start",title:this.props.formatMessage("actionFramework"),key:s,onClick:()=>{this.onSelectTarget(t)}},(0,e.jsx)(Rt,{className:"mr-0",size:"m",autoFlip:!0}),(0,e.jsx)("div",{className:"ml-2 text-truncate"},this.props.formatMessage("actionFramework"))))),o.length>0&&0===a.length&&(0,e.jsx)("div",{className:"w-100"},(0,e.jsx)("div",{className:"w-100 seperateline-mt seperateline-mb",style:{position:"relative",height:"20px"}},(0,e.jsx)("div",{className:"seperateline w-100",style:{top:"10px",position:"absolute"}})),(0,e.jsx)("div",{className:"w-100 widgets-title"},this.props.formatMessage("targetWidgets")),(0,e.jsx)("div",{className:"d-flex mt-2 nodata text-break"},this.props.formatMessage("noTargetWidgets"))),a.length>0&&(0,e.jsx)("div",{className:"w-100 widgets-list-con"},o.length>0&&(0,e.jsx)("div",{className:"w-100 seperateline-mb",style:{position:"relative",height:"20px"}},(0,e.jsx)("div",{className:"seperateline w-100",style:{top:"10px",position:"absolute"}})),(0,e.jsx)("div",{className:"w-100 widgets-title"},this.props.formatMessage("targetWidgets")),a.map(((t,s)=>{let o;const n=t.icon;return o=n&&n.svg?n:{svg:n},(0,e.jsx)(i.Button,{variant:"text",color:"default",className:"list-item mt-2 p-1 w-100 justify-content-start",title:t.label,key:s,onClick:()=>{this.onSelectTarget(t)}},(0,e.jsx)(i.Icon,{className:"mr-0",autoFlip:!0,width:16,height:16,icon:o.svg,color:o.properties&&o.properties.color}),(0,e.jsx)("div",{className:"ml-2 text-truncate"},t.label))}))))))))}}const Bt=(0,z.withTheme)(Ot),Lt={pageSetting:"Page settings",dialogSetting:"Dialog settings",openWithWindow:"Open with Window",openWithWindowTip:"Only fixed windows are supported (except splash).",folderSetting:"Folder settings",linkSetting:"Link settings",noSelection:"No selection",customWidth:"Fixed width",fitToWindow:"Fit to window",fitToWidthOnly:"Full width",fitToContainer:"Fit to container",keepAspectRatio:"Keep aspect ratio",aspectRatio:"Aspect ratio",fixedHeight:"Fixed height",content:"Content",dynamicSettingStyle:"Style",action:"Action",donotSupportDataAction:"The widget does not support any data actions.",daynamicLayout:"Layout",displayMode:"Display mode",dynamicWidth:"Width",dynamicHeight:"Height",dynamicLoading:"Loading",heightMode:"Height mode",body:"Body",header:"Header",footer:"Footer",urlIsHere:"Type URL here.",sectionDelete:"Delete",noWidget:"No widget",docked:"Docked",floatingScreen:"Floating",verticalSpacing:"Vertical spacing",triggerPosition:"Trigger position",upper:"Upper",lower:"Lower",dsDuplicateView:"Duplicate view",dsDuplicateScreen:"Duplicate screen",newView:"New view",noSettingOptions:"No setting options",contentWidth:"Content width",dsCustom:"Custom",dsAuto:"Auto",size:"Size",lockParent:"Kept within the parent container",margin:"Margin",noStyle:"This widget does not support style settings.",addTrigger:"Add a trigger",noTrigger:"The widget does not generate any triggers.",selectTrigger:"Select a trigger",selectTarget:"Select a target",selectAction:"Select an action",actionBack:"Back",actionSet:"Action settings",actionSettings:"Settings",actionDelete:"Delete",addAction:"Add action",targetWidgets:"Widgets",noMessage:"No message",noTargetWidgets:"No widget",messageAction:"Message action",dataAction:"Data action",noAction:"No action",chooseSearchTrigger:"Select or search a trigger",chooseSearchTarget:"Select or search a target",chooseSearchAction:"Select or search an action",actionDone:"Done",actionFramework:"Framework",actionSettingLoading:"Loading...",turnTo:"Switch to:",dsFill:"Fill",keepFixedOnScroll:"Stays at the top of the page when scrolling",titleBackground:"Background",copyPage:"Copy",fixedMode:"Fixed",anchoredMode:"Anchored",fixedModeTip:"Display in a fixed position.",anchoredModeTip:"Appears next to the linked widget.",splashDlgWarning:"Splash cannot be set to Anchored.",pageDlgWarning:"Window opened with pages cannot be set to Anchored.",keepLeft:"Keep left",keepRight:"Keep right",keepCenter:"Keep center",keepTop:"Keep top",keepBottom:"Keep bottom",closeOptions:"Close options",blockPage:"Block page",clickOutside:"Click outside to close Window",interaction:"Interaction",interactionStyle1:"Checkbox only",interactionStyle2:"Button in the same line",interactionStyle3:"Button in a different line",confirmation:"Confirmation",confirmationRequiredText:"Check to proceed",confirmationButtonTextHolder:"Required",closeIcon:"Close icon",closeIconPosition:"Position",closeIconPositionTL:"Top left",closeIconPositionTR:"Top right",preventDisplayAgain:'"Don\'t show this again" option',checkboxText:"Checkbox text",checkboxButtonText:"Button text",alwaysShow:"Always show this window",arrows:"Arrows",dots:"Dots",interval:"Interval (Second)",loop:"Loop",toggleViewList:"Toggle view list",spacing:"Spacing",scrollToSwitch:"Scroll to switch",dataActions:"Data actions",enableDataAction:"Enable data action",enableBatchDataAction:"Enable batch data action",selectWidgets:"Select widgets",dataActionTooltip:"Show data action button on the widget. The widget will not have any data actions, if no action is configured, or the data type does not support data action.",batchDataActionTooltip:"Show batch data action button on the widget. The widget will not have any batch data actions, if no action is configured, or the data type does not support data action.",noDataAction:"To see data action options, please add a widget that provides data action onto the same page.",noBatchDataAction:"To see batch data action options, please add a widget that provides batch data action onto the same page.",noTriggerTip:'Click the "{ButtonString}" button to add and configure actions.',exportNotes:"Note: Export is configured in the Data panel.",lazyLoading:"Lazy loading",lazyLoadingTip:"Load content when switched for the first time.",cookieBannerSettingTitle:"Cookie Banner",bannerButtonSettings:"Banner button settings",closeButton:"Close button",acceptAllButton:"Accept all button",declineAllButton:"Decline all button",cookieSettingsButton:"Cookie settings button",cookieSettingsWindow:"Cookie settings window",actionWidgetPending:"This action is configured with a pending widget.",actionWidgetInLarge:"This action is configured in large screen device.",actionWidgetInMedium:"This action is configured in medium screen device.",actionWidgetInSmall:"This action is configured in small screen device.",noAvailableActions:"No available actions."};var Dt=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const zt=t=>{const i=window.SVG,{className:s}=t,o=Dt(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:n,src:I()},o)):e.React.createElement("svg",Object.assign({className:n},o))};var Et=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const Wt=t=>{const i=window.SVG,{className:s}=t,o=Et(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:n,src:j()},o)):e.React.createElement("svg",Object.assign({className:n},o))};var Ut=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const Vt=t=>{const i=window.SVG,{className:s}=t,o=Ut(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:n,src:A()},o)):e.React.createElement("svg",Object.assign({className:n},o))};var Ft=h(3387),Ht=h.n(Ft),Gt=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const $t=t=>{const i=window.SVG,{className:s}=t,o=Gt(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:n,src:Ht()},o)):e.React.createElement("svg",Object.assign({className:n},o))},Zt=t=>{const s=e.hooks.useTranslation(Lt),{actionWidgetId:o,size:n}=t,[a,l]=e.React.useState([]);return e.React.useEffect((()=>{const e=o?vt(o):[];l(e)}),[o]),(0,e.jsx)("div",{className:"flex-grow-1 d-flex align-items-center"},a.includes(rt.Pending)&&(0,e.jsx)(i.Tooltip,{placement:"top",css:e.css`max-width: 300px;`,title:s("actionWidgetPending")},(0,e.jsx)("div",null,(0,e.jsx)($t,{size:n||12,className:"ml-1"}))),a.includes(rt.Large)&&(0,e.jsx)(i.Tooltip,{placement:"top",css:e.css`max-width: 300px;`,title:s("actionWidgetInLarge")},(0,e.jsx)("div",null,(0,e.jsx)(zt,{size:n||12,className:"ml-1"}))),a.includes(rt.Medium)&&(0,e.jsx)(i.Tooltip,{placement:"top",css:e.css`max-width: 300px;`,title:s("actionWidgetInMedium")},(0,e.jsx)("div",null,(0,e.jsx)(Wt,{size:n||12,className:"ml-1"}))),a.includes(rt.Small)&&(0,e.jsx)(i.Tooltip,{placement:"top",css:e.css`max-width: 300px;`,title:s("actionWidgetInSmall")},(0,e.jsx)("div",null,(0,e.jsx)(Vt,{size:n||12,className:"ml-1"}))))};function _t(e){let i=null;i=e.widgetId?(0,t.getAppConfigAction)().appConfig.widgets[e.widgetId]:{label:"Framework"};let s=e.actionName;if(i.manifest)if(i.manifest.i18nMessages[`_action_${e.actionName}_label`])s=i.manifest.i18nMessages[`_action_${e.actionName}_label`];else{const t=i.manifest.messageActions;if(t)for(let i=0;i<t.length;i++)if(t[i].name===e.actionName){s=t[i].label;break}}else if("Framework"===i.label){const i=t.AppMessageManager.getInstance().getAllActions();for(let t=0;t<i.length;t++)if(e.actionId.includes(i[t].id)){s=i[t].label;break}}return s}class Jt extends e.React.PureComponent{constructor(){super(...arguments),this.searchItems=e=>{},this.onEditAction=(e,t=!1)=>{const{message:i}=this.props,s=pt(e,i.messageType);e.config&&s&&this.props.onClickEditAction(this.props.message,e,t)},this.onRemoveAction=(e,i)=>{e.stopPropagation();let s=this.props.message;const o=Object.assign([],s.actions),n=[];for(let e=0;e<o.length;e++)o[e].actionName===i.actionName&&n.push(o[e]);for(let e=0;e<o.length;e++)if(o[e].actionId===i.actionId&&o[e].widgetId===i.widgetId){const n=Object.assign([],o);n.splice(e,1),s=s.set("actions",n);const a=t.AppMessageManager.getInstance().getAction(i.widgetId,i.actionName);a&&a.onRemoveListen(s.messageType,s.widgetId);break}this.props.onMessageChanged(s)},this.onActionOrderChanged=e=>{let t=this.props.message;t=t.set("actions",e),this.props.onMessageChanged(t)},this.createActionItem=(s,o)=>{var n;let a=null;a=s.widgetId?(0,t.getAppConfigAction)().appConfig.widgets[s.widgetId]:{label:"Framework"};const l=s.widgetId,r=l?vt(l):null,c=(null==r?void 0:r.length)>0,d=(null===(n=(r||[]).filter((e=>e!==rt.Pending)))||void 0===n?void 0:n.length)>0;return(0,e.jsx)("div",{className:(0,e.classNames)("action-item flex-grow-1",c?"disable-edit-con":""),css:this.getStyle(),onClick:()=>{this.onEditAction(s,c)}},(0,e.jsx)("div",{className:"d-flex w-100 justify-content-between align-items-start widget-name-con"},"Framework"===a.label&&(0,e.jsx)("div",{className:"widget-name text-truncate",title:this.props.formatMessage(`action${a.label}`)},this.props.formatMessage(`action${a.label}`)),"Framework"!==a.label&&(0,e.jsx)("div",{className:"widget-name text-truncate  d-flex align-items-center"},(0,e.jsx)("div",{className:"text-truncate mr-1",title:a.label},a.label),(0,e.jsx)(Zt,{actionWidgetId:l})),!d&&(0,e.jsx)(i.Button,{className:"delete-item-button",type:"tertiary",size:"sm",icon:!0,onClick:e=>{this.onRemoveAction(e,s)},title:this.props.formatMessage("actionDelete")},(0,e.jsx)(V,{size:"s",className:"p-0 deleteIcon"}))),(0,e.jsx)("div",{className:"hint-paper w-100 align-items-center action-name"},(0,e.jsx)("div",{className:"w-100",title:_t(s)},_t(s))))},this.getActionList=()=>(0,e.jsx)("div",{style:{position:"relative"}},(0,e.jsx)(te.List,{size:"sm",className:"setting-ui-unit-list",itemsJson:this.props.message.actions.asMutable().map(((e,t)=>{var i,s;return{itemStateDetailContent:e,itemStateChecked:(null===(s=null===(i=null==this?void 0:this.props)||void 0===i?void 0:i.action)||void 0===s?void 0:s.actionId)===e.actionId,itemKey:`${t}`}})),dndEnabled:!0,onUpdateItem:(e,t)=>{if(e.updateType===te.TreeItemActionType.HandleDidDrop){const{itemJsons:[,e]}=t.props;this.onActionOrderChanged(e.map((e=>e.itemStateDetailContent)))}},overrideItemBlockInfo:({itemBlockInfo:e})=>({name:te.TreeItemActionType.RenderOverrideItem,children:[{name:te.TreeItemActionType.RenderOverrideItemDroppableContainer,children:[{name:te.TreeItemActionType.RenderOverrideItemDraggableContainer,children:[{name:te.TreeItemActionType.RenderOverrideItemBody,children:[{name:te.TreeItemActionType.RenderOverrideItemDragHandle},{name:te.TreeItemActionType.RenderOverrideItemMainLine}]}]}]}]}),renderOverrideItemMainLine:(e,t)=>{const{itemJsons:i}=t.props,s=i[0],o=null==s?void 0:s.itemKey;return this.createActionItem(s.itemStateDetailContent,o)}}))}getStyle(){const{theme:t}=this.props;return e.css`
      & {
        position: relative;
        flex: 1;
      }
      .widget-name-con {
        .widget-name {
          max-width: ${e.polished.rem(130)};
        }
      }
      .drag-icon-con {
        position: absolute;
        top: ${e.polished.rem(23)};
        left: 0
      }
      &.disable-edit-con{
        &,&:hover {
          background: ${t.sys.color.action.disabled.default}!important;
        }
        .widget-name, .action-name {
          color: ${t.sys.color.action.disabled.text}!important;
        }
        svg {
          color: ${t.sys.color.action.text};
        }
      }
    `}getContainerStyle(){const{theme:t}=this.props;return e.css`
      .jimu-tree-item__body.jimu-tree-item_selectable_true:hover{
        background: var(--sys-color-secondary-main) !important;
      }
      .jimu-tree-item__body:has(.disable-edit-con) {
        background: ${t.sys.color.action.disabled.default}!important;
      }
    `}render(){const t=(0,e.getMessageTypeLabel)(this.props.message.messageType,this.props.intl);return(0,e.jsx)("div",{className:"w-100",css:this.getContainerStyle()},(0,e.jsx)("div",{className:(0,e.classNames)("w-100 message-item message-item-container mb-4",this.props.isActive?"active-border":"")},(0,e.jsx)("div",{className:"w-100 d-flex justify-content-between align-items-center"},(0,e.jsx)("h2",{className:"message-item-title",title:t},t),(0,e.jsx)(i.Button,{className:"close-message-button",type:"tertiary",size:"sm",icon:!0,onClick:()=>{this.props.onMessageRemoved(this.props.message)},title:this.props.formatMessage("sectionDelete")},(0,e.jsx)(V,{size:14,className:"p-0 deleteIcon"}))),this.props.message.actions&&this.props.message.actions.length>0&&this.getActionList(),(0,e.jsx)(i.Button,{className:"mt-2 item-add-action text-truncate w-100",onClick:()=>{this.props.onClickAddAction(this.props.message)},type:"tertiary",title:this.props.formatMessage("addAction")},`+ ${this.props.formatMessage("addAction")}`)))}}const Qt=(0,e.injectIntl)(Jt);class Kt extends e.React.PureComponent{constructor(i){super(i),this.getActionSettingClass=()=>{const{action:e,message:i}=this.props,s=pt(e,i.messageType);t.AppMessageManager.getInstance().loadActionSettingClass(this.props.action,s).then((e=>{this.setState({settingClass:e})}))},this.onSettingChange=e=>{const t=ht(e,this.props.message,this.state.cacheActionJson);if(t){const{action:e,message:i}=t;(null==e?void 0:e.config)&&(this.setState({cacheActionJson:this.state.cacheActionJson.set("config",e.config).set("useDataSources",e.useDataSources)}),this.props.onUpdateAction(i,e,!1))}},this.onDisableDoneBtn=e=>{this.setState({isDisableDoneBtn:e})},this.renderActionSetting=()=>{var t,i;const s=this.state.settingClass;return s?(0,e.jsx)(e.ErrorBoundary,null,(0,e.jsx)(s,{actionId:this.state.cacheActionJson.actionId,widgetId:this.props.action.widgetId,messageWidgetId:this.props.widgetId,config:this.state.cacheActionJson.config?this.state.cacheActionJson.config:void 0,useDataSources:null===(i=null===(t=this.state.cacheActionJson)||void 0===t?void 0:t.asMutable({deep:!0}))||void 0===i?void 0:i.useDataSources,messageType:this.props.message.messageType,onSettingChange:this.onSettingChange,onDisableDoneBtn:this.onDisableDoneBtn})):(0,e.jsx)("div",{className:"p-4"},this.props.formatMessage("actionSettingLoading"))},this.state={settingClass:null,cacheActionJson:this.props.action,isDisableDoneBtn:!1}}componentDidMount(){this.getActionSettingClass()}componentDidUpdate(e){this.getActionSettingClass(),this.props.action!==e.action&&this.setState({cacheActionJson:this.props.action})}style(){return e.css`
      & {
        overflow-y: 'auto'
      }
      &.disable-setting{
        -webkit-filter: grayscale(100%);
        -moz-filter: grayscale(100%);
        -ms-filter: grayscale(100%);
        -o-filter: grayscale(100%);
        filter: progid:DXImageTransform.Microsoft.BasicImage(grayscale=1);
      }
      .disable-setting-mask {
        top: 0;
        bottom: 0;
        z-index: 1;
      }
    `}render(){const{disableActionSetting:t,action:i,message:s}=this.props,o=pt(i,s.messageType);return(0,e.jsx)("div",{className:(0,e.classNames)("setting-container h-100",t?"disable-setting position-relative":""),css:this.style()},o?this.renderActionSetting():(0,e.jsx)("div",null,"\xa0\xa0No widget"),(0,e.jsx)("div",{className:"w-100",style:{height:"50px"}}),t&&(0,e.jsx)("div",{className:"disable-setting-mask position-absolute w-100"}))}}var Yt=h(1027),Xt=h.n(Yt),qt=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const ei=t=>{const i=window.SVG,{className:s}=t,o=qt(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:n,src:Xt()},o)):e.React.createElement("svg",Object.assign({className:n},o))};class ti extends e.React.PureComponent{constructor(i){super(i),this.sidePopperTrigger=e.React.createRef(),this.popperFocusNode=e.React.createRef(),this.resetState=()=>{this.setState({currentTriggeredMessage:null,currentTriggeredTarget:null,currentTriggeredAction:null,panelRoutes:[]})},this.updateLocalState=(e,i)=>{const s=(0,t.getAppConfigAction)().appConfig;if(e.messageConfigs&&e.messageConfigs!==i.messageConfigs){let t=null,i=null,o=null;if(this.state.currentTriggeredMessage&&this.state.currentTriggeredMessage.messageType){const n=Object.keys(e.messageConfigs);for(let i=0;i<n.length;i++)if(e.messageConfigs[n[i]].messageType===this.state.currentTriggeredMessage.messageType&&e.messageConfigs[n[i]].widgetId===this.state.currentTriggeredMessage.widgetId){t=e.messageConfigs[n[i]];break}if(t&&this.state.currentTriggeredTarget)if(this.state.currentTriggeredTarget.id){const e=this.state.currentTriggeredTarget;if(this.state.panelRoutes&&this.state.panelRoutes.length>0&&this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===tt.ActionChoose)i=s.widgets[e.id];else for(let o=0;o<t.actions.length;o++)if(t.actions[o].widgetId===e.id){i=s.widgets[e.id];break}}else{const e=this.state.currentTriggeredTarget;if(this.state.panelRoutes&&this.state.panelRoutes.length>0&&this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===tt.ActionChoose)i=e;else for(let s=0;s<t.actions.length;s++)if(!t.actions[s].widgetId){i=e;break}}if(t&&this.state.currentTriggeredAction&&this.state.currentTriggeredAction.actionName)for(let e=0;e<t.actions.length;e++)if(t.actions[e].actionId===this.state.currentTriggeredAction.actionId&&t.actions[e].widgetId===this.state.currentTriggeredAction.widgetId&&t.actions[e].actionName===this.state.currentTriggeredAction.actionName){o=t.actions[e];break}}this.setState({currentTriggeredMessage:t,currentTriggeredTarget:i,currentTriggeredAction:o})}},this.getMessages=()=>{const e=this.props.messageConfigs,t=[],i=Object.keys(e);if(i.length>0)for(let s=0;s<i.length;s++)e[i[s]]&&e[i[s]].widgetId===this.props.widgetId&&t.push(e[i[s]]);return t},this.onShowMessageChooseList=()=>{const e=[{pathType:tt.MessageChoose,message:null}];this.setState({panelRoutes:e})},this.onMessageRemoved=e=>{e.actions.forEach((i=>{const s=t.AppMessageManager.getInstance().getAction(i.widgetId,i.actionName);s&&s.onRemoveListen(e.messageType,e.widgetId)})),(0,t.getAppConfigAction)().removeMessage(e).exec()},this.onMessageChanged=e=>{this.setState({currentTriggeredMessage:e},(()=>{(0,t.getAppConfigAction)().editMessage(e).exec()}))},this.onShowTargetChooseList=e=>{const t=[{pathType:tt.TargetChoose,message:e}];this.setState({currentTriggeredMessage:e,currentTriggeredAction:null,panelRoutes:t})},this.onShowActionSettingPage=(e,t,i=!1)=>{const s=[{pathType:tt.ActionSetting,message:e}];this.setState({currentTriggeredMessage:e,currentTriggeredAction:t,panelRoutes:s,disableActionSetting:i})},this.backForwardPanel=()=>{const e=Object.assign([],this.state.panelRoutes);if(e.splice(e.length-1,1),e[e.length-1].message){const i=e[e.length-1].message;this.setState({panelRoutes:e,currentTriggeredMessage:e[e.length-1].message},(()=>{(0,t.getAppConfigAction)().editMessage(i).exec()}))}else{const i=this.state.panelRoutes[this.state.panelRoutes.length-1].message;this.setState({panelRoutes:e,currentTriggeredMessage:null},(()=>{(0,t.getAppConfigAction)().removeMessage(i).exec()}))}},this.closePanel=()=>{var e,t;(null==this?void 0:this.popperFocusNode)&&(null===(t=null===(e=this.popperFocusNode)||void 0===e?void 0:e.current)||void 0===t||t.focus()),this.setState({panelRoutes:[]})},this.onMessageChooseListSelected=e=>{const i=Object.assign([],this.state.panelRoutes);i.push({pathType:tt.TargetChoose,message:e}),this.setState({currentTriggeredMessage:e,panelRoutes:i},(()=>{(0,t.getAppConfigAction)().addMessage(e).exec()}))},this.onTargetChooseListSelected=e=>{const t=Object.assign([],this.state.panelRoutes);t.push({pathType:tt.ActionChoose,message:this.state.currentTriggeredMessage}),this.setState({currentTriggeredTarget:e,panelRoutes:t})},this.onActionChooseListSelected=(i,s,o)=>{const n=pt(s,null==i?void 0:i.messageType);if(null===s.config||"function"==typeof o.getDefaultMessageActionConfig&&n){const o=Object.assign([],this.state.panelRoutes);o.push({pathType:tt.ActionSetting,message:i}),this.setState({currentTriggeredMessage:i,currentTriggeredAction:(0,e.Immutable)(s),panelRoutes:o},(()=>{(0,t.getAppConfigAction)().editMessage(i).exec()}))}else this.setState({currentTriggeredMessage:i,currentTriggeredAction:null,panelRoutes:[]},(()=>{(0,t.getAppConfigAction)().editMessage(i).exec()}))},this.onUpdateAction=(e,i,s)=>{s?this.setState({currentTriggeredMessage:e,currentTriggeredAction:i,panelRoutes:[]},(()=>{(0,t.getAppConfigAction)().editMessage(e).exec()})):this.setState({currentTriggeredMessage:e,currentTriggeredAction:i},(()=>{(0,t.getAppConfigAction)().editMessage(e).exec()}))},this.modalStyle=e.css`
      position: absolute;
      top: 0;
      bottom: 0;
      width: 259px;
      height: 100%;
      padding-bottom: 1px;
      border-right: 1px solid ${this.props.theme.ref.palette.white};
      border-bottom: 1px solid ${this.props.theme.ref.palette.white};
    `,this.state={currentTriggeredMessage:null,currentTriggeredTarget:null,currentTriggeredAction:null,panelRoutes:[],disableActionSetting:!1}}componentDidUpdate(e){this.props.widgetId!==e.widgetId?this.resetState():this.updateLocalState(this.props,e)}render(){var t,s,o,a;const{formatMessage:l}=this.props,{disableActionSetting:r}=this.state,c=this.getMessages();return(0,e.jsx)("div",{className:"d-flex h-100 flex-column"},(0,e.jsx)("div",{ref:this.sidePopperTrigger},(0,e.jsx)(n.SettingSection,null,(0,e.jsx)(n.SettingRow,{flow:"wrap"},(0,e.jsx)("div",{className:"w-100 justify-content-center d-flex"},(0,e.jsx)(i.Button,{className:"w-100",type:"primary",onClick:this.onShowMessageChooseList,"aria-describedby":"trigger-empty-tip",ref:this.popperFocusNode},(0,e.jsx)("div",{className:"w-100 text-truncate"},l("addTrigger"))))),(0,e.jsx)(n.SettingRow,{flow:"wrap"},c.map(((t,i)=>(0,e.jsx)(Qt,{key:i,message:t,onMessageRemoved:this.onMessageRemoved,isActive:t===this.state.currentTriggeredMessage&&this.state.panelRoutes.length>0,onMessageChanged:this.onMessageChanged,onClickAddAction:this.onShowTargetChooseList,onClickEditAction:this.onShowActionSettingPage,formatMessage:l,action:this.state.panelRoutes.length>0&&this.state.currentTriggeredAction,theme:this.props.theme})))),this.state.panelRoutes.length>0&&!this.props.pageId&&(0,e.jsx)("div",null,this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===tt.MessageChoose&&(0,e.jsx)(n.SidePopper,{isOpen:!0,position:"right",toggle:this.closePanel,trigger:null===(t=this.sidePopperTrigger)||void 0===t?void 0:t.current},(0,e.jsx)("div",{className:"bg-default border-color-gray-400",css:this.modalStyle},(0,e.jsx)(st,{formatMessage:l,Routes:this.state.panelRoutes,title:l("selectTrigger"),onBack:this.backForwardPanel,onClose:this.closePanel},(0,e.jsx)(jt,{widgetId:this.props.widgetId,onSelected:this.onMessageChooseListSelected,messages:c,formatMessage:l})))),this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===tt.TargetChoose&&this.state.currentTriggeredMessage&&(0,e.jsx)(n.SidePopper,{isOpen:!0,position:"right",toggle:this.closePanel,trigger:null===(s=this.sidePopperTrigger)||void 0===s?void 0:s.current},(0,e.jsx)("div",{className:"bg-default border-color-gray-400",css:this.modalStyle},(0,e.jsx)(st,{formatMessage:l,Routes:this.state.panelRoutes,title:l("selectTarget"),onBack:this.backForwardPanel,onClose:this.closePanel},(0,e.jsx)(Bt,{onSelected:this.onTargetChooseListSelected,message:this.state.currentTriggeredMessage,formatMessage:l})))),this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===tt.ActionChoose&&this.state.currentTriggeredMessage&&this.state.currentTriggeredTarget&&(0,e.jsx)(n.SidePopper,{isOpen:!0,position:"right",toggle:this.closePanel,trigger:null===(o=this.sidePopperTrigger)||void 0===o?void 0:o.current},(0,e.jsx)("div",{className:"bg-default border-color-gray-400",css:this.modalStyle},(0,e.jsx)(st,{formatMessage:l,Routes:this.state.panelRoutes,title:l("selectAction"),onBack:this.backForwardPanel,onClose:this.closePanel},(0,e.jsx)(At,{widgetId:this.props.widgetId,onSelected:this.onActionChooseListSelected,message:this.state.currentTriggeredMessage,target:this.state.currentTriggeredTarget,formatMessage:l})))),this.state.panelRoutes[this.state.panelRoutes.length-1].pathType===tt.ActionSetting&&this.state.currentTriggeredMessage&&this.state.currentTriggeredAction&&(0,e.jsx)(n.SidePopper,{isOpen:!0,position:"right",toggle:this.closePanel,trigger:null===(a=this.sidePopperTrigger)||void 0===a?void 0:a.current},(0,e.jsx)("div",{className:"bg-default border-color-gray-400",css:this.modalStyle},(0,e.jsx)(st,{hideBackArrow:!0,formatMessage:l,Routes:this.state.panelRoutes,title:`${l("actionSet")}`,onBack:this.backForwardPanel,onClose:this.closePanel},(0,e.jsx)(Kt,{widgetId:this.props.widgetId,message:this.state.currentTriggeredMessage,action:this.state.currentTriggeredAction,onUpdateAction:this.onUpdateAction,formatMessage:l,disableActionSetting:r}))))))),0===c.length&&(0,e.jsx)("div",{className:"flex-grow-1 text-center no-trigger-tip position-relative"},(0,e.jsx)("div",{className:"position-absolute"},(0,e.jsx)(ei,{size:48}),(0,e.jsx)("p",{className:"trigger-tip",id:"trigger-empty-tip"},l("noTriggerTip",{ButtonString:l("addTrigger")})))))}}var ii=h(655),si=h.n(ii),oi=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const ni=t=>{const i=window.SVG,{className:s}=t,o=oi(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:n,src:si()},o)):e.React.createElement("svg",Object.assign({className:n},o))};function ai(t){const{enabled:s,isOpen:o,icon:n,label:a,onEnableToggled:l,onOpenToggled:r,formatMessage:c,hideCollapseIcon:d}=t;return(0,e.jsx)("div",{className:"d-flex align-items-center pl-2 pr-1 h-100"},(0,e.jsx)(i.Label,{className:"d-flex align-items-center mb-0",css:e.css`max-width: 85%;`},(0,e.jsx)(i.Checkbox,{checked:s,onChange:l}),"string"==typeof n?(0,e.jsx)(i.Icon,{className:"ml-2",icon:n}):n,(0,e.jsx)("span",{className:"ml-2 text-truncate",title:a},a)),!d&&(0,e.jsx)(i.Button,{className:"ml-auto p-0",size:"sm",type:"tertiary",disableHoverEffect:!0,disableRipple:!0,icon:!0,onClick:r,disabled:!s,"aria-label":c(o?"collapse":"expand")},(0,e.jsx)(ni,{size:"s",css:e.css`transform: rotateZ(${o&&s?180:0}deg);`})))}function li(s){const{widgetId:o,enabled:a,items:l,dataActions:r=(0,e.Immutable)({}),formatMessage:c,onEnableToggled:d}=s,[p,g]=e.React.useState(!1),u=l[0],h=e.hooks.useTranslation(i.defaultMessages),m=e.React.useCallback((()=>{g(!p)}),[p,g]),f=[];l.forEach((e=>{var t,i,s,o;(null===(o=null===(s=(null!==(i=null===(t=null==r?void 0:r[e.name])||void 0===t?void 0:t.actions)&&void 0!==i?i:{})[e.widgetId])||void 0===s?void 0:s.enabled)||void 0===o||o)&&f.push(e.widgetId)}));const v=e.React.useCallback((e=>h("numSelected",{number:e.length})),[h]),x=e.React.useCallback((()=>l.map((s=>{var n,a,l;const d=null!==(l=(null!==(a=null===(n=null==r?void 0:r[s.name])||void 0===n?void 0:n.actions)&&void 0!==a?a:{})[s.widgetId])&&void 0!==l?l:(0,e.Immutable)({}),p=(0,t.getAppConfigAction)().appConfig.widgets[s.widgetId],g=s.widgetId===o?c("current"):p.label;return{value:s.widgetId,label:p.label,render:(t,s)=>{var o;return(0,e.jsx)(i.Label,{className:"d-flex w-100 h-100 align-items-center mb-0"},(0,e.jsx)(i.Checkbox,{checked:null===(o=d.enabled)||void 0===o||o}),(0,e.jsx)("span",{className:"ml-2"},g))}}}))),[l,r,o,c]),b=e.React.useCallback(((i,s)=>{var n,a,l,c;const d=null===(c=null===(l=(null!==(a=null===(n=null==r?void 0:r[u.name])||void 0===n?void 0:n.actions)&&void 0!==a?a:(0,e.Immutable)({}))[s])||void 0===l?void 0:l.enabled)||void 0===c||c;(0,t.getAppConfigAction)().editWidgetProperty(o,"dataActions",r.setIn([u.name,"actions",s,"enabled"],!d)).exec()}),[r,o,u.name]),w=!p||!a||u.hideCollapseIcon;return(0,e.jsx)(n.SettingSection,{title:(0,e.jsx)(ai,{enabled:a,icon:u.icon,label:u.label,isOpen:p,onEnableToggled:d,onOpenToggled:m,formatMessage:c,hideCollapseIcon:u.hideCollapseIcon}),className:(0,e.classNames)("p-0 data-action-item",{[`data-action-${u.name}`]:!0}),css:e.css`
        border-top: ${w?"none !important":"2px solid var(--primary-600)"};
        border-bottom: none !important;
        background-color: var(--ref-palette-neutral-500);
        margin-top: 8px;
        .jimu-widget-setting--section-header {
          height: 32px;
        }
      `,role:"group","aria-label":u.label},!u.hideCollapseIcon&&(0,e.jsx)(i.Collapse,{isOpen:p&&a,className:"mt-0 px-2"},(0,e.jsx)(n.SettingRow,{flow:"wrap",label:c("selectWidgets"),className:"py-2"},(0,e.jsx)(i.MultiSelect,{fluid:!0,"aria-label":c("selectWidgets"),items:(0,e.Immutable)(x()),onClickItem:b,values:(0,e.Immutable)(f),displayByValues:v,size:"sm"})),s.children))}var ri=h(6420),ci=h.n(ri),di=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const pi=t=>{const i=window.SVG,{className:s}=t,o=di(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:n,src:ci()},o)):e.React.createElement("svg",Object.assign({className:n},o))};var gi=h(5356),ui=h.n(gi),hi=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const mi=t=>{const i=window.SVG,{className:s}=t,o=hi(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:n,src:ui()},o)):e.React.createElement("svg",Object.assign({className:n},o))};var fi=function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function a(e){try{r(s.next(e))}catch(e){n(e)}}function l(e){try{r(s.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,l)}r((s=s.apply(e,t||[])).next())}))};class vi extends e.React.PureComponent{constructor(e){super(e),this.handleEnableDataActionChanged=e=>{const i=(0,t.getAppConfigAction)().appConfig.widgets[this.props.widgetId];(0,t.getAppConfigAction)().editWidget(i.set("enableDataAction",e.target.checked)).exec()},this.state={settingClasses:{}}}componentDidMount(){const e=t.AppDataActionManager.getInstance().loadAllActionSettingClasses(),i=Object.keys(null!=e?e:{});if(i.length>0){const t=i.map((t=>fi(this,void 0,void 0,(function*(){return yield e[t]}))));Promise.allSettled(t).then((e=>{const t={};e.forEach(((e,s)=>{"fulfilled"===e.status?t[i[s]]=e.value:console.error(e.reason)})),this.setState({settingClasses:t})})).catch((e=>{console.error(e)}))}}getAvailableActions(){var i;const s={},o={},n=(0,t.getAppConfigAction)(),a=null===(i=n.appConfig.widgets[this.props.widgetId].manifest)||void 0===i?void 0:i.excludeDataActions,l=e.DataActionManager.getInstance(),r=this.props.appMode===e.AppMode.Design,c=this.props.appMode===e.AppMode.Design;this.getAllWidgetsInSameRootContainer(n.appConfig,this.props.widgetId,this.props.sizeMode,r,c).forEach((t=>{var i;const o=n.appConfig.widgets[t],r=null===(i=o.manifest)||void 0===i?void 0:i.dataActions;(null==r?void 0:r.length)>0&&r.forEach((i=>{var n,r;const c=`${null===(n=o.manifest)||void 0===n?void 0:n.name}.${i.name}`;if(l.isActionExcluded(c,a))return;s[i.name]||(s[i.name]=[]);const d=e.urlUtils.isAbsoluteUrl(o.uri)?`${o.uri}dist/${i.icon}`:`${e.moduleLoader.resolveModuleFullPath("widgets/")}../${o.uri}dist/${i.icon}`;s[i.name].push({name:i.name,icon:d,label:null!==(r=o.manifest.i18nMessages[`_action_${i.name}_label`])&&void 0!==r?r:i.label,widgetId:t,settingUri:`${o.uri}dist/${i.settingUri}`})}))}));return e.DataActionManager.getInstance().getActions().forEach((e=>{e.widgetId||e.name.includes("export")||(null==a?void 0:a.includes(e.name))||(o[e.name]||(o[e.name]=[]),o[e.name].push({name:e.name,icon:e.icon,label:e.label,hideCollapseIcon:!0}))})),{widgetActions:s,frameworkActions:o}}getAllWidgetsInSameRootContainer(t,i,s,o,n){const a=p.searchUtils.getContentRootContainerInfo(t,i,e.LayoutItemType.Widget,s,o),l=this.props.currentPageId;return p.searchUtils.getContentsInContainerRecursiveAdv(t,a,e.LayoutItemType.Widget,s,{includePending:o,includeOtherSizeMode:n,currentPageId:l})}updateActionStatus(i,s){var o;const{widgetId:n}=this.props,a=(0,t.getAppConfigAction)(),l=null!==(o=a.appConfig.widgets[n].dataActions)&&void 0!==o?o:(0,e.Immutable)({});a.editWidgetProperty(n,"dataActions",l.setIn([i,"enabled"],s)).exec()}createActionItemSetting(t,i){const s=this.state.settingClasses[t.settingUri];return s?(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(s,{widgetId:this.props.widgetId,actionName:t.name,config:i,onSettingChange:e=>{this.updateActionItemSetting(t.name,e)}})):null}updateActionItemSetting(i,s){var o;const{widgetId:n}=this.props,a=(0,t.getAppConfigAction)(),l=null!==(o=a.appConfig.widgets[n].dataActions)&&void 0!==o?o:(0,e.Immutable)({});a.editWidgetProperty(n,"dataActions",l.setIn([i,"config"],s)).exec()}createActionItem(t,i,s){var o,n,a;const{dataActions:l}=this.props,r=null===(n=null===(o=null==l?void 0:l[t])||void 0===o?void 0:o.enabled)||void 0===n||n,c=i[0];return(0,e.jsx)(li,{key:s,widgetId:this.props.widgetId,enabled:r,items:i,dataActions:l,formatMessage:this.props.formatMessage,onEnableToggled:()=>{this.updateActionStatus(t,!r)}},r&&c.settingUri&&this.createActionItemSetting(c,null===(a=null==l?void 0:l[t])||void 0===a?void 0:a.config))}createExportNotes(){return(0,e.jsx)("div",{className:"d-flex mt-4 pl-2 pr-1 w-100 pr-1 align-items-center title2 hint-paper",css:e.css`
          color: var(--ref-palette-neutral-1000);
          height: 32px;
          background: var(--ref-palette-neutral-500);
        `},(0,e.jsx)(pi,{color:"var(--dark-50)"}),(0,e.jsx)("span",{className:"ml-2"},this.props.formatMessage("export")),(0,e.jsx)(i.Tooltip,{placement:"bottom",css:e.css`max-width: 300px; margin-left: auto;`,showArrow:!0,title:this.props.formatMessage("exportNotes")},(0,e.jsx)(i.Button,{className:"ml-auto p-0",type:"tertiary",disableHoverEffect:!0,disableRipple:!0,icon:!0},(0,e.jsx)(v,{className:"mr-1",color:"var(--dark-50)"}))))}createEnableBtn(t){const{formatMessage:s,enableDataAction:o}=this.props,n="enableDataAction";return(0,e.jsx)("div",{className:"w-100 d-flex justify-content-between align-items-center px-1"},(0,e.jsx)("div",{className:"title d-flex align-items-center",css:e.css`max-width: 80%; color: var(--ref-palette-neutral-1100)`},(0,e.jsx)("div",{className:"text-truncate title2 hint-paper",title:s(n)},s(n)),(0,e.jsx)(i.Tooltip,{placement:"left",css:e.css`max-width: 300px;`,showArrow:!0,title:s("dataActionTooltip")},(0,e.jsx)(i.Button,{className:"ml-2",icon:!0,size:"sm",type:"tertiary",disableHoverEffect:!0,disableRipple:!0},(0,e.jsx)(v,null)))),(0,e.jsx)(i.Switch,{"aria-label":s(n),"aria-describedby":t?"noDataActionDesc":void 0,checked:o,onChange:this.handleEnableDataActionChanged}))}render(){const{enableDataAction:t}=this.props,{widgetActions:i,frameworkActions:s}=this.getAvailableActions(),o=e.lodash.merge({},i,s),a=Object.keys(s).sort(),l=Object.keys(i).sort();return 0===a.length&&0===l.length?(0,e.jsx)(n.SettingSection,{className:(0,e.classNames)({"h-100":t,"d-flex":!0,"flex-column":!0,"data-action-list":!0})},this.createEnableBtn(!0),t&&(0,e.jsx)("div",{className:"d-flex flex-column align-items-center flex-grow-1 mt-4"},this.createExportNotes(),(0,e.jsx)("div",{className:"d-flex flex-column justify-content-center align-items-center flex-grow-1"},(0,e.jsx)(mi,{size:42,color:"var(--dark-200)"}),(0,e.jsx)("p",{id:"noDataActionDesc",className:"p-2",css:e.css`color: var(--ref-palette-neutral-1000); text-align: center;`},this.props.formatMessage("noDataAction"))))):(0,e.jsx)(n.SettingSection,{className:(0,e.classNames)({"h-100":t,"data-action-list":!0})},this.createEnableBtn(!1),t&&(0,e.jsx)(e.React.Fragment,null,this.createExportNotes(),(0,e.jsx)("div",{className:"framework-actions pb-1"},a.map(((e,t)=>this.createActionItem(e,o[e],t)))),(0,e.jsx)("div",{className:"widget-actions"},l.map(((e,t)=>this.createActionItem(e,o[e],t))))))}}const xi=e.ReactRedux.connect(((e,t)=>{var i,s,o,n,a,l;const r=null===(s=null===(i=e.appStateInBuilder)||void 0===i?void 0:i.appConfig)||void 0===s?void 0:s.widgets[t.widgetId];return{dataActions:null==r?void 0:r.dataActions,sizeMode:null===(o=e.appStateInBuilder)||void 0===o?void 0:o.browserSizeMode,appMode:null===(n=e.appStateInBuilder)||void 0===n?void 0:n.appRuntimeInfo.appMode,enableDataAction:null===(a=null==r?void 0:r.enableDataAction)||void 0===a||a,currentPageId:null===(l=e.appStateInBuilder)||void 0===l?void 0:l.appRuntimeInfo.currentPageId}}))(vi);class bi extends e.React.PureComponent{getStyle(t){return e.css`
      .jimu-widget-setting--row {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
      .message-setting {

        .searchIcon {
          cursor: pointer;
          position: absolute;
          right: 1.2rem;
          margin-top: 0.3rem;
        }

        .listItem {
          cursor: pointer;
          padding: 5px 0px;
        }

        .listItem.active {
          background-color: ${t.sys.color.primary.light};
          border: 0;
        }

        .listItem:hover {
          background-color: ${e.polished.rgba(t.sys.color.primary.light,.4)};
        }

        .active-border {
          border-left: 2px solid var(--sys-color-primary-light) !important;
        }

        .message-item-container {
          background-color: var(--ref-palette-neutral-500);
          border: 1px solid ${t.ref.palette.neutral[500]};
        }

        .message-item {

          .widget-name {
            font-size: ${e.polished.rem(14)};
            font-weight: 400;
          }

          .action-name {
            font-size: ${e.polished.rem(13)};
            margin-top: ${e.polished.rem(13)};
          }

          padding: 0 ${e.polished.rem(12)} ${e.polished.rem(6)} ${e.polished.rem(12)};

          .action-item {
            padding: ${e.polished.rem(8)} ${e.polished.rem(10)} ${e.polished.rem(10)} ${e.polished.rem(5)};
            .delete-item-button {
              visibility: hidden;
              padding: 0;
              color: var(--ref-palette-neutral-1000);
            }
          }

          .action-item:hover {
            .delete-item-button {
              visibility: unset;
            }
          }

          .drag-item {
            &:hover {
              .action-item {
                border: 1px solid ${t.sys.color.primary.dark};
              }
              .action-name {
                background-color: ${t.sys.color.secondary.light};
              }
            }
          }

          .message-item-title {
            font-size: ${e.polished.rem(14)};
            line-height: 1.3;
            margin: 0;
            padding: ${e.polished.rem(8)} 0;
            width: 190px;
            overflow: hidden;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            display: -webkit-box;
          }

          .close-message-button {
            svg {
              margin: 0;
            }
          }

          .deleteIcon-disable {
            opacity: .3;
          }

          .deleteIcon {
            cursor: pointer;
            opacity: .8;
          }

          .deleteIcon:hover {
            opacity: 1;
          }

          .item-add-action {
            cursor: pointer;
            color: ${t.sys.color.primary.light};
            padding: 0;
            border: 1px dashed var(--ref-palette-neutral-700);
            height: ${e.polished.rem(26)};
            &:hover {
              color: ${e.polished.rgba(t.sys.color.primary.light,.8)};
            }
          }
        }

        .jimu-widget-setting--section {
          padding-left: 0;
          padding-right: 0;
        }
        .jimu-widget-setting--row {
          padding-left: 1rem;
          padding-right: 1rem;
        }
        .no-trigger-tip {
          &>div {
            top: 50%;
            transform: translateY(-50%);
            color: ${t.ref.palette.neutral[800]};
          }
          p {
            color: ${t.ref.palette.neutral[1e3]};
            font-size: ${e.polished.rem(14)};
            margin: ${e.polished.rem(16)} auto 0;
            line-height: ${e.polished.rem(19)};
            width: ${e.polished.rem(228)};
          }
        }
      }
    `}createMessageActionSetting(){const{pageId:t,widgetId:i,theme:s,messageConfigs:o}=this.props;return(0,e.jsx)(ti,{pageId:t,widgetId:i,theme:s,messageConfigs:o,formatMessage:this.props.formatMessage})}createDataActionSetting(){const{canConsumeDataAction:t}=this.props;if(t)return(0,e.jsx)(xi,{widgetId:this.props.widgetId,formatMessage:this.props.formatMessage})}render(){const{supportMessageAction:t,canConsumeDataAction:s,formatMessage:o}=this.props;return t&&!s?(0,e.jsx)("div",{className:"w-100 h-100",css:this.getStyle(this.props.theme)},(0,e.jsx)("div",{className:"jimu-widget message-setting px-4"},this.createMessageActionSetting())):!t&&s?(0,e.jsx)("div",{className:"w-100 h-100",css:this.getStyle(this.props.theme)},this.createDataActionSetting()):(0,e.jsx)("div",{className:"w-100 h-100",css:this.getStyle(this.props.theme)},(0,e.jsx)("div",{className:"jimu-widget message-setting"},(0,e.jsx)(i.Tabs,{type:"pills",fill:!0,className:"p-4 h-100",defaultValue:"message"},(0,e.jsx)(i.Tab,{id:"message",title:o("messageAction")},this.createMessageActionSetting()),(0,e.jsx)(i.Tab,{id:"data",title:o("dataAction")},this.createDataActionSetting()))))}}const wi=e.ReactRedux.connect(((e,t)=>{var i,s;return{messageConfigs:null===(s=null===(i=e.appStateInBuilder)||void 0===i?void 0:i.appConfig)||void 0===s?void 0:s.messageConfigs}}))((0,z.withTheme)(bi));var yi=h(3303),Ii=h.n(yi),Si=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const ji=t=>{const i=window.SVG,{className:s}=t,o=Si(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:n,src:Ii()},o)):e.React.createElement("svg",Object.assign({className:n},o))};var Ci=function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function a(e){try{r(s.next(e))}catch(e){n(e)}}function l(e){try{r(s.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,l)}r((s=s.apply(e,t||[])).next())}))};const{useState:Ai,useEffect:Mi,useRef:Ti}=e.React,Ni=s=>{const o=e.hooks.useTranslation(Lt,i.defaultMessages),a=Ti({}),{widgetId:l,message:r,settingClassUri:c,sidePopperTrigger:d,actionId:p,closePanel:g,onMessageChanged:u}=s,[h,m]=Ai({}),[f,v]=Ai(null);Mi((()=>{if(p&&r){const e=r.actions||[],t=null==e?void 0:e.filter((e=>e.actionId===p))[0];v(t)}}),[r,p]),Mi((()=>{c&&(null==f?void 0:f.actionId)&&x(f,c)}),[c,f]);const x=(e,i)=>Ci(void 0,void 0,void 0,(function*(){!a.current[i]&&i&&t.AppMessageManager.getInstance().loadActionSettingClass(e,i).then((e=>{a.current[i]=e,m(a.current)}))})),b=e.hooks.useEventCallback((e=>{const t=ht(e,r,f);if(t){const{action:e,message:i}=t;(null==e?void 0:e.config)&&(v(e),u(i))}}));return(0,e.jsx)("div",null,(()=>{var t;const i=h[c];return i&&f&&p?(0,e.jsx)(n.SidePopper,{isOpen:!!(h[c]&&c&&r),position:"right",toggle:g,trigger:d},(0,e.jsx)("div",{className:"bg-default border-color-gray-400"},(0,e.jsx)(st,{formatMessage:o,hideBackArrow:!0,title:o("actionSet"),onClose:g},r&&(0,e.jsx)(i,{actionId:f.actionId,widgetId:f.widgetId,messageWidgetId:l,config:f.config,useDataSources:null===(t=null==f?void 0:f.asMutable({deep:!0}))||void 0===t?void 0:t.useDataSources,messageType:r.messageType,onSettingChange:b})))):null})())},{useState:Pi,useEffect:ki,useRef:Ri}=e.React,Oi=e.css`
  .disable-advance-selector .jimu-dropdown-button {
    background: var(--sys-color-action-disabled) !important;
    color: var(--sys-color-action-disabled-text) !important;
  }
  .hide-border {
    border-color: transparent;
    opacity: 0;
  }
  .no-available-action-con {
    color: var(--sys-color-action-disabled-text) !important;
  }
`,Bi=s=>{const o=e.hooks.useTranslation(Lt,i.defaultMessages),a=e.ReactRedux.useSelector((e=>e.appStateInBuilder.widgetsClassStatus)),l=Ri(null),r=Ri(!1),c=Ri(null),{widgetId:d,publishMessageItem:p,messages:g,sidePopperTrigger:u}=s,h=e.ReactRedux.useSelector((e=>{var t,i,s;return null===(s=null===(i=null===(t=e.appStateInBuilder.appConfig)||void 0===t?void 0:t.widgets)||void 0===i?void 0:i[d])||void 0===s?void 0:s.useMapWidgetIds})),m=e.ReactRedux.useSelector((e=>{var t,i,s;return null===(s=null===(i=null===(t=e.appStateInBuilder.appConfig)||void 0===t?void 0:t.widgets)||void 0===i?void 0:i[d])||void 0===s?void 0:s.useDataSources})),f=e.ReactRedux.useSelector((e=>{var t,i,s;return null===(s=null===(i=null===(t=e.appStateInBuilder.appConfig)||void 0===t?void 0:t.widgets)||void 0===i?void 0:i[d])||void 0===s?void 0:s.outputDataSources})),[v,x]=Pi(null),[b,w]=Pi(null),[y,I]=Pi({}),[S,j]=Pi(null),[C,A]=Pi(!1),[M,T]=Pi(0);ki((()=>{const t=O(g,p.messageType);j((0,e.Immutable)(t)),l.current=(0,e.Immutable)(t)}),[g,p]),ki((()=>{k(p.messageType,d)}),[p.messageType,d,a,C,h,m,f]),ki((()=>{N(f)}),[f]),ki((()=>{r.current=!1,T(M+1)}),[d]),ki((()=>{if(!r.current){const e=(null==S?void 0:S.actions)||[],t=(null==e?void 0:e.length)>0;A(t),t&&(r.current=!0)}}),[S]);const N=e=>{P(e)?k(p.messageType,d):(clearTimeout(c.current),c.current=setTimeout((()=>{N(e)}),1e3))},P=t=>{let i=!0;const s=e.DataSourceManager.getInstance();return null==t||t.forEach((e=>{s.getDataSource(e)||(i=!1)})),i},k=(e,t)=>{const i=dt(e,t,!0),{widgetTargets:s,frameWorkTargets:o}=i;x(s),w(o)},R=e=>{(0,t.getAppConfigAction)().addMessage(e).exec()},O=(e,t)=>{let i;return Object.keys(e).forEach((s=>{var o,n;(null===(o=e[s])||void 0===o?void 0:o.messageType)===t&&(i=null===(n=e[s])||void 0===n?void 0:n.asMutable({deep:!0}))})),i},B=e.hooks.useEventCallback(((e,t,i)=>{var s;const o=(null===(s=l.current)||void 0===s?void 0:s.actions)||[];return(null==o?void 0:o.filter((s=>i?s.actionName===e:s.actionName===e&&t.id===s.widgetId)))[0]})),L=e=>t.AppMessageManager.getInstance().getActionSettingComponentUri(e,p.messageType,d),D=(e,t,i)=>{let s;return null==e||e.forEach((e=>{var o;(null===(o=B(e.name,t,i))||void 0===o?void 0:o.actionId)&&(s=s?`${s}, ${e.label}`:e.label)})),s||o("none")},z=()=>{I(null)},E=e.hooks.useEventCallback(((e,t,i,s)=>{const o=(null==y?void 0:y.actionSettingUri)?null:e,n=(null==y?void 0:y.actionId)?null:t,a=(null==y?void 0:y.action)?null:i;I({actionSettingUri:o,actionId:n,action:a}),(null==s?void 0:s.stopPropagation)&&s.stopPropagation()})),W=t=>{const i=(null==t?void 0:t.id)?null==t?void 0:t.label:o("actionFramework");return(0,e.jsx)("div",{className:"d-flex align-items-center"},(0,e.jsx)("div",{className:"pr-1"},i),(0,e.jsx)(Zt,{actionWidgetId:null==t?void 0:t.id,size:12}))},U=(t,s=0,o=!1)=>{const a=ut(t,d,p.messageType),l=(null==t?void 0:t.id)?vt(null==t?void 0:t.id):null;if(0===a.length)return null;const r=H(a,t,o);return(null==l?void 0:l.length)>0?null:(0,e.jsx)(n.SettingRow,{label:W(t),className:"w-100",key:s,flow:"wrap"},(0,e.jsx)(i.AdvancedSelect,{className:(0,e.classNames)({"disable-advance-selector":(null==l?void 0:l.length)>0}),size:"sm",fluid:!0,sortValuesByLabel:!1,selectedValues:r,isMultiple:!0,strategy:"absolute",hideSearchInput:!0,hideBottomTools:!0,title:D(a,t,o),customDropdownButtonContent:()=>D(a,t,o),version:M,onChange:e=>{V(e,a,t,o)},staticValues:G(a,t,o)}))},V=(i,s,o,n)=>{var a;const c=H(s,o,n).map((e=>e.value)),g=(null==i?void 0:i.map((e=>e.value)))||[],u=null==g?void 0:g.filter((e=>!c.includes(e))),h=null==c?void 0:c.filter((e=>!g.includes(e))),m=null==s?void 0:s.filter((e=>h.includes(e.name)));if(0===(null==u?void 0:u.length)&&0===(null==h?void 0:h.length))return;let f,v,x,b=null===(a=l.current)||void 0===a?void 0:a.asMutable({deep:!0});if(b||(b=t.messageActionUtils.getNewMessage(p.messageType,d),l.current=(0,e.Immutable)(b)),(null==h?void 0:h.length)>0){z();let e=(null==b?void 0:b.actions)||[];e=null==e?void 0:e.filter((e=>!(null==h?void 0:h.includes(e.actionName)))),b.actions=e,F(m)}(null==u?void 0:u.length)>0&&u.forEach((e=>{const i=null==s?void 0:s.filter((t=>t.name===e))[0],n=t.messageActionUtils.getNewActionItem(o,i,d,p.messageType);b.actions.push(n),x=L(i),f=i,v=n.actionId})),f&&x&&E(x,v,f),r.current=!0,R((0,e.Immutable)(b))},F=e=>{e.forEach((e=>{const i=t.AppMessageManager.getInstance().getAction(e.widgetId,e.name);i&&i.onRemoveListen(S.messageType,S.widgetId)}))},H=(e,t,i)=>{const s=[];return null==e||e.forEach((e=>{var o;(null===(o=B(e.name,t,i))||void 0===o?void 0:o.actionId)&&s.push({value:e.name,label:e.label})})),s},G=(e=[],t,i)=>{const s=(null==t?void 0:t.id)?vt(null==t?void 0:t.id):null;return null==e?void 0:e.map(((e,o)=>({value:e.name,label:e.label,disabled:(null==s?void 0:s.length)>0,render:s=>$(e,o,t,i)})))},$=e.hooks.useEventCallback(((t,i,s,n)=>{const a=L(t),l=B(t.name,s,n),r=a&&(null==l?void 0:l.actionId);return(0,e.jsx)("div",{className:"d-flex align-items-center flex-grow-1",key:`${t.label}-${i}`},(0,e.jsx)("div",{className:"flex-grow-1 d-flex align-items-center"},(0,e.jsx)("div",{className:"flex-grow-1 text-left"},t.label)),r&&(0,e.jsx)("div",{className:"px-2 settings-icon py-0",title:o("settings"),onClick:e=>{E(a,null==l?void 0:l.actionId,t,e)}},(0,e.jsx)(ji,{size:"s"})))})),Z=(e,i)=>{if(i)A(!0);else{let e=l.current;!function(e){(null==e?void 0:e.actions)&&e.actions.forEach((i=>{const s=t.AppMessageManager.getInstance().getAction(i.widgetId,i.actionName);s&&s.onRemoveListen(e.messageType,e.widgetId)}))}(l.current),e=null==e?void 0:e.set("actions",[]),A(!1),e&&R(e)}};return(0,e.jsx)("div",{className:"w-100 h-100",css:Oi},(0,e.jsx)("div",{className:"w-100 h-100"},(0,e.jsx)("div",{className:(0,e.classNames)("top-line-con",{"hide-border":!C})},(0,e.jsx)(n.SettingRow,{bottomLine:!0})),(0,e.jsx)(n.SettingSection,{title:(t=>(0,e.jsx)("div",{className:"d-flex align-items-center"},(0,e.jsx)("div",{className:"flex-grow-1 text-truncate",title:p.messageLabel},p.messageLabel),(0,e.jsx)(i.Switch,{checked:t,onChange:Z})))(C),className:(0,e.classNames)("w-100 h-100",{"clear-padding-bottom":!C})},C&&(0,e.jsx)("div",{className:"w-100 h-100"},(null==b?void 0:b.length)>0&&(null==b?void 0:b.map(((e,t)=>U(e,t,!0)))),(null==v?void 0:v.length)>0&&(null==v?void 0:v.map(((e,t)=>U(e,t)))),!((e,t)=>((null==e?void 0:e.length)||0)+((null==t?void 0:t.length)||0)>0)(b,v)&&(0,e.jsx)(n.SettingRow,null,(0,e.jsx)("div",{className:"no-available-action-con"},o("noAvailableActions")))),(0,e.jsx)(Ni,{widgetId:d,action:null==y?void 0:y.action,actionId:null==y?void 0:y.actionId,settingClassUri:null==y?void 0:y.actionSettingUri,onMessageChanged:R,sidePopperTrigger:u,message:S,closePanel:z}))))},{useState:Li,useEffect:Di}=e.React,zi=t=>{const i=(0,z.getTheme)(),s=e.hooks.useTranslation(Lt),o=e.ReactRedux.useSelector((e=>{var t;return null===(t=e.appStateInBuilder.appConfig)||void 0===t?void 0:t.messageConfigs})),{sidePopperTrigger:a,widgetId:l,supportMessageAction:r}=t,[c,d]=Li(null),[p,g]=Li(null),u=e.css`
    .message-action-con {
      border-top: 1px solid ${i.sys.color.divider.tertiary};
      border-bottom: none;
    }
    .top-line-con {
      padding: 0 ${e.polished.rem(16)};
      .bottom-line {
        margin: 0;
        padding: 0;
      }
    }
    .clear-padding-top {
      padding-top: 0;
    }
    .clear-padding-bottom {
      padding-bottom: 0;
    }
    .clear-top-padding {
      padding-top: 0;
      padding-bottom: 0;
    }
    .action-item-dropdown-button:not(:disabled), button.action-item-dropdown-button:hover {
      background: ${i.ref.palette.secondary[200]} !important;
      border-color: transparent !important;
    }
  `;return Di((()=>{const e=((e,t)=>{const i=[],s=Object.keys(e);if(s.length>0)for(let o=0;o<s.length;o++)e[s[o]]&&e[s[o]].widgetId===t&&i.push(e[s[o]]);return i})(o,l);d(e)}),[o,l]),Di((()=>{const e=ct(l);g(e)}),[l]),(0,e.jsx)("div",{className:"w-100 h-100",css:u},r&&(0,e.jsx)("div",{className:"w-100 h-100 message-action-con"},(0,e.jsx)(n.SettingSection,{title:s("messageAction"),className:"w-100 message-action-con"}),(0,e.jsx)("div",{className:"jimu-widget message-setting"},null==p?void 0:p.map(((t,s)=>(0,e.jsx)(Bi,{key:s,widgetId:l,theme:i,messages:c,publishMessageItem:t,sidePopperTrigger:a}))))))};var Ei=h(5549),Wi=h.n(Ei),Ui=h(7528),Vi=h.n(Ui),Fi=h(6745),Hi=h.n(Fi),Gi=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const $i=t=>{const i=window.SVG,{className:s}=t,o=Gi(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:n,src:Hi()},o)):e.React.createElement("svg",Object.assign({className:n},o))};function Zi(e,i){var s,o;let n=(0,t.getAppConfigAction)().appConfig;n.cookieBanner||(n=n.set("cookieBanner",{}));let a=null;a="string"==typeof e?null===(s=n.cookieBanner)||void 0===s?void 0:s.set(e,i):null===(o=n.cookieBanner)||void 0===o?void 0:o.setIn(e,i),(0,t.getAppConfigAction)().updateCookieBannerConfig(a).exec()}var _i=h(2046),Ji=h.n(_i),Qi=h(7408),Ki=h.n(Qi),Yi=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const Xi=t=>{const i=window.SVG,{className:s}=t,o=Yi(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:n,src:Ki()},o)):e.React.createElement("svg",Object.assign({className:n},o))};var qi=h(6371),es=h.n(qi),ts=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(s=Object.getOwnPropertySymbols(e);o<s.length;o++)t.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(e,s[o])&&(i[s[o]]=e[s[o]])}return i};const is=t=>{const i=window.SVG,{className:s}=t,o=ts(t,["className"]),n=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:n,src:es()},o)):e.React.createElement("svg",Object.assign({className:n},o))},ss=(0,z.styled)(i.CollapsablePanel)`
  .collapse-header {
    .collapse-label {
      font-size: 13px;
    }
  }
`,os=(0,z.styled)(i.CollapsableCheckbox)`
  .collapse-header {
    .collapse-label {
      font-size: 13px;
    }
  }
`,ns=e.css`
  .banner-layout-item {
    padding: 0;
    .banner-layout-icon {
      width: 108px;
      height: 80px;
      background: var(--ref-palette-neutral-300);
    }
  }

  .banner-layout-item:first-of-type {
    margin-right: 12px;
  }
`,as=s=>{var o,a,r,c,d,p,g,u,m,f;const{formatMessage:v,theme:x,browserSizeMode:b}=s,w=e.ReactRedux.useSelector((e=>{var t,i;return null===(i=null===(t=null==e?void 0:e.appStateInBuilder)||void 0===t?void 0:t.appConfig)||void 0===i?void 0:i.cookieBanner})),y=e.ReactRedux.useSelector((e=>{var t,i,s;return null===(s=null===(i=null===(t=null==e?void 0:e.appStateInBuilder)||void 0===t?void 0:t.appConfig)||void 0===i?void 0:i.analytics)||void 0===s?void 0:s.enable})),S=e.ReactRedux.useSelector((e=>{var t,i,s;return null===(s=null===(i=null===(t=null==e?void 0:e.appStateInBuilder)||void 0===t?void 0:t.appRuntimeInfo)||void 0===i?void 0:i.cookieBanner)||void 0===s?void 0:s.isCookieSettingsWindowOpen})),[C,M]=e.React.useState(null!==(o=null==w?void 0:w.acceptAllButton)&&void 0!==o?o:(0,e.Immutable)({})),[T,N]=e.React.useState(null!==(a=null==w?void 0:w.closeButton)&&void 0!==a?a:(0,e.Immutable)({})),[P,k]=e.React.useState(null!==(r=null==w?void 0:w.declineAllButton)&&void 0!==r?r:(0,e.Immutable)({})),[R,O]=e.React.useState(null!==(c=null==w?void 0:w.cookieSettingsButton)&&void 0!==c?c:(0,e.Immutable)({})),[B,L]=e.React.useState(null!==(p=null===(d=null==w?void 0:w.positionSize)||void 0===d?void 0:d[b])&&void 0!==p?p:i.DEFAULT_FIXED_POSITION_SIZE_JSON),[D,z]=e.React.useState((null==w?void 0:w.layout)||e.ECookieBannerLayout.Vertical);const E=e.React.useCallback((e=>{(0,t.getAppConfigAction)().editCookieBannerConfig("backgroundStyle",e).exec()}),[]),W=e.React.useCallback((e=>{(0,t.getAppConfigAction)().editCookieBannerConfig("border",e).exec()}),[]),U=e.React.useCallback((e=>{(0,t.getAppConfigAction)().editCookieBannerConfig("borderRadius",e).exec()}),[]),V=e.React.useCallback((e=>{(0,t.getAppConfigAction)().editCookieBannerConfig("boxShadow",e).exec()}),[]),F=e.React.useCallback((()=>{S&&t.builderAppSync.publishOpenCookieSettingsWindowToApp(!S)}),[S]);return e.React.useEffect((()=>{var t,s;L((null===(t=null==w?void 0:w.positionSize)||void 0===t?void 0:t[b])||(null===(s=null==w?void 0:w.positionSize)||void 0===s?void 0:s[e.BrowserSizeMode.Large])||i.DEFAULT_FIXED_POSITION_SIZE_JSON)}),[b,null==w?void 0:w.positionSize]),(0,e.jsx)("div",{className:"cookie-banner-setting-panel h-100",style:{overflow:"scroll"},onClick:F},(0,e.jsx)(n.SettingSection,{className:"cookie-banner-setting-header"},(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(i.Label,null,(0,e.jsx)(is,null),(0,e.jsx)("span",{className:"ml-2"},v("cookieBannerSettingTitle"))))),(0,e.jsx)(n.SettingSection,{title:`${v("layout")}`},(0,e.jsx)("div",{className:"banner-layout-setting d-flex justify-content-center",css:ns},(0,e.jsx)(i.Button,{icon:!0,className:"banner-layout-item",color:D===e.ECookieBannerLayout.Vertical?"primary":"default",onClick:()=>{z(e.ECookieBannerLayout.Vertical),Zi("layout",e.ECookieBannerLayout.Vertical)}},(0,e.jsx)(i.Icon,{autoFlip:!0,icon:h(2384),className:"banner-layout-icon"})),(0,e.jsx)(i.Button,{icon:!0,className:"banner-layout-item",color:D===e.ECookieBannerLayout.Horizontal?"primary":"default",onClick:()=>{z(e.ECookieBannerLayout.Horizontal),Zi("layout",e.ECookieBannerLayout.Horizontal)}},(0,e.jsx)(i.Icon,{autoFlip:!0,icon:h(4142),className:"banner-layout-icon"})))),(0,e.jsx)(n.SettingSection,{"aria-label":`${v("position")} & ${v("size")}`},(0,e.jsx)("div",{className:"d-flex mb-4"},(0,e.jsx)("h6",{className:"flex-lg-grow-1 mb-0 text-truncate title2 hint-paper"},`${v("position")} & ${v("size")}`),(()=>{var t,s;const o=!(null===(t=null==w?void 0:w.positionSize)||void 0===t?void 0:t[e.BrowserSizeMode.Medium]),n=!(null===(s=null==w?void 0:w.positionSize)||void 0===s?void 0:s[e.BrowserSizeMode.Small]),a=b===e.BrowserSizeMode.Large||o&&n,l=b===e.BrowserSizeMode.Large&&o||b===e.BrowserSizeMode.Medium||b===e.BrowserSizeMode.Small&&o&&n,r=b===e.BrowserSizeMode.Large&&n||b===e.BrowserSizeMode.Medium&&o&&n||b===e.BrowserSizeMode.Small,c=x.ref.palette.neutral[800],d=v("applyToLargeScreen"),p=v("applyToMediumScreen"),g=v("applyToSmallScreen");return(0,e.jsx)("div",{className:"d-flex justify-content-between align-items-center"},a&&(0,e.jsx)(i.Tooltip,{title:d},(0,e.jsx)(i.Button,{icon:!0,size:"sm",type:"tertiary",disableHoverEffect:!0,disableRipple:!0,className:"p-0 border-0"},(0,e.jsx)(i.Icon,{size:12,icon:I(),color:c,className:"border-0"}))),l&&(0,e.jsx)(i.Tooltip,{title:p},(0,e.jsx)(i.Button,{icon:!0,size:"sm",type:"tertiary",disableHoverEffect:!0,disableRipple:!0,className:"p-0 border-0"},(0,e.jsx)(i.Icon,{size:12,icon:j(),color:c,className:"border-0"}))),r&&(0,e.jsx)(i.Tooltip,{title:g},(0,e.jsx)(i.Button,{icon:!0,size:"sm",type:"tertiary",disableHoverEffect:!0,disableRipple:!0,className:"p-0 border-0"},(0,e.jsx)(i.Icon,{size:12,icon:A(),color:c,className:"border-0"}))))})()),(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(l.FixedPositionSize,{fixedPositionSizeJson:B,onChange:e=>{L(e),Zi(["positionSize",b],e)}}))),(0,e.jsx)(n.SettingSection,{title:v("bannerButtonSettings")},y&&(0,e.jsx)(n.SettingRow,{className:"accept-button-setting"},(0,e.jsx)(ss,{label:v("acceptAllButton"),rightIcon:Ji()},(0,e.jsx)(n.SettingRow,{className:"mt-2",label:v("text")}),(0,e.jsx)(i.TextInput,{className:"w-100 mt-2",defaultValue:(null==C?void 0:C.label)||v("acceptAll"),onAcceptValue:e=>{const t=C.set("label",e);M(t),Zi("acceptAllButton",t)}}),(0,e.jsx)(n.SettingRow,{className:"mt-2",label:v("icon")},(0,e.jsx)(pe.IconPicker,{configurableOption:"none",icon:null===(g=null==C?void 0:C.icon)||void 0===g?void 0:g.asMutable({deep:!0}),setButtonUseColor:!1,previewOptions:{color:!0},onChange:e=>{const t=C.set("icon",e);M(t),Zi("acceptAllButton",t)}})))),!y&&(0,e.jsx)(n.SettingRow,{className:"close-button-setting"},(0,e.jsx)(ss,{label:v("closeButton"),rightIcon:Ji()},(0,e.jsx)(n.SettingRow,{className:"mt-2",label:v("text")}),(0,e.jsx)(i.TextInput,{className:"w-100 mt-2",defaultValue:(null==T?void 0:T.label)||v("close"),onAcceptValue:e=>{const t=T.set("label",e);N(t),Zi("closeButton",t)}}),(0,e.jsx)(n.SettingRow,{className:"mt-2",label:v("icon")},(0,e.jsx)(pe.IconPicker,{configurableOption:"none",icon:null===(u=null==T?void 0:T.icon)||void 0===u?void 0:u.asMutable({deep:!0}),setButtonUseColor:!1,previewOptions:{color:!0},onChange:e=>{const t=T.set("icon",e);N(t),Zi("closeButton",t)}})))),y&&(0,e.jsx)(n.SettingRow,{className:"decline-button-setting"},(0,e.jsx)(os,{openForCheck:!0,closeForUncheck:!0,disableActionForUnchecked:!0,label:v("declineAllButton"),rightIcon:Ji(),checked:(null==P?void 0:P.enable)||!1,onCheckedChange:e=>{const t=P.set("enable",e);k(t),Zi("declineAllButton",t)}},(0,e.jsx)(n.SettingRow,{className:"mt-2",label:v("text")}),(0,e.jsx)(i.TextInput,{className:"w-100 mt-2",defaultValue:(null==P?void 0:P.label)||v("declineAll"),onAcceptValue:e=>{const t=P.set("label",e);k(t),Zi("declineAllButton",t)}}),(0,e.jsx)(n.SettingRow,{className:"mt-2",label:v("icon")},(0,e.jsx)(pe.IconPicker,{configurableOption:"none",icon:null===(m=null==P?void 0:P.icon)||void 0===m?void 0:m.asMutable({deep:!0}),setButtonUseColor:!1,previewOptions:{color:!0},onChange:e=>{const t=P.set("icon",e);k(t),Zi("declineAllButton",t)}})))),y&&(0,e.jsx)(n.SettingRow,{className:"cookie-settings-button-setting"},(0,e.jsx)(os,{openForCheck:!0,closeForUncheck:!0,disableActionForUnchecked:!0,label:v("cookieSettingsButton"),rightIcon:Ji(),checked:(null==R?void 0:R.enable)||!1,onCheckedChange:e=>{const t=R.set("enable",e);O(t),Zi("cookieSettingsButton",t)}},(0,e.jsx)(n.SettingRow,{className:"mt-2",label:v("text")}),(0,e.jsx)(i.TextInput,{className:"w-100 mt-2",defaultValue:(null==R?void 0:R.label)||v("preferences"),onAcceptValue:e=>{const t=R.set("label",e);O(t),Zi("cookieSettingsButton",t)}}),(0,e.jsx)(n.SettingRow,{className:"mt-2",label:v("icon")},(0,e.jsx)(pe.IconPicker,{configurableOption:"none",icon:null===(f=null==R?void 0:R.icon)||void 0===f?void 0:f.asMutable({deep:!0}),setButtonUseColor:!1,previewOptions:{color:!0},onChange:e=>{const t=R.set("icon",e);O(t),Zi("cookieSettingsButton",t)}})),(0,e.jsx)(n.SettingRow,{label:v("cookieSettingsWindow")},(0,e.jsx)(i.Button,{icon:!0,active:S,onClick:()=>{t.builderAppSync.publishOpenCookieSettingsWindowToApp(!S)}},(0,e.jsx)(Xi,null)))))),(0,e.jsx)(n.SettingSection,{role:"group",title:v("animation"),"aria-label":v("animation")},(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(l.AnimationSettingComponent,{contentId:"cookie-banner",effectSetting:null==w?void 0:w.effect,onSettingChange:function(i,s){(0,t.getAppConfigAction)().editCookieBannerConfig("effect",s).exec(),t.builderAppSync.publishAnimationPreviewToApp({dialogId:"cookie-banner",playMode:i,id:(0,e.getNextAnimationId)()})},previewEnabled:!0,supportAsOne:!0,onPreviewClicked:function(i){w.effect&&t.builderAppSync.publishAnimationPreviewToApp({dialogId:"cookie-banner",playMode:i,id:(0,e.getNextAnimationId)()})},formatMessage:v}))),(0,e.jsx)(l.ThemeBackgroundSection,{background:(null==w?void 0:w.backgroundStyle)||{fillType:i.FillType.FILL},onChange:E}),(0,e.jsx)(l.ThemeBorderSection,{border:null==w?void 0:w.border,borderRadius:null==w?void 0:w.borderRadius,onBorderChange:W,onBorderRadiusChange:U}),(0,e.jsx)(l.ThemeBoxShadowSection,{value:null==w?void 0:w.boxShadow,onChange:V}))};var ls=function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function a(e){try{r(s.next(e))}catch(e){n(e)}}function l(e){try{r(s.throw(e))}catch(e){n(e)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,l)}r((s=s.apply(e,t||[])).next())}))};const{useState:rs,useEffect:cs}=e.React,ds={svg:Wi()},ps={svg:Vi()},gs=Object.assign({},Lt,i.defaultMessages,p.defaultMessages,e.defaultMessages);const us=s=>{const[o,n]=rs("#"),{id:a,type:l,theme:r,intl:c,linkTitle:d,ariaLabel:p}=s;return cs((()=>{((i,s)=>ls(void 0,void 0,void 0,(function*(){var o,n,a,l,r;const c=null===(n=null===(o=(0,e.getAppStore)().getState())||void 0===o?void 0:o.appStateInBuilder)||void 0===n?void 0:n.appConfig;let d;if("page"===s||"dialog"===s)return yield t.helpUtils.getBuildAppsHelpLink(`add-a-${s}`);if("screen"===s)return yield t.helpUtils.getBuildAppsHelpLink("add-screen-groups");if("section"===s)d="section";else if("placeholder"===s)d="placeholder";else if(d=null===(r=null===(l=null===(a=null==c?void 0:c.widgets)||void 0===a?void 0:a[i])||void 0===l?void 0:l.manifest)||void 0===r?void 0:r.name,!d)return yield Promise.resolve(null);return yield t.helpUtils.getWidgetHelpLink(d)})))(a,l).then((e=>{n(e)}))}),[a,l]),(0,e.jsx)(i.Link,{icon:!0,to:o,target:"_blank",title:d,css:e.css`
        padding: 0 !important;
        .svg-component{
          margin-right: 0;
          color: ${r.ref.palette.neutral[1e3]};
        }
        :hover {
          .svg-component{
            color: ${r.ref.palette.black};
          }
        }
      `,"aria-label":p},(0,e.jsx)($i,{autoFlip:!e.i18n.isSameLanguage(null==c?void 0:c.locale,"he")}))},hs=s=>{var o;const{hideColorSelector:n,headTitle:a,icon:l,customIcon:r,customName:c,id:d,type:p,needIconFlip:g,theme:u,intl:h,handleIconChange:m,handleTitleChange:f,handleKeydown:v,headTitleInput:x,defaultLabel:b}=s,[w,y]=rs("");let I,S="";const j="string"==typeof r?[{svg:r}]:[r],C=JSON.parse(JSON.stringify(l));if(null==C?void 0:C.svg){const e=null===(o=null==C?void 0:C.properties)||void 0===o?void 0:o.filename;e?(null==e?void 0:e.indexOf(".svg"))>0&&(S=b):C.properties=Object.assign({filename:b},C.properties),I=C}else{I={svg:l,properties:{filename:b,originalName:`default/${`${c}.svg`}`}}}cs((()=>{y(a)}),[a]);const A=e=>h.formatMessage({id:e,defaultMessage:gs[e]}),M=e=>{if("page"===p||"dialog"===p){const i=(0,t.getAppConfigAction)();if(t.appConfigUtils.isLabelDuplicated(i.appConfig,p,d,e))return{valid:!1,msg:A("duplicatedLabel")}}return{valid:!0}};return(0,e.jsx)("div",{className:"jimu-widget-setting--header d-flex align-items-center justify-content-between"},(0,e.jsx)("div",{className:"d-flex align-items-center"},(0,e.jsx)(pe.IconPicker,{previewOptions:{autoFlip:g,color:!0},configurableOption:n?"none":"color",className:"flex-none",icon:I,customLabel:S,customIcons:j,onChange:m,hideRemove:!0,onKeyDown:t=>{if("Tab"===t.key&&t.shiftKey&&(0,e.getAppStore)().getState().appStateInBuilder.appRuntimeInfo.appMode===e.AppMode.Design){t.preventDefault();const i=document.querySelector(`iframe[name="${e.APP_FRAME_NAME_IN_BUILDER}"]`);((null==i?void 0:i.contentDocument)||(null==i?void 0:i.contentWindow.document)).body.focus()}},setButtonUseColor:!1}),(0,e.jsx)("div",{className:"d-flex mx-1",css:e.css`max-width: 170px;`},(0,e.jsx)(i.TextInput,{className:"header-title-input w-100 h5",ref:x,size:"sm",title:w,value:w||"",onChange:e=>{y(e.target.value)},onAcceptValue:e=>f(d,e,p),checkValidityOnChange:M,checkValidityOnAccept:M,onBlur:e=>{(e=>{if(""===e.trim()){const i=(0,t.getAppConfigAction)();"widget"===p?e=i.appConfig.widgets[d].label:"section"===p?e=i.appConfig.sections[d].label:"screen"===p?e=i.appConfig.screenGroups[d].label:"page"===p&&(e=i.appConfig.pages[d].label),y(e)}})(e.target.value)},onKeyDown:v,borderless:!0}))),(0,e.jsx)(us,{id:d,type:p,theme:u,intl:h,linkTitle:A("help")}))};class ms extends e.React.PureComponent{constructor(i){super(i),this.spanText=e.React.createRef(),this.headTitleInput=e.React.createRef(),this.sidePopperTrigger=e.React.createRef(),this.getCss=(t,i)=>{const{theme:s}=this.props,o=window.isExpressBuilder;return e.css`
      height: 100%;
      overflow: hidden;
      overflow-x: hidden;

      .jimu-widget-setting--header {
        ${o&&!t&&!i&&`border-bottom: 1px solid ${s.ref.palette.neutral[700]};`}
      }
      .jimu-widget-setting {
        overflow-x: hidden;
      }
      .widget-setting-tab{
        position: absolute;
        background-color: ${s.sys.color.surface.background};
      }

      .widget-setting, .section-setting {
        height: calc(100% - ${e.polished.rem(2)});
      }

      .jimu-widget-setting--row {
        label {
          user-select: none;
        }
      }
      .jimu-widget-setting--section-header {
        user-select: none;
      }
      .tab-content {
        height: calc(100% - ${e.polished.rem(40)});
      }
      .tab-pane{
        width: 100%;
      }

      .tab-title-item{
        width: 30%;
      }

      .edit-label-input {
        width: 50%;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
      }

      .title-span-hide {
        &.h5 {
          font-weight: ${s.ref.typeface.fontWeightBold};
          font-size: 1rem;
        }
      }

      .header-title-input {
        .input-wrapper {
          height: 100%;
          background-color: transparent;
        }
        &.h5 {
          input {
            width: 100%;
            font-weight: ${s.ref.typeface.fontWeightMedium};
            font-size: ${e.polished.rem(16)};
            color: var(--ref-palette-neutral-1000);
          }
        }
      }

      .setting-container {
        overflow-y: auto;
        overflow-x: hidden;
        ${!o&&"height: 100%;"}
      }

      .single-setting {
        border-top: 1px solid ${s.ref.palette.neutral[700]};
      }

      .help-btn {
        color: ${s.ref.palette.neutral[700]};
      }
      .help-btn:hover {
        color: ${s.ref.palette.black};
      }
    `},this.onLayoutItemSettingChanged=(e,i)=>{(0,t.getAppConfigAction)().editLayoutItemProperty(e,"setting",i).exec()},this.onLayoutItemStyleChanged=(i,s)=>{const o=(0,t.getAppConfigAction)(),{layoutId:n,layoutItemId:a}=i,l=o.appConfig.layouts[n].content[a];l.type===e.LayoutItemType.Widget?l.widgetId?o.editWidgetProperty(l.widgetId,"style",s).exec():o.editLayoutItemProperty(i,"setting.placeholderStyle",s,!0).exec():l.type===e.LayoutItemType.Section&&o.editSectionProperty(l.sectionId,"style",s).exec()},this.onLayoutPosChanged=(e,i)=>{(0,t.getAppConfigAction)().editLayoutItemProperty(e,"bbox",i).exec()},this.getPageType=(e,t)=>{for(const i in t){const s=t[i];if(s.id===e)return s}return{}},this.formatMessage=(e,t)=>this.props.intl.formatMessage({id:e,defaultMessage:gs[e]},t),this.editTitle=(e,i,s)=>{const o=(0,t.getAppConfigAction)();i?"widget"===s||"block"===s?o.editWidgetProperty(e,"label",i).exec():"section"===s?o.editSectionProperty(e,"label",i).exec():"screen"===s?o.editScreenGroupProperty(e,"label",i).exec():"page"===s?o.editPageProperty(e,"label",i).exec():"dialog"===s&&o.editDialogProperty(e,"label",i).exec():"widget"===s?i=o.appConfig.widgets[e].label:"section"===s?i=o.appConfig.sections[e].label:"screen"===s?i=o.appConfig.screenGroups[e].label:"page"===s&&(i=o.appConfig.pages[e].label)},this.handleKeydown=e=>{"Enter"===e.key&&this.headTitleInput.current&&this.headTitleInput.current.blur()},this.handleIconChange=i=>{const s=this.getDisplay(),{selection:o,currentPageId:n,currentDialogId:a}=this.props,l=(0,t.getAppConfigAction)(),r=l.appConfig;if(s.page)l.editPageProperty(n,"icon",i).exec();else if(s.dialog)l.editDialogProperty(a,"icon",i).exec();else if(s.widget){const t=p.searchUtils.findLayoutItem(r,o);t&&(e.urlUtils.isAbsoluteUrl(i.svg)?fetch(i.svg).then((e=>e.text())).then((e=>{const s=Object.assign(Object.assign({},i),{svg:e});l.editWidgetProperty(t.widgetId,"icon",s).exec()})).catch((e=>{console.error("Error fetching SVG:",e)})):l.editWidgetProperty(t.widgetId,"icon",i).exec())}else if(s.section){const e=p.searchUtils.findLayoutItem(r,o);e&&l.editSectionProperty(e.sectionId,"icon",i).exec()}else if(s.screen){const e=p.searchUtils.findLayoutItem(r,o);e&&l.editScreenGroupProperty(e.screenGroupId,"icon",i).exec()}},this.focusEditTitle=e=>{this.headTitleInput.current&&(this.headTitleInput.current.select(),this.headTitleInput.current.focus())},this.getDisplay=()=>{var t;const{selection:i}=this.props,s=this.getAppConfig(),o={widget:!1,section:!1,screen:!1,layoutItem:!1,placeholder:!1,page:!1,link:!1,folder:!1,dialog:!1,noSelection:!1,cookieBanner:!1};if(i){const n=p.searchUtils.findLayoutItem(s,i);n?n.type===e.LayoutItemType.Widget?n.widgetId?o.widget=!0:(o.layoutItem=!0,o.placeholder=!0):n.type===e.LayoutItemType.Section&&!1!==(null===(t=i.additionalInfo)||void 0===t?void 0:t.commonSection)?o.section=!0:n.type===e.LayoutItemType.ScreenGroup?o.screen=!0:o.layoutItem=!0:o.noSelection=!0}else this.props.currentDialogId?o.dialog=!0:this.props.currentPageId?(o.page=!0,o.link=this.getPageType(this.props.currentPageId,s.pages).type===e.PageType.Link,o.folder=this.getPageType(this.props.currentPageId,s.pages).type===e.PageType.Folder):o.noSelection=!0;return this.props.isCookieBannerOpen&&(o.cookieBanner=!0),o};const s={titleText:"",headTitleText:"",helpLink:""},{selection:o,appConfig:n,currentPageId:a}=i;if(o){const t=p.searchUtils.findLayoutItem(n,o);t&&(t.type===e.LayoutItemType.Widget?t.widgetId&&(s.headTitleText=n.widgets[t.widgetId].label):t.type===e.LayoutItemType.Section&&(s.headTitleText=n.sections[t.sectionId].label))}else a&&(s.headTitleText=n.pages[a].label);this.state=s}getAppConfig(){return(0,e.getAppStore)().getState().appStateInBuilder&&(0,e.getAppStore)().getState().appStateInBuilder.appConfig}isWidgetOriginalCustomIcon(e,t){if(null===t)return!1;const i=t.lastIndexOf("/"),s=t.lastIndexOf(".");return e===t.substring(i+1,s)}getDefaultWidgetIcon(t,i,s){var o;let n,a,l;"widget"===t?(l=s,"string"!=typeof i.icon&&this.isWidgetOriginalCustomIcon(i.manifest.name,i.icon.properties.originalName)?this.isWidgetOriginalCustomIcon(i.manifest.name,i.icon.properties.originalName)&&(n=i.icon.svg):n=e.urlUtils.getAbsoluteRootUrl()+i.uri+"icon.svg",a=`${null===(o=null==i?void 0:i.manifest)||void 0===o?void 0:o.name}.svg`):(l=this.formatMessage("block"),n=Wi().toString(),a=`${t}.svg`);return{svg:n,properties:{filename:l,inlineSvg:!0,originalName:`default/${a}`,path:`default/${a}`}}}getDefaultIcon(e,i){if("page"===e)return t.utils.getDefaultTocPageIcon(i,this.formatMessage);let s,o;"section"===e?(s=t.utils.getDefaultSectionIcon().toString(),o=this.formatMessage("section")):"screen"===e?(s=Vi().toString(),o=this.formatMessage("screenGroup")):"dialog"===e&&(s=t.utils.getDefaultTocDialogIcon().toString(),o=this.formatMessage("dialog"));const n=`${e}.svg`;return{svg:s,properties:{filename:o,inlineSvg:!0,originalName:`default/${n}`,path:`default/${n}`}}}onTabChange(t,i,s){i(e.appActions.widgetStatePropChange(s,"settingPanelChange",t))}widgetSettingsWithSimpleAction(t,i){var s,n,a;const{dispatch:l,widgetsSettingRuntimeInfo:r,widgetMessageActionSettingStatus:c}=this.props,d=i.widgets[t].manifest,p=(null===(s=null==d?void 0:d.publishMessages)||void 0===s?void 0:s.length)>0,g=null!==(a=null===(n=null==d?void 0:d.properties)||void 0===n?void 0:n.canConsumeDataAction)&&void 0!==a&&a,u=!1===(null==c?void 0:c[t]);return(0,e.jsx)("div",{ref:this.sidePopperTrigger},(0,e.jsx)(o,{widgetId:t,dispatch:l,formatMessage:this.formatMessage,widgetsSettingRuntimeInfo:r}),!u&&(0,e.jsx)("div",null,(0,e.jsx)(zi,{widgetId:t,supportMessageAction:p,canConsumeDataAction:g,pageId:e.urlUtils.getAppIdPageIdFromUrl().pageId,sidePopperTrigger:this.sidePopperTrigger})))}renderWidgetSettings(t,s,n,a,l){var r,c,d,g,u,h,m;let f;const{currentSelectionIcon:v,currentSelectionTitle:x,dispatch:b,selection:w}=this.props,y=null==n?void 0:n.layouts[null==a?void 0:a.layoutId],I=p.searchUtils.findLayoutItem(n,a).widgetId,S=n.widgets[I],j=S.manifest,C=(null===(r=null==j?void 0:j.publishMessages)||void 0===r?void 0:r.length)>0,A=null!==(d=null===(c=null==j?void 0:j.properties)||void 0===c?void 0:c.canConsumeDataAction)&&void 0!==d&&d,M=(null===(g=null==j?void 0:j.i18nMessages)||void 0===g?void 0:g._widgetLabel)||(null==j?void 0:j.label),T=y.type===e.LayoutType.FlowLayout?"block":"widget",N=window.isExpressBuilder;return f=(null==j?void 0:j.properties.hasConfig)&&(null==j?void 0:j.properties.hasConfigInSettingPage)?N?this.widgetSettingsWithSimpleAction(I,n):(0,e.jsx)(i.Tabs,{type:"underline",key:"widget-setting",className:"widget-setting flex-grow-1 w-100",fill:!0,defaultValue:"content",onChange:e=>{this.onTabChange(e,b,S.id)}},(0,e.jsx)(i.Tab,{id:"content",title:this.formatMessage("content"),className:"tab-title-item"},(0,e.jsx)(o,{formatMessage:this.formatMessage,dispatch:this.props.dispatch,widgetId:I,widgetsSettingRuntimeInfo:this.props.widgetsSettingRuntimeInfo})),(0,e.jsx)(i.Tab,{id:"dynamicSettingStyle",title:this.formatMessage("dynamicSettingStyle"),className:"tab-title-item"},(0,e.jsx)("div",{className:"setting-container"},(0,e.jsx)(Ke,{layoutId:a.layoutId,layoutItemId:a.layoutItemId,formatMessage:this.formatMessage,onSettingChanged:this.onLayoutItemSettingChanged,onStyleChange:this.onLayoutItemStyleChanged,onPosChanged:this.onLayoutPosChanged}))),(C||A)&&(0,e.jsx)(i.Tab,{id:"action",title:this.formatMessage("action"),className:"tab-title-item"},(0,e.jsx)("div",{className:"setting-container"},(0,e.jsx)(wi,{widgetId:I,supportMessageAction:C,canConsumeDataAction:A,formatMessage:this.formatMessage,pageId:e.urlUtils.getAppIdPageIdFromUrl().pageId})))):(0,e.jsx)("div",{className:"h-100"},(0,e.jsx)(Ke,{layoutId:a.layoutId,layoutItemId:a.layoutItemId,formatMessage:this.formatMessage,isSingle:!0,onSettingChanged:this.onLayoutItemSettingChanged,onStyleChange:this.onLayoutItemStyleChanged,onPosChanged:this.onLayoutPosChanged})),f=(0,e.jsx)("div",{css:l&&e.css`z-index: -1;`,className:"w-100 h-100 d-flex flex-column widget-setting-tab","data-is-parent":!!l||void 0},w.layoutId===a.layoutId&&(0,e.jsx)(hs,{headTitle:x,icon:v,customIcon:this.getDefaultWidgetIcon(T,S,M),customName:null===(u=null==S?void 0:S.manifest)||void 0===u?void 0:u.name,id:S.id,type:T,needIconFlip:null===(m=null===(h=null==S?void 0:S.manifest)||void 0===h?void 0:h.properties)||void 0===m?void 0:m.flipIcon,theme:t,intl:s,handleIconChange:this.handleIconChange,handleTitleChange:this.editTitle,handleKeydown:this.handleKeydown,headTitleInput:this.headTitleInput,defaultLabel:M}),(0,e.jsx)("div",{style:{flex:1,overflow:"auto"}},f)),f}render(){var t;const s=this.getAppConfig(),{selection:o,browserSizeMode:n,theme:a,intl:l,currentSelectionIcon:r,currentSelectionTitle:c}=this.props;if(!s)return(0,e.jsx)("div",{css:this.getCss(!0),className:"builder-dynamic-setting bg-default"},(0,e.jsx)(w,{dispatch:this.props.dispatch,formatMessage:this.formatMessage,theme:this.props.theme,pageId:"empty",browserSizeMode:this.props.browserSizeMode,appTheme:this.props.theme2}));const g=this.getDisplay();let u;if(g.widget){const i=p.searchUtils.findLayoutItem(s,o);if(s.widgets[null==i?void 0:i.widgetId]){const r=i.widgetId,c=p.searchUtils.getParentWidgetIdOfContent(s,r,e.LayoutItemType.Widget,n),d=s.widgets[c];if(c&&(null===(t=null==d?void 0:d.manifest)||void 0===t?void 0:t.widgetType)!==e.WidgetType.Layout){const t=p.searchUtils.getLayoutInfosHoldContent(s,e.LayoutItemType.Widget,c,n)[0];u=(0,e.jsx)(e.React.Fragment,null,t&&this.renderWidgetSettings(a,l,s,t,!0),this.renderWidgetSettings(a,l,s,o))}else u=(0,e.jsx)(e.React.Fragment,null,this.renderWidgetSettings(a,l,s,o))}else u=(0,e.jsx)("div",null,this.formatMessage("noSelection"))}if(g.layoutItem){let t=g.placeholder?this.formatMessage("placeholder"):this.formatMessage("daynamicLayout");if(o){const i=s.layouts[o.layoutId];(null==i?void 0:i.type)===e.LayoutType.GridLayout&&(t=(0,d.getLabelOfGridTab)(s,o,this.formatMessage))}u=(0,e.jsx)("div",{className:"w-100 h-100 d-flex flex-column"},(0,e.jsx)("h4",{className:"jimu-widget-setting--header d-flex align-items-center justify-content-between"},(0,e.jsx)("div",null,t),g.placeholder&&(0,e.jsx)(us,{type:"placeholder",theme:a,intl:l,linkTitle:this.formatMessage("help"),ariaLabel:t})),(0,e.jsx)("div",{className:"flex-grow-1 setting-container"},(0,e.jsx)(Ke,{layoutId:o.layoutId,layoutItemId:o.layoutItemId,formatMessage:this.formatMessage,isSingle:!0,onSettingChanged:this.onLayoutItemSettingChanged,onStyleChange:this.onLayoutItemStyleChanged,onPosChanged:this.onLayoutPosChanged})))}if(g.section){const t=p.searchUtils.findLayoutItem(s,o),n=s.sections[t.sectionId];u=(0,e.jsx)(i.Tabs,{type:"underline",className:"flex-grow-1 section-setting",fill:!0,defaultValue:"content"},(0,e.jsx)(i.Tab,{id:"content",key:"section-setting",title:this.formatMessage("content")},(0,e.jsx)(De,{intl:this.props.intl,formatMessage:this.formatMessage,theme:this.props.theme,appTheme:this.props.theme2,dispatch:this.props.dispatch,sectionId:n.id})),(0,e.jsx)(i.Tab,{id:"dynamicSettingStyle",title:this.formatMessage("dynamicSettingStyle")},(0,e.jsx)("div",{className:"h-100 setting-container"},(0,e.jsx)(Ke,{layoutId:o.layoutId,layoutItemId:o.layoutItemId,formatMessage:this.formatMessage,onSettingChanged:this.onLayoutItemSettingChanged,onStyleChange:this.onLayoutItemStyleChanged,onPosChanged:this.onLayoutPosChanged})))),u=(0,e.jsx)("div",{className:"w-100 h-100 d-flex flex-column"},(0,e.jsx)(hs,{headTitle:c,icon:r,customIcon:this.getDefaultIcon("section"),customName:"section",id:n.id,type:"section",theme:a,intl:l,handleIconChange:this.handleIconChange,handleTitleChange:this.editTitle,handleKeydown:this.handleKeydown,headTitleInput:this.headTitleInput,defaultLabel:c}),(0,e.jsx)("div",{className:"h-100 setting-container"},u))}if(g.screen){const t=p.searchUtils.findLayoutItem(s,o);u=(0,e.jsx)(Je,{intl:this.props.intl,formatMessage:this.formatMessage,theme:this.props.theme,dispatch:this.props.dispatch,screenGroupId:t.screenGroupId}),u=(0,e.jsx)("div",{className:"w-100 h-100 d-flex flex-column"},(0,e.jsx)(hs,{headTitle:c,icon:r,customIcon:this.getDefaultIcon("screen"),customName:"screen",id:t.screenGroupId,type:"screen",theme:a,intl:l,handleIconChange:this.handleIconChange,handleTitleChange:this.editTitle,handleKeydown:this.handleKeydown,headTitleInput:this.headTitleInput,defaultLabel:c}),(0,e.jsx)("div",{className:"h-100 setting-container"},u))}if(g.page){u=(0,e.jsx)(w,{dispatch:this.props.dispatch,formatMessage:this.formatMessage,pageId:this.props.currentPageId,pageMode:this.props.pageMode,maxWidth:this.props.maxPageWidth,browserSizeMode:this.props.browserSizeMode,theme:this.props.theme,appTheme:this.props.theme2}),g.link?u=(0,e.jsx)(X,{dispatch:this.props.dispatch,appConfig:s,formatMessage:this.formatMessage,pageId:this.props.currentPageId}):g.folder&&(u=(0,e.jsx)(ee,{dispatch:this.props.dispatch,appConfig:s,formatMessage:this.formatMessage,pageId:this.props.currentPageId}));const{currentPageId:t}=this.props,i=s.pages[t];u=i?(0,e.jsx)("div",{className:"w-100 h-100 d-flex flex-column"},(0,e.jsx)(hs,{hideColorSelector:!0,headTitle:c,icon:r,customIcon:this.getDefaultIcon("page",i),customName:"page",id:i.id,type:"page",theme:a,intl:l,handleIconChange:this.handleIconChange,handleTitleChange:this.editTitle,handleKeydown:this.handleKeydown,headTitleInput:this.headTitleInput,defaultLabel:c}),(0,e.jsx)("div",{className:"h-100 setting-container single-setting"},u)):null}if(g.dialog){const{currentDialogId:t}=this.props;u=(0,e.jsx)(D,{dispatch:this.props.dispatch,formatMessage:this.formatMessage,dialogId:t,browserSizeMode:this.props.browserSizeMode,theme:this.props.theme,appTheme:this.props.theme2});const i=s.dialogs[t];u=(0,e.jsx)("div",{className:"w-100 h-100 d-flex flex-column"},(0,e.jsx)(hs,{hideColorSelector:!0,headTitle:c,icon:r,customIcon:this.getDefaultIcon("dialog"),customName:"dialog",id:i.id,type:"dialog",theme:a,intl:l,handleIconChange:this.handleIconChange,handleTitleChange:this.editTitle,handleKeydown:this.handleKeydown,headTitleInput:this.headTitleInput,defaultLabel:c}),(0,e.jsx)("div",{className:"h-100 setting-container single-setting"},u))}g.cookieBanner&&(u=(0,e.jsx)(as,{browserSizeMode:this.props.browserSizeMode,theme:this.props.theme,dispatch:this.props.dispatch,appConfig:s,formatMessage:this.formatMessage})),g.noSelection&&(u=(0,e.jsx)("div",{className:"h-100"},this.formatMessage("noSelection")));const h=!!g.page,m=!!g.dialog;return(0,e.jsx)("div",{css:this.getCss(h,m),className:"builder-dynamic-setting bg-default"},(0,e.jsx)("span",{ref:this.spanText,className:"title-span-hide px-1 border h5",style:{width:"auto",position:"absolute",opacity:0,whiteSpace:"nowrap",zIndex:-1}},this.state.headTitleText||""),u)}}ms.mapExtraStateProps=(i,s)=>{var o,n,a,l,r,c,d,g,u,h,m,f;const v=null===(o=i.appStateInBuilder)||void 0===o?void 0:o.appRuntimeInfo.currentPageId,x=null===(n=i.appStateInBuilder)||void 0===n?void 0:n.appRuntimeInfo.currentDialogId,b=null===(r=null===(l=null===(a=i.appStateInBuilder)||void 0===a?void 0:a.appRuntimeInfo)||void 0===l?void 0:l.cookieBanner)||void 0===r?void 0:r.isCookieBannerOpenByPrivacyPanel,w=null===(c=i.appStateInBuilder)||void 0===c?void 0:c.appConfig;let y,I;v&&(y=null===(g=null===(d=null==w?void 0:w.pages)||void 0===d?void 0:d[v])||void 0===g?void 0:g.mode,I=null===(h=null===(u=null==w?void 0:w.pages)||void 0===u?void 0:u[v])||void 0===h?void 0:h.maxWidth);const S=null===(m=i.appStateInBuilder)||void 0===m?void 0:m.appRuntimeInfo.selection,{icon:j,title:C}=function(i,s,o,n,a){var l,r;let c,d;if(i){const s=p.searchUtils.findLayoutItem(n,i);if(s)if(s.type===e.LayoutItemType.Widget){if(s.widgetId){const t=n.widgets[s.widgetId],o=n.layouts[i.layoutId];d=t&&t.label,c=o.type!==e.LayoutType.FlowLayout||(null===(l=s.setting)||void 0===l?void 0:l.isFloating)?t&&t.icon:"string"!=typeof(null==t?void 0:t.icon)&&(null==t?void 0:t.icon)||ds}}else if(s.type===e.LayoutItemType.Section){if(s.sectionId){const e=n.sections[s.sectionId];d=null==e?void 0:e.label,c=(null==e?void 0:e.icon)||t.utils.getDefaultSectionIcon().toString()}}else if(s.type===e.LayoutItemType.ScreenGroup&&s.screenGroupId){const e=n.screenGroups[s.screenGroupId];d=null==e?void 0:e.label,c=null!==(r=null==e?void 0:e.icon)&&void 0!==r?r:ps}}else if(n)if(s){const e=n.dialogs[s];e&&(d=e.label,c=e.icon||t.utils.getDefaultTocDialogIcon())}else if(o){const e=n.pages[o];e&&(d=e.label,c=e.icon||t.utils.getDefaultTocPageIcon(e,null,a))}return{icon:c,title:d}}(S,x,v,w,s.i18nMessages.page);return{currentPageId:v,pageMode:y,maxPageWidth:I,widgetsSettingRuntimeInfo:i.builder.widgetsSettingRuntimeInfo,currentDialogId:x,selection:S,browserSizeMode:i.appStateInBuilder&&i.appStateInBuilder.browserSizeMode,currentSelectionIcon:j,currentSelectionTitle:C,isCookieBannerOpen:b,widgetMessageActionSettingStatus:null===(f=null==i?void 0:i.builder)||void 0===f?void 0:f.widgetMessageActionSettingStatus}};const fs=ms;function vs(e){h.p=e}})(),m})())}}}));