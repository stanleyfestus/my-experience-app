System.register(["calcite-components","jimu-core","jimu-for-builder","jimu-theme","jimu-ui","jimu-ui/advanced/resource-selector","jimu-ui/advanced/setting-components"],(function(e,t){var a={},n={},s={},o={},i={},l={},r={};return{setters:[function(e){a.CalciteInputTimeZone=e.CalciteInputTimeZone},function(e){n.EConsentMode=e.EConsentMode,n.React=e.React,n.ReactRedux=e.ReactRedux,n.SessionManager=e.SessionManager,n.TimezoneConfig=e.TimezoneConfig,n.UrlGeneralConfig=e.UrlGeneralConfig,n.appActions=e.appActions,n.classNames=e.classNames,n.css=e.css,n.dataSourceUtils=e.dataSourceUtils,n.dateUtils=e.dateUtils,n.getAppStore=e.getAppStore,n.hooks=e.hooks,n.jsx=e.jsx,n.lodash=e.lodash,n.urlManagerUtils=e.urlManagerUtils,n.useIntl=e.useIntl,n.uuidv1=e.uuidv1},function(e){s.ToBuilderMessage=e.ToBuilderMessage,s.UrlConfigManager=e.UrlConfigManager,s.appStateHistoryActions=e.appStateHistoryActions,s.builderAppSync=e.builderAppSync,s.getAppConfigAction=e.getAppConfigAction,s.helpUtils=e.helpUtils},function(e){o.styled=e.styled,o.useTheme=e.useTheme,o.withTheme=e.withTheme},function(e){i.Alert=e.Alert,i.AlertPopup=e.AlertPopup,i.Button=e.Button,i.Checkbox=e.Checkbox,i.CollapsablePanel=e.CollapsablePanel,i.Collapse=e.Collapse,i.Label=e.Label,i.Modal=e.Modal,i.ModalBody=e.ModalBody,i.ModalFooter=e.ModalFooter,i.Popper=e.Popper,i.Radio=e.Radio,i.Switch=e.Switch,i.TextArea=e.TextArea,i.TextInput=e.TextInput,i.Tooltip=e.Tooltip,i.defaultMessages=e.defaultMessages},function(e){l.IconPicker=e.IconPicker},function(e){r.RadioGroup=e.RadioGroup,r.SettingRow=e.SettingRow,r.SettingSection=e.SettingSection}],execute:function(){e((()=>{var e={9524:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M7.5 1.5a.5.5 0 0 1 1 0v2.8a.5.5 0 0 1-1 0zm6.028.874a.5.5 0 0 1 .062.705l-1.414 1.685a.5.5 0 1 1-.766-.643l1.414-1.685a.5.5 0 0 1 .704-.062m-10.352.062a.5.5 0 1 0-.766.643l1.414 1.685a.5.5 0 0 0 .766-.643zM6.244 10.6H5.43zM.961 9.8h4.88c.211 0 .359.19.359.4q0 .207.045.4a1.8 1.8 0 0 0 3.51 0h.814a2.6 2.6 0 0 1-5.139 0H.8v3.6h14.4v-3.6H9.755q.045-.194.045-.4c0-.21.148-.4.358-.4h4.881l-2.267-3.4H3.228zm11.81-4.2a.8.8 0 0 1 .666.356l2.429 3.642a.8.8 0 0 1 .134.444V14.2a.8.8 0 0 1-.8.8H.8a.8.8 0 0 1-.8-.8v-4.158a.8.8 0 0 1 .134-.444l2.429-3.642a.8.8 0 0 1 .665-.356z" clip-rule="evenodd"></path></svg>'},3303:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M9.438.994c.213 0 .397.146.44.35q.227 1.084.316 1.852.562.242 1.048.599l1.728-.676a.455.455 0 0 1 .556.188l1.42 2.394a.43.43 0 0 1-.091.547 22 22 0 0 1-1.49 1.194q.03.27.03.552 0 .32-.038.63l1.465 1.12a.43.43 0 0 1 .111.563l-1.42 2.394a.454.454 0 0 1-.53.197 23 23 0 0 1-1.807-.66q-.49.35-1.055.586l-.263 1.794a.446.446 0 0 1-.445.376H6.574a.446.446 0 0 1-.44-.35 21 21 0 0 1-.317-1.853 5.3 5.3 0 0 1-1.047-.598l-1.728.675a.455.455 0 0 1-.556-.187l-1.42-2.395a.43.43 0 0 1 .091-.546q.85-.735 1.49-1.194a5.167 5.167 0 0 1 .008-1.183L1.19 6.243a.43.43 0 0 1-.112-.562l1.42-2.395a.455.455 0 0 1 .531-.196q1.078.35 1.807.66c.324-.233.679-.43 1.056-.587l.262-1.794A.446.446 0 0 1 6.6.994zm-.365 1H6.985l-.28 1.866-.467.19q-.353.144-.672.34l-.207.136-.42.293-.476-.197q-.492-.205-1.169-.433l-.221-.074-1.045 1.719L3.59 6.999l-.06.479a4 4 0 0 0-.021.816l.014.144.058.492-.419.294q-.433.304-.979.746l-.177.145 1.043 1.72 1.845-.703.406.29q.307.219.645.384l.228.103.474.199.059.49q.06.507.19 1.177l.043.219h2.088l.282-1.867.466-.19q.354-.144.672-.34l.207-.136.419-.293.476.198q.495.204 1.17.433l.22.072 1.044-1.718-1.56-1.165.06-.479a4 4 0 0 0 .02-.815l-.013-.144-.06-.492.42-.295a18 18 0 0 0 .98-.746l.176-.146-1.043-1.72-1.844.705-.406-.29a4.5 4.5 0 0 0-.646-.385l-.228-.103-.474-.199-.058-.49q-.049-.405-.14-.916zm-1.067 3a3 3 0 1 1 0 6 3 3 0 0 1 0-6m0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4" clip-rule="evenodd"></path></svg>'},4702:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8.39 3.425 5.553.588a2.006 2.006 0 0 0-2.837 0L.588 2.716a2.006 2.006 0 0 0 0 2.837L3.425 8.39a2.006 2.006 0 0 0 2.837 0l.71-.709 1.347 1.347-.71.71a2.006 2.006 0 0 0 0 2.837l2.838 2.837a2.006 2.006 0 0 0 2.837 0l2.128-2.128a2.006 2.006 0 0 0 0-2.837L12.575 7.61a2.006 2.006 0 0 0-2.837 0l-.71.709-1.347-1.347.71-.71a2.006 2.006 0 0 0 0-2.837M6.972 6.262l.709-.709a1.003 1.003 0 0 0 0-1.419L4.844 1.297a1.003 1.003 0 0 0-1.419 0L1.297 3.425a1.003 1.003 0 0 0 0 1.419L4.134 7.68a1.003 1.003 0 0 0 1.419 0l.71-.71-.894-.892a.501.501 0 0 1 .71-.71zm2.056 3.476.6.599a.502.502 0 0 0 .709-.71l-.6-.599.71-.709a1.003 1.003 0 0 1 1.419 0l2.837 2.837a1.003 1.003 0 0 1 0 1.419l-2.128 2.128a1.003 1.003 0 0 1-1.419 0L8.32 11.866a1.003 1.003 0 0 1 0-1.419z" clip-rule="evenodd"></path></svg>'},6300:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M15 7.5a.52.52 0 0 1-.516.527H2.976L6.473 11.6a.535.535 0 0 1 0 .746.51.51 0 0 1-.73 0L1 7.5l4.743-4.846a.51.51 0 0 1 .73 0 .535.535 0 0 1 0 .746L2.976 6.973h11.508c.285 0 .516.236.516.527"></path></svg>'},5075:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M1 7.5c0-.291.231-.527.516-.527h11.508L9.527 3.4a.535.535 0 0 1 0-.746.51.51 0 0 1 .73 0L15 7.5l-4.743 4.846a.51.51 0 0 1-.73 0 .535.535 0 0 1 0-.746l3.497-3.573H1.516A.52.52 0 0 1 1 7.5"></path></svg>'},8547:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M7.5 0A3.5 3.5 0 0 1 11 3.5V6h1a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h1V3.5A3.5 3.5 0 0 1 7.5 0M5 6h5V3.5a2.5 2.5 0 0 0-2.336-2.495L7.5 1a2.5 2.5 0 0 0-2.495 2.336L5 3.5zm6 1H3v8h9V7zm-3.5 5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3" clip-rule="evenodd"></path></svg>'},170:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0m-1.27 4.936a6.5 6.5 0 1 1 .707-.707l4.136 4.137a.5.5 0 1 1-.707.707z" clip-rule="evenodd"></path></svg>'},5508:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5"></path><path fill="#000" fill-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14" clip-rule="evenodd"></path></svg>'},8996:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0" clip-rule="evenodd"></path></svg>'},9037:e=>{"use strict";e.exports=a},9244:e=>{"use strict";e.exports=n},4108:e=>{"use strict";e.exports=s},1888:e=>{"use strict";e.exports=o},4321:e=>{"use strict";e.exports=i},5809:e=>{"use strict";e.exports=l},9298:e=>{"use strict";e.exports=r}},t={};function c(a){var n=t[a];if(void 0!==n)return n.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,c),s.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var a in t)c.o(t,a)&&!c.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.p="";var p={};return c.p=window.jimuConfig.baseUrl,(()=>{"use strict";c.r(p),c.d(p,{__set_webpack_public_path__:()=>fe,default:()=>ge});var e=c(9244),t=c(4321);const a={experienceSettings:"Experience settings",templateSettings:"Template settings",favicon:"Favicon",timezone:"Time zone",deviceTimezone:"Device time zone",specificTimezone:"Specific time zone",dataTimezone:"Data time zone",dataTimezoneTimelineWarning:"Be aware that using data time zone affects all date fields and limits the functionality of the Timeline widget.",learnMoreForTimezoneSetting:"Learn more about time zone settings.",timezoneDesc:"Changing the time zone of the experience will affect how the date and time data are displayed. Options include:",deviceTimezoneDesc:"Displays date and time using the local device time zone.",specificTimezoneDesc:"Displays date and time using a designated time zone.",dataTimezoneDesc:"Displays date and time based on the time zone defined for a stand-alone layer or the web map, respectively, with no adjustments made.",manageUrlStatus:"Manage URL status",dataSelection:"Data selection",zoomToSelection:"Zoom to selected features",manageUrlStatusTips:"Select the URL parameters you want to include in the URL when interacting with the experience. The experience URL will synchronize with user interactions automatically.",privacy:"Privacy",googleAnalytics:"Google Analytics (GA4)",measurementId:"Measurement ID",invalidMeasurementMsg:"Formatting must match",consentRefreshSetting:"Consent refresh settings",refreshPeriodically:"Refresh consent periodically",thirdPartyExplain:"The cookie banner only controls first-party cookies and does not apply to third-party cookies from other domains.",days:"days",consentMode:"Consent mode",consentRequired:"Consent required",consentOptional:"Consent optional",renewUserConsents:"Renew consent",renewNow:"Renew now",renewModalTitle:"Are you sure you want to renew user consent?",renewModalDesc:"The cookie banner will reappear for users who have previously consented and ask them to give their consent again.",lastTimeRenewed:"Last time renewed",noAvailableWidgets:"No available widgets. Please add widgets that support URL parameters."};var n=c(9298),s=c(1888),o=c(4108);class i extends e.React.PureComponent{constructor(t){super(t),this.handleChange=e=>{const t=(null==e?void 0:e.target.value)||"";this.setState({searchText:t},(()=>{const{onSearchTextChange:e}=this.props;e&&e(t)}))},this.handleSubmit=e=>{const{onSubmit:t}=this.props;t&&t(e)},this.onKeyUp=e=>{e&&e.target&&"Enter"===e.key&&this.handleSubmit(e.target.value)},this.handleClear=e=>{this.setState({searchText:""}),e.stopPropagation()},this.getStyle=()=>e.css`
      position: relative;
      .toc-search-input {
        .search-close-icon {
          padding: 0.125rem;
        }
      }
    `,this.state={searchText:t.searchText||""}}componentDidUpdate(e){if(this.props.searchText!==e.searchText&&this.props.searchText!==this.state.searchText){const{searchText:e}=this.props;this.setState({searchText:e})}}render(){const{placeholder:a,className:n,inputRef:s,onFocus:o,onBlur:i}=this.props,{searchText:l}=this.state;return(0,e.jsx)("div",{css:this.getStyle(),className:n},(0,e.jsx)(t.TextInput,{className:"toc-search-input",ref:s,"aria-label":a,placeholder:a,allowClear:!0,onChange:this.handleChange,onBlur:i,onFocus:o,value:l,onKeyDown:e=>{this.onKeyUp(e)}}))}}var l=c(170),r=c.n(l),u=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]])}return a};const d=t=>{const a=window.SVG,{className:n}=t,s=u(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",n);return a?e.React.createElement(a,Object.assign({className:o,src:r()},s)):e.React.createElement("svg",Object.assign({className:o},s))};function m(l){const r=(0,s.useTheme)(),c=e.hooks.useTranslation(t.defaultMessages,a),p=e.ReactRedux.useSelector((e=>{var t,a;const n=[],s=null===(a=null===(t=e.appStateInBuilder)||void 0===t?void 0:t.appConfig)||void 0===a?void 0:a.widgets;return Object.keys(null!=s?s:{}).forEach((e=>{n.push(e)})),n.join(",")})),u=e.ReactRedux.useSelector((e=>{var t,a;const n=null===(a=null===(t=e.appStateInBuilder)||void 0===t?void 0:t.appConfig)||void 0===a?void 0:a.pageStructure;return o.UrlConfigManager.getInstance().getFlatPageInfos(n)})),m=e.ReactRedux.useSelector((e=>{var t;return null===(t=e.appStateInBuilder)||void 0===t?void 0:t.browserSizeMode})),[g,f]=e.React.useState(!1),[v,h]=e.React.useState(""),b=e.React.useRef(null),{onSearch:x}=l,w=e.React.useRef([]);e.React.useEffect((()=>{const t=o.UrlConfigManager.getInstance().getWidgetsInPages(m,v);!e.lodash.isDeepEqual(t,w.current)&&x(t),w.current=t}),[v,m,p,u,x]);const j=c("widgets"),y=c("SearchLabel");return(0,e.jsx)(n.SettingSection,{className:"pb-0 url-params-search mb-3",css:(t=>e.css`
      &.url-params-search {
        border: 0;

        .outline-title {
          user-select: none;
          color: ${t.ref.palette.neutral[1e3]};
          font-weight: ${t.ref.typeface.fontWeightBold};
        }
      }
    `)(r)},(0,e.jsx)(n.SettingRow,{className:"d-flex justify-content-between align-items-end"},(0,e.jsx)("div",{className:"outline-title h5 mb-0 text-truncate"},j),(0,e.jsx)("div",{className:"d-flex outline-top-btns"},(0,e.jsx)(t.Button,{title:y,onClick:()=>{f(!g)},className:"search-btn",icon:!0,size:"sm",type:"tertiary","aria-label":y,"aria-pressed":g},(0,e.jsx)(d,{className:"search-icon"})))),(0,e.jsx)(t.Collapse,{isOpen:g,onEntered:()=>{},className:"mt-4"},(0,e.jsx)(i,{theme:r,placeholder:y,searchText:v,onSearchTextChange:e=>{h(e)},onSubmit:()=>{},inputRef:e=>{b.current=e}})))}var g=c(6300),f=c.n(g),v=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]])}return a};const h=t=>{const a=window.SVG,{className:n}=t,s=v(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",n);return a?e.React.createElement(a,Object.assign({className:o,src:f()},s)):e.React.createElement("svg",Object.assign({className:o},s))};var b=c(5508),x=c.n(b),w=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]])}return a};const j=t=>{const a=window.SVG,{className:n}=t,s=w(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",n);return a?e.React.createElement(a,Object.assign({className:o,src:x()},s)):e.React.createElement("svg",Object.assign({className:o},s))};var y=c(3303),S=c.n(y),R=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]])}return a};const C=t=>{const a=window.SVG,{className:n}=t,s=R(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",n);return a?e.React.createElement(a,Object.assign({className:o,src:S()},s)):e.React.createElement("svg",Object.assign({className:o},s))};var N=c(9524),O=c.n(N),T=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]])}return a};const z=t=>{const a=window.SVG,{className:n}=t,s=T(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",n);return a?e.React.createElement(a,Object.assign({className:o,src:O()},s)):e.React.createElement("svg",Object.assign({className:o},s))},k=t=>e.css`
  &.url-setting {
    .back-btn-text {
      color: var(--ref-palette-neutral-1000);
      font-size: 16px;
      font-weight: 500;
    }

    /* page-name */
    .page-section {
      .collapse-header {
        padding-top: 6px;
        margin-bottom: 12px;

        .title {
          font-size: 13px;
          font-weight: 600;
          color: var(--ref-palette-neutral-1000);
          padding: 0 !important;
        }
      }
    }

    .jimu-widget-setting--section {
      /* section-title */
      .jimu-widget-setting--section-header{
        .setting-row-text-level-1 {
          color: var(--ref-palette-neutral-1000)!important;
          font-size: 14px !important;
          font-weight: 600 !important;
        }
      }
      .jimu-widget-setting--row {
        .outline-title {
          color: var(--ref-palette-neutral-1000)!important;
          font-size: 14px !important;
          font-weight: 600 !important;
        }
      }

      /* item-name */
      .jimu-widget-setting--row {
        .jimu-widget-setting--row-label, .checkbox-label {
          font-size: 13px !important;
          font-weight: 500 !important;
        }
      }
    }

    .detail-setting {
      min-height: 26px;
      margin-left: 16px;
    }

    /* empty icon */
    .empty-placeholder{
      position: absolute;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      .empty-placeholder-text, .empty-placeholder-icon{
        display: table;
        margin: 0 auto;
      }
      .empty-placeholder-text{
        color: var(--ref-palette-neutral-900);
        font-size: ${t.sys.typography.label1.fontSize};
        margin-top: ${t.sys.spacing[4]};
        text-align: center;
      }

      .empty-placeholder-icon{
        color: var(--sys-color-action-disabled-text);
      }
    }
  }
`;function M(i){var l,r,c;const p=e.hooks.useTranslation(t.defaultMessages,a),u=(0,s.useTheme)(),d=o.UrlConfigManager.getInstance().getWidgetsUseUrlParamsInManifest();e.ReactRedux.useSelector((e=>{var t,a;return null===(a=null===(t=e.appStateInBuilder)||void 0===t?void 0:t.appConfig)||void 0===a?void 0:a.urlParams}));const g=e=>o.UrlConfigManager.getInstance().isGeneralUrlConfigEnable(e),f=(e,t,a)=>o.UrlConfigManager.getInstance().isWidgetParamEnable(e,t,a),v=e.React.useRef(null),[b,x]=e.React.useState(null),w=p("data"),y=p("dataSelection"),S=p("zoomToSelection"),R=p("settings"),N=p("manageUrlStatusTips"),[O,T]=e.React.useState([]),M=O.some((e=>{var t;return(null===(t=e.widgetsInfo)||void 0===t?void 0:t.length)>0})),A=!!b;return(0,e.jsx)("div",{className:"url-setting widget-builder-themes d-flex flex-column bg-light-300 w-100 h-100",css:k(u)},(0,e.jsx)("div",{className:"jimu-widget-setting--header d-flex align-items-center justify-content-between header-title"},(0,e.jsx)("div",{className:"text-truncate text-left d-flex align-items-center"},(0,e.jsx)(t.Button,{onClick:i.onBack,size:"sm",icon:!0,type:"tertiary",className:"mr-2","aria-label":p("back")},(0,e.jsx)(h,{size:"m",autoFlip:!0})),(0,e.jsx)("div",{className:"back-btn-text text-truncate",title:p("manageUrlStatus")},p("manageUrlStatus"))),(0,e.jsx)(t.Tooltip,{placement:"right",title:N},(0,e.jsx)(t.Button,{icon:!0,type:"tertiary",size:"sm",className:"ml-2 p-0",disableHoverEffect:!0,disableRipple:!0},(0,e.jsx)(j,null)))),(0,e.jsx)(n.SettingSection,{className:"p-0"}),(0,e.jsx)(n.SettingSection,{title:w,"aria-label":w,className:"item-name"},(0,e.jsx)(n.SettingRow,{label:y},(0,e.jsx)(t.Switch,{checked:g(e.UrlGeneralConfig.DataSelection),onChange:t=>{((e,t)=>{const a=t.target.checked;o.UrlConfigManager.getInstance().updateGeneralUrlConfigEnable(e,a)})(e.UrlGeneralConfig.DataSelection,t)},"aria-label":y})),g(e.UrlGeneralConfig.DataSelection)&&(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(t.Label,null,(0,e.jsx)(t.Checkbox,{className:"mr-2",checked:o.UrlConfigManager.getInstance().isZoomToSelectionEnable(),onChange:(e,t)=>{o.UrlConfigManager.getInstance().updateZoomToSelectionEnable(t)}}),(0,e.jsx)("span",{className:"checkbox-label"},S)))),(0,e.jsx)(m,{onSearch:e=>{T(e)}}),!M&&(0,e.jsx)("div",{className:"empty-placeholder w-100"},(0,e.jsx)("div",{className:"empty-placeholder-icon"},(0,e.jsx)(z,{size:48})),(0,e.jsx)("div",{className:"empty-placeholder-text"},p("noAvailableWidgets"))),M&&(0,e.jsx)(n.SettingSection,{className:"pt-0"},O&&O.map((a=>{var s;const i=a.pageInfo.id,l=a.pageInfo.label;return a.widgetsInfo&&(null===(s=a.widgetsInfo)||void 0===s?void 0:s.length)>0?(0,e.jsx)(t.CollapsablePanel,{key:i,label:l,"aria-label":l,className:"page-section",type:"default",defaultIsOpen:!0},d&&a.widgetsInfo.map((a=>{var s,i,l;const r=a.id,c=a.label,p=null===(l=null===(i=null===(s=d[r])||void 0===s?void 0:s.manifest)||void 0===i?void 0:i.urlParameters)||void 0===l?void 0:l.length,u=p&&1===p,m=((t,a)=>{var n,s;let o=!1;if(a){const e=null===(s=null===(n=d[t])||void 0===n?void 0:n.manifest)||void 0===s?void 0:s.urlParameters[0].name;o=f(t,e,a)}else o=e.urlManagerUtils.isWidgetEnable(t);return o})(r,u);return(0,e.jsx)(n.SettingRow,{key:r,label:c,className:"detail-setting d-flex justify-content-between align-items-center my-2 "},!u&&(0,e.jsx)(t.Button,{size:"sm",icon:!0,type:"tertiary",className:"mr-2",onClick:e=>{((e,t,a)=>{v.current=t.target,x({widgetId:e,isEnable:a})})(r,e,m)},title:R,"aria-label":R},(0,e.jsx)(C,{size:"m"})),(0,e.jsx)(t.Switch,{checked:m,onChange:e=>{((e,t,a)=>{var n,s;const i=t.target.checked;if(a){const t=null===(s=null===(n=d[e])||void 0===n?void 0:n.manifest)||void 0===s?void 0:s.urlParameters[0].name;o.UrlConfigManager.getInstance().updateWidgetParamEnable(e,t,i)}else o.UrlConfigManager.getInstance().updateWidgetEnable(e,i)})(r,e,u)},"aria-label":r}))}))):null}))),A&&(0,e.jsx)(t.Popper,{open:A,toggle:e=>{v.current=null,x(null)},reference:v,placement:"bottom",showArrow:!0},null===(c=null===(r=null===(l=d[b.widgetId])||void 0===l?void 0:l.manifest)||void 0===r?void 0:r.urlParameters)||void 0===c?void 0:c.map((a=>(0,e.jsx)(n.SettingRow,{label:a.label,key:a.name,className:"m-4"},a.tooltip&&(0,e.jsx)(t.Tooltip,{placement:"right",title:a.tooltip},(0,e.jsx)(t.Button,{icon:!0,type:"tertiary",size:"sm",className:"ml-2 p-0",disableHoverEffect:!0,disableRipple:!0},(0,e.jsx)(j,null))),(0,e.jsx)(t.Switch,{checked:f(b.widgetId,a.name),onChange:e=>{((e,t)=>{const a=!f(e,t);o.UrlConfigManager.getInstance().updateWidgetParamEnable(e,t,a)})(b.widgetId,a.name)},className:"ml-2","aria-label":a.label,disabled:!b.isEnable}))))))}function A(e,t){var a;let n=(0,o.getAppConfigAction)().appConfig;n.attributes||(n=n.set("attributes",{}));const s=null===(a=n.attributes)||void 0===a?void 0:a.set(e,t);(0,o.getAppConfigAction)().editAttributes(s).exec()}function I(e,t){var a,n;let s=(0,o.getAppConfigAction)().appConfig;s.analytics||(s=s.set("analytics",{}));let i=null;i="string"==typeof e?null===(a=s.analytics)||void 0===a?void 0:a.set(e,t):null===(n=s.analytics)||void 0===n?void 0:n.setIn(e,t),(0,o.getAppConfigAction)().updateAnalyticsConfig(i).exec()}function E(e,t){var a,n;let s=(0,o.getAppConfigAction)().appConfig;s.cookieBanner||(s=s.set("cookieBanner",{}));let i=null;i="string"==typeof e?null===(a=s.cookieBanner)||void 0===a?void 0:a.set(e,t):null===(n=s.cookieBanner)||void 0===n?void 0:n.setIn(e,t),(0,o.getAppConfigAction)().updateCookieBannerConfig(i).exec()}function B(t,a=!1){var n;o.builderAppSync.publishAppInfoChangeToApp(t);const s={appConfig:null===(n=(0,e.getAppStore)().getState().appStateInBuilder)||void 0===n?void 0:n.appConfig,appInfo:t};a?(0,e.getAppStore)().dispatch(o.appStateHistoryActions.InBuilderReplaceLastAppConfigInHistory(s)):(0,e.getAppStore)().dispatch(o.appStateHistoryActions.InBuilderPutAppConfigIntoHistory(s))}var P=c(9037);const U=e.css`
  padding-top: var(--sys-spacing-4);
  border-top: 1px solid var(--ref-palette-neutral-500);
`;function L(a){const{translate:s,timezone:i={type:e.TimezoneConfig.Device}}=a,[l,r]=e.React.useState(null),[c,p]=e.React.useState(i.type===e.TimezoneConfig.Specific?i.value:D());e.React.useEffect((()=>{var e;null===(e=null===o.helpUtils||void 0===o.helpUtils?void 0:o.helpUtils.getBuildAppsHelpLink("general-settings"))||void 0===e||e.then((e=>{e&&r(e)}))}),[]),e.React.useEffect((()=>{i.type===e.TimezoneConfig.Specific&&p(i.value)}),[i]);const u=t=>{const a=t.target.value,n={type:a};a===e.TimezoneConfig.Specific&&(n.value=c),A("timezone",n)};return(0,e.jsx)("div",{css:U,className:"timezone-setting mt-4",role:"group","aria-label":s("timezone")},(0,e.jsx)(n.SettingRow,{label:(0,e.jsx)("div",{className:"d-flex justify-content-between"},(0,e.jsx)("div",null,s("timezone")),(0,e.jsx)(t.Tooltip,{showArrow:!0,placement:"right",title:(0,e.jsx)("div",{css:e.css`
        width: 362px;
        margin: 0.75rem;
        font-size: 12px;
        line-height: 150%;
        font-style: normal;
        .name {
          margin-top: 1rem;
          font-weight: 600;
        }
        .desc {
          font-weight: 400;
        }
      `},(0,e.jsx)("div",{className:"desc"},s("timezoneDesc")),(0,e.jsx)("div",{className:"name"},s("deviceTimezone")),(0,e.jsx)("div",{className:"desc"},s("deviceTimezoneDesc")),(0,e.jsx)("div",{className:"name"},s("specificTimezone")),(0,e.jsx)("div",{className:"desc"},s("specificTimezoneDesc")),(0,e.jsx)("div",{className:"name"},s("dataTimezone")),(0,e.jsx)("div",{className:"desc"},s("dataTimezoneDesc")))},(0,e.jsx)(t.Button,{icon:!0,type:"tertiary",size:"sm",className:"ml-2 p-0",disableHoverEffect:!0,disableRipple:!0},(0,e.jsx)(j,null)))),flow:"wrap"}),(0,e.jsx)(n.SettingRow,{className:"mt-3"},(0,e.jsx)(t.Label,{className:"mr-4 d-flex align-items-center"},(0,e.jsx)(t.Radio,{className:"mr-2",name:"timezone-type",value:e.TimezoneConfig.Device,checked:i.type===e.TimezoneConfig.Device,onChange:u}),s("deviceTimezone"))),(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(t.Label,{className:"mr-4 d-flex align-items-center"},(0,e.jsx)(t.Radio,{className:"mr-2",name:"timezone-type",value:e.TimezoneConfig.Specific,checked:i.type===e.TimezoneConfig.Specific,onChange:u}),s("specificTimezone"))),i.type===e.TimezoneConfig.Specific&&(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(P.CalciteInputTimeZone,{scale:"s",className:"jimu-calcite-timezone w-100",value:c,mode:"name",overlayPositioning:"fixed",onCalciteInputTimeZoneChange:t=>{const a=t.target.value;A("timezone",{type:e.TimezoneConfig.Specific,value:a})}})),(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(t.Label,{className:"mr-4 d-flex align-items-center"},(0,e.jsx)(t.Radio,{className:"mr-2",name:"timezone-type",value:e.TimezoneConfig.Data,checked:i.type===e.TimezoneConfig.Data,onChange:u}),s("dataTimezone"))),i.type===e.TimezoneConfig.Data&&(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(n.SettingRow,{className:"w-100 d-flex justify-content-between"},(0,e.jsx)(t.Alert,{form:"basic",type:"warning",withIcon:!0},(0,e.jsx)("div",null,s("dataTimezoneTimelineWarning")+" ",(0,e.jsx)("a",{target:"_blank",href:l,rel:"noopener noreferrer"},s("learnMoreForTimezoneSetting")))))))}const D=()=>(new Intl.DateTimeFormat).resolvedOptions().timeZone;var H=c(4702),F=c.n(H),G=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]])}return a};const V=t=>{const a=window.SVG,{className:n}=t,s=G(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",n);return a?e.React.createElement(a,Object.assign({className:o,src:F()},s)):e.React.createElement("svg",Object.assign({className:o},s))};var $=c(5075),q=c.n($),W=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]])}return a};const _=t=>{const a=window.SVG,{className:n}=t,s=W(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",n);return a?e.React.createElement(a,Object.assign({className:o,src:q()},s)):e.React.createElement("svg",Object.assign({className:o},s))};var X=c(8996),Z=c.n(X),K=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]])}return a};const Y=t=>{const a=window.SVG,{className:n}=t,s=K(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",n);return a?e.React.createElement(a,Object.assign({className:o,src:Z()},s)):e.React.createElement("svg",Object.assign({className:o},s))},J=s.styled.h5`
  padding: 1rem;
`,Q=(0,s.styled)(t.ModalBody)`
  padding: 0 3rem 1rem 3rem!important;
`,ee=(0,s.styled)(t.ModalFooter)`
  button {
    min-width: 75px!important;
  }
`,te=(0,s.styled)(t.Modal)`
  .modal-content {
    border: 0px;
  }
`;const ae=(t,a)=>{let n,s;if(n=window.jimuConfig.isBuilder?(0,e.getAppStore)().getState().appStateInBuilder.appConfig.attributes.timezone:(0,e.getAppStore)().getState().appConfig.attributes.timezone,(null==n?void 0:n.type)===e.TimezoneConfig.Specific){const t=e.dataSourceUtils.getTimeZoneOffsetByName(n.value);s=a-e.dataSourceUtils.getLocalTimeOffset()+t}else s=a;return e.dateUtils.formatDateField(s,"shortDateLongTime24",t)},ne=(0,s.withTheme)((function(s){var i;const{onBack:l}=s,r=e.ReactRedux.useSelector((e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.appStateInBuilder)||void 0===t?void 0:t.appConfig)||void 0===a?void 0:a.analytics})),c=e.ReactRedux.useSelector((e=>{var t,a;return null===(a=null===(t=null==e?void 0:e.appStateInBuilder)||void 0===t?void 0:t.appConfig)||void 0===a?void 0:a.cookieBanner})),p=e.ReactRedux.useSelector((e=>{var t,a,n;return null===(n=null===(a=null===(t=null==e?void 0:e.appRuntimeInfo)||void 0===t?void 0:t.sectionNavInfos)||void 0===a?void 0:a["opts-section"])||void 0===n?void 0:n.currentViewId})),[u,d]=e.React.useState((null==r?void 0:r.enable)||!1),[m,g]=e.React.useState((null===(i=null==r?void 0:r.google)||void 0===i?void 0:i.measurementId)||""),[f,v]=e.React.useState((null==c?void 0:c.enable)||!1),[b,x]=e.React.useState((null==c?void 0:c.refreshPeriodically)||!1),[w,y]=e.React.useState((null==c?void 0:c.consentMode)||e.EConsentMode.Optional),[S,R]=e.React.useState((null==c?void 0:c.refreshPeriod)||180),[C,N]=e.React.useState(!1),O=e.hooks.useTranslation(t.defaultMessages,a),T=(0,e.useIntl)(),z=e.React.useCallback((e=>/^(G|UA|YT|MO)-[a-zA-Z0-9-]+$/.test(e)?{valid:!0}:{valid:!1,msg:O("invalidMeasurementMsg")+" G-XXXXXXXXXX"}),[O]),k=e.React.useCallback((()=>{N(!1)}),[]);e.React.useEffect((()=>{o.builderAppSync.publishChangeSelectionToApp(null)}),[]),e.React.useEffect((()=>{const t="appSetting"===p&&f;o.builderAppSync.publishOpenCookieBannerByPrivacyPanelToApp(t),(0,e.getAppStore)().dispatch(e.appActions.OpenCookieBannerSetting(t))}),[p,f]);const M=e.React.useCallback((()=>{o.builderAppSync.publishOpenCookieBannerByPrivacyPanelToApp(!1),(0,e.getAppStore)().dispatch(e.appActions.OpenCookieBannerSetting(!1)),l()}),[l]);return e.React.useEffect((()=>{window._builderPubsub.subscribe(`to_builder.${o.ToBuilderMessage.CloseBannerInLiveView}`,(e=>{M()}))}),[M]),(0,e.jsx)("div",{css:(A=s.theme,e.css`
    .header-title {
      padding: 1rem;
      font-size: 1rem;
      font-weight: 600;
      color: var(--ref-palette-neutral-1000);
      border-bottom: 1px solid rgb(106, 106, 106);
    }
    .selector-button {
      height: 2.5rem;
      line-height: 2.5rem;
      padding: 0;
      border: 1px dashed #828282;
      border-radius: 0.125rem;
      cursor: pointer;
      color: #00d8ed;
      font-size: 0.875rem;
      -webkit-text-decoration: none;
      text-decoration: none;
      background-color: transparent;
    }
    .setting-row-label{
      font-size: 0.8125rem;
      font-weight: 500;
      margin-bottom: 0.5rem;
      color: ${A.ref.palette.neutral[900]};
    }
  `),className:"h-100 w-100"},(0,e.jsx)("div",{className:"jimu-widget-setting--header d-flex align-items-center justify-content-between header-title"},(0,e.jsx)("div",{className:"text-truncate text-left"},(0,e.jsx)(t.Button,{onClick:M,size:"sm",icon:!0,type:"tertiary",className:"mr-2","aria-label":O("back")},(0,e.jsx)(h,{size:"m",autoFlip:!0})),O("privacy"))),(0,e.jsx)(n.SettingSection,{className:"border-bottom-0 pb-0"},(0,e.jsx)(n.SettingRow,{role:"group",className:"mb-2",label:O("googleAnalytics"),"aria-label":O("googleAnalytics")},(0,e.jsx)(t.Switch,{checked:u,"aria-label":O("googleAnalytics"),onChange:t=>{d(t.target.checked),I("enable",t.target.checked),E("uid",(0,e.uuidv1)())}}))),u&&(0,e.jsx)(n.SettingSection,{className:"border-bottom-0 pb-0",title:O("measurementId"),role:"group"},(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(t.TextInput,{className:"w-100",defaultValue:m,checkValidityOnAccept:z,onAcceptValue:e=>{g(e),I(["google","measurementId"],e)},"aria-label":O("measurementId")}))),(0,e.jsx)(n.SettingSection,{className:"border-bottom-0 pb-0"},(0,e.jsx)(n.SettingRow,{className:"setting-row-label d-flex justify-content-between"},(0,e.jsx)("div",null,(0,e.jsx)("span",null,O("cookieBanner")),(0,e.jsx)(t.Tooltip,{title:O("thirdPartyExplain"),placement:"bottom"},(0,e.jsx)(t.Button,{icon:!0,type:"tertiary",size:"sm",className:"ml-2 p-0",disableHoverEffect:!0,disableRipple:!0},(0,e.jsx)(j,null)))),(0,e.jsx)(t.Switch,{checked:f,"aria-label":O("cookieBanner"),onChange:t=>{v(t.target.checked),E("enable",t.target.checked),(0,e.getAppStore)().dispatch(e.appActions.OpenCookieBannerSetting(t.target.checked)),t.target.checked?E("uid",(0,e.uuidv1)()):(0,o.getAppConfigAction)().appConfig.cookieBanner&&(0,o.getAppConfigAction)().removeCookieBannerConfig().exec()}})),f&&(0,e.jsx)(e.React.Fragment,null,u&&(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)(n.SettingRow,{className:"mb-2",label:O("consentMode"),"aria-label":O("consentMode")}),(0,e.jsx)(n.RadioGroup,{className:"mb-2",value:w,options:[{value:e.EConsentMode.Required,content:O("consentRequired")},{value:e.EConsentMode.Optional,content:O("consentOptional")}],onChange:e=>{y(e),E("consentMode",e)}})),(0,e.jsx)(n.SettingRow,{className:"mb-2",label:O("consentRefreshSetting"),"aria-label":O("consentRefreshSetting")}),(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(t.Label,{className:"d-flex justify-content-between"},(0,e.jsx)(t.Checkbox,{checked:b,onChange:e=>{x(e.target.checked),E("refreshPeriodically",e.target.checked)}}),(0,e.jsx)("span",{className:"ml-2"},O("refreshPeriodically")))),b&&(0,e.jsx)(t.TextInput,{className:"w-100 mt-4 mb-4",value:S,suffix:(0,e.jsx)("span",null,O("days")),onChange:e=>{R(e.target.value)},onAcceptValue:e=>{const t=Math.abs(parseInt(e));R(isNaN(t)?180:t),E("refreshPeriod",t)}}),(0,e.jsx)(n.SettingRow,{label:O("renewUserConsents")}),(0,e.jsx)(n.SettingRow,null,(0,e.jsx)(t.Button,{className:"w-100",size:"sm",type:"primary",onClick:()=>{N(!0)}},O("renewNow"))),(null==c?void 0:c.renewTime)&&(0,e.jsx)("span",null,`${O("lastTimeRenewed")}: ${ae(T,c.renewTime)}`),(0,e.jsx)(te,{centered:!0,isOpen:C,toggle:k},(0,e.jsx)(J,{className:"renew-modal-header"},(0,e.jsx)(Y,{size:24,className:"mr-2",color:"var(--warning-600)"}),(0,e.jsx)("span",null,O("renewModalTitle"))),(0,e.jsx)(Q,{className:"renew-modal-body"},(0,e.jsx)("span",null,O("renewModalDesc"))),(0,e.jsx)(ee,null,(0,e.jsx)(t.Button,{type:"primary",size:"sm",onClick:()=>{E("renewTime",(new Date).getTime()),k()}},O("ok")),(0,e.jsx)(t.Button,{size:"sm",onClick:k},O("cancel")))))));var A}));var se;function oe(a){const{appItem:s,translate:o}=a,[i,l]=e.React.useState("");e.React.useEffect((()=>{const e=(null==s?void 0:s.snippet)||"";i!==e&&l(e)}),[null==s?void 0:s.snippet]);const r=e.hooks.useEventCallback((e=>{if((s.snippet||"")===e)return;B(s.set("snippet",e).set("clearEmptyFields",""===e).asMutable({deep:!0}))}));return(0,e.jsx)(n.SettingRow,{label:o("summaryField"),flow:"wrap"},(0,e.jsx)(t.TextArea,{placeholder:o("summaryPlaceholder"),value:i,onChange:e=>{l(e.target.value)},height:80,onAcceptValue:r}))}!function(e){e.Experience="Web Experience",e.Template="Web Experience Template"}(se||(se={}));const ie=e.css`
  .thumbnail-button {
    position: relative;
    cursor: pointer;
    .thumbnail-input {
      position: absolute;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      opacity: 0;
      cursor: pointer;
      font-size: 0;
    }
  }
  .thumbnail-image {
    aspect-ratio: 200 / 133;
    background-size: 100% 100%;
    background-position: center center;
    background-repeat: no-repeat;
  }
`;function le(a){const{appItem:s,stateReady:o,folderUrl:i,portalUrl:l,translate:r}=a,[c,p]=e.React.useState(!1),[u,d]=e.React.useState(null),m=e.hooks.useEventCallback((()=>{p(!c)})),g=e.hooks.useEventCallback((e=>{var t;const a=null===(t=e.target)||void 0===t?void 0:t.files;if(!a||!a[0])return;if(a[0].size>10485760)return d(r("fileSizeTips",{maxSize:"10M"})),void p(!0);if(!a[0].type.startsWith("image/"))return d(r("imageTypeError")),void p(!0);const n=a[0].type,o=n.split(".")[n.split(".").length-1],i=new File([a[0]],`thumbnail${(new Date).getTime()}${o}`,{type:"image/png"}),l=window.URL.createObjectURL(i);B(s.set("thumbnailurl",l).asMutable({deep:!0})),e.target.value=null})),f=e.React.useMemo((()=>i+"./dist/runtime/assets/defaultthumb.png"),[i]);e.React.useEffect((()=>{var t;if((null===(t=(0,e.getAppStore)().getState().appRuntimeInfo)||void 0===t?void 0:t.saveThumbnailUrl)&&s&&!(null==s?void 0:s.thumbnailurl)&&!(null==s?void 0:s.thumbnail)){B(s.set("thumbnailurl",f).asMutable({deep:!0}),!0)}}),[null==s?void 0:s.thumbnailurl,null==s?void 0:s.thumbnail,f]),e.React.useEffect((()=>{const t=null==s?void 0:s.thumbnail;if(!t||!o)return;const a=null==s?void 0:s.id,n=e.SessionManager.getInstance().getSessionByUrl(l),i=n&&(null==n?void 0:n.token)?"?token="+n.token:"";let r="";r=window.jimuConfig.isDevEdition?`${window.location.origin}${window.jimuConfig.mountPath}apps/${a}/${t}`:`${l}/sharing/rest/content/items/${a}/info/${t}${i}`,fetch(r).then((e=>e.blob())).then((a=>{const n=t.split(".")[t.split(".").length-1],o=new File([a],`thumbnail${(new Date).getTime()}${n}`,{type:`image/${n}`}),i=window.URL.createObjectURL(o);B(s.set("thumbnailurl",i).asMutable({deep:!0}),!0),(0,e.getAppStore)().dispatch(e.appActions.saveThumbnailUrl(i))}))}),[null==s?void 0:s.id,null==s?void 0:s.thumbnail,l,o]);const v=e.React.useMemo((()=>{let e=f;return(null==s?void 0:s.thumbnailurl)&&(e=s.thumbnailurl),e}),[f,null==s?void 0:s.thumbnailurl]),h=e.React.useMemo((()=>({backgroundImage:"url("+v+")"})),[v]);return(0,e.jsx)("div",{role:"group",className:"thumbnail-setting mt-4 mb-4",css:ie,"aria-label":r("thumbnail")},(0,e.jsx)(n.SettingRow,{label:r("thumbnail")},(0,e.jsx)(t.Button,{size:"sm",title:r("browse"),className:"thumbnail-button"},r("browse"),(0,e.jsx)("input",{type:"file",accept:"image/*",className:"thumbnail-input",onChange:g})),(0,e.jsx)(t.AlertPopup,{isOpen:c,hideCancel:!0,toggle:m},(0,e.jsx)("div",{className:"align-middle pt-2"},(0,e.jsx)(Y,{className:"mr-2 align-middle",size:24,color:"var(--warning-600)"}),(0,e.jsx)("span",{className:"align-middle"},u)))),(0,e.jsx)(n.SettingRow,null,(0,e.jsx)("div",{className:"thumbnail-image w-100",style:h})))}var re=c(5809);function ce(t){const{favicon:a,translate:s}=t,[o,i]=e.React.useState((null==a?void 0:a.asMutable({deep:!0}))||null),l=e.React.useMemo((()=>({color:!0})),[]);e.React.useEffect((()=>{const e=(null==a?void 0:a.asMutable({deep:!0}))||null;o!==e&&i(e)}),[a]);const r=e.hooks.useEventCallback((e=>{A("favicon",null==e?void 0:e.asMutable({deep:!0}))}));return(0,e.jsx)(n.SettingRow,{role:"group",label:s("favicon"),"aria-label":s("favicon")},(0,e.jsx)(re.IconPicker,{previewOptions:l,configurableOption:"color",setButtonUseColor:!1,className:"flex-none",icon:o,onChange:r}))}var pe=c(8547),ue=c.n(pe),de=function(e,t){var a={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(a[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(a[n[s]]=e[n[s]])}return a};const me=t=>{const a=window.SVG,{className:n}=t,s=de(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",n);return a?e.React.createElement(a,Object.assign({className:o,src:ue()},s)):e.React.createElement("svg",Object.assign({className:o},s))};function ge(s){const{portalUrl:o,context:i}=s,l=i.folderUrl,[r,c]=e.React.useState(0),p=e.hooks.useEventCallback((()=>{c(0)})),u=e.css`
    .title {
      padding: 18px 16px 2px 16px !important;
      font-size: 1rem;
      font-weight: 500;
      color: var(--ref-palette-neutral-1000);
    }
  `,d=e.ReactRedux.useSelector((e=>{var t;return null===(t=e.appStateInBuilder)||void 0===t?void 0:t.appInfo})),m=e.ReactRedux.useSelector((e=>{var t;return null===(t=e.appStateInBuilder)||void 0===t?void 0:t.appConfig})),g=e.ReactRedux.useSelector((e=>null==m?void 0:m.attributes)),f=window.isExpressBuilder,v=e.hooks.useTranslation(t.defaultMessages,a),h=(null==d?void 0:d.type)===se.Template?"templateSettings":"experienceSettings";return(0,e.jsx)("div",{css:u,className:"jimu-widget widget-app-setting setting-pane bg-default"},(0,e.jsx)("div",{className:(0,e.classNames)("w-100","h-100","overflow-auto",{"d-none":0!==r})},(0,e.jsx)("div",{role:"heading",className:"d-flex justify-content-between align-items-center mb-0 title"},(0,e.jsx)("div",{className:"text-truncate","aria-label":v(h)},v(h))),(0,e.jsx)(n.SettingSection,null,(0,e.jsx)(ce,{favicon:null==g?void 0:g.favicon,translate:v}),(0,e.jsx)(le,{appItem:d,stateReady:!!g,portalUrl:o,folderUrl:l,translate:v}),(0,e.jsx)(oe,{appItem:d,translate:v}),!f&&m&&(0,e.jsx)(L,{timezone:null==g?void 0:g.timezone,translate:v})),(0,e.jsx)(n.SettingSection,null,(0,e.jsx)(n.SettingRow,null,(0,e.jsx)("div",{className:"d-flex justify-content-between align-items-center w-100"},(0,e.jsx)("div",null,(0,e.jsx)(V,{className:"mr-2"}),v("manageUrlStatus")),(0,e.jsx)(t.Button,{type:"tertiary",size:"sm",icon:!0,onClick:()=>{c(1)}},(0,e.jsx)(_,{autoFlip:!0})))),(0,e.jsx)(n.SettingRow,null,(0,e.jsx)("div",{className:"d-flex justify-content-between align-items-center w-100"},(0,e.jsx)("div",null,(0,e.jsx)(me,{className:"mr-2"}),v("privacy")),(0,e.jsx)(t.Button,{type:"tertiary",size:"sm",icon:!0,onClick:()=>{c(2)}},(0,e.jsx)(_,{autoFlip:!0})))))),1===r&&(0,e.jsx)(M,{onBack:p}),2===r&&(0,e.jsx)(ne,{onBack:p}))}function fe(e){c.p=e}})(),p})())}}}));