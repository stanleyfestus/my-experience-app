/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-4ae7b6.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-4ae7b6"],{76246:(e,t,r)=>{r.d(t,{a:()=>i,i:()=>n});const i={FeatureServer:"Feature Service",GeocodeServer:"Geocoding Service",GeoDataServer:"Geodata Service",GeometryServer:"Geometry Service",GeoenrichmentServer:"Geoenrichment Service",GPServer:"Geoprocessing Service",GlobeServer:"Globe Service",ImageServer:"Image Service",MapServer:"Map Service",NAServer:"Network Analysis Service",ElevationServer:"Image Service",VectorTileServer:"Vector Tile Service",SceneServer:"Scene Service",StreamServer:"Stream Service",WMServer:"Workflow Manager Service",TiledImageServer:"Image Service",VideoServer:"Video Service",KnowledgeGraphServer:"Knowledge Graph Layer"},n=e=>!!Object.values(i).includes(e)},22182:(e,t,r)=>{r.r(t),r.d(t,{arcgis_group_thumbnail:()=>I,arcgis_user_popup:()=>P,arcgis_user_popup_popover:()=>$});var i=r(20536),n=r(369),o=r(38973),s=r(91102),l=r(25972),a=r(37568),u=r(80041),c=r(29977),d=r(44090),p=r(91616),v=r(34752),h=r(76418),m=r(68537),f=r(16808),g=r(16093);r(73807),r(98034),r(99004),r(4009),r(78231),r(34472),r(10699),r(79717),r(76246);const b=/^#[0-9A-F]{3}$/i,y=/^#[0-9A-F]{6}$/i;function w(e){return function(e){return e&&4===e.length&&b.test(e)}(e)||function(e){return e&&7===e.length&&y.test(e)}(e)}function S(e){return function(e){let{r:t,g:r,b:i}=e;t/=255,r/=255,i/=255;const n=Math.max(t,r,i),o=Math.min(t,r,i),s=n-o;if(n===o)return 0;let l=(n+o)/2;switch(n){case t:l=(r-i)/s+(r<i?6:0);break;case r:l=(i-t)/s+2;break;case i:l=(t-r)/s+4}return Math.round(60*l)}(function(e){if(!w(e))return null;if(3===(e=e.replace("#","")).length){const[t,r,i]=e.split("");return{r:parseInt(`${t}${t}`,16),g:parseInt(`${r}${r}`,16),b:parseInt(`${i}${i}`,16)}}return{r:parseInt(e.slice(0,2),16),g:parseInt(e.slice(2,4),16),b:parseInt(e.slice(4,6),16)}}(e))}const I=class{constructor(e){(0,i.r)(this,e),this.openTooltip=()=>{this.tooltipElement&&(this.tooltipElement.open=!0)},this.closeTooltip=()=>{this.tooltipElement&&(this.tooltipElement.open=!1)},this.group=void 0,this.portal=void 0,this.tooltip=void 0,this.scale="m",this.error=!1}render(){const{group:e,error:t,openTooltip:r,closeTooltip:n}=this;if((null==e?void 0:e.thumbnail)&&!t)return(0,i.h)(i.H,null,(0,i.h)("img",{alt:"",class:"thumbnail",onError:()=>this.error=!0,ref:e=>this.thumbnailElement=e,src:this.getThumbnailURI(),onMouseLeave:n,onMouseEnter:r,onFocusout:n,onFocusin:r}),this.renderTooltip());const o=this.generateInitials(),s=this.generateFillColor();return(0,i.h)(i.H,null,(0,i.h)("span",{class:"background",ref:e=>this.thumbnailElement=e,style:{backgroundColor:s},onMouseLeave:n,onMouseEnter:r,onFocusout:n,onFocusin:r},o?(0,i.h)("span",{"aria-hidden":"true",class:"initials"},o):(0,i.h)("calcite-icon",{class:"icon",icon:"users",scale:"xl"===this.scale?"l":this.scale})),this.renderTooltip())}renderTooltip(){return this.tooltip?(0,i.h)("calcite-tooltip",{ref:e=>{e.referenceElement=this.thumbnailElement,this.tooltipElement=e},closeOnClick:!0,label:this.group.title,placement:"bottom-start",offsetDistance:6,offsetSkidding:0,class:"tooltip"},(0,i.h)("p",{class:"tooltip-text"},this.group.title)):null}getThumbnailURI(){const{group:e}=this;if(!(null==e?void 0:e.thumbnail))return null;if(e.thumbnail.startsWith("http"))return e.thumbnail;const t=(0,n.g)(this.portal),r=t?`?token=${t}`:"";return`${(0,o.g)(this.portal)}community/groups/${e.id}/info/${e.thumbnail}${r}`}generateFillColor(){const{group:{title:e,id:t},el:r}=this,i=(0,s.g)(r),n=`#${null==t?void 0:t.substr(t.length-6)}`,o=t&&w(n)?n:function(e){let t=0;for(let r=0;r<e.length;r++)t=e.charCodeAt(r)+((t<<5)-t);let r="#";for(let e=0;e<3;e++)r+=("00"+(t>>8*e&255).toString(16)).substr(-2);return r}(e);if(!t&&!e||!w(o))return"var(--calcite-color-foreground-2)";return`hsl(${S(o)}, 60%, ${"dark"===i?20:90}%)`}generateInitials(){var e,t;const r=null===(t=null===(e=this.group)||void 0===e?void 0:e.title)||void 0===t?void 0:t.trim().charAt(0);return!!(null==r?void 0:r.match(/^\w+$/))&&r}get el(){return(0,i.d)(this)}};I.style=":host{display:inline-block}:host([scale=s]){height:1.5rem;width:1.5rem;font-size:0.625rem}:host([scale=m]){height:2rem;width:2rem;font-size:0.75rem}:host([scale=l]){font-size:1rem;height:2.75rem;width:2.75rem}:host([scale=xl]){font-size:1.25rem;height:4rem;width:4rem}.icon{display:flex;color:var(--calcite-color-text-3)}.background{position:relative;display:flex;height:100%;width:100%;align-items:center;justify-content:center}.initials{position:absolute;font-weight:700;text-transform:uppercase;color:var(--calcite-color-text-2)}.thumbnail{height:100%;width:100%}.tooltip-text{margin:0px;padding:0px;font-size:0.75rem;color:var(--calcite-color-text-2)}calcite-tooltip{pointer-events:none}";const P=class{constructor(e){(0,i.r)(this,e),this.arcgisUserPopupInternalUIAction=(0,i.c)(this,"arcgisUserPopupInternalUIAction",7),this.user=void 0,this.username=void 0,this.fullName=void 0,this.item=void 0,this.api=void 0,this.scale="m",this.portal=void 0,this.baseUrl=void 0,this.underline=void 0,this.showAvatar=!0,this.showName=!0,this.showUsername=!1,this.wrap=void 0,this.appearance="transparent",this.checkOnline=void 0,this.itemUserInfo=void 0,this.groups=void 0,this.total=void 0,this.showPopover=void 0,this.privateUser=void 0}async componentWillLoad(){this.init()}async init(){const{el:e,item:t,username:r,portal:i}=this,n=await(0,a.g)(e);if(this.i18n=n[0],this.lang=n[1],t)this.fetchItemUserInfo();else if(r)try{const e=await(0,u.f)(r,i);!e.fullName&&this.fullName&&(e.fullName=this.fullName),this.itemUserInfo=e}catch(e){this.privateUser=!0}}async setFocus(){var e;null===(e=this.button)||void 0===e||e.focus()}async fetchItemUserInfo(){const{portal:e,item:t,lang:r,checkOnline:i}=this;this.itemUserInfo=await(0,u.a)(t,e,r,i)}async fetchItemsAndGroups(){const{user:e,itemUserInfo:t,item:r,portal:i,total:n,username:o,checkOnline:s}=this,a=o||(null==e?void 0:e.username)||(null==r?void 0:r.owner);if(!(0,c.i)(r)){if(!this.groups){const e=null==t?void 0:t.groups;this.groups=e?{total:e.length,start:1,num:100,nextStart:e.length>100?101:-1,results:e}:await(0,l.f)((()=>(0,u.b)(a,i,s)),"userGroups",a)}isNaN(n)&&(this.total=await(0,l.f)((()=>(0,u.c)((e||t).username,i,s)),"userItemsTotal",a))}}render(){const{user:e,itemUserInfo:t,portal:r,item:n,baseUrl:o,button:s,appearance:l,i18n:a,scale:u}=this,c=e||t;return c&&a?(0,i.h)(i.H,null,(0,i.h)("button",{class:{button:!0,"button--outline":"outline"===l},ref:e=>this.button=e,onClick:async()=>{this.showPopover||(this.showPopover=!0),this.fetchItemsAndGroups()}},(0,i.h)("slot",null,(0,i.h)("arcgis-user-avatar",{user:c,scale:u,portal:r,showName:this.showName,description:this.showUsername?c.username:"",showAvatar:this.showAvatar,underline:this.underline,checkOnline:this.checkOnline,wrap:this.wrap}))),this.showPopover&&(0,i.h)("arcgis-tunnel",{reference:this.el},(0,i.h)("arcgis-user-popup-popover",{onArcgisUserPopupInternalUIAction:e=>{e.stopPropagation(),this.arcgisUserPopupInternalUIAction.emit(e.detail)},onArcgisUserPopupPopoverClose:()=>{this.showPopover=!1,this.popoverNode=null},onArcgisUserPopupPopoverKeyDown:e=>{if("Escape"===e.detail.key){setTimeout((()=>{this.button.focus()}),200)}},user:e,item:n,portal:r,baseUrl:o,itemUserInfo:t,i18n:a,groups:this.groups,total:this.total,checkOnline:this.checkOnline,ref:e=>{e&&(e.referenceElement=s,this.popoverNode||(this.popoverNode=e,e.open()))}}))):(0,i.h)("arcgis-user-avatar",{scale:"s",showName:!0,checkOnline:this.checkOnline})}get el(){return(0,i.d)(this)}static get watchers(){return{item:["fetchItemUserInfo"]}}};function k({baseUrl:e,portal:t,user:r,type:i}){var n,o;const s=(0,g.r)(e),{username:l,orgId:a}=r,u=encodeURIComponent(l),c=(null===(n=t.user)||void 0===n?void 0:n.username)===r.username;return("groups"===i&&(0,f.B)(t.user)||"content"===i&&(0,f.q)(t.user)||(0,m.e)(t.user)||c)&&a===(null===(o=t.user)||void 0===o?void 0:o.orgId)?`${s}/${i}.html${c?"":`?user=${u}`}`:`${s}/search.html?q=owner:%22${u}%22&restrict=false#${i}`}P.style=":host{display:flex}.button{display:flex;align-items:center;max-width:100%;cursor:pointer;white-space:normal;border-style:none;padding:0px;font-size:0.75rem;color:var(--calcite-color-text-2);outline:2px solid transparent;outline-offset:2px;transition-property:all;outline-color:transparent;background:transparent;font-family:inherit;line-height:1.5}.button:focus{outline:2px solid var(--calcite-color-brand);outline-offset:2px}.button--outline{box-sizing:border-box;width:100%;padding-left:0.75rem;padding-right:0.75rem;padding-top:0.5rem;padding-bottom:0.5rem;transition-property:all;border:1px solid var(--calcite-ui-border-3)}.button--outline:hover{box-shadow:inset 0 0 0 1px var(--calcite-color-foreground-3)}.name{overflow:hidden;white-space:nowrap;margin-inline-start:0.5rem;text-overflow:ellipsis}";const $=class{constructor(e){(0,i.r)(this,e),this.arcgisUserPopupPopoverClose=(0,i.c)(this,"arcgisUserPopupPopoverClose",7),this.arcgisUserPopupPopoverKeyDown=(0,i.c)(this,"arcgisUserPopupPopoverKeyDown",7),this.arcgisUserPopupInternalUIAction=(0,i.c)(this,"arcgisUserPopupInternalUIAction",7),this.numberFormatOptions={api:d.c.api,places:0,type:"decimal"},this.user=void 0,this.item=void 0,this.portal=void 0,this.baseUrl=void 0,this.referenceElement=void 0,this.itemUserInfo=void 0,this.groups=void 0,this.total=void 0,this.i18n=void 0,this.checkOnline=void 0,this.groupsText="",this.itemsText="",this.expanded=void 0}async close(){this.togglePopover(!1)}async open(){this.togglePopover(!0)}async updateGroupsText(e){const t=await(0,v.f)(e.total,this.numberFormatOptions);this.groupsText=this.i18n.groups.replace("${number}",t)}async updateItemsText(e){const t=await(0,v.f)(e,this.numberFormatOptions);this.itemsText=this.i18n.items.replace("${number}",t)}componentWillLoad(){this.groups&&this.updateGroupsText(this.groups),isNaN(this.total)||this.updateItemsText(this.total)}async togglePopover(e){if(this.popoverNode)return this.popoverNode.open=e,void await(0,p.t)(150)}openLink(e){var t;e.preventDefault();const r=null===(t=e.target)||void 0===t?void 0:t.href;window.open(r,"_blank")}renderOrgButtons(){const{i18n:e,baseUrl:t,itemUserInfo:r}=this,n=(0,g.r)((null==r?void 0:r.url)||t);return(0,i.h)(i.F,null,(0,i.h)("calcite-button",{appearance:"outline-fill",kind:"neutral",href:n,target:"_blank",onClick:e=>this.openLink(e)},e.homepage),(0,i.h)("calcite-button",{appearance:"outline-fill",kind:"neutral",href:`${n}/gallery.html`,target:"_blank",onClick:e=>this.openLink(e)},e.gallery))}renderUserButtons(e){const{i18n:t,baseUrl:r,portal:n,total:o,groups:s}=this,l=!this.groupsText||!this.itemsText,{username:a}=e;return l?(0,i.h)("calcite-loader",{label:t.loadingUserInformation,scale:"s",class:"loader"}):(0,i.h)(i.F,null,!!(null==s?void 0:s.total)&&(0,i.h)("calcite-button",{class:"button",appearance:"outline-fill",kind:"neutral",href:`${k({baseUrl:r,portal:n,user:e,type:"groups"})}`,target:"_blank",onClick:e=>{this.openLink(e),this.arcgisUserPopupInternalUIAction.emit({category:"profile popup",action:"view all groups"})}},this.groupsText),!!o&&(0,i.h)("calcite-button",{class:"button",appearance:"outline-fill",kind:"neutral",href:`${k({baseUrl:r,portal:n,user:e,type:"content"})}`,target:"_blank",onClick:e=>{this.openLink(e),this.arcgisUserPopupInternalUIAction.emit({category:"profile popup",action:"view all content"})}},this.itemsText),(0,i.h)("calcite-button",{class:"button",appearance:"outline-fill",kind:"neutral",href:`${(0,g.r)(r)}/user.html?user=${encodeURIComponent(a)}`,target:"_blank",onClick:e=>{this.openLink(e),this.arcgisUserPopupInternalUIAction.emit({category:"profile popup",action:"view profile"})}},t.profile))}render(){const{i18n:e,user:t,item:r,itemUserInfo:n,lang:o,portal:s,expanded:l,referenceElement:a}=this,d=t||n,v=(0,c.i)(r),{username:m,description:f}=d,g=(0,u.g)(d,o),b=(0,h.g)(f)||"",y=b.replace(/<br>/g," ".repeat(40)),w=!l&&y.length>=240,S=w?`${y.substring(0,240).trim().replace(/\s{5,40}/g,"<br>")}...`:b,I=v?this.i18n.itemManagedBy.replace("${username}",m):m;return(0,i.h)(i.H,{key:"9379d7c8253d68b3616e013aab69929db2f22e88"},(0,i.h)("calcite-popover",{key:"abe1b0eeb72ff2e8938d92c9e7dc8dd0406125cb",class:"popover",label:g,pointerDisabled:!0,referenceElement:a,placement:"bottom-start",id:`${m}-popover`,ref:e=>this.popoverNode=e,autoClose:!0,onCalcitePopoverOpen:(0,p.d)((()=>{this.arcgisUserPopupInternalUIAction.emit({category:"profile popup",action:"open profile popup"})}),100),onCalcitePopoverClose:()=>this.arcgisUserPopupPopoverClose.emit(),onKeyDown:e=>this.arcgisUserPopupPopoverKeyDown.emit(e)},(0,i.h)("div",{key:"bdd9d2fb338581c1dc3e774c5ec67c5fb1ea2853",class:"wrapper"},(0,i.h)("div",{key:"56f2c2450533bfd9e55f52e0afcea956dbe0e493",class:"header"},(0,i.h)("arcgis-user-avatar",{key:"08c24ac0cb1730e099401b68dc1de3264480c74e",class:"user-avatar",user:d,scale:"l",portal:s,showName:!0,description:I,checkOnline:this.checkOnline})),(0,i.h)("div",{key:"0f142460bd93d54fdc50f021cd6e9b3fc2aab0bf",class:"content"},S&&(0,i.h)("p",{key:"a334a5f100572343cafcbc3bce0e86ef96882d6c",class:{content__description:!0,"content__description--expanded":l},innerHTML:S}),l&&(0,i.h)("div",{key:"fde7e12ab1fcab3d0298e20bc4403133cc1e1fd6",class:"content__fade"}),w&&(0,i.h)("calcite-link",{key:"021e61894b6e9e219ca8708da7882ecc41bea993",class:"content__link",onClick:()=>this.expanded=!0},e.expand),l&&(0,i.h)("calcite-link",{key:"fd9b5c187a2caa96b3b30ba00070ecf4db255804",class:"content__link",onClick:()=>this.expanded=!1},e.showLess),(0,i.h)("div",{key:"5f823bffbc00bb6b611a0f62394085899024328c",class:"buttons"},v?this.renderOrgButtons():this.renderUserButtons(d))))))}get el(){return(0,i.d)(this)}static get watchers(){return{groups:["updateGroupsText"],total:["updateItemsText"]}}};$.style='.wrapper{background-color:var(--calcite-color-foreground-1);width:20rem}.header{padding-left:1rem;padding-right:1rem;padding-top:1.25rem;padding-bottom:1.25rem}.user-avatar{max-width:100%}.content{padding-left:1rem;padding-right:1rem;padding-top:0.5rem;padding-bottom:1.25rem}.content__description{margin:0px;overflow:auto;padding:0px;padding-bottom:0.25rem;font-size:0.875rem;color:var(--calcite-color-text-2);max-height:15.5rem}.content__description--expanded:after{content:"";display:block;height:1rem}.content__fade{position:relative;z-index:10;margin-bottom:0.25rem;display:block;height:1rem;width:100%;background:linear-gradient(to bottom, transparent, var(--calcite-color-foreground-1) 74%);margin-top:-1rem}.content__link{font-size:0.875rem}.buttons{display:grid;grid-auto-flow:column;padding-top:1rem;grid-gap:0.5rem}.button{min-width:0px}.loader{--calcite-loader-padding:0}'},29977:(e,t,r)=>{r.d(t,{a:()=>v,b:()=>h,g:()=>d,i:()=>p});var i=r(78231),n=r(68537),o=r(34472),s=r(4009);const l=["3DInsetMap","3DScene","3DViz","AttachmentViewer","CapacityAnalysis","Compare/storytelling_compare","Compare/storytelling_tabbed","Compare/storytelling_sidepanel","Compare/Multiviewer","Compare/Search","Compare/Configure","Compare/SideBySideViewer_Configure","Compare3d","CompareAnalysis","CompareMaps","Directions","Edit","Editor","Elevations","ElevationsProfile","Embed","Filter","FilterGallery","GeoList","GeoTour","HeaderFooter","Identify","ImageInterpretation","ImageryViewer","ImpactSummary","InformationLookup","InteractiveFilter","InteractiveLegend","LayerShowcase","Legend","LiveMaps","LocalPerspective","MapAndAppGallery","MapCarousel","MapTools","Media","MinimalGallery","Minimalist","Nearby","OnePane","Panels","PanelsLegend","Profile","PublicGallery","PublicInformation","ServiceLookup","SimpleMapViewer","SimpleViewer","SocialMedia","Solutions/s2.html?app=apps2/FindEditFilter","Solutions/s2.html?app=apps2/Finder","StorytellingTextLegend","StoryMapBasic","Styler","SummaryViewer","Time","TimeAware","TwoPane","Viewer","ZoneLookup"];function a(e,t){var r;return(null==t?void 0:t.isPortal)&&"Web Mapping Application"===e.type&&(null===(r=e.typeKeywords)||void 0===r?void 0:r.includes("Story Map"))}function u(e){var t;return"Data Store"===e.type&&(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("bigDataFileShare"))}function c(e,t){const r=l.some((t=>{var r;const i=t.includes(".html"),n=`/apps/${t}${i?"":"/"}`;return null===(r=e.url)||void 0===r?void 0:r.includes(n)}));return(null==t?void 0:t.isPortal)&&"Web Mapping Application"===e.type&&e.url&&r}function d(e){var t;return(null==e?void 0:e.contentStatus)||(null===(t=null==e?void 0:e.sourceJSON)||void 0===t?void 0:t.contentStatus)}function p(e){return"public_authoritative"===d(e)}function v(e,t,r){var n,s,l,v,h,m,f;const g=[],b=null===(s=e.groupDesignations||(null===(n=e.sourceJSON)||void 0===n?void 0:n.groupDesignations))||void 0===s?void 0:s.split(", ");var y;if((function(e){return"org_authoritative"===d(e)}(e)||p(e))&&g.push("Authoritative"),"deprecated"===d(e)&&g.push("Deprecated"),"Solution"===e.type&&(null===(l=e.typeKeywords)||void 0===l?void 0:l.includes("ArcGIS Solution"))&&g.push("Solution"),(null===(v=e.typeKeywords)||void 0===v?void 0:v.includes("Public Data Collection"))&&r&&g.push("Public Data Collection"),y=e.type,(o.r.includes(y)||a(e,t)||c(e,t)||u(e))&&g.push("Retired"),(null==b?void 0:b.includes("livingatlas"))&&g.push("Living Atlas"),b&&b.includes("opendata")&&g.push("Open Data"),(0,i.b)(e)&&g.push("Premium"),(0,i.a)(e)&&g.push("Subscriber"),(e.origin||(null===(h=e.sourceJSON)||void 0===h?void 0:h.origin))&&g.push("Collaboration"),"esri_apps"===e.owner||!e.listed&&!(null===(m=e.sourceJSON)||void 0===m?void 0:m.listed)||(null==t?void 0:t.isPortal)||g.push("Marketplace"),(null===(f=e.typeKeywords)||void 0===f?void 0:f.includes("Registered App"))&&"API Key"!==e.type&&(!(null==t?void 0:t.isPortal)||"esri_apps"!==e.owner)){const t=e.typeKeywords;(null==t?void 0:t.includes("APIToken"))?g.push((null==t?void 0:t.includes("Personal API Token"))?"Registered API Key Credentials (Personal)":"Registered API Key Credentials (Standard)"):g.push((null==t?void 0:t.includes("Personal API Token"))?"Registered OAuth 2.0 Credentials (Personal)":"Registered OAuth 2.0 Credentials (Standard)")}return g}async function h({badgeType:e,i18n:t,item:r,locale:i,portal:o,user:l}){const p=!l||(0,n.b)(l);switch(e){case"Authoritative":if(r&&"public_authoritative"===d(r)){const e=await(0,s.f)(r,i),n=(null==o?void 0:o.isPortal)?null==o?void 0:o.name:null==e?void 0:e.name;return t.Authoritative.tooltip.public.replace("${name}",n)}return t.Authoritative.tooltip.org;case"Retired":const n=t.Retired.tooltip;return r?a(r,o)?n.storyMap:function(e){return"CityEngine Web Scene"===e.type}(r)?n.cityEngine:c(r,o)?n.app:function(e){return"Big Data File Share"===e.type||u(e)}(r)?n.bdfs:n.general:n.general;case"Subscriber":return p?t.Subscriber.tooltip.public:t.Subscriber.tooltip.org;case"Premium":return p?t.Premium.tooltip.public:t.Premium.tooltip.org;case"Registered":return(null==o?void 0:o.isPortal)?t.Registered.tooltip.enterprise:t.Registered.tooltip.online;case"Personal credential":return t["Personal credential"].tooltip;default:return t[e].tooltip}}},78231:(e,t,r)=>{r.d(t,{a:()=>l,b:()=>s,c:()=>c,d:()=>d,e:()=>p,f:()=>m,g:()=>P,h:()=>f,i:()=>a,j:()=>y,k:()=>w,l:()=>g,m:()=>I,n:()=>S,o:()=>h,p:()=>b,q:()=>v,u:()=>u});var i=r(98034),n=r(38973);function o(e){var t;return!!(null===(t=e.owner)||void 0===t?void 0:t.toLowerCase().includes("esri"))}function s(e){var t;return o(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Credits"))}function l(e){var t;return o(e)&&!!(null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Requires Subscription"))}function a(e,t){return e.owner===t.username}function u(e,t){return a(e,t)||function(e,t){var r;if(null!=e.isAdmin)return!!e.isAdmin;const i=e.owner,n="admin"===e.itemControl,o=["esri_livingatlas","esri_demographics","esri_boundaries"];if((null===(r=e.portal)||void 0===r?void 0:r.isPortal)&&!a(e,t)&&n&&i.includes("esri_")&&!o.includes(i))return!1;return n}(e,t)}const c=(e,t)=>!!t.orgId&&e.every((e=>e.isOrgItem)),d=(e,t)=>`${(0,n.a)(t)}item.html?id=${e}`,p=(e,t)=>`${(0,n.g)(t)}/content/users/${e}`,v=e=>e.reduce(((e,t)=>(e[t.owner]=e[t.owner]?[...e[t.owner],t.id]:[t.id],e)),{});function h(e){var t;return null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Spatiotemporal")}function m(e){var t;return null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("View Service")}function f(e){var t;return null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Hosted Service")}function g(e){var t;return null===(t=e.typeKeywords)||void 0===t?void 0:t.includes("Multi Services View")}function b(e){return(null==e?void 0:e.hasViews)&&!e.sourceSchemaChangesAllowed}async function y(e){var t;const r=null==e?void 0:e.portalItem;if(!r)return Promise.resolve(null);const o=r.portal,[s]=await(0,i.l)(["esri/request"]);if(null==o?void 0:o.user){return s(`${(0,n.g)(o)}community/users/${o.user.username}`,{query:{f:"json",token:null===(t=r.portal.credential)||void 0===t?void 0:t.token},responseType:"json"}).then((e=>{var t,r;const i=null!==(r=null===(t=e.data)||void 0===t?void 0:t.groups)&&void 0!==r?r:[];return Promise.resolve(i)}),(()=>Promise.reject()))}return Promise.resolve(null)}async function w(e){var t;const r=null==e?void 0:e.portalItem;if(!r)return Promise.resolve(null);const o=r.portal,[s]=await(0,i.l)(["esri/request"]);return s(`${(0,n.g)(o)}content/items/${r.id}/groups`,{query:{f:"json",token:null===(t=r.portal.credential)||void 0===t?void 0:t.token},responseType:"json"}).then((e=>{var t,r,i,n,o,s;const l=[...null!==(r=null===(t=e.data)||void 0===t?void 0:t.admin)&&void 0!==r?r:[],...null!==(n=null===(i=e.data)||void 0===i?void 0:i.member)&&void 0!==n?n:[],...null!==(s=null===(o=e.data)||void 0===o?void 0:o.other)&&void 0!==s?s:[]];return Promise.resolve(l)}),(()=>Promise.reject()))}async function S(e,t,{relationshipType:r,direction:o}){const s=`${(0,n.g)(t)}content/items/${e}/relatedItems`,[l]=await(0,i.l)(["esri/request"]);return await l(s,{query:{f:"json",relationshipType:r,direction:o},method:"get",responseType:"json"})}function I(e,t){return null==e?void 0:e.some((e=>null==t?void 0:t.some((t=>e.id===t.id&&e.capabilities.includes("updateitemcontrol")))))}const P=(e,t)=>`${t}/content/items/${e}`},79717:(e,t,r)=>{r.d(t,{a:()=>p,b:()=>c,c:()=>l,d:()=>a,e:()=>v,f:()=>o,g:()=>d,h:()=>s,i:()=>h,q:()=>u});var i=r(25972),n=r(38973);function o(e){var t;return"ArcGISEnterpriseOnKubernetes"===(e.portalDeploymentType||(null===(t=e.sourceJSON)||void 0===t?void 0:t.portalDeploymentType))}function s(e){var t,r;return e.isPortal?"modern"===(null===(r=e.portalProperties)||void 0===r?void 0:r.homePage)||function(e){var t;return e.isPortal&&"modernOnly"===(null===(t=e.portalProperties)||void 0===t?void 0:t.homePage)}(e):"modern"===(null===(t=e.portalProperties)||void 0===t?void 0:t.homePage)||function(e){const t=new Date("June 30, 2020").getTime();return!e.isPortal&&e.created>=t}(e)}async function l(e){try{return{result:await(0,i.f)((()=>(0,i.r)(`${(0,n.g)(e)}portals/self/resources/home.page.json`)),"homePageConfig",e.id)}}catch(e){return{result:void 0}}}async function a(e){return(0,i.f)((()=>(0,i.r)(`${(0,n.g)(e)}portals/self/userDefaultSettings`)),"memberDefaults",e.id)}async function u(e={},t){return(0,i.r)(`${(0,n.g)(t)}/community/groups`,e)}const c=async(e,t)=>{var r;if(!e)return[];const o=`${(0,n.a)(null!==(r=t.restUrl)&&void 0!==r?r:t.portalUrl)}portals/self/servers`,s=await(0,i.f)((()=>(0,i.r)(o)),"selfServers",t.id);return null==s?void 0:s.servers},d=e=>p((0,n.c)(e)),p=e=>{var t;const r=`${(0,n.a)(null!==(t=(0,n.b)(e))&&void 0!==t?t:e)}info`;return(0,i.f)((()=>(0,i.r)(r,{},{addTokenManually:!1})),"portalInfo",r)};async function v(e,t){return!e.isPortal||await h(e,t)}async function h(e,t){if(!t||!e)return!1;if(!e.isPortal)return!0;const{result:r,error:n}=await(0,i.f)((()=>m(e,t)),"isPortalBackedBySDS",e.id);return!n&&r}const m=async(e,t)=>{if(e.isBackedBySDS)return{result:!0};if(!e.isPortal)return{result:!0};try{return{result:!!await f(t,e)}}catch(e){return console.error(e),{error:{code:"unhandledError",message:JSON.stringify(e)},result:!1}}},f=async(e,t)=>{var r;return(null!==(r=await c(e,t))&&void 0!==r?r:[]).filter((e=>e.isHosted))[0]}},16808:(e,t,r)=>{r.d(t,{A:()=>k,B:()=>N,a:()=>A,b:()=>b,c:()=>_,d:()=>p,e:()=>v,f:()=>S,g:()=>y,h:()=>h,i:()=>g,j:()=>I,k:()=>P,l:()=>C,m:()=>c,n:()=>O,o:()=>U,p:()=>d,q:()=>E,r:()=>L,s:()=>D,t:()=>T,u:()=>G,v:()=>K,w:()=>M,x:()=>F,y:()=>a,z:()=>$});var i=r(79717),n=r(38973),o=r(68537),s=r(44090),l=r(25972);async function a(){return new Promise((async e=>{const{portal:t}=s.c;if(null==t?void 0:t.isPortal){const r=t.helperServices.geocode,i=await function(e){const{config:t,portal:r}=s.c;return new Promise((async(i,n)=>{const o=e.filter((e=>u(e.url,r))).filter((e=>e.isEsriBatchGeocoder))[0];if(o){const e=o.url.split("/servers/")[1].split("/rest/services/")[0],r=`${t.restBaseUrl}/content/items/${e}`;try{i((await(0,l.r)(r)).url)}catch(e){n(e)}}else n("No world geocoder configured")}))}(r);e(i)}else{const r=function(e){const t=null==e?void 0:e.portalHostname;if(-1!==t.indexOf("dev"))return"dev";if(-1!==t.indexOf("qa"))return"qa";return""}(t);e(`https://geocode${r}.arcgis.com/arcgis/rest/services/World/GeocodeServer`)}}))}function u(e="",t){var r;const i=t.isPortal,n=e.toLowerCase(),o=n.indexOf("/geocodeserver")>-1&&n.indexOf("/rest/services/")>-1,s=i&&n.indexOf(null===(r=t.portalHostname)||void 0===r?void 0:r.toLowerCase())>-1,l=!i&&n.indexOf("utility")&&n.indexOf(".arcgis.com")>-1;return o&&(s||l)}function c(e){return(0,o.b)(e)||(null==e?void 0:e.privileges.includes("portal:user:createItem"))}function d(e){return(0,o.b)(e)||(null==e?void 0:e.privileges.includes("portal:user:receiveItems"))}async function p(e,t){return!(0,o.b)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishFeatures"))&&await(0,i.i)(t,e)}const v=e=>!(0,o.b)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishServerServices"));async function h(e,t){return!(0,o.b)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishTiles"))&&await(0,i.i)(t,e)}const m=async(e,t)=>{var r;return await h(e,t)&&(!t.isPortal||!!t.supports3DTilesServices||!!(null===(r=t.sourceJSON)||void 0===r?void 0:r.supports3DTilesServices))};function f(e){return!(0,o.b)(e)&&!0}function g(e){var t;return!(0,o.b)(e)&&(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:publisher:publishScenes"))}const b=e=>!(0,o.b)(e);function y(e,t,r){var i,n;const o=!!(null===(n=null===(i=t.helperServices)||void 0===i?void 0:i.rasterAnalytics)||void 0===n?void 0:n.url),s=function(e,t,r){var i;return(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:publisher:publishDynamicImagery"))&&(t.isPortal||w(r))}(e,t,r),l=t.isPortal?s:s||function(e,t,r){var i;return(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:publisher:publishTiledImagery"))&&!t.isPortal&&w(r)}(e,t,r);return o&&l}function w(e){return null==e?void 0:e.some((e=>{var t;return null===(t=e.entitlements)||void 0===t?void 0:t.some((e=>"image"===e.toLowerCase()))}))}async function S(e){var t;const{userLicensedItems:r}=await(0,l.r)(`${null!==(t=e.restUrl)&&void 0!==t?t:e.portalUrl}/community/self?returnUserLicensedItems=true`);return r}function I(e,t){var r,i;const s=null===(r=t.helperServices)||void 0===r?void 0:r.geocode.some((({url:e})=>u(e,t))),l=null!==(i=null==e?void 0:e.privileges)&&void 0!==i?i:[];return!(0,o.b)(e)&&s&&(!t.isPortal||!(0,n.i)(t)&&l.includes("portal:user:viewOrgItems")&&l.includes("portal:user:createItem"))}const P=e=>!(0,o.b)(e);function k(e){return null==e?void 0:e.privileges.includes("premium:publisher:createAdvancedNotebooks")}function $(e){return null==e?void 0:e.privileges.includes("premium:publisher:createNotebooks")}function x(e){return["portal:publisher:createDataPipelines","portal:user:createItem","portal:publisher:publishFeatures"].every((t=>{var r;return null===(r=e.privileges)||void 0===r?void 0:r.includes(t)}))}function C(e,t){var r,i,n;return t.isPortal?!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:publisher:registerDataStores")):x(e)&&("1"===(null===(i=null==e?void 0:e.sourceJSON)||void 0===i?void 0:i.level)||"2"===(null===(n=null==e?void 0:e.sourceJSON)||void 0===n?void 0:n.level))}const O=e=>!(0,o.b)(e)&&x(e);function U(e){return!(0,o.b)(e)&&(null==e?void 0:e.privileges.includes("premium:user:geocode"))}const T=e=>null==e?void 0:e.privileges.includes("premium:user:geocode:stored");async function _(e,t,r){return!t.isPortal&&await p(e,t)&&await async function(e,t,r){return!(0,o.b)(e)&&!!t.supportsHostedServices&&c(e)&&(await h(e,t)||await p(e,t)||g(e)||f(e)||y(e,t,r))}(e,t,r)}async function A(e,t,r){switch(t){case"CSV":case"GeoJson":case"Microsoft Excel":case"Shapefile":case"File Geodatabase":case"Photos with Locations":return p(e,r);case"Tile Package":return h(e,r);case"3DTiles Package":return m(e,r);case"Vector Tile Package":return f(e);case"Scene Package":return g(e);case"Service Definition":return async function(e,t){return await p(e,t)&&await h(e,t)}(e,r);default:return!0}}function L(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:manageCredits"))}function G(e,t){var r,i,n;return(0,o.e)(e)||L(e)||!!((null!==(r=null==e?void 0:e.assignedCredits)&&void 0!==r?r:null===(i=null==e?void 0:e.sourceJSON)||void 0===i?void 0:i.assignedCredits)>-1&&(null===(n=null==t?void 0:t.portalProperties)||void 0===n?void 0:n.showCreditsOnProfile))}const M=e=>!1;function N(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:viewGroups"))}function D(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:viewUsers"))}function E(e){return(0,o.d)(e)||D(e)&&function(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:viewItems"))}(e)&&(function(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:updateItems"))}(e)||function(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:deleteItems"))}(e)||function(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:reassignItems"))}(e))}function F(e){return e.map((e=>`portal:app:access:item:${e.id}`))}const K=e=>e.privileges.includes("portal:user:assignPrivilegesToApps")},68537:(e,t,r)=>{r.d(t,{a:()=>l,b:()=>o,c:()=>s,d:()=>h,e:()=>v,f:()=>p,g:()=>m,h:()=>g,i:()=>u,j:()=>f,k:()=>x,l:()=>a,m:()=>b,n:()=>d,o:()=>T,p:()=>w,q:()=>S,r:()=>$,s:()=>P,t:()=>I,u:()=>k,v:()=>O,w:()=>c,x:()=>C});var i=r(78231);const n=e=>{var t,r,i;return"string"==typeof(null==e?void 0:e.role)&&(null==e?void 0:e.role)?null==e?void 0:e.role:null!==(r=null!==(t=null==e?void 0:e.roleId)&&void 0!==t?t:null==e?void 0:e.id)&&void 0!==r?r:null===(i=null==e?void 0:e.sourceJSON)||void 0===i?void 0:i.id};function o(e){return e&&!e.orgId}function s(e,t){return(0,i.u)(e,t)||"update"===e.itemControl||(0,i.c)([e],t)&&v(t)}function l(e,t){const r=(0,i.c)([e],t),n=(0,i.u)(e,t)||v(t)&&r,o=m(t)&&y(t);return!!(n||r&&o)}const a=e=>{var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:manageLicenses"))};function u(e){return["Trial Developer","Developer","Developer Subscription"].includes(null==e?void 0:e.type)}function c(e){return["Developer Subscription"].includes(null==e?void 0:e.type)}function d(e){return["Geoanalytics Engine","GeoAnalytics MS Fabric"].includes(null==e?void 0:e.type)}const p=e=>{var t;return null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.includes("Developer")};function v(e){return"org_admin"===n(e)||"account_admin"===n(e)}function h(e){return["org_admin","account_admin"].includes(n(e))&&!(null==e?void 0:e.roleId)}function m(e){return!!(null==e?void 0:e.roleId)&&e.roleId.length>0}function f(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:updateItemCategorySchema"))}function g(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:updateGroups"))}function b(e){var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:assignToGroups"))}const y=e=>{var t;return!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:admin:deleteItems"))};function w(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToGroup")}function S(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToOrg")}function I(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToPublic")}function P(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToOrg")}function k(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToPublic")}function $(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToGroup")}function x(e,t,r,i){const n=i&&!["Trial","Trial Press","Trial Developer","Developer Subscription","Evaluation"].includes(i.type),o=((null==t?void 0:t.privileges)||[]).includes("portal:admin:manageCollaborations");return!(!(null==e?void 0:e.collaborationsEnabled)||!t||!v(t)&&!o||!(null==r?void 0:r.isPortal)&&!n)}function C(e){return!!e&&(!m(e)||m(e)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:viewItems")}(e))}const O=({items:e,user:t,portal:r})=>{const n=e[0],o=n.owner;if(r.isPortal&&o!==t.username&&o.includes("esri_")&&!["esri_livingatlas"].includes(o))return!1;const l=(0,i.u)(n,t),a=m(t),u=U(t),c=s(n,t)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:updateItems")}(t)&&!a&&(function(e,t){return!function(e){return!(!e.urlKey||!e.customBaseUrl)||!!e.isPortal}(t)||w(e)||S(e)||!!t.canSharePublic&&I(e)}(t,r)||U(t));return l||c||(0,i.c)(e,t)&&u};function U(e){return $(e)||P(e)||k(e)}function T(e){const t=["portal:user:createItem","portal:user:viewOrgItems","premium:publisher:createNotebooks","portal:publisher:createDataPipelines","features:user:edit","features:user:fullEdit","portal:admin:viewItems","portal:admin:updateItems","portal:admin:deleteItems"];return e.some((e=>t.includes(e)))}},96295:(e,t,r)=>{r.d(t,{H:()=>i,R:()=>n});const i='-typekeywords:("MapAreaPackage") -type:("Map Area" OR "Indoors Map Configuration" OR "Code Attachment")',n="Indoors Map Configuration,Code Attachment"},58151:(e,t,r)=>{r.d(t,{a:()=>c,b:()=>u,c:()=>d,d:()=>o,e:()=>n,g:()=>l,r:()=>a,s:()=>s,u:()=>p});var i=r(91616);function n(e,t,r,i){!function(e,t,r){r=r||{};let i=null==r?void 0:r.expires;if("number"==typeof i){const e=new Date,t=24*i*60*60*1e3;e.setTime(Date.now()+t),i=r.expires=e}"string"!=typeof i&&(null==i?void 0:i.toUTCString)&&(r.expires=i.toUTCString());let n,o=`${e}=${encodeURIComponent(t)}`;for(n in r){o+=`; ${n}`;const e=r[n];!0!==e&&(o+=`=${e}`)}document.cookie=o}(e,i?JSON.stringify(t):t,r)}function o(e,t){const r=function(e){const t=document.cookie,r=new RegExp(`(?:^|; )${(0,i.e)(e)}=([^;]*)`),n=t.match(r);return n?decodeURIComponent(n[1]):void 0}(e);return r&&t?JSON.parse(r):r}function s(e,t,r){window.localStorage.setItem(e,r?JSON.stringify(t):t)}function l(e,t){const r=window.localStorage.getItem(e);return r&&t?JSON.parse(r):r}function a(e){window.localStorage.removeItem(e)}function u(e,t,r){window.sessionStorage.setItem(e,r?JSON.stringify(t):t)}function c(e,t){const r=window.sessionStorage.getItem(e);return r&&t?JSON.parse(r):r}function d(e){window.sessionStorage.removeItem(e)}function p(e,t,r){const i=new Date(t);i.setFullYear(t.getFullYear()+1),n(e,r,{expires:i}),r?s(e,"true",!1):a(e)}},76418:(e,t,r)=>{r.d(t,{a:()=>l,c:()=>a,g:()=>n,i:()=>o,r:()=>s});var i=r(91102);function n(e){return function(e){return null==e?void 0:e.replace(/&#10;&#13;|&#10;|&#13;|\r\n|\r|\n/g,"<br>")}(function(e){return null==e?void 0:e.replace(/(?:\r)/g,"&#10;").replace(/(?:\n)/g,"&#13;")}(function(e){return null==e?void 0:e.replace(/(https?:\/\/[^\s]+)/g,(e=>`<a href="${e}" target="_blank">${e}</a>`))}(function(e){return null==e?void 0:e.replace(/(?:&#10;)/g,"\r").replace(/(?:&#13;)/g,"\n")}(e))))}function o(e){return e.replace(/\$\{startSup\}/g,"<sup>").replace(/\$\{endSup\}/g,"</sup>")}function s(e,t,r){return e.replace(/\$\{startLink\}/g,`<calcite-link label="${r}" href="${t}" target="_blank">`).replace(/\$\{endLink\}/g,"</calcite-link>")}function l(e){return e.replace(/\$\{startStrong\}/g,"<strong>").replace(/\$\{endStrong\}/g,"</strong>")}function a(e){return(0,i.s)((null==e?void 0:e.trim())||"").replace(/[!*+\-&|()[\]{}^~?:"\\]/g,"\\$&")}},16093:(e,t,r)=>{r.d(t,{a:()=>w,b:()=>f,c:()=>m,d:()=>d,e:()=>b,f:()=>y,g:()=>v,h:()=>g,i:()=>S,j:()=>c,r:()=>u,s:()=>h,u:()=>p});var i=r(38973),n=r(44090),o=r(98034),s=r(58151),l=r(76246),a=r(34472);function u(e){return"/"===(null==e?void 0:e.slice(-1))?e.slice(0,e.length-1):e}function c(e){return e.startsWith("/")||e.startsWith("\\")?e.slice(1):e}async function d(e){var t;const r=null!==(t=null===n.c||void 0===n.c?void 0:n.c.api)&&void 0!==t?t:4,[i]=await(0,o.l)([4===r?"esri/core/urlUtils":"esri/urlUtils"]);let s=i.urlToObject(e);s.query=s.query||{};for(let e in s.query||{})s.query.hasOwnProperty(e)&&(Array.isArray(s.query[e])||(s.query[e]=s.query[e].replace(/(&lt;|&gt;|<|>|%3C|%3E)/g,"")));return s}function p(e){return(null==e?void 0:e.replace(/^.*\//,"").replace(/.[^.]*$/,""))||""}function v(e){const t=(null==e?void 0:e.replace(/^.*\//,"").replace(/\?+.*/,""))||"",r=t.replace(/^.*\./,"").toLowerCase();return a.b.includes(r)?t:""}function h(e){return["WFS","GeoJson","CSV","GeoRSS","KML","OGCFeatureServer","WMS","WMTS"].includes(e)}function m(e){const{config:t,portal:r}=n.c;let i=!1;if(!e)return!1;if((t.httpsDomains||[]).forEach((t=>{(e.indexOf(`.${t}/`)>-1||e.indexOf(`/${t}/`)>-1)&&(i=!0)})),!i){let t=r.portalHostname;t.indexOf("/")>-1&&(t=t.substring(0,t.indexOf("/"))),e.indexOf(t)>-1&&(i=!0)}return i}function f(e){if(!e)return!1;const{config:t,portal:r}=n.c,o=(0,i.g)(r),s=new URL(o).hostname,l=!1===t.isMultiTenant,a=-1!==e.indexOf(".arcgis.com/"),u=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features")||-1!==e.indexOf("//locationservices"),c=r.supportsHostedServices&&-1!==e.indexOf(s)&&!l;return a&&u||!a&&c}function g(){var e;if(-1===window.location.protocol.toLowerCase().indexOf("https")){const t=(0,s.d)("esri_auth",!0);return"web"!==(null===(e=null==t?void 0:t.auth_tier)||void 0===e?void 0:e.toLowerCase())}return!0}function b(e){let t=e.toLowerCase();-1==t.indexOf("http://")&&-1==t.indexOf("https://")&&(t=(e="https://"+e).toLowerCase());let r=t.indexOf("//");r=t.indexOf("/",r+2),-1==r?t=(e+="/arcgis/rest/services").toLowerCase():r==t.length-1&&(t=(e+="arcgis/rest/services").toLowerCase());let i=t.indexOf("/arcgis",r);i==t.length-7?t=(e+="/rest/services").toLowerCase():i==t.length-8&&(t=(e+="rest/services").toLowerCase()),i=t.indexOf("/server",r),t.endsWith("/server")?t=(e+="/rest/services").toLowerCase():t.endsWith("/server/")&&(t=(e+="rest/services").toLowerCase());const n=t.indexOf("/rest/services",r),o=t.indexOf("/services",r),s=t.indexOf("/rest",r);return-1==n&&o>-1?t=(e=`${e.substring(0,o)}/rest/services${e.substring(o+9)}`).toLowerCase():-1==n&&s>-1&&(t=(e=`${e.substring(0,s)}/rest/services${e.substring(s+5)}`).toLowerCase()),t.indexOf("/rest/services"),e}const y=(e,t=!1)=>(e=u(e=e.trim()),/(http|https|ftp):\/\/?/.exec(e)||(e=`https://${e}`),!t&&"https:"!==location.protocol||!f(e)&&!m(e)||(e=e.replace("http:/","https:/")),e=e.indexOf("/dynamicLayer?")>-1?e.substring(0,e.indexOf("/dynamicLayer?")):e),w=(e,t=!1)=>{var r,n,o;if(!e)return{error:{code:"invalidUrl"}};if(S(e,t))return{error:{code:"httpWarning"}};const s=decodeURIComponent(e),a=s.replace(i.v,"").match(/((\.|\/)*(kml|kmz))/gi),u=s.replace(i.v,"").match(/((\/|\=)(wmts|wms|wfs))/gi),c=s.replace(i.v,"").match(/((\/|\=)(OGC|OGCFeatureServer))/gi),d=s.replace(i.v,"").match(/((\.|\/)*(rss))/gi),p=null===(r=s.replace(i.v,"").match(i.r))||void 0===r?void 0:r[1],v=s.replace(i.v,"").match(i.h),h=s.replace(i.v,"").match(/((\.|\/)*(csv))/gi),m=s.replace(i.v,"").match(/(\.|\/)((\$?{(z|level)})\/*(\$?{(x|col)})\/*(\$?{(y|row)}))/gi);let f=null;if(s.match(i.f))f="GeoJson";else if(!c||u||p)if(p&&!u)f=l.a[p];else if(v)f="Map Service";else if(u){const e="/"===(null==u?void 0:u[0].charAt(0))?"/":"=";f=null===(o=null===(n=null==u?void 0:u[0])||void 0===n?void 0:n.split(e)[1])||void 0===o?void 0:o.toUpperCase()}else a?f="KML":d?f="GeoRSS":h?f="CSV":m?f="Tile Layer":s.endsWith("KnowledgeGraphServer")&&(f="Knowledge Graph");else f="OGCFeatureServer";return{result:f}},S=(e,t)=>!t&&e.includes("http://")},80041:(e,t,r)=>{r.d(t,{a:()=>c,b:()=>d,c:()=>p,d:()=>v,f:()=>u,g:()=>h});var i=r(38973),n=r(96295),o=r(25972),s=r(91102),l=r(369),a=r(4009);async function u(e,t,r){const n=`${r?"https://www.arcgis.com/sharing/rest/":(0,i.g)(t)}community/users/${e}`,s=(null==n?void 0:n.includes("www.arcgis.com"))&&t.isPortal?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,o.f)((async()=>{try{return await(0,o.r)(n,{},s)}catch(t){return{username:e}}}),"user",n)}async function c(e,t,r,i){var n,o;if("public_authoritative"===(null==e?void 0:e.contentStatus)||"public_authoritative"===(null===(n=e.sourceJSON)||void 0===n?void 0:n.contentStatus)){const n=await(0,a.f)(e,r,t,i);if(!n)return u(e.owner,t,i);const{description:l,name:c,thumbnail:d,url:p}=n;return{description:l?(0,s.s)(l):"",fullName:c,username:e.owner,thumbnail:d,id:e.orgId||(null===(o=e.portal)||void 0===o?void 0:o.id),url:p}}return u(e.owner,t,i)}async function d(e,t,r){const n=r?"https://www.arcgis.com/sharing/rest/":(0,i.g)(t),s=r?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,o.f)((async()=>(0,o.r)(`${n}community/groups`,{q:`(owner:"${e}")`,num:100},s)),"userGroups",e)}async function p(e,t,r){const s=r?"https://www.arcgis.com/sharing/rest/":(0,i.g)(t),l=r?{disableIdentityLookup:!0,addTokenManually:!1}:{};return(0,o.f)((async()=>(await(0,o.r)(`${s}search`,{q:`(owner:"${e}") ${n.H}`,num:1},l)).total),"userItemsTotal",e)}function v(e,t,r=!1){if(null==e?void 0:e.thumbnailUrl)return e.thumbnailUrl;if(!(null==e?void 0:e.thumbnail))return null;if(e.thumbnail.startsWith("http"))return e.thumbnail;const n=(0,l.g)(t);return`${r?"https://www.arcgis.com/sharing/rest/":(0,i.g)(t)}community/users/${e.username}/info/${e.thumbnail}${n&&!r?`?token=${n}`:""}`}function h(e,t){const{fullName:r,firstName:i,lastName:n,username:o}=e;return r||(i&&n?"ja"===t?`${n} ${i}`:`${i} ${n}`:o)}},4009:(e,t,r)=>{r.d(t,{f:()=>o});var i=r(25972),n=r(91102);async function o(e,t,r,o){var s,l,a;const u=null!==(a=null!==(s=e.orgId)&&void 0!==s?s:null===(l=e.portal)||void 0===l?void 0:l.id)&&void 0!==a?a:null==r?void 0:r.id;return(0,i.f)((()=>async function(e,t,r,o,s){var l,a;const u=(null===(l=e.portal)||void 0===l?void 0:l.portalHostname)||(null==o?void 0:o.portalHostname)||(null===(a=null==o?void 0:o.restUrl)||void 0===a?void 0:a.replace("/sharing/rest","")),c=s?`https://www.arcgis.com/sharing/rest/portals/${t}`:`https://${u}/sharing/rest/portals/${t}`;if(!u&&!s)return null;const d=s?{disableIdentityLookup:!0,addTokenManually:!1}:{},p=await(0,i.r)(c,{},d),{urlKey:v,thumbnail:h,customBaseUrl:m}=p,f=`https://${v}.${m}/`,g=h?`${f}sharing/rest/portals/self/resources/${h}`:null;let b,y;try{const e=await(0,i.r)(`${c}/resources/localizedOrgProperties`,{start:1,num:100},d);if(e){const t=e[r]||e.default;b=t.name,y=t.description||e.description}}catch(e){}return{name:b||p.name,description:(0,n.a)(y||p.description),url:`${f}home/`,thumbnail:g}}(e,u,t,r,o)),"verified",u)}}}]);