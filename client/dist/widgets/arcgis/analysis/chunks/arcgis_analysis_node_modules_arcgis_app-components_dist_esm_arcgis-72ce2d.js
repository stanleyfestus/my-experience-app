/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-72ce2d.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-72ce2d"],{7367:(e,t,i)=>{i.r(t),i.d(t,{arcgis_color_contrast:()=>d,arcgis_color_edit:()=>u,arcgis_color_swatch:()=>g,arcgis_color_text_input:()=>f,arcgis_configure_colors_table:()=>b,arcgis_contrast_preview:()=>k,arcgis_preset_colors:()=>C,arcgis_shared_theme_colors:()=>v});var o=i(20536),s=i(37568),c=i(91616);i(91102),i(73807),i(34752),i(98034),i(99004);function l(e,t){const i=[e=a(e),t=a(t)].map(r).map(n),o=function(e,t){const i=Math.max(e,t),o=Math.min(e,t);return(i+.05)/(o+.05)}(i[0],i[1]);return{contrast:o,passesDoubleA:o>=4.5}}function a(e){if(4!==e.length)return e;const t=e.split("");return`#${t[1]}${t[1]}${t[2]}${t[2]}${t[3]}${t[3]}`}function r(e){e=e.replace(/^#/,"");const t=parseInt(e,16);return[t>>16,t>>8&255,255&t,255]}function n(e){const t=1/12.92,i=e[0]/255,o=e[1]/255,s=e[2]/255;return.2126*(i<=.03928?i*t:h(i))+.7152*(o<=.03928?o*t:h(o))+.0722*(s<=.03928?s*t:h(s))}function h(e){return Math.pow((e+.055)/1.055,2.4)}const d=class{constructor(e){(0,o.r)(this,e),this.save=(0,o.c)(this,"save",7),this.cancel=(0,o.c)(this,"cancel",7),this.handleProceedAnayway=()=>{this.showWarning=!1,this.proceedToSave()},this.handleAcceptWarning=()=>{this.showWarning=!1},this.handleSaveClick=()=>{Object.keys(this.colorValues).some((e=>!this.colorValues[e].isBackground&&!this.colorValues[e].isValidContrast))?this.showWarning=!0:this.proceedToSave()},this.proceedToSave=()=>{const e={};Object.keys(this.colorValues).forEach((t=>{e[t]=Object.assign({},this.colorValues[t]),delete e[t].isBackground,delete e[t].isLink})),this.save.emit({textResults:Object.assign({},this.textValues),colorResults:e})},this.handleCancelClick=()=>{this.cancel.emit(),this.isActive=!1},this.handleEditColorClick=async e=>{this.editingKey=e.detail,this.showColorPicker=!0,await(0,c.t)(100),this.colorPickerEl.setFocus()},this.handleColorPickerChange=e=>{this.colorValues[this.editingKey].color!==e.target.value&&this.setColorValue(e.target.value)},this.handlePresetColorSelect=e=>{this.setColorValue(e.detail)},this.handleTextInputChange=e=>{const{key:t,value:i}=e.detail;this.textValues=Object.assign(Object.assign({},this.textValues),{[t]:i})},this.handleModalClose=()=>{this.isActive=!1},this.modalTitle="",this.colorConfigs=void 0,this.textInputConfigs=void 0,this.sharedTheme=void 0,this.isActive=!0,this.showColorPicker=!1,this.colorValues={},this.textValues={},this.editingKey="",this.showWarning=!1}async open(){this.isActive=!0}async close(){this.isActive=!1}handleBodyClick(e){this.showColorPicker&&(this.colorPickerContainer&&-1!==e.path.indexOf(this.colorPickerContainer)||(this.showColorPicker=!1))}setColorValue(e){var t;const i=(e,t)=>{const i=this.colorValues[e];this.colorValues=Object.assign(Object.assign({},this.colorValues),{[e]:Object.assign(Object.assign({},i),t)})},o=this.colorValues[this.editingKey];if(o.isBackground)return this.colorValues=Object.assign(Object.assign({},this.colorValues),{[this.editingKey]:Object.assign(Object.assign({},o),{color:e})}),void Object.keys(this.colorValues).forEach((t=>{const o=this.colorValues[t];if(o.isBackground)return;const{contrast:s,passesDoubleA:c}=l(e,o.color);i(t,{contrastRatio:+s.toFixed(1),isValidContrast:c})}));const s=this.getBackgroundConfig(),c=null===(t=this.colorValues[s.key])||void 0===t?void 0:t.color,{contrast:a,passesDoubleA:r}=l(c,e);i(this.editingKey,{color:e,contrastRatio:+a.toFixed(1),isValidContrast:r})}getBackgroundConfig(){return this.colorConfigs.find((e=>e.isBackground))}async componentWillLoad(){var e;const t=await(0,s.g)(this.el);this.i18n=t[0],this.colorValues=this.colorConfigs.reduce(((e,{key:t,defaultColor:i,isBackground:o,isLink:s})=>(e[t]={color:i,isBackground:o,isLink:s},e)),{});const i=this.getBackgroundConfig();if(!i)return;const o=null===(e=this.colorValues[i.key])||void 0===e?void 0:e.color;Object.keys(this.colorValues).forEach((e=>{const t=this.colorValues[e];if(t.isBackground)return;const{contrast:i,passesDoubleA:s}=l(t.color,o);t.contrastRatio=+i.toFixed(1),t.isValidContrast=s})),this.textInputConfigs.forEach((e=>{this.textValues[e.key]=e.defaultValue||""}))}render(){var e;const t=this.getBackgroundConfig(),i=this.colorConfigs.filter((e=>e.isLink))[0],s=this.colorConfigs.filter((e=>!e.isBackground&&!e.isLink)),c=t?this.colorValues[t.key].color:"";if(t)return(0,o.h)(o.H,null,(0,o.h)("calcite-modal",{open:this.isActive,class:"color-contrast",onCalciteModalClose:this.handleModalClose},(0,o.h)("h3",{slot:"header"},this.modalTitle),(0,o.h)("div",{slot:"content",class:"color-contrast__modal-content"},(0,o.h)("div",{class:"color-contrast__container"},(0,o.h)("div",{class:"config-color-panel"},this.textInputConfigs.map((e=>(0,o.h)("arcgis-color-text-input",{key:e.key,keyValue:e.key,label:e.label,defaultValue:e.defaultValue,onInputChange:this.handleTextInputChange}))),(0,o.h)("arcgis-configure-colors-table",{i18n:this.i18n,backgroundConfig:t,otherConfigs:s,linkConfig:i,colorValues:this.colorValues,onEditClick:this.handleEditColorClick})),(0,o.h)("div",{class:"color-contrast__preview-panel"},(0,o.h)("div",null,this.i18n.preview),(0,o.h)("arcgis-contrast-preview",{backgroundColor:c,textColorConfigs:s,linkConfig:i,colorValues:this.colorValues})),(0,o.h)("div",{class:{"color-contrast__color-picker-container":!0,hide:!this.showColorPicker},ref:e=>this.colorPickerContainer=e},(0,o.h)("calcite-color-picker",{scale:"s",value:null===(e=this.colorValues[this.editingKey])||void 0===e?void 0:e.color,savedDisabled:!0,ref:e=>this.colorPickerEl=e,onCalciteColorPickerInput:this.handleColorPickerChange}),this.sharedTheme&&(0,o.h)("div",null,(0,o.h)("arcgis-shared-theme-colors",{sharedTheme:this.sharedTheme,i18n:this.i18n,onSelectColor:this.handlePresetColorSelect})),(0,o.h)("div",null,(0,o.h)("arcgis-preset-colors",{i18n:this.i18n,onSelectColor:this.handlePresetColorSelect}))))),(0,o.h)("calcite-button",{slot:"secondary",appearance:"outline-fill",onClick:this.handleCancelClick},this.i18n.cancel),(0,o.h)("calcite-button",{slot:"primary",onClick:this.handleSaveClick},this.i18n.save)),(0,o.h)("calcite-modal",{open:this.showWarning,kind:"danger",class:"contrast-warning-modal"},(0,o.h)("h3",{slot:"header",class:"trailer-0 font-size-1"},this.i18n.contrastWarning.title),(0,o.h)("div",{slot:"content"},this.i18n.contrastWarning.description),(0,o.h)("calcite-button",{slot:"primary",onClick:this.handleAcceptWarning},this.i18n.contrastWarning.editColors),(0,o.h)("calcite-button",{slot:"secondary",kind:"danger",appearance:"transparent",onClick:this.handleProceedAnayway},this.i18n.contrastWarning.proceedAnyway)))}get el(){return(0,o.d)(this)}};d.style=".color-contrast{--calcite-modal-width:830px}.contrast-warning-modal{--calcite-modal-width:415px}.color-contrast__modal-content{padding:var(--arcgis-app-cap-spacing-half);position:relative;min-height:500px}.color-contrast__container{display:flex}@media screen and (max-width: 640px){.color-contrast__container{flex-direction:column}}.config-color-panel{flex:1 1 auto;min-width:0;margin-right:var(--arcgis-app-side-spacing-double);width:50%}@media screen and (max-width: 640px){.config-color-panel{width:100%}}.color-contrast__preview-panel{width:45%;flex:1 1 auto;min-width:0;display:flex;flex-direction:column}@media screen and (max-width: 640px){.color-contrast__preview-panel{width:100%}}.color-contrast__color-picker-container{position:absolute;left:50%}.hide{display:none}html[dir=rtl] .config-color-panel{margin-right:0;margin-left:var(--arcgis-app-side-spacing-double)}";const u=class{constructor(e){(0,o.r)(this,e),this.colorEditClick=(0,o.c)(this,"colorEditClick",7),this.handleClick=e=>{null==e||e.stopPropagation(),this.colorEditClick.emit(this.editKey)},this.handleKeyup=e=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),this.handleClick(e))},this.editKey="",this.labelText="",this.colorValue=""}render(){return(0,o.h)("div",{key:"62cb81c23b11f470eba1887b2335bea6cb7aa463",class:"color-edit-container",tabIndex:0,onClick:this.handleClick,onKeyUp:this.handleKeyup},(0,o.h)("div",{key:"bdf05d48d9d194d759623d243ab56d8333ed5e03"},(0,o.h)("div",{key:"917daf67919859e8dac6736a2d2787f2d5eb0b7a",class:"color-tile",style:{backgroundColor:this.colorValue}})),(0,o.h)("div",{key:"9548dc29ac76e91ce718524dd9eb00a0fa48f46c",class:"color-edit__label-value"},(0,o.h)("div",{key:"c9bbcc0a35e29c56fb7ec8684fc46279e3989443",class:"color-edit-label"},this.labelText),(0,o.h)("div",{key:"f5f120b068c960a1b317f9edb7725ad738392322",class:"color-edit-value "},this.colorValue)),(0,o.h)("div",{key:"ea2d0b27db20d29925dd774cb57bc57c1869b9ac",class:"color-edit-icon"},(0,o.h)("calcite-icon",{key:"cf6db5ac4fde61bb9e9337785265439ccf7dafc7",scale:"s",icon:"pencil"})))}};u.style=".color-edit-container{padding:var(--arcgis-app-side-spacing-quarter);display:flex;align-items:center;cursor:pointer}.color-tile{border:1px solid #a9a9a9;width:30px;height:30px;margin-right:var(--arcgis-app-side-spacing-three-quarters)}.color-edit__label-value{flex:1 1 auto;min-width:0;text-align:start}.color-edit-label{font-size:var(--arcgis-app-font-size--2);font-weight:normal}.color-edit-value{font-size:var(--arcgis-app-font-size--1);font-weight:var(--arcgis-app-font-weight-demi)}.color-edit-icon{margin-right:var(--arcgis-app-side-spacing-three-quarters)}html[dir=rtl] .color-tile{margin-right:0;margin-left:var(--arcgis-app-side-spacing-three-quarters)}html[dir=rtl] .color-edit-icon{margin-right:0;margin-left:var(--arcgis-app-side-spacing-three-quarters)}";const g=class{constructor(e){(0,o.r)(this,e),this.swatchClick=(0,o.c)(this,"swatchClick",7),this.handleClick=()=>{this.swatchClick.emit(this.color)},this.handleKeyUp=e=>{" "!==e.key&&"Enter"!==e.key||this.handleClick()},this.color=""}render(){return(0,o.h)("div",{key:"a968fa1c945955f94ffa574b61012c09c1e76d3f",class:"color-swatch",onClick:this.handleClick,onKeyUp:this.handleKeyUp,tabIndex:0},(0,o.h)("svg",{key:"99ea51a333cf463222499386e34b08eefd22385c",width:"16",height:"16"},(0,o.h)("rect",{key:"5f7cecbadfbdf4eb53ed92bee51ef0cb547ca56f",width:"16",height:"16",fill:this.color})))}};g.style=".color-swatch{display:inline-block;height:16px;width:16px;box-sizing:border-box;margin-right:2px;overflow:hidden}";const f=class{constructor(e){(0,o.r)(this,e),this.inputChange=(0,o.c)(this,"inputChange",7),this.handleInputChange=e=>{const t=e.target;this.value=t.value,this.inputChange.emit({key:this.keyValue,value:t.value})},this.keyValue=void 0,this.label=void 0,this.defaultValue=void 0,this.value=""}componentWillLoad(){this.defaultValue&&(this.value=this.defaultValue)}render(){return(0,o.h)("calcite-label",{key:"7ee0c9f516209d58e2e9dc9e60e5ae401f6f826b"},this.label,(0,o.h)("calcite-input",{key:"2c679eaff141d6bc1f4acc3aca8ce7c6f153cfb3",value:this.value,onCalciteInputInput:this.handleInputChange,scale:"s"}))}},p=({key:e,colorConfig:t,color:i,contrastRatio:s,isValidContrast:c,i18n:l,onColorEditClick:a})=>(0,o.h)("tr",{"data-key":e},(0,o.h)("td",{class:"color-contrast__color-col"},(0,o.h)("arcgis-color-edit",{editKey:t.key,labelText:t.label,colorValue:i,onColorEditClick:a})),(0,o.h)("td",{class:"color-contrast__ratio-col"},s),(0,o.h)("td",{class:"color-contrast__legibility-col"},(0,o.h)("div",{class:"color-row__legibility"},c?(0,o.h)(o.F,null,(0,o.h)("calcite-icon",{scale:"s",icon:"check-circle-f",class:"color-contrast--valid"}),(0,o.h)("div",{class:"color-contrast__legible-label"},l.legible)):(0,o.h)(o.F,null,(0,o.h)("calcite-icon",{scale:"s",icon:"x-circle-f",class:"color-contrast--invalid"}),(0,o.h)("div",{class:"color-contrast__legible-label"},l.notLegible))))),b=class{constructor(e){(0,o.r)(this,e),this.editClick=(0,o.c)(this,"editClick",7),this.handleEditClick=e=>{this.editClick.emit(e.detail)},this.i18n=void 0,this.backgroundConfig=void 0,this.otherConfigs=void 0,this.linkConfig=void 0,this.colorValues={}}render(){var e;const t=this.colorValues[this.backgroundConfig.key].color,i=this.colorValues[null===(e=this.linkConfig)||void 0===e?void 0:e.key],s=(null==i?void 0:i.color)||"";return(0,o.h)("div",{key:"dc6224fa1e414009088f8962b3bd4b2d8d1ee25a"},this.i18n.configure,(0,o.h)("table",{key:"35fea6b89b59272b026f2b1190fc85741a8bea8a",class:"config-color-table"},(0,o.h)("thead",{key:"d105d8cfc5c737d66c9a4fe85cb5337e986cd0a5"},(0,o.h)("tr",{key:"dafbccb1261771254506b42d133b0fb0fc78552d"},(0,o.h)("th",{key:"41f21c371d2455d76bc34d3bc32afff8f056dd66"},(0,o.h)("arcgis-color-edit",{key:"29dea7b42797cc8dddcdead5a945172014216046",editKey:this.backgroundConfig.key,labelText:this.backgroundConfig.label||this.i18n.background,colorValue:t,onColorEditClick:this.handleEditClick})),(0,o.h)("th",{key:"0b9c09c09ceb17d2b44415027ef3c64ce2cb670d",class:"color-edit-label"},this.i18n.contrastRatio),(0,o.h)("th",{key:"df7fb78428fc4f886c20a51aa26ed89355acb40c",class:"color-edit-label"},this.i18n.legibility))),(0,o.h)("tbody",{key:"02dd701a32d5df2eabd71b977504783a91ad7da3"},this.otherConfigs.map((e=>{const{color:t,contrastRatio:i,isValidContrast:s}=this.colorValues[e.key];return(0,o.h)(p,{key:e.key,colorConfig:e,color:t,contrastRatio:i,isValidContrast:s,i18n:this.i18n,onColorEditClick:this.handleEditClick})})),this.linkConfig&&(0,o.h)(p,{key:this.linkConfig.key,colorConfig:this.linkConfig,color:s,contrastRatio:null==i?void 0:i.contrastRatio,isValidContrast:null==i?void 0:i.isValidContrast,i18n:this.i18n,onColorEditClick:this.handleEditClick}))),(0,o.h)("p",{key:"9d1e27815ebe8c78c27c3ada557d34435e15f280",class:"contrast-info"},this.i18n.contrastInfo))}};b.style=".config-color-table{width:100%;border-collapse:collapse}th,td{border:1px solid rgba(221, 221, 221, 0.8666666667);text-align:center;font-size:var(--arcgis-app-font-size--1)}.color-contrast__legibility-col{padding:0.5rem;text-align:start;width:6rem}.color-contrast--valid{color:green}.color-contrast--invalid{color:red}.color-row__legibility{display:flex;align-items:center}.color-contrast__legible-label{margin:0 0.5rem}.contrast-info{font-size:0.8rem}";const k=class{constructor(e){(0,o.r)(this,e),this.backgroundColor="",this.textColorConfigs=void 0,this.linkConfig=void 0,this.colorValues=void 0}renderLinkConfig(){var e;if(!(null===(e=this.linkConfig)||void 0===e?void 0:e.preview))return;const{preview:t}=this.linkConfig;return t.isButton?(0,o.h)("button",null,t.text):(0,o.h)("a",null,t.text)}render(){var e;const t=this.colorValues[null===(e=this.linkConfig)||void 0===e?void 0:e.key].color||"#00a0ff";return(0,o.h)(o.F,{key:"f6419dd14d6c74d0dc49d42bc1e862301e45d763"},(0,o.h)("style",{key:"cd19f6419cd6da21bf8ddd32d84013416315c3b4",innerHTML:`.contrast-preview a {\n          color: ${t||"inherit"};\n        } .contrast-preview button {\n          color: ${t||"inherit"};\n          border: ${t?`1px solid ${t}`:"inherit"};\n          background: ${t?"none":"inherit"};\n          padding: 0.375rem 1rem;\n        }`}),(0,o.h)("div",{key:"c8043494c567c6312a3a224be212a6c2d5abcc1d",class:"contrast-preview",style:{backgroundColor:this.backgroundColor}},this.textColorConfigs.map((({preview:e,key:t})=>{const{color:i}=this.colorValues[t];if(e)return e.isHeading?(0,o.h)("h2",{style:{color:i},innerHTML:e.text}):(0,o.h)("p",{style:{color:i},innerHTML:e.text})})),this.renderLinkConfig()))}};k.style=".contrast-preview{padding:1rem;flex:1 1 auto;min-width:0}.contrast-preview h2,.contrast-preview p,.contrast-preview button{margin-bottom:1rem;margin-top:0}";const C=class{constructor(e){(0,o.r)(this,e),this.selectColor=(0,o.c)(this,"selectColor",7),this.presetColors={brown:["f2ece6","7c410a","3e2105"],blue:["e5f1f9","0079c1","003d61"],green:["e9f3ea","288835","14441b"],yellow:["fefced","f9e54e","7d7327"],orange:["fef5e9","f89927","7c4d14"],red:["fbeae8","d83020","6c1810"],violet:["efebf5","633b9b","321e4e"]},this.handleSwatchClick=e=>{this.selectColor.emit(e.detail)},this.i18n=void 0}render(){const e=[];for(let t=2;t>=0;t--){const i=[];Object.keys(this.presetColors).forEach((e=>{const o=this.presetColors[e];i.push(`#${o[t]}`)})),e.push(i)}return(0,o.h)("div",{key:"603923ffa57be2a2b10823a1e44f48254d54eeba",class:"preset-colors"},(0,o.h)("div",{key:"54b0fb766c3035e897121df7c67a4f23a383a476",class:"preset-colors__title"},this.i18n.presetColors),e.map((e=>(0,o.h)("div",{class:"preset-row"},e.map((e=>(0,o.h)("arcgis-color-swatch",{key:e,color:e,onSwatchClick:this.handleSwatchClick})))))))}};C.style=".preset-colors{max-width:160px;padding:8px 16px;background-color:#fff;border:1px solid #ccc;border-top:none;box-sizing:border-box}.preset-colors .preset-colors__title{font-size:0.825rem}.preset-colors .preset-row{max-height:16px;margin-bottom:2px}";const v=class{constructor(e){(0,o.r)(this,e),this.selectColor=(0,o.c)(this,"selectColor",7),this.handleSwatchClick=e=>{this.selectColor.emit(e.detail)},this.i18n=void 0,this.sharedTheme=void 0}render(){if(!this.sharedTheme)return;const e={};return Object.keys(this.sharedTheme).forEach((t=>{if(!this.sharedTheme[t])return;const{background:i,text:o,link:s}=this.sharedTheme[t];i&&(e[i]=!0),o&&(e[o]=!0),s&&(e[s]=!0)})),Object.keys(e).length?(0,o.h)("div",{class:"shared-theme"},(0,o.h)("div",{class:"shared-theme-colors__title"},this.i18n.sharedTheme),(0,o.h)("div",{class:"shared-theme__row"},Object.keys(e).sort().map((e=>(0,o.h)("arcgis-color-swatch",{key:e,color:e,onSwatchClick:this.handleSwatchClick}))))):void 0}};v.style=".shared-theme{max-width:160px;padding:8px 16px;background-color:#fff;border:1px solid #ccc;border-top:none;box-sizing:border-box}.shared-theme-colors__title{font-size:0.825rem}.shared-theme__row{max-height:16px;margin-bottom:2px}"},91616:(e,t,i)=>{i.d(t,{a:()=>n,b:()=>u,c:()=>s,d:()=>o,e:()=>c,f:()=>h,g:()=>f,h:()=>g,i:()=>l,m:()=>a,t:()=>r,u:()=>d});const o=(e,t)=>{let i,o="idle";const s=(...s)=>new Promise((c=>{switch(o){case"flushed":o="idle",i?(clearTimeout(i),c(e(...s))):c(null);break;case"invoked":clearTimeout(i),o="idle",c(e(...s));break;case"cancelled":clearTimeout(i),o="idle",c(null);break;default:i&&clearTimeout(i),o="pending",i=setTimeout((()=>(o="idle",c(e(...s)))),t)}}));return s.flush=function(...e){return o="flushed",s(...e)},s.invoke=function(...e){return o="invoked",s(...e)},s.cancel=function(...e){return o="cancelled",s(...e)},s.getStatus=function(){return o},s},s=(e,t)=>{let i;return(...o)=>new Promise((s=>{i||(i=setTimeout((()=>{clearTimeout(i),i=void 0,s(e(...o))}),t))}))};function c(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function l(e){return null!=e}async function a(e,t){return await Promise.all([e,r(t)]),e}function r(e){return new Promise((t=>setTimeout(t,e)))}const n=(e,t)=>Object.fromEntries((e||[]).map((e=>{const{key:i,data:o}=t(e);return[i,o]}))),h=(e,t)=>e.length===t.length&&e.reduce(((e,i)=>e&&t.indexOf(i)>-1),!0);function d(e,t){const i=[],o={};return e.forEach((e=>{const s=t(e);null==o[s]&&(o[s]=e,i.push(e))})),i}function u(e){const t={boolean:{},number:{},string:{}},i=[];return e.filter((e=>{let o=typeof e;return o in t?!t[o].hasOwnProperty(e)&&(t[o][e]=!0):!(i.indexOf(e)>=0)&&i.push(e)}))}const g=(e,t)=>[...Array(Math.ceil(e.length/t))].map(((i,o)=>e.slice(t*o,t+t*o))),f=(e,t)=>e.includes(t)}}]);