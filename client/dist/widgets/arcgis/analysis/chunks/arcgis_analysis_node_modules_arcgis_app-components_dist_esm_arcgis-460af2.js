/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-460af2.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-460af2"],{99004:(e,t,r)=>{r.d(t,{c:()=>a,g:()=>n});var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},55489:(e,t,r)=>{r.d(t,{a:()=>f,h:()=>g,i:()=>y});var a=r(65206),n=r(30554),o=r(44090),i=r(38973),s=r(58151),c=r(76776),l=r(1391),d=r(34472),u=r(11163),p=r(64243),h=r(51933);const y=async(e,t)=>{var r;const{existingItemType:a,portal:s,existingItemPublishType:y}=t;o.c.initialFolder=null!==(r=await(0,n.b)(e,e.itemOwner))&&void 0!==r?r:(0,n.d)(e.itemOwner);let f=e.type;"GeoJSON"===f&&(f="GeoJson"),c.i.title=e.title,c.i.categories=e.categories,c.i.snippet=e.snippet;const g=e.tags;switch(Array.isArray(g)?c.i.tags=g||[]:c.i.tags=(null!=g?g:"").split(","),l.a.id=e.id,l.a.type=f,l.a.fileName=e.name,l.a.existingItem=e,l.a.enablePublishing="tileLayer"!==a,l.a.newItemMode=a,a){case"file":l.a.extension=d.a[f].fileExt[0];break;case"tileLayer":const{id:t,url:r,title:a}=e,[{layers:n,tables:o,serviceInfo:c}]=await Promise.all([(0,p.w)(r,(0,i.g)(s),!0)]),{result:g}=await(0,h.f)({itemId:t,itemUrl:r,publishType:"vectorTiles"===y?"vector":"raster",portal:s,fullLayers:n});if(l.a.sourceTitle=a,l.a.tileLayerPublishType=y,"3dTiles"===l.a.tileLayerPublishType){l.a.tilesLayer3dTilesLayerType=u.D;break}l.a.tileLayerData=g,l.a.tileAutoCreation=!0,l.a.tileLayerBasemapType="standard",l.a.tileLayerBasemapUrl="",l.a.tileLayerFromFeatureLayer=!0,l.a.tileLayerLayers=n,l.a.tileLayerTables=o,l.a.tileLayerServiceInfo=c}},f=e=>{l.a.newItemMode="dataStore",l.a.type="Data Store",(null==e?void 0:e.portal.isPortal)||(l.a.typeKeywords=["Data Store connection"])},g=async(e,t)=>{var r,n;l.a.newItemMode="developerCredentials",l.a.type="Application";const{result:o}=await(0,a.g)(t,e),i=!(null===(r=null==o?void 0:o.options)||void 0===r?void 0:r.includes("NoApiKeys"))&&(null===(n=null==e?void 0:e.privileges)||void 0===n?void 0:n.includes("portal:user:generateApiTokens")),c=!((0,s.d)("oauth_only_register_app",!0)||window.localStorage.getItem("oauth_only_register_app"));return i?"developerCredentialsSelect":(l.a.developerCredentialsType="oauth",c?"developerCredentialsSelect":(l.a.breadcrumbs=["oauthCredentialType"],"developerCredentialsInput"))}},22777:(e,t,r)=>{r.r(t),r.d(t,{arcgis_new_item_pages_data_store_select:()=>d});var a=r(20536),n=r(79717),o=r(44090),i=r(1391),s=r(19832),c=r(66301),l=r(55489);r(25972),r(98034),r(99004),r(38973),r(369),r(10699),r(16093),r(76246),r(34472),r(65206),r(30554),r(78231),r(76776),r(11163),r(64243),r(27995),r(90079),r(4291),r(67914),r(90230),r(40883),r(86980),r(59377),r(68537),r(51933);const d=class{constructor(e){(0,a.r)(this,e),this.newItemUpdatePage=(0,a.c)(this,"newItemUpdatePage",7),this.options={folder:{page:"dataStoreSelectFolder",enabled:!0},database:{page:"dataStoreSelectDatabaseType",enabled:!0},cloud:{page:"dataStoreSelectCloud",enabled:!0}},this.cloudOptions=["amazon","azure"],this.databaseOptions=["bigQuery","snowflake"],this.selected="folder",this.pipelineCloudSelection="amazon",this.pipelineDatabaseSelection="bigQuery",this.serverList=[]}async componentWillLoad(){const e=o.c.portal,t=o.c.user;(0,l.a)({portal:o.c.portal}),this.i18n=s.u.i18n.dataStoreSelect,this.isPortal=o.c.portal.isPortal,this.isPortal?this.selected="folder":this.selected="database",this.tileStrings=s.u.i18n.dataStoreSelectDatabase.pipelineProviders,this.serverList=await(0,n.b)(t,e),this.filterServers()}filterServers(){if(!o.c.portal.isPortal)return this.options.folder.enabled=!1,this.options.database.enabled=!0,void(this.options.cloud.enabled=!0);const e=this.serverList.filter((function(e){return"HOSTING_SERVER"===e.serverRole.toUpperCase()}));e.length&&(i.a.hostingServer=e[0]);const t=this.serverList.filter((function(e){return e.serverFunction.toUpperCase().indexOf("KNOWLEDGE")>-1})),r=o.c.config.noSQLEnabled;i.a.noSqlEnabled=!!(null==t?void 0:t.length)&&r&&!(0,c.i)()}handleNext(){let e;const t=this.selected;i.a.addDataStoreType=t,i.a.dataStoreSelectServerList=this.serverList,this.isPortal?e=this.options[t].page:"cloud"===this.selected?(i.a.addDataStoreType="cloud",i.a.provider=this.pipelineCloudSelection,e="dataStoreSelectCloudCredentials"):(i.a.addDataStoreType="database",i.a.databaseProvider=this.pipelineDatabaseSelection,e="dataStoreDatabaseCredentials"),this.newItemUpdatePage.emit(e)}render(){const{i18n:e,options:t,cloudOptions:r,databaseOptions:n,tileStrings:o}=this;let s="cloud"===this.selected?r:n;return(0,a.h)("div",{key:"20e099c45aae072ec8ed275979dbdd23a6b8c460"},(0,a.h)("arcgis-new-item-description",{key:"404da048689187e32ebad3d41c7027fcc1803f87",header:e.heading}),(0,a.h)("calcite-tile-select-group",{key:"8fbabac912858ed1318bf9f33f19397544624b4c",layout:"vertical",class:"tile-select-group"},Object.keys(t).map((r=>{let n;return n=this.isPortal?i.a.noSqlEnabled?e.options.database.descriptionNoSql:e.options.database.description:e.databaseDescriptionForOnline,t[r].enabled&&(0,a.h)("calcite-tile-select",{key:r,class:"tile-select",checked:this.selected===r,heading:e.options[r].title,description:"database"===r?n:e.options[r].description,name:"data-store-selection","input-enabled":!0,width:"full",type:"radio",value:r,onCalciteTileSelectChange:e=>{this.selected=e.target.value}})}))),!this.isPortal&&(0,a.h)("div",{key:"e94339341c6db5b0b12f6da6f749e542589df554",class:"dynamic-select"},(0,a.h)("arcgis-new-item-description",{key:"2c0475f2eddd87d5ddcad1a60efab79d0aff4b73",class:"dynamic-header",header:"cloud"===this.selected?e.subOptionsCloudDescription:e.subOptionsDatabaseDescription}),(0,a.h)("calcite-tile-select-group",{key:"6f6db783e8466f0e928821d749471fe05b488fe0",layout:"vertical"},s.map((e=>(0,a.h)("calcite-tile-select",{key:e,"input-enabled":!0,checked:s[0]===e,width:"full",type:"radio",value:e,heading:o[e].title,description:o[e].description,onCalciteTileSelectChange:e=>{"cloud"===this.selected?this.pipelineCloudSelection=e.target.value:this.pipelineDatabaseSelection=e.target.value}}))))))}};d.style=".tile-select-group{margin-top:1.25rem}.tile-select{margin-bottom:0.125rem}.dynamic-header{margin-bottom:1.5rem;margin-top:1.5rem;display:block}"},66301:(e,t,r)=>{r.d(t,{a:()=>s,b:()=>u,c:()=>i,d:()=>d,e:()=>b,f:()=>c,g:()=>h,h:()=>l,i:()=>v});var a=r(25972),n=r(44090),o=r(16093);function i(e,t){const r={type:"folder",path:`/fileShares/${t}`,info:{datastoreConnectionType:"shared",path:e.publisherFolderPath,hostName:e.publisherFolderPathHostname}};return"newPath"===e.serverFolderPath?(r.clientPath=e.publisherFolderPath,r.info.path=e.newServerFolderPath,r.info.datastoreConnectionType="replicated"):"nfsHostAndPath"===e.serverFolderPath&&(r.clientPath=e.publisherFolderPath,r.provider="UserManaged",r.info.datastoreConnectionType="replicated",r.info.fileServerPath=e.nfsSharePath,r.info.fileServerHost=e.nfsHostName,r.info.fileServerType="nfs"),r}function s(e,t){const r={type:"egdb",path:"/enterpriseDatabases/"+t,info:{dataStoreConnectionType:"shared"}};return"newConnection"===e.serverDatabaseOption?(r.info.connectionString=e.serverConnectionString,r.info.clientConnectionString=e.publisherConnectionString,r.info.dataStoreConnectionType="replicated"):"bigQuery"===e.databaseProvider||"snowflake"===e.databaseProvider?r.info.JDBCConnection=e.jdbcConnection:r.info.connectionString=e.publisherConnectionString,r}const c=async(e,t,r,a)=>{let n,o;if((null==r?void 0:r.length)>0){try{o=JSON.parse(r)}catch(e){return{error:{code:"invalidJSON"}}}n=function(e,t){const{type:r,project_id:a,private_key_id:n,private_key:o,client_email:i,client_id:s,auth_uri:c,token_uri:l,auth_provider_x509_cert_url:d,client_x509_cert_url:u}=t,p={oAuthType:0,projectId:e,url:"jdbc:bigquery://https://www.googleapis.com/bigquery/v2:443",oAuthPvtKeyFile:{type:r,project_id:a,private_key_id:n,private_key:o,client_email:i,client_id:s,auth_uri:c,token_uri:l,auth_provider_x509_cert_url:d,client_x509_cert_url:u}};return p}(e,o)}else(null==a?void 0:a.length)>0&&(n=function(e,t,r){const a={name:"BigqueryArcgisPlatform_RefreshToken",className:"com.esri.sds.bigquery.jdbc.GBQDataSource",oAuthType:2,projectId:e,defaultDataset:t,url:"jdbc:bigquery://https://www.googleapis.com/bigquery/v2:443",oAuthRefreshToken:r};return a}(e,t,a));return{result:{type:"egdb",path:"/enterpriseDatabases/bigQuerySvrDevDataJdbc",id:null,clientPath:null,info:{JDBCConnection:n}}}};function l(e){const{user:t,password:r,database:a,role:n,server:o,warehouse:i,schema:s}=e;return{path:"/enterpriseDatabases/snowflakeJdbc",type:"egdb",info:{JDBCConnection:{user:t,password:r,database:a,role:n,connectionUrl:`jdbc:snowflake://${o}`,warehouse:i,schema:s}}}}function d(e,t){if("Arango"===e.noSqlProvider){const t={type:"nosql",path:"/nosqlDatabases/Arango_enterprise",info:{systemManaged:!1,dsFeature:"graphStore",isManagedData:!1,category:"database",factory:"nosql",provider:"ArangoDB",implementation:"ArangoDB",purposes:["knowledge-graph"],connectionProperties:{hosts:[],useSsl:e.useSsl,username:e.username,password:e.password,database:e.database}}};return""!==e.hosts?t.info.connectionProperties.hosts=e.hosts.split(","):delete t.info.connectionProperties.hosts,t}const r={type:"nosql",path:`/nosqlDatabases/${t}`,info:{provider:"Neo4J",isManaged:!1,dsFeature:"graphStore",factory:"nosql",implementation:"Neo4j",category:"database",systemManaged:!1,isManagedData:!1,purposes:["knowledge-graph"],connectionProperties:{connectionUri:e.connectionUri,username:e.username,password:e.password,database:e.database,fallbackServerAddresses:[]}}};return""!==e.fallBackServers?r.info.connectionProperties.fallbackServerAddresses.push(e.fallBackServers.split(",")):delete r.info.connectionProperties.fallbackServerAddresses,r}function u(e,t){const r=e.provider,a={info:{}},n={credentialType:"accesskey"};return"amazon"===r&&("accessKey"===e.credentialType?(n.accessKeyId=e.accessKey,n.secretAccessKey=e.secretKey):n.credentialType=e.credentialType,"custom"===e.selectedRegion.id?n.regionEndpointUrl=e.storageURL:(n.regionEndpointUrl=p(e.regions,e.selectedRegion),n.region=e.selectedRegion.id),a.info.objectStore=e.bucketName,a.provider="amazon"),"google"===r&&(n.accessKeyId=e.accessKey,n.secretAccessKey=e.secretKey,n.regionEndpointUrl="https://storage.googleapis.com",a.info.objectStore=e.bucketName,a.provider="Google"),"azure"!==r&&"azuredatalakegen2store"!==r||("sharedKey"===e.azureAuthenticationType?(n.credentialType="accessKey",n.accountKey=e.accountKey):"activeDirectory"===e.azureAuthenticationType?(n.credentialType=e.azureIdentityType,"servicePrincipal"===e.azureIdentityType?(n.tenantId=e.tenantId,n.clientId=e.clientId,n.clientSecret=e.clientSecret,n.authorityHost=e.authorityHost):"userAssignedIdentity"===e.azureIdentityType&&(n.managedIdentityClientId=e.clientId)):"sasToken"===e.azureAuthenticationType?(n.credentialType=e.azureAuthenticationType,n.sasToken=e.token):"anonymous"===e.azureAuthenticationType&&(n.credentialType=e.azureAuthenticationType),"other"===e.environment.id||"anonymous"===e.azureAuthenticationType?n.regionEndpointUrl=e.endpoint:n.accountEndpoint=p(e.regions,e.environment),n.accountName=e.accountName,"azure"===r?(a.info.objectStore=e.containerName,a.provider="azure"):(a.info.folder=e.cloudFolder?`${e.containerName}/${(0,o.j)(e.cloudFolder)}`:e.containerName,a.provider="azureDataLakeStore")),"alibaba"===r&&(n.accessKeyId=e.accessKey,n.secretAccessKey=e.secretKey,a.info.objectStore=e.bucketName,a.provider="Alibaba",n.regionEndpointUrl="custom"===e.selectedRegion.id?e.storageURL:p(e.regions,e.selectedRegion)),n.defaultEndpointsProtocol="https",e.cloudFolder&&"azuredatalakegen2store"!==r&&(a.info.objectStore=a.info.objectStore+"/"+(0,o.j)(e.cloudFolder)),a.type="cloudStore",a.path="/cloudStores/"+t,a.info.connectionString=JSON.stringify(n),a}function p(e,t){let r;return e.forEach((function(e){e.id===t.id&&(r=e.blobStoreEndpoint||e.storageEndpointSuffix)})),r}const h=async(e,t)=>{const r=e.results.out_connectionString.paramUrl,n=`${t}/Get%20Database%20Connection%20String/jobs/${e.jobId}/${r}`,o=await(0,a.r)(n);return y(o)},y=e=>{const t=e.value;return{connectionStringProps:f(t),connectionString:t}},f=e=>{let t=[];return e&&e.split(";").forEach((e=>{const r=e.split("=");2!==r.length||g(t,r[0])||t.push({key:r[0],value:r[1]})})),t},g=(e,t)=>e.some((e=>e.key===t)),v=()=>{var e;const t=n.c.portal,r=t.portalDeploymentType||(null===(e=t.sourceJSON)||void 0===e?void 0:e.portalDeploymentType);return t.isPortal&&"ArcGISEnterpriseOnKubernetes"===r},b=e=>{if(!e)return"";return`${e}/rest/services/System/PublishingTools/GPServer`}},98034:(e,t,r)=>{r.d(t,{e:()=>o,l:()=>i});var a,n=r(99004),o={exports:{}};a=o.exports,n.c,function(e){var t={Promise:"undefined"!=typeof window?window.Promise:void 0},r="4.24",a="next";function n(e){if(e.toLowerCase()===a)return a;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function o(e){return void 0===e&&(e=r),"https://js.arcgis.com/".concat(e,"/")}function i(e){void 0===e&&(e=r);var t=o(e),i=n(e);if(i!==a&&3===i.major){var s=i.minor<=10?"js/":"";return"".concat(t).concat(s,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}function s(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}function c(e,t){if(t){var r=document.querySelector(t);r.parentNode.insertBefore(e,r)}else document.head.appendChild(e)}function l(e){return document.querySelector('link[href*="'.concat(e,'"]'))}function d(e){return!e||n(e)?i(e):e}function u(e,t){var r=d(e),a=l(r);return a||c(a=s(r),t),a}var p={};function h(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}function y(e,t,r){var a;r&&(a=f(e,r));var n=function(){t(e),e.removeEventListener("load",n,!1),a&&e.removeEventListener("error",a,!1)};e.addEventListener("load",n,!1)}function f(e,t){var r=function(a){t(a.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",r,!1)};return e.addEventListener("error",r,!1),r}function g(e){void 0===e&&(e={}),p=e}function v(){return document.querySelector("script[data-esri-loader]")}function b(){var e=window.require;return e&&e.on}function m(e){void 0===e&&(e={});var r={};[p,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}));var a=r.version,n=r.url||o(a);return new t.Promise((function(e,t){var o=v();if(o){var i=o.getAttribute("src");i!==n?t(new Error("The ArcGIS API for JavaScript is already loaded (".concat(i,")."))):b()?e(o):y(o,e,t)}else if(b())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var s=r.css;s&&u(!0===s?a:s,r.insertCssBefore),y(o=h(n),(function(){o.setAttribute("data-esri-loader","loaded"),e(o)}),t),document.body.appendChild(o)}}))}function S(e){return new t.Promise((function(t,r){var a=window.require.on("error",r);window.require(e,(function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];a.remove(),t(e)}))}))}function w(e,t){if(void 0===t&&(t={}),b())return S(e);var r=v(),a=r&&r.getAttribute("src");return!t.url&&a&&(t.url=a),m(t).then((function(){return S(e)}))}e.utils=t,e.loadModules=w,e.getScript=v,e.isLoaded=b,e.loadScript=m,e.setDefaultOptions=g,e.loadCss=u,Object.defineProperty(e,"__esModule",{value:!0})}(a);const i=async(e,t)=>(await o.exports.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))},65206:(e,t,r)=>{r.d(t,{a:()=>i,g:()=>s});var a=r(25972),n=r(38973),o=r(84873);const i=async e=>{try{return{result:await(0,a.r)(`${(0,n.g)(e)}portals/self/subscriptionInfo`)}}catch(e){return console.error(e),{error:{code:"unhandledError"}}}},s=async(e,t)=>await(0,a.f)((()=>i(e)),"subscriptionType",(0,o.g)(t))}}]);