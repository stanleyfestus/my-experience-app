/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-fcfeab.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-fcfeab"],{99004:(e,t,r)=>{r.d(t,{c:()=>n,g:()=>o});var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},8606:(e,t,r)=>{r.r(t),r.d(t,{arcgis_member_browser_filter_my_groups:()=>c});var n=r(20536),o=r(9055),s=r(33198),i=r(44090),a=r(39489);r(10699),r(38973),r(25972),r(98034),r(99004),r(369),r(91589),r(91102),r(73807);const c=class{constructor(e){(0,n.r)(this,e),this.arcgisMemberBrowserFilter=(0,n.c)(this,"arcgisMemberBrowserFilter",7),this.loadUserGroups=async()=>{const{user:e,portal:t}=null!==i.c&&void 0!==i.c?i.c:{};if(!this.groups&&e&&t){this.groups=await(0,s.i)(t,e.username);const{groupId:r,excludeGroupId:n}=this.store.state;this.groups=this.groups.filter((e=>!(r&&e.id===r||n&&e.id===n)))}},this.handleSearchInput=e=>{const t=e.target;this.searchTerm=t.value},this.groupId=void 0,this.expanded=void 0,this.groups=void 0,this.searchTerm=""}componentWillLoad(){this.store=(0,o.g)(this.el),this.i18n=this.store.state.i18n.filterMyGroups}async componentDidLoad(){this.loadUserGroups(),(0,i.o)("user",this.loadUserGroups),(0,i.o)("portal",this.loadUserGroups),(0,a.a)("myGroup",this.store,(()=>{this.groupId=null}))}getEventDetail(){var e;const{groupId:t}=this,r=t?null===(e=this.groups)||void 0===e?void 0:e.find((e=>e.id===t)):null;return{id:"myGroup",param:"group",value:t||"",label:r?this.i18n.label.replace("${name}",r.title):""}}async emitEvent(){const e=await this.getEventDetail();this.arcgisMemberBrowserFilter.emit(e)}render(){const{user:e}=i.c,{groups:t}=this;return e&&(null==t?void 0:t.length)?(0,n.h)("arcgis-browser-filter",{heading:this.i18n.title,expanded:this.expanded,active:!!this.groupId,onArcgisBrowserFilterRemove:()=>{this.groupId=null},filterID:"myGroup"},(0,n.h)("div",null,t.length>15&&(0,n.h)("calcite-input",{type:"search",icon:"search",placeholder:this.i18n.searchMyGroups,onCalciteInputInput:this.handleSearchInput}),(0,n.h)("div",{class:"tree-wrapper"},(0,n.h)("calcite-tree",{selectionMode:"single",onCalciteTreeSelect:e=>{var t;const r=(null===(t=e.target.selectedItems)||void 0===t?void 0:t[0].dataset.groupId)||"";this.groupId===r?this.groupId=null:this.groupId=r,this.emitEvent()}},null==t?void 0:t.filter((e=>!this.searchTerm||e.title.toLowerCase().includes(this.searchTerm))).map((e=>(0,n.h)("calcite-tree-item",{key:e.id,"data-group-id":e.id,selected:e.id===this.groupId},(0,n.h)("a",null,e.title)))))))):null}get el(){return(0,n.d)(this)}};c.style=".tree-wrapper{max-height:14rem;overflow:auto}"},91102:(e,t,r)=>{r.d(t,{a:()=>c,c:()=>o,d:()=>u,g:()=>s,i:()=>i,s:()=>a});var n=r(73807);function o(e,t){return function e(r){return r?r.closest(t)||e(function(e){return e.getRootNode()}(r).host||null):null}(e)}function s(e){const t=o(e,".calcite-mode-dark, .calcite-mode-light");return(null==t?void 0:t.classList.contains("calcite-mode-dark"))?"dark":"light"}function i(e){let t=e;for(;null==t?void 0:t.parentNode;){if(t.parentNode===document)return!0;t=t.parentNode instanceof ShadowRoot?t.parentNode.host:t.parentNode}return!1}function a(e){return(new n.S).sanitize(e)}function c(e){const t=a(e),r=document.createElement("div");return r.innerHTML=t,r.textContent||r.innerText||""}function u(e){const t=document.createElement("textarea");return t.innerHTML=e,t.value}},98034:(e,t,r)=>{r.d(t,{e:()=>s,l:()=>i});var n,o=r(99004),s={exports:{}};n=s.exports,o.c,function(e){var t={Promise:"undefined"!=typeof window?window.Promise:void 0},r="4.24",n="next";function o(e){if(e.toLowerCase()===n)return n;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function s(e){return void 0===e&&(e=r),"https://js.arcgis.com/".concat(e,"/")}function i(e){void 0===e&&(e=r);var t=s(e),i=o(e);if(i!==n&&3===i.major){var a=i.minor<=10?"js/":"";return"".concat(t).concat(a,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}function a(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}function c(e,t){if(t){var r=document.querySelector(t);r.parentNode.insertBefore(e,r)}else document.head.appendChild(e)}function u(e){return document.querySelector('link[href*="'.concat(e,'"]'))}function l(e){return!e||o(e)?i(e):e}function d(e,t){var r=l(e),n=u(r);return n||c(n=a(r),t),n}var p={};function f(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}function h(e,t,r){var n;r&&(n=m(e,r));var o=function(){t(e),e.removeEventListener("load",o,!1),n&&e.removeEventListener("error",n,!1)};e.addEventListener("load",o,!1)}function m(e,t){var r=function(n){t(n.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",r,!1)};return e.addEventListener("error",r,!1),r}function v(e){void 0===e&&(e={}),p=e}function g(){return document.querySelector("script[data-esri-loader]")}function w(){var e=window.require;return e&&e.on}function y(e){void 0===e&&(e={});var r={};[p,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}));var n=r.version,o=r.url||s(n);return new t.Promise((function(e,t){var s=g();if(s){var i=s.getAttribute("src");i!==o?t(new Error("The ArcGIS API for JavaScript is already loaded (".concat(i,")."))):w()?e(s):h(s,e,t)}else if(w())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var a=r.css;a&&d(!0===a?n:a,r.insertCssBefore),h(s=f(o),(function(){s.setAttribute("data-esri-loader","loaded"),e(s)}),t),document.body.appendChild(s)}}))}function b(e){return new t.Promise((function(t,r){var n=window.require.on("error",r);window.require(e,(function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];n.remove(),t(e)}))}))}function I(e,t){if(void 0===t&&(t={}),w())return b(e);var r=g(),n=r&&r.getAttribute("src");return!t.url&&n&&(t.url=n),y(t).then((function(){return b(e)}))}e.utils=t,e.loadModules=I,e.getScript=g,e.isLoaded=w,e.loadScript=y,e.setDefaultOptions=v,e.loadCss=d,Object.defineProperty(e,"__esModule",{value:!0})}(n);const i=async(e,t)=>(await s.exports.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))},91589:(e,t,r)=>{r.d(t,{f:()=>o});var n=r(25972);async function o(e,t,r="results",o=!1){let s,i,a,c,u=1,l=[];t.start=u,t.num||(t.num=100);try{const d=await(0,n.r)(e,t);if(!(null==d?void 0:d[r]))return l;for(l=[...l,...d[r]],u=d.nextStart,s=d.total-l.length,i=Math.ceil(s/t.num),a=[],c=0;c<i;c++)if(t.start=u+c*t.num,o){const o=await(0,n.r)(e,t);(null==o?void 0:o[r])&&(l=[...l,...o[r]])}else a.push((0,n.r)(e,t));if(!o){(await Promise.all(a)).forEach((e=>{l=[...l,...e[r]]}))}return l}catch(e){return l}}},33198:(e,t,r)=>{r.d(t,{a:()=>a,b:()=>c,c:()=>f,d:()=>h,e:()=>m,f:()=>u,g:()=>g,h:()=>v,i:()=>l,j:()=>d,k:()=>p,l:()=>i});var n=r(38973),o=r(25972),s=r(91589);async function i(e){const t=(0,n.c)(e);try{return(await(0,o.r)(`${t}portals/self/users/counts`,{type:"userLicenseType"})).results}catch(e){return[]}}async function a(e){const t=(0,n.c)(e);return await(0,s.f)(`${t}portals/self/userLicenseTypes`,{num:10},"userLicenseTypes")}async function c(e){const t=(0,n.c)(e),r=await(0,s.f)(`${t}portals/self/roles`,{returnPrivileges:!0},"roles");return r.sort(((e,t)=>{const r=e.name.toLowerCase(),n=t.name.toLowerCase();return r>n?1:r<n?-1:0})),r}async function u(e,t){const r=(0,n.c)(e);let i;try{i=(await(0,o.r)(`${r}community/groups/${t}/userlist`,{num:0})).owner}catch(e){}return{admins:await(0,s.f)(`${r}community/groups/${t}/userlist`,{memberType:"admin"},"users"),owner:null==i?void 0:i.username}}async function l(e,t){const r=(0,n.c)(e),s=await(0,o.r)(`${r}community/users/${t}`),i=(null==s?void 0:s.groups)||[];return i.sort(((e,t)=>{const r="owner"===e.userMembership.memberType?1:-1,n="owner"===t.userMembership.memberType?1:-1,o=e.title.toLowerCase(),s=t.title.toLowerCase();return r!==n?n-r:o>s?1:o<s?-1:0})),i}async function d(e,t){const r=(0,n.c)(e);try{return await(0,o.r)(`${r}community/groups`,t)}catch(e){return}}async function p(e,t){const r=(0,n.c)(e);return await(0,s.f)(`${r}community/groups`,t)}async function f(e){const t=(0,n.c)(e);try{return(await(0,o.r)(`${t}portals/self/trustedOrgs`,{num:100})).trustedOrgs.filter((e=>e.from.established>-1&&e.to.established>-1)).sort(((e,t)=>e.to.name>t.to.name?1:e.to.name<t.to.name?-1:0))}catch(e){return[]}}async function h(e){const t=(0,n.c)(e);return await(0,s.f)(`${t}portals/self/contacts`,{type:"collaboration",collaborators:!0},"users")}async function m(e,t){var r,s;const i=(0,n.c)(e);try{return(null===(s=null===(r=(await(0,o.r)(`${i}community/users`,{searchUserAccess:"groupMember",groups:t,countFields:"accountid",num:0,countSize:200})).aggregations.counts)||void 0===r?void 0:r[0])||void 0===s?void 0:s.fieldValues)||[]}catch(e){return[]}}async function v(e){var t,r,s;const i=(0,n.c)(e);try{const[e,n,a,c]=await Promise.all([(0,o.r)(`${i}portals/self/idp`),(0,o.r)(`${i}portals/self/idp/federation`),(0,o.r)(`${i}portals/self/oidc`),(0,o.r)(`${i}portals/self/socialProviders`)]);return{hasSAML:Boolean((null==e?void 0:e.id)?e:(null==n?void 0:n.id)?n:null),socialProviders:null===(t=null==c?void 0:c.config)||void 0===t?void 0:t.providers,oidcId:null===(s=null===(r=null==a?void 0:a.oidcProviders)||void 0===r?void 0:r[0])||void 0===s?void 0:s.id}}catch(e){return{hasSAML:!1}}}async function g(e){const t=(0,n.c)(e);try{const e=await(0,o.r)(`${t}portals/self/purchases`),r=w(e.purchases),n=w(e.trials),s=[...r,...n];return s.sort(((e,t)=>{const r=e.title.toLowerCase(),n=t.title.toLowerCase();return r>n?1:r<n?-1:0})),s}catch(e){return[]}}function w(e){const t=[];return e.forEach((({listing:e,provision:r})=>{var n;(null==e?void 0:e.type.includes("Application"))&&(null===(n=null==r?void 0:r.orgEntitlements)||void 0===n?void 0:n.entitlements)&&t.push({id:e.itemId,title:e.title})})),t}},9055:(e,t,r)=>{r.d(t,{g:()=>s,o:()=>i});var n=r(10699),o=r(39489);function s(e){return(0,o.g)(e,"arcgis-member-browser")}(0,n.c)({type:"member-browser",includeExternalUsers:!1});const i=(e,t)=>{e.onChange("sort",(e=>{t(e)}))}},39489:(e,t,r)=>{r.d(t,{a:()=>s,b:()=>a,g:()=>u,i:()=>o,o:()=>i});var n=r(91102);const o=e=>"item-browser"===e.state.type,s=(e,t,r)=>{t.onChange("filters",(t=>{t[e]&&t[e].value||r()}))},i=(e,t)=>{e.onChange("preview",(e=>{t()}))},a=(e,t)=>{e.onChange("groupId",(e=>{t()}))},c=new Map;function u(e,t){const r=c.get(e);if(r)return r;const o=(0,n.c)(e,t);return o?(c.set(e,o.store),o.store):null}}}]);