/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_tile-l-f7341a.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_tile-l-f7341a"],{51933:(e,l,a)=>{a.d(l,{a:()=>p,b:()=>S,c:()=>b,d:()=>y,e:()=>h,f:()=>w,g:()=>I,h:()=>g,l:()=>m,p:()=>O});var i=a(44090),n=a(98034),s=a(38973),r=a(11163),t=a(5152),o=a(81341),c=a(64243),u=a(67914),d=a(25972),v=a(1391),f=function(e,l){var a={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&l.indexOf(i)<0&&(a[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)l.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(a[i[n]]=e[i[n]])}return a};const g=(e,l)=>{let a=!1;return l&&(null==e?void 0:e.length)>0&&(a=!e.some((e=>!function(e,l,a){if("Feature Layer"!==e.type||!e.drawingInfo)return!1;if("scenes"===a)return function(e,l){var a,i,n;const s=e.drawingInfo.renderer,r=e.drawingInfo.labelingInfo,t=e.featureReduction,o=e.fields;if(-1===["esriGeometryPoint","esriGeometryMultiPatch"].indexOf(e.geometryType))return!1;if(s.observationRenderer||s.latestObservationRenderer)return!1;if("heatmap"===s.type)return!1;if(null===(a=s.valueExpression)||void 0===a?void 0:a.length)return!1;if(null===(i=s.visualVariables)||void 0===i?void 0:i.some((e=>e.valueExpression.length)))return!1;const c=o.filter((e=>"esriFieldTypeDate"===e.type)).map((e=>e.name));if(c.length){if(c.indexOf(s.field)>-1||c.indexOf(s.field1)>-1)return!1;if(null===(n=s.visualVariables)||void 0===n?void 0:n.some((e=>e.field&&c.indexOf(e.field)>-1)))return!1}if(t)return!1;if(!l&&(null==r?void 0:r.length))return!1;return!0}(e,l);return p(e,l)}(e,!1,"tiles")))),a};function p(e,l){var a,i;if("esriGeometryMultiPatch"===e.geometryType)return!1;const n=null===(a=e.drawingInfo)||void 0===a?void 0:a.renderer,s=null===(i=e.drawingInfo)||void 0===i?void 0:i.labelingInfo,r=e.fields;return!m(e)&&(!(n&&e.geometryType&&(null==r?void 0:r.length)>0&&!b(n,e.geometryType,r))&&!(!l&&(null==s?void 0:s.length)))}const m=e=>{var l,a;const i=null!==(l=e.featureReduction)&&void 0!==l?l:null===(a=e.layerDefinition)||void 0===a?void 0:a.featureReduction;return!!i&&Object.keys(i).length>0},b=(e,l,a)=>{var i;if("heatmap"===e.type)return!1;if("esriGeometryPolygon"===l&&e.uniqueValueInfos&&e.visualVariables&&e.visualVariables.some((e=>{if("sizeInfo"===e.type&&!e.target)return!0})))return!1;const n=a.filter((e=>"esriFieldTypeDate"===e.type)).map((e=>e.name));if(n.length){if(n.indexOf(e.field)>-1||n.indexOf(e.field1)>-1)return!1;if(null===(i=e.visualVariables)||void 0===i?void 0:i.some((e=>n.indexOf(e.field)>-1)))return!1}return!0};const y=(e,l,a)=>{const{publishType:i,cacheOnDemand:n,tileInfo:s,cacheOnDemandMinScale:t,scale:c,layers:u}=l,{maxScale:d,minScale:v}=c,g={storageFormat:a||"vectorTiles"===l.publishType?"esriMapCacheStorageModeCompactV2":"esriMapCacheStorageModeExploded",packetSize:128},p=Object.assign(Object.assign({},"vectorTiles"===i?r.p:r.a),s);p.dpi&&!p.preciseDpi&&(p.preciseDpi=p.dpi),p.lods=p.lods.map((e=>f(e,["label"])));const m="vectorTiles"===i?Object.assign({},r.b):Object.assign({},r.c);let b={name:(0,o.a)(e.title),tilingSchema:{tileCacheInfo:p,tileImageInfo:m,cacheStorageInfo:g},minScale:v,maxScale:d};u&&(b.layers=u.map((({layerDefinition:e,id:l,drawingInfo:a})=>(null==e?void 0:e.drawingInfo)?{id:l,drawingInfo:Object.assign(Object.assign({},a),e.drawingInfo)}:{id:l,drawingInfo:a}))),"vectorTiles"!==i&&(b.cacheOnDemand=n,n&&(b=Object.assign(Object.assign({},b),{capabilities:"Map,ChangeTracking",cacheOnDemandMinScale:t})));return{publishContent:{itemId:e.id,filetype:"featureService",outputType:i,publishParameters:JSON.stringify(b),buildInitialCache:!1},publishParameters:b}},S=async(e,l)=>{if(!e.includes(l?"/VectorTileServer":"/MapServer"))return{error:{code:"invalidUrl"}};try{const i=await(0,d.r)(e,{},{addTokenManually:!1});return i&&i.singleFusedMapCache&&i.tileInfo?{result:(a=i.tileInfo,Object.assign(Object.assign({},a),{lods:(a.lods||[]).map((e=>Object.assign(Object.assign({},e),{label:`1:${Math.round(e.scale).toLocaleString("en-EN",{maximumFractionDigits:0})}`})))}))}:i&&l&&i.tileInfo?{result:i.tileInfo}:{error:{code:"noTilingSchemeFound"}}}catch(e){return console.error(e),{error:{code:"mapServiceError",message:JSON.stringify(e)}}}var a},h=async(e,l,a,i)=>{let s=null,t=r.T;const o={constraints:e,minScale:e.minScale,maxScale:e.maxScale||18055.954822};if(!i)return{maxSupportedMinScale:s,cacheOnDemandMinScale:t,calculatedScale:o};try{const c=await Promise.allSettled(a.map((({id:e})=>(async e=>{try{const[l]=await(0,n.l)(["esri/layers/FeatureLayer"]),a=new l(e),i=await a.addPlugin("esri/plugins/FeatureLayerStatistics");return{result:await i.target.statisticsPlugin.getSuggestedScaleRange({sampleSize:100,forPublishingTiles:!0})}}catch(e){return"string"==typeof e&&e.toLowerCase().includes("sampling returned 0 features")?{result:null,error:null}:(console.error(e),{error:{code:"unhandledError",message:JSON.stringify(e)}})}})(`${i}/${e}`))));let u=0,d=1/0;c.forEach((e=>{if("rejected"===e.status)return;const l=e.value.result;if(!l)return;const{maxScale:a,minScale:i}=l;u=null==i||i<=u?u:i,d=null==a||a>=d?d:a,t=null==i||i>=t?t:i})),s=e.minScale||r.T,t||(t=u),o.minScale=t||e.minScale,o.maxScale=d||o.maxScale,o.minScale>e.minScale&&e.minScale>0&&(o.minScale=e.minScale),o.maxScale>=o.minScale&&o.minScale>0&&(o.maxScale=((e,l,a)=>{var i,n;if(e<=l&&(null==a?void 0:a.length)>0){let s=-1;for(let l=a.length-1;l>=0;l--)if(e<a[l].scale){s=l+2;break}return s=s>a.length-1?a.length-1:s,null!==(n=null===(i=a[s])||void 0===i?void 0:i.scale)&&void 0!==n?n:l}return l})(o.minScale,o.maxScale,l))}catch(l){console.error(l),o.minScale=e.minScale}return{maxSupportedMinScale:s,cacheOnDemandMinScale:t,calculatedScale:o}},O=async(e,l,a)=>{var n,s,r,f,g;const{publishType:p,user:m,folder:b,title:y,tags:S,snippet:h,categories:O}=l;let I=Object.assign({},e);if(y){const e=JSON.parse(I.publishParameters);e.name=(0,o.a)(y),I.publishParameters=JSON.stringify(e)}const w=`${m.userContentUrl}/publish`,{services:j}=await(0,d.r)(w,I,{},"post"),{jobId:x,serviceItemId:T,serviceurl:D,error:M,type:P}=j[0]||{};if(M)throw console.error(M),M;await(0,c.g)(T,{jobId:x,success:!0}),(null===(s=null===(n=i.c.portal)||void 0===n?void 0:n.sourceJSON)||void 0===s?void 0:s.hasClassificationSchema)&&(v.a.classification.createdUser=i.c.user.username,v.a.classification.createdDate=Date.now());const C=(null===(f=null===(r=i.c.portal)||void 0===r?void 0:r.sourceJSON)||void 0===f?void 0:f.hasClassificationSchema)?{classification:JSON.stringify(v.a.classification)}:{};return"scenes"!==p&&await(0,u.u)(T,Object.assign({title:y,tags:S,snippet:h,categories:O},C)),a&&await(0,u.u)(T,Object.assign({text:JSON.stringify(a)},C)),b.id!==(null===(g=i.c.initialFolder)||void 0===g?void 0:g.id)&&await(0,u.m)(T,(0,t.a)(b)?"/":b.id),{id:T,jobId:x,serviceType:P,serviceUrl:D}},I=async e=>{const l=i.c.portal,a=`${`${(0,s.g)(l)}portals/${l.id}`}/datastores/getServers`,n={datastoreId:e,f:"json"};try{return{result:(await(0,d.r)(a,n,{},"post")).servers}}catch(e){return console.error(e),{error:{code:"unhandledError",message:JSON.stringify(e)}}}},w=async({itemId:e,itemUrl:l,portal:a,publishType:i,fullLayers:n})=>{try{const{result:s}=await(0,u.n)(e,a),r=((null==s?void 0:s.layers)||[]).map(((a,s)=>{var r,t,o,c;if(!a)return null;const u=null!==(r=a.id)&&void 0!==r?r:s;let d=Object.assign(Object.assign({},a),{id:u,layerUrl:`${l}/${u}`,layerItemId:e,layerDefinition:a.layerDefinition});"vector"===i&&delete d.popupInfo,a.popupInfo&&(d=Object.assign(Object.assign({},d),{popupInfo:a.popupInfo})),null!=a.showLegend&&(d=Object.assign(Object.assign({},d),{showLegend:a.showLegend}));const v=n.find((e=>e.id===u));return d=Object.assign(Object.assign({},d),{drawingInfo:Object.assign(Object.assign(Object.assign({},null==v?void 0:v.drawingInfo),a.drawingInfo),{renderer:null!==(o=null===(t=a.drawingInfo)||void 0===t?void 0:t.renderer)&&void 0!==o?o:null===(c=null==v?void 0:v.drawingInfo)||void 0===c?void 0:c.renderer})}),d})).filter((e=>null!=e));return{result:Object.assign(Object.assign({},s),{layers:r})}}catch(e){return console.error(e),{error:{code:"unhandledError",message:JSON.stringify(e)}}}}},11163:(e,l,a)=>{a.d(l,{D:()=>s,T:()=>t,a:()=>u,b:()=>v,c:()=>f,d:()=>r,e:()=>o,f:()=>i,g:()=>c,p:()=>d,t:()=>n});const i=["standard","custom"],n=["IntegratedMesh","3DObject"],s=n[0],r=["vector","raster","3dTiles"],t=147914382,o=0,c=[{level:0,label:"1:591,657,528",scale:591657527.591555},{level:1,label:"1:295,828,764",scale:295828763.795777},{level:2,label:"1:147,914,382",scale:147914381.897889},{level:3,label:"1:73,957,191",scale:73957190.948944},{level:4,label:"1:36,978,595",scale:36978595.474472},{level:5,label:"1:18,489,298",scale:18489297.737236},{level:6,label:"1:9,244,649",scale:9244648.868618},{level:7,label:"1:4,622,324",scale:4622324.434309},{level:8,label:"1:2,311,162",scale:2311162.217155},{level:9,label:"1:1,155,581",scale:1155581.108577},{level:10,label:"1:577,791",scale:577790.554289},{level:11,label:"1:288,895",scale:288895.277144},{level:12,label:"1:144,448",scale:144447.638572},{level:13,label:"1:72,224",scale:72223.819286},{level:14,label:"1:36,112",scale:36111.909643},{level:15,label:"1:18,056",scale:18055.954822},{level:16,label:"1:9,028",scale:9027.977411},{level:17,label:"1:4,514",scale:4513.988705},{level:18,label:"1:2,257",scale:2256.994353},{level:19,label:"1:1,128",scale:1128.497176},{level:20,label:"1:564",scale:564.248588},{level:21,label:"1:282",scale:282.124294},{level:22,label:"1:141",scale:141.062147}],u={spatialReference:{wkid:102100,latestWkid:3857},origin:{x:-20037508.342787,y:20037508.342787},rows:256,cols:256,dpi:96,preciseDpi:96,lods:[{level:0,resolution:156543.033928,scale:591657527.591555},{level:1,resolution:78271.5169639999,scale:295828763.795777},{level:2,resolution:39135.7584820001,scale:147914381.897889},{level:3,resolution:19567.8792409999,scale:73957190.948944},{level:4,resolution:9783.93962049996,scale:36978595.474472},{level:5,resolution:4891.96981024998,scale:18489297.737236},{level:6,resolution:2445.98490512499,scale:9244648.868618},{level:7,resolution:1222.99245256249,scale:4622324.434309},{level:8,resolution:611.49622628138,scale:2311162.217155},{level:9,resolution:305.748113140558,scale:1155581.108577},{level:10,resolution:152.874056570411,scale:577790.554289},{level:11,resolution:76.4370282850732,scale:288895.277144},{level:12,resolution:38.2185141425366,scale:144447.638572},{level:13,resolution:19.1092570712683,scale:72223.819286},{level:14,resolution:9.55462853563415,scale:36111.909643},{level:15,resolution:4.77731426794937,scale:18055.954822},{level:16,resolution:2.38865713397468,scale:9027.977411},{level:17,resolution:1.19432856685505,scale:4513.988705},{level:18,resolution:.597164283559817,scale:2256.994353},{level:19,resolution:.298582141647617,scale:1128.497176},{level:20,resolution:.14929107082380833,scale:564.248588},{level:21,resolution:.07464553541190416,scale:282.124294},{level:22,resolution:.03732276770595208,scale:141.062147}]},d={spatialReference:{wkid:102100,latestWkid:3857},origin:{x:-20037508.342787,y:20037508.342787},rows:512,cols:512,dpi:96,preciseDpi:96,lods:[{level:0,resolution:78271.51696399994,scale:295828763.795777},{level:1,resolution:39135.75848200009,scale:147914381.897889},{level:2,resolution:19567.87924099992,scale:73957190.948944},{level:3,resolution:9783.93962049996,scale:36978595.474472},{level:4,resolution:4891.96981024998,scale:18489297.737236},{level:5,resolution:2445.98490512499,scale:9244648.868618},{level:6,resolution:1222.992452562495,scale:4622324.434309},{level:7,resolution:611.4962262813797,scale:2311162.217155},{level:8,resolution:305.74811314055756,scale:1155581.108577},{level:9,resolution:152.87405657041106,scale:577790.554289},{level:10,resolution:76.43702828507324,scale:288895.277144},{level:11,resolution:38.21851414253662,scale:144447.638572},{level:12,resolution:19.10925707126831,scale:72223.819286},{level:13,resolution:9.554628535634155,scale:36111.909643},{level:14,resolution:4.77731426794937,scale:18055.954822},{level:15,resolution:2.388657133974685,scale:9027.977411},{level:16,resolution:1.1943285668550503,scale:4513.988705},{level:17,resolution:.5971642835598172,scale:2256.994353},{level:18,resolution:.29858214164761665,scale:1128.497176},{level:19,resolution:.14929107082380833,scale:564.248588},{level:20,resolution:.07464553541190416,scale:282.124294},{level:21,resolution:.03732276770595208,scale:141.062147},{level:22,resolution:.01866138385297604,scale:70.5310735},{level:23,resolution:.009330691929342804,scale:35.265536760789715}]},v={format:"indexedVector",compressionQuality:0,antialiasing:!1},f={format:"PNG32",compressionQuality:0,antialiasing:!0}}}]);