/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-smart-m-43d6de.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-smart-m-43d6de"],{34409:(e,t,s)=>{s.r(t),s.d(t,{arcgis_smart_mapping_gamma_slider:()=>a,arcgis_smart_mapping_stretch_type_button:()=>r});var n=s(20536),o=(s(74129),s(98034),s(37219)),i=s(91616);s(99004),s(34752),s(91102),s(73807),s(37568),s(10699),s(98072);const a=class{constructor(e){(0,n.r)(this,e),this.watchHandles=[],this.gamma=void 0,this.rendererType=void 0}componentDidLoad(){const{config:e}=o.s;this.hostElement.shadowRoot.firstElementChild.insertAdjacentHTML("beforebegin",`<link rel="stylesheet" href="${e.jsapiUrl}/themes/light/main.css" />`)}render(){var e;const{locale:t,modules:s}=o.s;if(!this.slider){const n={min:-1e3,max:1e3,values:[this.parseGammaValue(this.gamma.toString())],visibleElements:{labels:!0,rangeLabels:!0},rangeLabelInputsEnabled:!1,precision:3,labelInputsEnabled:!0};n.labelFormatFunction=e=>this.formatGammaValue(e).toLocaleString(t),n.inputFormatFunction=e=>this.formatGammaValue(e).toLocaleString(t),n.inputParseFunction=e=>this.parseGammaValue(e),null===(e=this.watchHandles[0])||void 0===e||e.remove(),this.watchHandles[0]=void 0,this.slider=new s.Slider(n)}return(0,n.h)("div",{class:"slider slider-bottom-label",ref:e=>{e&&this.afterGammaSliderCreate(e)}})}afterGammaSliderCreate(e){if(this.slider.container)e.append(this.slider.container);else{const t=document.createElement("div");e.append(t),this.slider.container=t}this.createGammaSliderChangeEvents()}createGammaSliderChangeEvents(){var e;null===(e=this.watchHandles[0])||void 0===e||e.remove(),this.watchHandles[0]=void 0,this.watchHandles.push(this.slider.watch("values",(0,i.d)((()=>this.handleGammaSliderValueChange()),300)))}handleGammaSliderValueChange(){const e=(0,o.a9)(),t=this.formatGammaValue(this.slider.values[0]);e.gamma="raster-stretch"===this.rendererType?[t]:new Array(3).fill(t),e.useGamma=!0,(0,o.a8)()}formatGammaValue(e){return parseFloat(Math.exp(e/1e3*Math.log(10)).toFixed(2))}parseGammaValue(e){e=e.replace(",",".");const t=parseFloat(e);return Math.log(t)/Math.log(10)*1e3}get hostElement(){return(0,n.d)(this)}};a.style=".slider{height:60px;background-color:transparent;position:relative;width:90%;margin:0 auto 0 auto}.esri-slider__content{margin-bottom:30px}.slider-bottom-label .esri-slider__max,.slider-bottom-label .esri-slider__min{width:-moz-fit-content;width:fit-content;position:absolute;bottom:0}.slider-bottom-label .esri-slider__max{right:-9px;text-align:right}.slider-bottom-label .esri-slider__min{left:-9px;text-align:left}";const r=class{constructor(e){(0,n.r)(this,e),this.arcgisSmartMappingStretchTypeButtonChange=(0,n.c)(this,"arcgisSmartMappingStretchTypeButtonChange",7),this.arcgisSmartMappingStretchTypeButtonBeforeOpen=(0,n.c)(this,"arcgisSmartMappingStretchTypeButtonBeforeOpen",7),this.stretchTypeInfos=[],this.open=!1}async setFocus(){this.buttonNode.focus()}componentWillLoad(){this.populateStretchTypeInfo(),this.setSelection()}componentWillUpdate(){const e=(0,o.a9)(),{stretchType:t}=e;this.selectedStretchTypeInfo.value!==t&&this.setSelection()}render(){const{strings:e}=o.s;return(0,n.h)(n.H,{key:"abced37036f783fe4252bd77b95385b4fdd5ed5b"},(0,n.h)("calcite-label",{key:"80328c12bd5ca744baa350d4619435c765bdd482"},e.stretchTypeButton.stretchType,(0,n.h)("div",{key:"a82995103055b34b7051dae30a0c2e993906a6ed",class:"stretch-type-button",role:"button",tabindex:"0","aria-haspopup":"true","aria-label":e.stretchTypeButton.stretchType,ref:e=>this.buttonNode=e,onKeyDown:e=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),e.stopPropagation(),this.openStretchTypeDropdown())},onClick:()=>this.openStretchTypeDropdown()},(0,n.h)("div",{key:"fa4b74886983ae64a118f963303faa319a7ee700",class:"stretch-type-content"},(0,n.h)("div",{key:"0a7bb5464f39ecd1d6eba7ac725d8c0531974089",class:"stretch-type-button-text"},(0,n.h)("div",{key:"6cd9144a5ee20c20723c5f4ee32cec8b4ac6af39",class:"stretch-type-button-title"},this.selectedStretchTypeInfo.title),(0,n.h)("div",{key:"2a6fc93d53737ff5fb5e333553d1db51adb7deff",class:"stretch-type-button-msg"},this.selectedStretchTypeInfo.msg)),(0,n.h)("div",{key:"5690c0e20759f92f5fd1675925bbb9bf5b4b6901"},(0,n.h)("calcite-icon",{key:"2d998546ce6dd99968467534a347551acfa96a51",scale:"s",icon:"chevron-down"}))))))}populateStretchTypeInfo(){const{strings:e}=o.s,t=e.stretchTypeButton.stretchTypeOptions,s=e.stretchTypeButton.stretchTypeOptionDescriptions;this.stretchTypeInfos.push({value:"none",title:t.none,msg:s.none,iconPath:null,selected:!1}),this.stretchTypeInfos.push({value:"min-max",title:t.minimumMaximum,msg:s.minimumMaximum,iconPath:null,selected:!1}),this.stretchTypeInfos.push({value:"percent-clip",title:t.percentClip,msg:s.percentClip,iconPath:null,selected:!1}),this.stretchTypeInfos.push({value:"standard-deviation",title:t.standardDeviation,msg:s.standardDeviation,iconPath:null,selected:!1})}setSelection(){const e=(0,o.a9)();this.selectedStretchTypeInfo=this.stretchTypeInfos.find((t=>t.value===e.stretchType)),this.stretchTypeInfos.forEach((e=>{e.selected=e.value===this.selectedStretchTypeInfo.value}))}closeDropdown(){var e;this.open=!1,this.dropdownNode&&(null===(e=this.dropdownNode.parentNode)||void 0===e||e.removeChild(this.dropdownNode),this.dropdownNode=null,this.buttonNode.classList.remove("active"))}openStretchTypeDropdown(){if(this.open)this.open=!1;else{this.arcgisSmartMappingStretchTypeButtonBeforeOpen.emit();const e=document.createElement("arcgis-smart-mapping-dropdown");e.buttonNode=this.buttonNode,e.infos=this.stretchTypeInfos,this.dropdownNode=e,e.addEventListener("arcgisSmartMappingDropdownClose",(e=>{this.closeDropdown(),"Escape"===e.detail&&this.setFocus()})),e.addEventListener("arcgisSmartMappingDropdownChange",(e=>this.setStretchType(e.detail))),this.buttonNode.classList.add("active"),document.body.appendChild(e),this.open=!0}}setStretchType(e){const t=(0,o.a9)(),{stretchType:s}=t,n=e.value;if(n===s)return this.closeDropdown(),void setTimeout((()=>this.setFocus()),300);this.stretchTypeInfos.forEach((e=>{e.selected=e.value===n})),this.selectedStretchTypeInfo=e,this.arcgisSmartMappingStretchTypeButtonChange.emit(this.selectedStretchTypeInfo.value),this.closeDropdown(),setTimeout((()=>this.setFocus()),300)}get hostElement(){return(0,n.d)(this)}};r.style=".stretch-type-button{display:flex;padding:6px;justify-content:space-between;align-items:center;border-radius:0;cursor:pointer;background-color:var(--calcite-color-foreground-1);color:var(--calcite-color-text-1);border-color:var(--calcite-color-foreground-3);border-width:1px;border-style:solid;box-shadow:transparent 0px 0px 0px 1px inset}.stretch-type-button:hover{box-shadow:inset 0 0 0 1px var(--calcite-color-foreground-3)}.stretch-type-button:active{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3)}.stretch-type-button:focus{box-shadow:inset 0 0 0 2px var(--calcite-color-foreground-3);outline:2px solid var(--calcite-color-brand);outline-offset:2px}.stretch-type-button.active{outline:1px solid var(--calcite-ui-focus-color, var(--calcite-color-brand))}.stretch-type-content{display:flex;align-items:center;justify-content:space-between;width:100%}.stretch-type-button-text{display:inline-block;padding:0 10px}.stretch-type-button-title{font-weight:bold}.stretch-type-button-msg{font-size:80%;line-height:16px}"},91616:(e,t,s)=>{s.d(t,{a:()=>l,b:()=>p,c:()=>o,d:()=>n,e:()=>i,f:()=>d,g:()=>m,h:()=>u,i:()=>a,m:()=>r,t:()=>c,u:()=>h});const n=(e,t)=>{let s,n="idle";const o=(...o)=>new Promise((i=>{switch(n){case"flushed":n="idle",s?(clearTimeout(s),i(e(...o))):i(null);break;case"invoked":clearTimeout(s),n="idle",i(e(...o));break;case"cancelled":clearTimeout(s),n="idle",i(null);break;default:s&&clearTimeout(s),n="pending",s=setTimeout((()=>(n="idle",i(e(...o)))),t)}}));return o.flush=function(...e){return n="flushed",o(...e)},o.invoke=function(...e){return n="invoked",o(...e)},o.cancel=function(...e){return n="cancelled",o(...e)},o.getStatus=function(){return n},o},o=(e,t)=>{let s;return(...n)=>new Promise((o=>{s||(s=setTimeout((()=>{clearTimeout(s),s=void 0,o(e(...n))}),t))}))};function i(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function a(e){return null!=e}async function r(e,t){return await Promise.all([e,c(t)]),e}function c(e){return new Promise((t=>setTimeout(t,e)))}const l=(e,t)=>Object.fromEntries((e||[]).map((e=>{const{key:s,data:n}=t(e);return[s,n]}))),d=(e,t)=>e.length===t.length&&e.reduce(((e,s)=>e&&t.indexOf(s)>-1),!0);function h(e,t){const s=[],n={};return e.forEach((e=>{const o=t(e);null==n[o]&&(n[o]=e,s.push(e))})),s}function p(e){const t={boolean:{},number:{},string:{}},s=[];return e.filter((e=>{let n=typeof e;return n in t?!t[n].hasOwnProperty(e)&&(t[n][e]=!0):!(s.indexOf(e)>=0)&&s.push(e)}))}const u=(e,t)=>[...Array(Math.ceil(e.length/t))].map(((s,n)=>e.slice(t*n,t+t*n))),m=(e,t)=>e.includes(t)}}]);