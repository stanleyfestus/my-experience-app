/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-layers--b1af64.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-layers--b1af64"],{23860:(e,t,o)=>{o.r(t),o.d(t,{arcgis_layers_and_tables_summary_popup:()=>h});var i=o(20536),r=o(37568),s=o(10699),a=o(44090),n=o(29369),l=o(91616),c=o(21117);o(91102),o(73807),o(34752),o(98034),o(99004),o(38973),o(369),o(25972),o(16093),o(76246),o(34472);const d=(0,s.c)({}).state,h=class{constructor(e){(0,i.r)(this,e),this.handleClick=async()=>{var e,t;const{layers:o,item:i}=this;null===(e=this.button)||void 0===e||e.focus(),o||(this.loading=!0),d[i.id]||(d[i.id]=this.fetchServiceInfo());const r=await d[i.id];r.error&&(this.error=this.i18n.error,"serviceNotExist"===r.error.code&&(this.error.message=this.i18n.error.noServiceMessage)),r.result?this.sublayers=(0,c.s)(null===(t=r.result)||void 0===t?void 0:t.sublayers,o):this.sublayers=o,this.loading=!1},this.handleWindowClick=({target:e})=>{this.el.contains(e)||(this.popoverNode.open=!1)},this.handleKeyPress=({key:e})=>{switch(e){case"Esc":case"Escape":this.popoverNode&&(this.popoverNode.open=!1)}},this.api=4,this.config=void 0,this.user=void 0,this.item=void 0,this.portal=void 0,this.layers=void 0,this.searchTerm=void 0,this.border=void 0,this.tooltip=void 0,this.telemetry=void 0,this.button=void 0,this.loading=!0,this.error=void 0,this.sublayers=void 0}async componentWillLoad(){const e=await(0,r.g)(this.el);this.i18n=e[0],a.c.api=this.api,a.c.portal=this.portal,a.c.config=this.config,a.c.user=this.user,this.layers||(this.loading=!0)}async fetchServiceInfo(){const{item:e,portal:t,layers:o}=this;return await(0,l.m)((0,c.f)({item:e,portal:t,layers:o,isSecure:!1}),500)}render(){const{i18n:e,portal:t,user:o,item:r,handleClick:s,handleKeyPress:a,loading:c,searchTerm:d,error:h,tooltip:p,telemetry:u}=this,g=this.sublayers||this.layers;return(0,i.h)(i.H,{key:"a923e24a154e7a7f4f70f51020145d033a056cdb",onFocusout:e=>{e.relatedTarget&&!this.el.contains(e.relatedTarget)&&(this.popoverNode.open=!1)}},(0,i.h)("calcite-popover-manager",{key:"0f3233966848dbc71f33094adf3d0a661eda58dd",autoClose:!0},(0,i.h)("button",Object.assign({key:"915025aad427b736962f9200148a73a8cd25d266",class:{button:!0,"button--border":this.border},ref:e=>this.button=e,onClick:s,onTouchStart:s,onKeyPress:a},p?{title:p}:{}),(0,i.h)("span",{key:"fa7e687f9702c79ecb9ad14bfc96671dfcd17d53",class:"button-text"},(0,i.h)("slot",{key:"87c1733777811346066d471f99c6bfe58feb98ac"}),(0,i.h)("calcite-icon",{key:"4810ee6424ef6a693bc4eca17f148420e0a636c6",icon:"caret-down",scale:"s",class:"button--icon"}))),(0,i.h)("calcite-popover",{key:"4a8a255c40e64533c3c7bcbea283022ac31029cc",ref:e=>this.popoverNode=e,label:e.layersAndTables,pointerDisabled:!0,referenceElement:this.button,closable:!0,class:"popover",placement:"bottom",overlayPositioning:"fixed",heading:e.layersAndTables,onCalcitePopoverOpen:()=>{var e;null===(e=this.telemetry)||void 0===e||e.logEvent({category:"preview popup",action:"click",pageName:(0,n.g)(),pageUrl:window.location.href}),window.addEventListener("click",this.handleWindowClick)},onCalcitePopoverClose:(0,l.d)((()=>{var e;null===(e=this.telemetry)||void 0===e||e.logEvent({category:"preview popup",action:"close",pageName:(0,n.g)(),pageUrl:window.location.href}),window.removeEventListener("click",this.handleWindowClick)}),200)},(0,i.h)("div",{key:"a348efe396502cbda7b5a154e46bd8ce896a9270",class:"popover-content"},c?(0,i.h)("div",{class:"skeleton"},(0,i.h)("div",{class:"skeleton-content"},(0,i.h)("div",{class:"skeleton-left"}),(0,i.h)("div",{class:"skeleton-main"},(0,i.h)("div",{class:"skeleton-title"}),(0,i.h)("div",{class:"skeleton-subtitle"})),(0,i.h)("div",{class:"skeleton-right"}))):(0,i.h)("arcgis-layers-and-tables-summary",{portal:t,user:o,item:r,layers:g,showMatched:d&&!!this.layers,error:h,loading:!this.sublayers,telemetry:u,onLayersAndTablesFocusEnd:()=>{this.popoverNode.open=!1}})))))}get el(){return(0,i.d)(this)}};h.style=":host{max-width:100%}arcgis-layers-and-tables-summary:not(.hydrated){visibility:hidden}.popover-content{width:380px;min-height:6rem;background-color:var(--calcite-color-background)}.skeleton{margin:1rem;margin-bottom:3rem}@keyframes pulse{50%{opacity:.5}}.skeleton{animation:pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;padding:0.5rem;border:1px solid var(--calcite-color-border-2)}.skeleton-content{display:flex}.skeleton-left,.skeleton-right{height:1rem;width:1rem;background-color:var(--calcite-color-border-3)}.skeleton-main{margin-left:1rem;margin-right:1rem;flex:1 1 0%}.skeleton-title{height:1rem;background-color:var(--calcite-color-border-2)}.skeleton-subtitle{margin-top:0.25rem;height:1rem;background-color:var(--calcite-color-border-3)}@keyframes pulse{0%,100%{opacity:1}50%{opacity:0.5}}.button{max-width:100%;cursor:pointer;border-style:none;padding:0px;outline:2px solid transparent;outline-offset:2px;transition-property:all;color:inherit;background:transparent;font-family:inherit;font-size:inherit;line-height:1.5}.button:focus{outline:2px solid var(--calcite-color-brand);outline-offset:4px}.button--border{padding-left:0.5rem;padding-right:0.5rem;padding-top:0.25rem;padding-bottom:0.25rem;border:1px solid var(--calcite-color-foreground-3)}.button--border:focus{outline-offset:0}.button-text{pointer-events:none;display:flex}.button--icon{margin-inline-start:0.25rem;vertical-align:-3px}"},29369:(e,t,o)=>{function i(){const{hash:e,pathname:t}=window.location;if(t.includes("group.html"))return"group page";if(t.includes("search.html"))return"search result page";switch(e){case"#favorites":return"favorites";case"#groups":return"my groups content";case"#organization":return"my org content";case"#livingAtlas":return"living atlas";default:return"my content"}}o.d(t,{g:()=>i})}}]);