/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-b887ec.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-b887ec"],{31415:(e,i,t)=>{t.r(i),t.d(i,{arcgis_image_upload:()=>r,arcgis_image_upload_edit_step:()=>h,arcgis_image_upload_file_step:()=>n});var a=t(20536),s=t(37568),o=t(34752);t(91102),t(73807),t(98034),t(99004);const r=class{constructor(e){(0,a.r)(this,e),this.arcgisImageUploadCancel=(0,a.c)(this,"arcgisImageUploadCancel",7),this.arcgisImageUploadError=(0,a.c)(this,"arcgisImageUploadError",7),this.arcgisImageUploadSave=(0,a.c)(this,"arcgisImageUploadSave",7),this.arcgisImageUploadDelete=(0,a.c)(this,"arcgisImageUploadDelete",7),this.imageFormat="png",this.fileName="",this.handleCancel=()=>{this.showError=!1,this.arcgisImageUploadCancel.emit()},this.handleDelete=()=>{this.showError=!1,this.arcgisImageUploadDelete.emit()},this.handleChooseDiffClick=()=>{this.activeStep="file",this.previewSrc="",this.editExisting=!1},this.handleSaveClick=async()=>{if("file"===this.activeStep)return void this.showErrorAlert();if(this.showError=!1,this.saving=!0,"map"===this.activeStep)return void this.takeMapScreenshot();const e=await this.getCanvasImage();e&&this.arcgisImageUploadSave.emit(e)},this.takeMapScreenshot=async()=>{this.mapView._stage&&(this.mapView._stage._supersampleScreenshots=!1);const e=await this.mapView.takeScreenshot({format:"png"}),i={blob:this.dataURIToBlob(e.dataUrl),base64:e.dataUrl,format:"png",fileName:""};this.arcgisImageUploadSave.emit(i)},this.handleFromMapClick=()=>{this.activeStep="map"},this.handleMapViewLoaded=e=>{this.mapView=e.detail},this.modalTitle=void 0,this.sizeDescription=void 0,this.zoomToFit=!0,this.maxWidth=void 0,this.maxHeight=void 0,this.fillBackground=!1,this.active=void 0,this.height=window.innerWidth<412?200:300,this.aspectRatio=1,this.portal=void 0,this.itemId=void 0,this.jsapiUrl=void 0,this.rounded=!1,this.existingImage=void 0,this.hideCancel=!1,this.changeText=void 0,this.showDelete=!1,this.deleteText=void 0,this.previewSrc=void 0,this.saving=!1,this.editExisting=!1,this.isModified=!1,this.activeStep="file",this.showError=!1,this.errorMessage=""}handleFileChange(e){const{fileName:i,dataURL:t}=e.detail;this.fileName=i,this.previewSrc=t,this.activeStep="edit",this.showError=!1}handleInvalidFile(){this.showErrorAlert(),this.arcgisImageUploadError.emit("invalid file type.")}handleSizeExceeded(){this.showErrorAlert(!0),this.arcgisImageUploadError.emit("file size exceeded.")}handleImageChange(){this.isModified=!0}handleActiveChange(){var e;this.active?this.existingImage&&(this.previewSrc=this.existingImage,this.activeStep="edit",this.editExisting=!0):(this.activeStep="file",this.saving=!1,this.isModified=!1,this.previewSrc="",this.editExisting=!1,null===(e=this.fileStep)||void 0===e||e.resetFileInput())}async componentWillLoad(){const e=await(0,s.g)(this.el);this.strings=e[0]}showErrorAlert(e){this.errorMessage=e?this.strings.imageSizeError:this.strings.imageRequired,this.showError=!0}dataURIToBlob(e){const i=atob(e.split(",")[1]),t=e.split(",")[0].split(":")[1].split(";")[0],a=new ArrayBuffer(i.length),s=new Uint8Array(a);for(let e=0;e<i.length;e++)s[e]=i.charCodeAt(e);return new Blob([a],{type:t})}drawImage({selectionX:e,selectionY:i,selectionWidth:t,selectionHeight:a,canvasWidth:s,canvasHeight:o,minWidth:r,minHeight:h,drawDimensions:n},l,d,c){this.canvasEl.width=s<r?r:s*l,this.canvasEl.height=o<h?h:o*l,this.maxWidth&&this.canvasEl.width>this.maxWidth&&(this.canvasEl.width=this.maxWidth),this.maxHeight&&this.canvasEl.height>this.maxHeight&&(this.canvasEl.height=this.maxHeight);const g=n.left*this.canvasEl.width,p=n.top*this.canvasEl.height,m=n.width*this.canvasEl.width,f=n.height*this.canvasEl.height;this.fillBackground&&!this.rounded&&(c.fillStyle="#efefef",c.fillRect(0,0,this.canvasEl.width,this.canvasEl.height)),c.drawImage(d,e,i,t,a,g,p,m,f),this.rounded&&(c.globalCompositeOperation="destination-in",c.beginPath(),c.arc(this.canvasEl.width/2,this.canvasEl.height/2,this.canvasEl.height/2,0,2*Math.PI),c.closePath(),c.fill());const b=this.canvasEl.toDataURL("image/png");return{base64:b,blob:this.dataURIToBlob(b)}}async getScaledImageData(e){const i=this.canvasEl.getContext("2d"),t=await this.editStepEl.getDrawParameters();let a;const s=()=>(i.clearRect(0,0,this.canvasEl.width,this.canvasEl.height),this.drawImage(t,1600/e.width,e,i));try{if(a=this.drawImage(t,1,e,i),0===a.blob.size)throw{name:"NS_ERROR_FAILURE"};a.blob.size>1e7&&(a=s())}catch(e){if("NS_ERROR_FAILURE"!==e.name)return void this.arcgisImageUploadError.emit("unable to save the image provided.");a=s()}return{blob:null==a?void 0:a.blob,base64:null==a?void 0:a.base64,format:this.imageFormat,fileName:this.fileName}}getCanvasImage(){return new Promise((e=>{const i=new Image;this.previewSrc.indexOf("arcgis.com")>-1&&(i.crossOrigin="Anonymous"),i.onload=()=>{Math.abs(this.aspectRatio-i.width/i.height)<.01&&!this.isModified?e({blob:this.dataURIToBlob(this.previewSrc),base64:this.previewSrc,format:this.imageFormat,fileName:this.fileName}):e(this.getScaledImageData(i))},i.src=this.previewSrc}))}render(){const e=!!this.portal&&!!this.itemId&&!!this.jsapiUrl;return(0,a.h)("calcite-modal",{key:"4e0018027ffb840c5cc226b72400615b8f4169c2",class:"image-upload__modal",open:this.active,role:"dialog","aria-modal":"true","aria-labelledby":"image-upload-modal-title",outsideCloseDisabled:!0,onCalciteModalClose:this.handleCancel},(0,a.h)("h3",{key:"46fc4ad7bcc0fb733437dbc2df8c37534a026663",slot:"header",id:"image-upload-modal-title",class:"image-upload__title","aria-label":this.modalTitle},this.modalTitle),(0,a.h)("div",{key:"19ef9ca1f9c1cadfc8d1ef5c930308a9e0b4dd7f",slot:"content",class:{"image-upload__content":!0,"image-upload__content--with-map":e,"image-upload__content--no-padding":"map"===this.activeStep}},"file"===this.activeStep&&(0,a.h)("div",{key:"13af83f267ea72bc7b9409fa25b5e474a83754d4"},(0,a.h)("arcgis-image-upload-file-step",{key:"ffcb958c97ae2ffffc55ee8f5cdc3bf202bc9919",ref:e=>{this.fileStep=e},strings:this.strings,sizeDescription:this.sizeDescription}),e&&(0,a.h)(a.F,{key:"9117b90746834a61a8476984b94ceeb89c0aeaca"},(0,a.h)("div",{key:"3b502323e3642ad3e8318a2ab300f3053d7c7540",class:"or-container"},(0,a.h)("span",{key:"847cb13e2c6de8b9d44cd716d849ac91f8b4293c",class:"or-wrapper"},this.strings.or)),(0,a.h)("div",{key:"5d8f523012bd63993198339f576c8d5d7c3f07c6",class:"image-upload__from-map-button",tabIndex:0,onClick:this.handleFromMapClick,onKeyDown:e=>{"Space"!==e.code&&"Enter"!==e.code||this.handleFromMapClick()}},(0,a.h)("div",{key:"8e9894d37e43244ab65cad13f5f1f9cbf6c89cb1",class:"image-upload__from-map-title"},(0,a.h)("div",{key:"7bc91e492079bf4d3a5a74759b93b181974dd70e",class:"from-map-title-wrapper"},(0,a.h)("calcite-icon",{key:"5050a6ea2b06bcff78ecd64f854b72422cd42b05",icon:"map",scale:"m",class:"from-map-icon"}),this.strings.fromMap)),(0,a.h)("p",{key:"375f973765307d677e9ebd03cdb0edfebda4c75f",class:"image-upload__from-map-desc"},this.strings.fromMapDesc)))),"map"===this.activeStep&&(0,a.h)("arcgis-image-upload-from-map",{key:"be453db652b5bdfc5201a96ac245a7189ecc9901",portal:this.portal,itemId:this.itemId,jsapiUrl:this.jsapiUrl,changeBasemapText:this.strings.changeBasemap,loadingText:this.strings.loading,onArcgisImageUploadFromMapReady:this.handleMapViewLoaded}),"edit"===this.activeStep&&(0,a.h)("arcgis-image-upload-edit-step",{key:"98a208a2f2bdf326f9eedc388fd3af59985f8afe",ref:e=>{this.editStepEl=e},strings:this.strings,height:this.height,aspectRatio:this.aspectRatio,previewSrc:this.previewSrc,zoomToFit:this.zoomToFit,rounded:this.rounded}),"edit"===this.activeStep&&(0,a.h)("canvas",{key:"b3568a05bbedacfe12901f4b0d98d82261546080",ref:e=>{this.canvasEl=e},class:"image-upload__canvas"}),(0,a.h)("calcite-alert",{key:"891aa1fed7596303e1363a6564633286408eb931",label:this.strings.imageRequired,open:this.showError,ref:e=>{this.alertEl=e},icon:"exclamation-mark-circle",placement:"bottom",kind:"danger",onCalciteAlertClose:()=>{this.showError=!1}},(0,a.h)("div",{key:"df40316ee070776265ad56ddc8a6403e85fcfcbb",slot:"message"},this.errorMessage))),!this.deleteText&&("edit"===this.activeStep||"map"===this.activeStep)&&(0,a.h)("calcite-button",{key:"4772bf0b7af774a7e3f3ac36215fac263d6b3da4",slot:"back",appearance:"transparent","icon-start":"chevron-left",width:"full",disabled:this.saving,onClick:this.handleChooseDiffClick,iconFlipRtl:"start"},this.changeText||this.strings.chooseDiff),"edit"===this.activeStep&&this.editExisting&&this.showDelete&&(0,a.h)("calcite-button",{key:"2b5c8d3b236bfb2c9eeb972b70bd887bf296f4dc",slot:"back",appearance:"outline-fill",width:"full",disabled:this.saving,onClick:this.handleDelete},this.deleteText||this.strings.deleteImage),this.deleteText&&this.hideCancel&&"edit"===this.activeStep?(0,a.h)("calcite-button",{slot:"secondary",appearance:"outline-fill",width:"full",disabled:this.saving,onClick:this.handleChooseDiffClick},this.changeText||this.strings.chooseDiff):(0,a.h)("calcite-button",{slot:"secondary",appearance:"outline-fill",width:"full",disabled:this.saving,onClick:this.handleCancel},this.strings.cancel),(0,a.h)("calcite-button",{key:"18dc9721dbd16481433457daf158010597887fee",slot:"primary",appearance:"solid",width:"full",loading:this.saving,onClick:this.handleSaveClick},this.strings.save))}get el(){return(0,a.d)(this)}static get watchers(){return{active:["handleActiveChange"]}}};r.style='.image-upload__modal{--calcite-modal-width:650px}.image-upload__title{margin-bottom:0px;font-size:1.25rem}.image-upload__content{box-sizing:border-box;background-color:var(--calcite-color-background);padding-left:2rem;padding-right:2rem;padding-top:1rem;padding-bottom:1.5rem;border:1px solid var(--calcite-color-border-3)}.image-upload__content--with-map{min-height:400px}.image-upload__content--no-padding{padding:0px}.image-upload__canvas{visibility:hidden;position:fixed;left:-10000px}.or-container{margin-top:1rem;margin-bottom:1rem;text-align:center;font-weight:500}.or-container:before,.or-container:after{display:inline-block;vertical-align:middle;content:"";border-top:solid 1px var(--calcite-color-border-input);width:15%;height:1px;z-index:1}.or-wrapper{padding-left:0.5rem;padding-right:0.5rem}.image-upload__from-map-button{background-color:var(--calcite-color-foreground-1);padding:1rem;text-align:center;border:1px solid var(--calcite-color-foreground-3)}.image-upload__from-map-button:hover{border:1px solid var(--calcite-color-brand)}.image-upload__from-map-title{display:inline-block}.from-map-title-wrapper{display:flex;align-items:center}.from-map-icon{margin-right:0.5rem}.image-upload__from-map-desc{margin:0px;font-size:0.875rem}';const h=class{constructor(e){(0,a.r)(this,e),this.arcgisImageUploadEditStepImageChanged=(0,a.c)(this,"arcgisImageUploadEditStepImageChanged",7),this.handleWheel=e=>{e.preventDefault();const i=e.deltaY>0?1*this.imageProperties.scale/1.1:1.1*this.imageProperties.scale;this.zoomValue=""+(50+Math.log(i)/Math.log(1.1)),this.imageProperties=Object.assign(Object.assign({},this.imageProperties),{scale:i})},this.handleDragStart=()=>{this.dragging=!0},this.handleDrag=e=>{if(!this.dragging)return;const{touches:i}=e;let{clientX:t,clientY:a}=e;if(void 0===t||void 0===a){if(!i.length)return;t=i[0].clientX,a=i[0].clientY}if(!this.previousPosition)return void(this.previousPosition={top:a,left:t});const{top:s,left:o}=this.previousPosition,r=a-s,h=t-o;this.imageProperties=Object.assign(Object.assign({},this.imageProperties),{top:this.imageProperties.top+r,left:this.imageProperties.left+h}),this.previousPosition={top:s+r,left:o+h}},this.handleDragEnd=()=>{this.dragging=!1,this.previousPosition=void 0},this.handleImageLoaded=()=>{if(this.editingExisting)return this.loadingImage=!1,this.imageProperties=Object.assign(Object.assign({},this.imageProperties),{scale:this.height/this.imageEl.width,top:0,left:0,origin:{x:"0%",y:"0%"}}),void(this.isLoading=!1);const e=this.height*this.aspectRatio,{clientWidth:i,clientHeight:t}=this.imageEl,a=(this.height+2)/t,s=(e+2)/i,o=a>s?a:s;let r=Object.assign({},this.imageProperties);r=Object.assign(Object.assign({},r),{top:Math.floor(this.height/2-t/2),left:Math.floor(this.height*this.aspectRatio/2-i/2),origin:{x:"50%",y:"50%"}}),this.zoomToFit&&(r=Object.assign(Object.assign({},r),{top:r.top-1,left:r.left-1,scale:o}),this.initiallySettingZoom=!0,this.zoomValue=""+(50+Math.log(o)/Math.log(1.1))),this.imageProperties=Object.assign({},r),this.isLoading=!1},this.handleZoomInput=e=>{this.initiallySettingZoom&&(this.initiallySettingZoom=!1),this.zoomValue=e.target.value,this.imageProperties=Object.assign(Object.assign({},this.imageProperties),{scale:Math.pow(1.1,e.target.value-50)})},this.handleImageKeydown=e=>{let i=!1;switch(e.key){case"ArrowUp":this.imageProperties=Object.assign(Object.assign({},this.imageProperties),{top:this.imageProperties.top-1}),i=!0;break;case"ArrowDown":this.imageProperties=Object.assign(Object.assign({},this.imageProperties),{top:this.imageProperties.top+1}),i=!0;break;case"ArrowLeft":this.imageProperties=Object.assign(Object.assign({},this.imageProperties),{left:this.imageProperties.left-1}),i=!0;break;case"ArrowRight":this.imageProperties=Object.assign(Object.assign({},this.imageProperties),{left:this.imageProperties.left+1}),i=!0}i&&e.preventDefault()},this.strings=void 0,this.aspectRatio=void 0,this.previewSrc=void 0,this.loadingImage=!1,this.editingExisting=!1,this.zoomToFit=!1,this.height=void 0,this.rounded=!1,this.imageProperties={scale:1,top:0,left:0,origin:{x:"50%",y:"50%"}},this.dragging=!1,this.previousPosition=void 0,this.previewStyle=void 0,this.zoomValue="50",this.initiallySettingZoom=!1,this.firstImagePropertiesChange=!0,this.isLoading=!0}componentWillLoad(){const e=this.height*this.aspectRatio,i=`${this.height+60}px`;this.thumbContainerStyle={height:i},this.translucentContainerStyle={width:`${e+60}px`,height:i},this.transparentContainerStyle={width:`${e}px`,height:`${this.height}px`},this.previewStyle={transform:`scale(${this.imageProperties.scale})`,top:`${this.imageProperties.top}px`,left:`${this.imageProperties.left}px`,transformOrigin:`${this.imageProperties.origin.x} ${this.imageProperties.origin.y}`}}componentDidLoad(){this.imageContainerEl.focus()}getImageExtent(){const e=this.imageEl.getBoundingClientRect(),i=this.imageContainerEl.getBoundingClientRect();return{left:(i.left-e.left)/e.width,right:(i.right-e.left)/e.width,top:(i.top-e.top)/e.height,bottom:(i.bottom-e.top)/e.height}}getDrawDimensions(){const e=this.imageEl.getBoundingClientRect(),i=this.imageContainerEl.getBoundingClientRect(),t=e.top-i.top>0?e.top-i.top:0,a=e.left-i.left>0?e.left-i.left:0,s=e.left<i.left?i.left:e.left,o=e.top<i.top?i.top:e.top,r=e.right>i.right?i.right:e.right,h=e.bottom>i.bottom?i.bottom:e.bottom;return{left:a/i.width,top:t/i.height,width:(r-s)/i.width,height:(h-o)/i.height}}async getDrawParameters(){const e=this.height*this.aspectRatio,i=this.height,{left:t,right:a,top:s,bottom:o}=this.getImageExtent(),r=t<0?0:t,h=s<0?0:s,n=a>1?1:a,l=o>1?1:o,d=this.getDrawDimensions(),c=this.imageEl.clientWidth,g=this.imageEl.clientHeight;return{selectionX:r*c,selectionY:h*g,selectionWidth:n*c-r*c,selectionHeight:l*g-h*g,canvasWidth:Math.abs(a)*c-Math.abs(t)*c,canvasHeight:Math.abs(o)*g-Math.abs(s)*g,minWidth:e,minHeight:i,drawDimensions:d}}handleImagePropertiesChange(){this.previewStyle={transform:`scale(${this.imageProperties.scale})`,top:`${this.imageProperties.top}px`,left:`${this.imageProperties.left}px`,transformOrigin:`${this.imageProperties.origin.x} ${this.imageProperties.origin.y}`},this.firstImagePropertiesChange?(this.firstImagePropertiesChange=!1,this.zoomToFit&&this.arcgisImageUploadEditStepImageChanged.emit()):this.arcgisImageUploadEditStepImageChanged.emit()}render(){return(0,a.h)(a.H,{key:"0e26a569de1a663b4666f92e133bbe66b6e44b1d",onWheel:this.handleWheel},(0,a.h)("calcite-loader",{key:"ed06b65378beffbf8981432d2991949a58cd3737",class:"edit-step__loader",label:"",hidden:!this.isLoading}),(0,a.h)("div",{key:"1dc87a0a1f3c1ca6eb0bdbac08e836418507dcc4",class:"edit-step__crop-thumb-container "+(this.isLoading?"edit-step__crop-thumb-container--hidden":""),style:this.thumbContainerStyle},(0,a.h)("div",{key:"e39f9286de0097ef91fbacada1b7f8114401e785",class:{"edit-step__translucent-container":!0,"translucent-container--rounded":this.rounded},style:this.translucentContainerStyle,onMouseDown:this.handleDragStart,onTouchStart:this.handleDragStart,onMouseMove:this.handleDrag,onTouchMove:this.handleDrag,onMouseUp:this.handleDragEnd,onTouchEnd:this.handleDragEnd,onMouseOut:this.handleDragEnd},(0,a.h)("div",{key:"2afa5d93d3767f84d8981fdbc4ba43e48defdb23",ref:e=>{this.imageContainerEl=e},class:"edit-step__transparent-container",tabIndex:0,style:this.transparentContainerStyle,onKeyDown:this.handleImageKeydown},(0,a.h)("img",{key:"99f6132bb1b1e716dcf8a284dfa21ba9a4306b6b",ref:e=>{this.imageEl=e},src:this.previewSrc,alt:"",class:"edit-step__preview-image "+(this.loadingImage?"edit-step__preview-image--loading":""),style:this.previewStyle,onLoad:this.handleImageLoaded})))),(0,a.h)("calcite-label",{key:"4a00235cdf750eccdb456c4bceb17ceb9e7ce19f",class:{"edit-step__zoom-control":!0,"edit-step__zoom-control--hidden":this.isLoading}},this.strings.zoom,(0,a.h)("calcite-slider",{key:"19a2a55e59ef803ee99a73c8c1402585ba71aac0","aria-label":this.strings.zoom,scale:"l",min:1,max:100,value:+this.zoomValue,onCalciteSliderInput:this.handleZoomInput,mirrored:"rtl"===(0,o.g)(this.el)}),(0,a.h)("div",{key:"df79b2de1cfb04b76ebfd31aac21072608b4435e",class:"edit-step__zoom-control-label"},(0,a.h)("div",{key:"d954c1ce23b6cd41df54db6969ceb1de676d3064",class:"edit-step__zoom-control-icon-s"},(0,a.h)("calcite-icon",{key:"393cb1deca73c97e47540f558e71d7509e5770d9",icon:"image",scale:"s"})),(0,a.h)("div",{key:"4a07321c58ae26d82c96070b3eb9978f98c0ea54",class:"edit-step__zoom-control-label-spacer"}),(0,a.h)("div",{key:"adc28dcecd4b9e956d5b70ba7fa528fcdb203858",class:"edit-step__zoom-control-icon-l"},(0,a.h)("calcite-icon",{key:"fb0600c1db9928e3afae096d365177c87a10a264",icon:"image",scale:"l"})))))}get el(){return(0,a.d)(this)}static get watchers(){return{imageProperties:["handleImagePropertiesChange"]}}};h.style=':host{position:relative;display:block;overflow:hidden;min-height:20.625rem}.edit-step__loader{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.edit-step__crop-thumb-container{position:relative;width:100%;overflow:hidden}.edit-step__crop-thumb-container--hidden{visibility:hidden}.edit-step__translucent-container{position:absolute;top:0px;overflow:hidden;left:50%;cursor:all-scroll;transform:translate(-50%)}.edit-step__translucent-container:after{position:absolute;top:0px;right:0px;bottom:0px;left:0px;box-sizing:border-box;height:100%;width:100%;content:"";opacity:0.9;border:1.875rem solid white}.translucent-container--rounded,.translucent-container--rounded:after{border-radius:50%}.edit-step__transparent-container{position:absolute;box-sizing:border-box;overflow-x:visible;border-width:1px;border-style:solid;border-color:var(--calcite-color-border-1);background-color:var(--calcite-color-foreground-3);outline:2px solid transparent;outline-offset:2px;margin-right:-50%;top:50%;left:50%;transform:translate(-50%, -50%)}.edit-step__preview-image{position:absolute;left:0px;top:0px;margin:0px;transform-origin:50% 50%}.edit-step__preview-image--loading{visibility:hidden}.edit-step__transparent-container:focus .edit-step__preview-image{box-shadow:0px 0px 6px 4px var(--calcite-color-brand)}.edit-step__zoom-control{--calcite-label-margin-bottom:0}.edit-step__zoom-control--hidden{visibility:hidden}.edit-step__zoom-control-label{display:flex;height:2rem}.edit-step__zoom-control-label-spacer{flex:1 1 0%}';const n=class{constructor(e){(0,a.r)(this,e),this.arcgisImageUploadFileStepFileChange=(0,a.c)(this,"arcgisImageUploadFileStepFileChange",7),this.arcgisImageUploadFileStepInvalidFile=(0,a.c)(this,"arcgisImageUploadFileStepInvalidFile",7),this.arcgisImageUploadSizeExceeded=(0,a.c)(this,"arcgisImageUploadSizeExceeded",7),this.handleDragOver=e=>{e.preventDefault()},this.handleDrop=e=>{e.preventDefault(),this.processFile(e.dataTransfer.files[0])},this.handleFileInputChange=e=>{this.processFile(e.target.files[0])},this.strings=void 0,this.sizeDescription=void 0}async resetFileInput(){this.fileInput.value=""}processFile(e){if(e&&e){if(!this.isValidFile(e))return void this.arcgisImageUploadFileStepInvalidFile.emit();const i=10485760;if(e.size>i)return void this.arcgisImageUploadSizeExceeded.emit();const t=new FileReader;t.onload=async i=>{this.arcgisImageUploadFileStepFileChange.emit({dataURL:i.target.result,fileName:e.name||""})},t.readAsDataURL(e)}}isValidFile(e){return(null==e?void 0:e.name)&&/\.(gif|jpg|jpeg|png)$/i.test(e.name)}render(){return(0,a.h)("div",{key:"b450a2cbb6691d6627118ea727330abedebe2b31",class:"file-step","aria-label":this.strings.dragDrop,onDragOver:this.handleDragOver,onDragEnter:this.handleDragOver,onDrop:this.handleDrop},(0,a.h)("div",{key:"0385f3b5e3d04fc86de9c1a78bba412062ca5af5",class:"file-step__upload-icon"},(0,a.h)("calcite-icon",{key:"0a65ece3af66c77de86da58efaaae3b1abc6a743",icon:"upload"})),(0,a.h)("div",{key:"badbacd2dcfcbbf16f6f8b1a3a8a31ef6af4cb68"},(0,a.h)("div",{key:"1b3672d24c18fe4e15c871df811396e69c9dc06e",class:"file-step__drag-text","aria-label":this.strings.dragDrop},this.strings.dragDrop),this.sizeDescription&&(0,a.h)("div",{key:"ae49783860e837eee504429105c4b3144cf781eb","aria-label":this.sizeDescription},this.sizeDescription),(0,a.h)("calcite-button",{key:"ea63d3d591910189a8f23f603412e916f8c1bf28",class:"file-step__browse-button",appearance:"transparent",iconStart:"image",scale:"l",onClick:()=>{this.fileInput.click()}},this.strings.browse),(0,a.h)("input",{key:"5e4d50c31d647a55c0be3f382425e174129518c2",ref:e=>{this.fileInput=e},onChange:this.handleFileInputChange,class:"file-step__file-input",type:"file",accept:".jpg,.gif,.png,.jpeg"})))}get el(){return(0,a.d)(this)}};n.style=".file-step{text-align:center}.file-step__upload-icon{margin-bottom:0.5rem;margin-top:0.25rem;color:var(--calcite-color-text-3)}.file-step__upload-icon calcite-icon{width:4rem;height:4rem}.file-step__drag-text{margin-bottom:0.25rem;font-size:1.25rem}.file-step__browse-button{margin-top:1rem}.file-step__file-input{display:none}"}}]);