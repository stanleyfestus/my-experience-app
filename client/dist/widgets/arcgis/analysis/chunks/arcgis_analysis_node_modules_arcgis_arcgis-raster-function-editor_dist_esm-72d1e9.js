"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_arcgis_analysis_node_modules_arcgis_arcgis-raster-function-editor_dist_esm-72d1e9"],{821:(e,t,r)=>{r.r(t),r.d(t,{rfx_dte_feature_select:()=>n});var a=r(17002),i=(r(5294),r(13661),r(18423),r(21255),r(35431),r(93210)),s=r(40320),l=r(54667),o=r(15195),c=r(19562);r(33355),r(23795),r(17902),r(56451),r(588),r(71802),r(44345),r(32513),r(33752),r(36596),r(55448),r(2924),r(11840),r(52373),r(440),r(66744);const n=class{constructor(e){(0,a.r)(this,e),this.rfxArgumentChange=(0,a.c)(this,"rfxArgumentChange",7),this.loaded=!1,this.errorCode=void 0,this.inputLayers=void 0,this.value=void 0,this.placeholderText=void 0,this.rfxBrowseLayerClick=void 0,this.mode=void 0,this.maxItems=5}async connectedCallback(){!1===this.loaded&&await this.load()}async componentWillLoad(){({strings:this.strings}=await(0,i.c)(this.hostElement,(0,a.g)(".")))}async getSelectedLayer(){return!1===this.loaded&&await this.load(),(0,s.o)(this.value)?Promise.resolve(void 0):this._getSelectedLayer(this.value.url)}async updateBrowsedLayer(e){return e.forEach((e=>{0===this.inputLayers.filter((t=>t.url===e.url||`${t.url}/${t.layerId}`===e.url)).length&&this.inputLayers.push(e),this.value={name:e.title,url:(0,l.b)(e)},this.rfxArgumentChange.emit({value:this.value})})),Promise.resolve(void 0)}async checkValidity({required:e}){let t=!0;return e&&(0,s.o)(this.value)&&(this.errorCode="required",t=!1),Promise.resolve(t)}async load(){(0,s.o)(this.value)||await this.processValueLayer(),this.loaded=!0}isLayerAddedToMap(e){return this.inputLayers.some((t=>t.url===e||`${t.url}/${t.layerId}`===e))}async processValueLayer(){const e=this.value?.url;if((0,s.o)(e))return;if(!this.isLayerAddedToMap(e)){const e=await(0,l.i)(this.value),t=`${e?.url}/${e?.layerId}`;void 0===e||this.isLayerAddedToMap(t)||(this.inputLayers=[...this.inputLayers,e])}const t=await this._getSelectedLayer(e),r=(0,l.b)(t);(0,s.o)(t)||(0,s.o)(r)||(this.value={name:t.title,url:r},this.rfxArgumentChange.emit({value:this.value}))}async _handleComboBoxChange(e){const t=e.target.value;if(this.errorCode=void 0,(0,s.o)(t))this.value=void 0;else{if("browse"===t)return this.value=void 0,void this.rfxBrowseLayerClick({referenceElement:this.hostElement,isFeatureSelectElement:!0});{const e=await this._getSelectedLayer(t);this.value={name:e.title,url:(0,l.b)(e)}}}this.rfxArgumentChange.emit({value:this.value})}async _getSelectedLayer(e){e=(0,l.g)(e);const t=this.inputLayers.find((t=>t.url===e||`${t.url}/${t.layerId}`===e));return await(t?.load()),t}render(){const e=(0,s.o)(this.value)?this.value:(0,l.g)(this.value?.url);let t=[];return this.inputLayers&&Array.isArray(this.inputLayers)&&(t=this.inputLayers.map(((t,r)=>{if(!(0,s.o)(t?.url)){const i=`${t.url}/${t.layerId}`;return(0,a.h)("calcite-combobox-item",{key:`feature-layer-item-${r}`,value:i,textLabel:t.title,selected:i.indexOf(e)>-1,icon:"feature-layer",scale:c.U.Scale})}}))),(0,a.h)("div",{class:"esriRFxFeatureSelect"},(0,a.h)("calcite-combobox",{label:"rfx-dte-feature-select-combobox",placeholder:this.placeholderText??this.strings.selectFeature,selectionMode:"single",scale:c.U.Scale,value:e,onCalciteComboboxChange:e=>this._handleComboBoxChange(e),clearDisabled:!0,overlayPositioning:this.mode===o.a.EDITOR?c.a.fixed:c.a.absolute,maxItems:this.mode===o.a.EDITOR?this.maxItems:0},(0,a.h)(a.F,null,(0,a.h)("calcite-combobox-item",{class:"browse-layer",key:"layer-item-browse",value:"browse",textLabel:this.strings.browseLayer,scale:c.U.Scale,icon:"search",filterDisabled:!0}),...t)),(0,a.h)("calcite-input-message",{class:"layer-validation-msg",status:"invalid",scale:c.U.Scale,hidden:!0===(0,s.o)(this.errorCode),icon:"exclamationMarkTriangle"},this.strings.errorCodes[this.errorCode]))}static get assetsDirs(){return["t9n"]}get hostElement(){return(0,a.a)(this)}};n.style=":root{--calcite-color-brand:#007ac2;--calcite-color-brand-hover:#00619b;--calcite-color-brand-press:#004874;--calcite-color-status-info:#00619b;--calcite-color-status-success:#35ac46;--calcite-color-status-warning:#edd317;--calcite-color-status-danger:#d83020;--calcite-color-status-danger-hover:#a82b1e;--calcite-color-status-danger-press:#7c1d13;--calcite-color-background:#f8f8f8;--calcite-color-foreground-1:#ffffff;--calcite-color-foreground-2:#f3f3f3;--calcite-color-foreground-3:#eaeaea;--calcite-color-text-1:#151515;--calcite-color-text-2:#4a4a4a;--calcite-color-text-3:#6a6a6a;--calcite-color-text-inverse:#ffffff;--calcite-color-text-link:#00619b;--calcite-color-border-1:#cacaca;--calcite-color-border-2:#d4d4d4;--calcite-color-border-3:#dfdfdf;--calcite-color-border-input:#949494;--rfx-quarter-spacing:0.25rem;--rfx-half-spacing:0.5rem;--rfx-three-quarter-spacing:0.75rem;--rfx-full-spacing:1rem;--rfx-component-default-width:100%;--rfx-ui-border-input:var(--calcite-color-border-2);--rfx-popover-content-min-height:30vh;--rfx-popover-content-max-height:60vh;--rfx-popover-content-height:45vh;--rfx-widget-content-height:30vh;--rfx-modal-width-small:32rem}.browse-layer{--calcite-color-text-1:var(--calcite-color-text-link);--calcite-color-text-3:var(--calcite-color-text-link)}.layer-validation-msg{margin-top:0.5rem}"},19562:(e,t,r)=>{r.d(t,{C:()=>i,U:()=>a,a:()=>s});const a={Scale:"s",PopoverTimer:60},i={s:"s",m:"m",l:"l"},s={absolute:"absolute",fixed:"fixed"}}}]);