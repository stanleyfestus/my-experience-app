/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-af6cf2.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-af6cf2"],{35838:(e,t,i)=>{i.r(t),i.d(t,{arcgis_new_item_pages_developer_credentials_summary:()=>T});var r=i(20536),a=i(19832),n=i(1391),l=i(76776),s=i(31337),o=i(86980),c=i(44090),d=i(91616),p=i(64243),g=i(67914),h=i(38973),m=i(96813),u=i(33901),f=i(69117),v=i(37568),b=i(54717),y=i(68537),w=i(98034),k=i(76418);i(10699),i(25972),i(369),i(59377),i(27995),i(90079),i(4291),i(79717),i(76246),i(16093),i(34472),i(90230),i(40883),i(30554),i(78231),i(91102),i(73807),i(34752),i(99004);const P=[],T=class{constructor(e){(0,r.r)(this,e),this.newItemUpdatePage=(0,r.c)(this,"newItemUpdatePage",7),this.newItemToggleNavigationEnabled=(0,r.c)(this,"newItemToggleNavigationEnabled",7),this.workflowComplete=(0,r.c)(this,"workflowComplete",7),this.workflowCancel=(0,r.c)(this,"workflowCancel",7),this.newItemSetButtonState=(0,r.c)(this,"newItemSetButtonState",7),this.generateToken=!0,this.isOAuthType=!1,this.workflowCancelled=!1,this.handleRequest=async()=>{const{newItemMode:e,developerCredentialsType:t}=n.a,{categories:i}=l.i,{portal:r}=c.c,{generateToken:a}=this;let p,h;this.isLoading=!0;try{(0,s.a)(),({addResponse:p,publishResponse:h}=await this.handleAddItem());const l=[null==p?void 0:p.id,null==h?void 0:h.id].filter((e=>e));if(i&&await(0,o.u)({portal:r,itemIds:l,categories:i}),this.workflowCancelled)(null==h?void 0:h.id)&&await(0,g.d)(h.id,{permanentDelete:!0}),p.id&&await(0,g.d)(p.id,{permanentDelete:!0}),this.workflowCancel.emit();else{let i;(0,s.c)(),c.c.telemetry&&await(0,d.t)(750),i=Object.assign({id:null==p?void 0:p.id,item:Object.assign({},n.a),response:p,newItemMode:e,generateToken:a,developerCredentialsType:t},h),this.workflowComplete.emit(i)}(0,m.r)()}catch(e){console.error(e),this.isLoading=!1,this.error=e,this.showLoader(!1)}},this.error=void 0,this.loading=!1,this.loaderType="indeterminate",this.loaderMessage=void 0,this.alertInfo=void 0,this.isLoading=!1,this.privilegesAcknowledged=!0}async componentWillLoad(){const{developerCredentialsType:e,selectedAppPrivileges:t,formattedItemPrivileges:i,apiToken1ExpirationDate:r}=n.a;this.isOAuthType="oauth"===e,this.title=l.i.title,this.i18n=a.u.i18n.developerCredentialsSummary,this.isOAuthType?(a.u.nextText="create",a.u.cancelText="cancel"):this.expirationDateDisplay=await this.formatExpirationDate(r),(i||[]).length>0&&f.i.some((e=>t.includes(e)))?this.appPrivileges=t.filter((e=>f.i.every((t=>e!==t)))):this.appPrivileges=t;const s=(this.appPrivileges||[]).concat(i||[]);n.a.developerPrivileges=s;const o=await(0,v.g)(this.el,"arcgis-privileges-picker");this.privilegeStrings=o[0],this.personalPrivilegesExist=t.some((e=>!e.includes("premium")||f.p.includes(e))),this.privilegesAcknowledged=!1}handlePrivilegesAcknowledged(){this.privilegesAcknowledged||!this.personalPrivilegesExist?this.newItemSetButtonState.emit({targetButton:"primary",state:{loading:!1,disabled:!1}}):this.newItemSetButtonState.emit({targetButton:"primary",state:{loading:!1,disabled:!0}})}async handleNext(){n.a.isPersonalAPIToken=c.c.portal.isPortal||(0,y.n)(c.c.subscriptionInfo)||this.privilegesAcknowledged,this.isOAuthType?this.handleRequest():this.newItemUpdatePage.emit("developerCredentialsGenerateTokenCheck")}async handleAddItem(){let e;return this.showLoader(!0,{loaderType:"indeterminate",loaderMessage:(0,u.r)(this.i18n.creating,n.a.type,"fileType")}),e=await this.addDeveloperCredentialApplication(),{addResponse:e,publishResponse:undefined}}async addDeveloperCredentialApplication(){const{developerCredentialsRedirectUrls:e,applicationEnvironment:t,apiKeyReferrerUrls:i,developerPrivileges:r,isPersonalAPIToken:a}=n.a;try{return(0,p.e)(n.a,(0,h.g)(c.c.portal),this.isOAuthType?Object.assign({appType:t,httpReferrers:i,redirect_uris:e,privileges:r},a&&{isPersonalAPIToken:a}):{httpReferrers:i,privileges:r})}catch(e){return console.error(e),this.isLoading=!1,void(this.error=e)}}showLoader(e,t){t&&this.updateLoader(t.loaderType,t.loaderMessage),e?(this.newItemToggleNavigationEnabled.emit(!1),this.loading=!0):(this.newItemToggleNavigationEnabled.emit(!0),this.loading=!1)}updateLoader(e,t){this.loaderType=e,this.loaderMessage=t}renderRedirectUrlsList(){const{developerCredentialsRedirectUrls:e}=n.a;return(0,r.h)("div",{class:"content"},(e||[]).map(((t,i)=>{const a=1===e.length||i===e.length-1;return(0,r.h)("p",{key:i}," ",`${t}${a?"":", "}`," ")})))}getPrivilegeStrings(e){return P.includes(e)?e:(0,b.a)(this.privilegeStrings,e,n.a.subscriptionType,c.c.portal.isPortal).label}renderPrivilegeList(e,t){const i=t.map((t=>"app"===e?{mapping:this.getPrivilegeStrings(t),raw:t}:t)).sort((function(e,t){var i,r;const a=(null!==(i=null==e?void 0:e.mapping)&&void 0!==i?i:e).toLowerCase(),n=(null!==(r=null==t?void 0:t.mapping)&&void 0!==r?r:t).toLowerCase();return a<n?-1:a>n?1:0}));return(0,r.h)("ul",{class:"content"},(i||[]).map(((t,i)=>{var a;return(0,r.h)("li",{key:i},null!==(a=null==t?void 0:t.mapping)&&void 0!==a?a:t,this.personalPrivilegesExist&&"app"===e&&(!t.raw.includes("premium")||f.p.includes(t.raw))&&(0,r.h)("div",{class:"personal-credential-badge"},(0,r.h)("arcgis-item-badge",{portal:c.c.portal,user:c.c.user,badgeType:"Personal credential"})))})))}renderAppPrivilegesSummary(){const{appPrivileges:e}=this,{user:t,portal:i}=c.c,{subscriptionType:a}=n.a;return(0,r.h)("arcgis-privileges-picker",{readonly:!0,privilegesToShow:e,portal:i,mode:a,user:t,portalConfig:{locationTrackingUIEnabled:!0,sceneViewerEnabled:!0,bulkPublishingEnabled:!0,notebookServerEnabled:!0},value:e,limitToUserPrivileges:!0,isPersonalAPIToken:!0})}renderPrivilegeNotice(){const{i18n:e}=this;return(0,r.h)("div",{class:"privilege-notice"},(0,r.h)("calcite-icon",{scale:"s",class:"notice-icon",icon:"exclamation-mark-triangle"}),(0,r.h)("div",{innerHTML:(0,k.r)(e.privilegeDependencyNoticeSingular,"https://developers.arcgis.com/documentation/security-and-authentication/reference/privileges/#privilege-scopes",e.privilegeDependencyNoticeSingular)}))}async formatExpirationDate(e){const{api:t}=c.c;if(!e)return null;if(3===t)return`${new Date(e)}`;const[i]=await(0,w.l)(["esri/intl"]);return i.formatDate(e,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",timeZoneName:"short"})}render(){const{developerCredentialsRedirectUrls:e,formattedItemPrivileges:t,developerCredentialsType:i,breadcrumbs:a}=n.a,{title:l,i18n:s,isLoading:o,appPrivileges:d,privilegesAcknowledged:p,personalPrivilegesExist:g,expirationDateDisplay:h}=this,m=(t||[]).length,u=(d||[]).length,f=(d||[]).filter((e=>e.includes("admin"))).length,v=u-f,b=(d||[]).filter((e=>!e.includes("premium:user:"))).length,w=s.appPrivilegesSummary.replace("${generalPrivilegesLength}",String(v)).replace("${adminPrivilegesLength}",String(f)),k=s.itemPrivilegesSummary.replace("${selectedItemPrivilegesLength}",String(m));return(0,r.h)(r.H,{key:"21273f3c425c6b6ee9ef7cfed892152b7a3a50f8"},(0,r.h)("div",{key:"a86053a401fe23e7ceb4cebadecdfecf6ec2b2e1",class:"main-wrapper"},(0,r.h)("arcgis-new-item-breadcrumbs",{key:"778d62d816ce385f729e2bdaacfa0155bfaa4cf1",breadcrumbs:a}),(0,r.h)("arcgis-new-item-loader",{key:"7955f615e167aab8332bdd7ff33769316c98ef12",active:o,text:s.registering}),(0,r.h)("div",{key:"5d7712c15614b14161453d376f6fb1e46592c825",class:"section"},(0,r.h)("arcgis-new-item-description",{key:"a6e3c78060be9affadc5a70315b11e1cf588eecd",class:"section",header:s.summary,content:s.reviewSettings})),(0,r.h)("div",{key:"778e933f0344cd8e644f5f412aecc0887213bcea",class:"title-summary section"},(0,r.h)("arcgis-new-item-description",{key:"7294908f8e5717ecbc98c5ea9513d19347e96004",header:s.title,content:l})),"apiToken"===i&&(0,r.h)("div",{key:"06853a5f66dcecaf473f80c0bcf019056a5f9ecb",class:"expiration-summary section"},(0,r.h)("arcgis-new-item-description",{key:"a9a56b24d8285befa9605c39c129b6718c2dcc66",header:s.expiration,content:h})),(null==e?void 0:e.length)>0&&(0,r.h)("div",{key:"68604a558eba22498421d0c1f38ea66b9a50f470",class:"redirect-url-summary section"},(0,r.h)("p",{key:"0ce0e28881952e331bfed8a44bb473d9fdb2c104",class:"header"},s.redirectUrl),(0,r.h)("div",{key:"24f71756a6440fe6cc7e7ca7c1b07424d9516bd0",class:"content"},(0,r.h)("p",{key:"eebe8fc579d9fd372a3c8dd58a64f56702562f18"},this.renderRedirectUrlsList()))),u>0&&!(0,y.n)(c.c.subscriptionInfo)&&(0,r.h)("div",{key:"208692fcf3cadd69891ad7f21e55db00c580dda2",class:"app-privileges-summary section"},(0,r.h)("p",{key:"26fe332c7f2cef35fac66ad5d96f47d5b996768f",class:"header"},s.privileges),(0,r.h)("div",{key:"7927fbd912ef60b2d36cd382fa807dd96fb61278",class:"content"},w),"apiToken"===i&&b>0&&this.renderPrivilegeNotice(),(0,r.h)("p",{key:"2cfecf0a6c166e897bcabc377d073295c8debcb5"},this.renderAppPrivilegesSummary())),m>0&&(0,r.h)("div",{key:"474a519f978b33adccd7fff806c7adf5d13b57bc",class:"item-access-summary section"},(0,r.h)("p",{key:"2f9bcdc03c18eb9118d48afff9d7918e7e365e98",class:"header"},s.itemAccess),(0,r.h)("div",{key:"ebdfe012bda61320a50634b6cce99d265dc57bbc",class:"content"},(0,r.h)("p",{key:"59772a02b092a06662ebc1e51b55d3146f5adaed"},k,this.renderPrivilegeList("item",t))))),g&&(0,r.h)("footer",{key:"085b9593272a99d61f4fdf7267e00e211acba963",class:"sticky-footer"},(0,r.h)("calcite-label",{key:"ec4cc3b4a6a45290fec1cf8d375283acba25fc02",class:"acknowledge-statement",layout:"inline"},(0,r.h)("calcite-checkbox",{key:"7ed3101dc2e22d4483c115415c2021ad65e850ec",checked:p,onCalciteCheckboxChange:()=>{this.privilegesAcknowledged=!p}}),s.acknowledgePrivileges)),(0,r.h)("arcgis-new-item-alert",{key:"73fc3c905c5fbae283a3e550e1ff43d567eff2c0",heading:s.errorTitle,description:s.errorDescription,active:!!this.error,onAlertDismiss:()=>this.error=null}))}get el(){return(0,r.d)(this)}static get watchers(){return{privilegesAcknowledged:["handlePrivilegesAcknowledged"]}}};T.style=":host{height:100%;overflow:hidden;background-color:var(--calcite-color-foreground-1)}@media (forced-colors: active){calcite-checkbox{border:1px solid var(--calcite-color-border-1)}}.main-wrapper{padding:0.75rem}.privilege-notice{margin-top:0.75rem;margin-bottom:0.75rem;display:flex;width:75%;flex-direction:row;align-items:center;background-color:var(--calcite-color-foreground-2);padding:1.25rem;font-size:0.875rem}.notice-icon{margin-inline-end:1rem;color:var(--calcite-color-status-danger)}.header{padding:0px;font-size:1rem;font-weight:500;color:var(--calcite-color-text-1);min-width:0px;margin-top:0px;margin-bottom:0px;overflow-wrap:anywhere;line-height:1.5}.content{font-size:0.875rem;margin-top:0.25rem;line-height:1.5}.content>p{margin-top:0px;margin-bottom:0px}.section{margin-bottom:1.5rem}.personal-credential-badge{margin-bottom:0.75rem}.sticky-footer{position:sticky;bottom:0px;display:flex;height:10%;width:100%;align-items:center;background-color:var(--calcite-color-foreground-1);border-top:1px solid var(--calcite-color-border-3)}.acknowledge-statement{margin-inline-start:auto;margin-inline-end:0.75rem;padding-top:1rem}"},33901:(e,t,i)=>{i.d(t,{r:()=>a});const r={fileName:/\$\{fileName\}/g,fileType:/\$\{type\}/g,typeList:/\$\{typeList\}/g,missingFields:/\$\{\missingFields\}/g},a=(e,t,i)=>{const a=new RegExp(r[i]);return null==e?void 0:e.replace(a,t)}},31337:(e,t,i)=>{i.d(t,{a:()=>c,b:()=>g,c:()=>d,l:()=>p});var r=i(44090),a=i(76776),n=i(1391),l=i(19832);const s="new item",o="my content";function c(){const e=r.c.telemetry;null==e||e.startWorkflow("new item upload",{eventType:"workflow",category:"new item upload",details:n.a.type,pageName:o})}function d(){const{type:e,applicationType:t,customParameters:i,selectedLayerIdTracker:a}=n.a,c=r.c.telemetry,d=l.u.telemetryDetails;null==c||c.endWorkflow("new item upload",{details:e,pageName:o});const p={eventType:"other",pageName:o,category:s,label:s,details:d};"url"===d?(p.attribute=e,(null==i?void 0:i.length)>0&&(p.action="customParams"),"WMS"===e&&(p.count=null==a?void 0:a.count)):t&&(p.attribute=t),null==c||c.logEvent(p)}const p=()=>{const{telemetry:e}=r.c;null==e||e.logEvent({eventType:"other",pageName:"my content",category:"content page drag drop",label:"content"}),l.u.telemetryDetails="drag drop"};function g(){var e,t;const i=r.c.telemetry,{title:l,folder:s,categories:c,tags:d,snippet:p}=a.i,{initialTitle:g,initialFolders:h}=n.a,m=!s||s.title===s.id,u=!!h.map((e=>null==e?void 0:e.id)).find((e=>e===(null==s?void 0:s.id))),f={eventType:"other",pageName:o,category:"new item item info",label:l===g?"default title":"title changed",action:(null==p?void 0:p.length)>0?"summary":"no summary",count:null!==(e=null==d?void 0:d.length)&&void 0!==e?e:0,number:null!==(t=null==c?void 0:c.length)&&void 0!==t?t:0};f.details=u?m?"root folder":"custom folder":"new folder",null==i||i.logEvent(f)}},76418:(e,t,i)=>{i.d(t,{a:()=>s,c:()=>o,g:()=>a,i:()=>n,r:()=>l});var r=i(91102);function a(e){return function(e){return null==e?void 0:e.replace(/&#10;&#13;|&#10;|&#13;|\r\n|\r|\n/g,"<br>")}(function(e){return null==e?void 0:e.replace(/(?:\r)/g,"&#10;").replace(/(?:\n)/g,"&#13;")}(function(e){return null==e?void 0:e.replace(/(https?:\/\/[^\s]+)/g,(e=>`<a href="${e}" target="_blank">${e}</a>`))}(function(e){return null==e?void 0:e.replace(/(?:&#10;)/g,"\r").replace(/(?:&#13;)/g,"\n")}(e))))}function n(e){return e.replace(/\$\{startSup\}/g,"<sup>").replace(/\$\{endSup\}/g,"</sup>")}function l(e,t,i){return e.replace(/\$\{startLink\}/g,`<calcite-link label="${i}" href="${t}" target="_blank">`).replace(/\$\{endLink\}/g,"</calcite-link>")}function s(e){return e.replace(/\$\{startStrong\}/g,"<strong>").replace(/\$\{endStrong\}/g,"</strong>")}function o(e){return(0,r.s)((null==e?void 0:e.trim())||"").replace(/[!*+\-&|()[\]{}^~?:"\\]/g,"\\$&")}},96813:(e,t,i)=>{i.d(t,{a:()=>s,r:()=>l});var r=i(76776),a=i(1391),n=i(19832);function l(){a.d.reset(),r.a.reset()}const s=()=>{if(a.a.existingItem||"register"===n.u.workflow)return;a.d.reset();const e=r.i.folder;r.a.reset(),r.i.folder=e}}}]);