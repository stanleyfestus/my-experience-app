/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-7900af.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-7900af"],{66839:(e,t,s)=>{s.r(t),s.d(t,{arcgis_sketch_actions_popover:()=>l,arcgis_sketch_features:()=>y});var i=s(20536),o=s(10699),n=s(98034),c=s(37568),a=s(58151),r=s(91616);s(99004),s(91102),s(73807),s(34752);const h=(0,o.c)({strings:null,snappingOptions:null,snappingSessionStorageIds:null}).state,l=class{constructor(e){(0,i.r)(this,e),this.arcgisSketchActionsBulkEdit=(0,i.c)(this,"arcgisSketchActionsBulkEdit",7),this.arcgisSketchActionsBulkDuplicate=(0,i.c)(this,"arcgisSketchActionsBulkDuplicate",7),this.arcgisSketchActionsCopyToNewSketchLayer=(0,i.c)(this,"arcgisSketchActionsCopyToNewSketchLayer",7),this.arcgisSketchActionsBulkDelete=(0,i.c)(this,"arcgisSketchActionsBulkDelete",7),this.arcgisSketchActionsPopoverClose=(0,i.c)(this,"arcgisSketchActionsPopoverClose",7),this.referenceElement=void 0,this.selectedGraphics=void 0}async componentWillLoad(){this.strings=h.strings}async setFocus(){setTimeout((()=>{var e;return null===(e=this.editNode)||void 0===e?void 0:e.setFocus()}),300)}render(){var e;const{strings:t}=this;return(null===(e=this.selectedGraphics)||void 0===e?void 0:e.length)?(0,i.h)(i.H,null,(0,i.h)("calcite-popover",{class:"js-app-flyout",placement:"leading-start",offsetDistance:10,offsetSkidding:80,pointerDisabled:!0,label:t.edit,triggerDisabled:!0,referenceElement:this.referenceElement,open:!0,onCalcitePopoverClose:()=>this.arcgisSketchActionsPopoverClose.emit()},(0,i.h)("calcite-panel",{heading:t.actions},(0,i.h)("calcite-action",{label:t.edit,text:t.edit,textEnabled:!0,onClick:()=>this.arcgisSketchActionsBulkEdit.emit({graphics:this.selectedGraphics}),ref:e=>this.editNode=e}),(0,i.h)("calcite-action",{label:t.duplicate,text:t.duplicate,textEnabled:!0,onClick:()=>this.arcgisSketchActionsBulkDuplicate.emit()}),(0,i.h)("calcite-action",{label:t.copyToNewSketchLayer,text:t.copyToNewSketchLayer,textEnabled:!0,onClick:()=>this.arcgisSketchActionsCopyToNewSketchLayer.emit()}),(0,i.h)("calcite-action",{label:t.delete,text:t.delete,textEnabled:!0,onClick:()=>this.arcgisSketchActionsBulkDelete.emit()})))):null}get hostElement(){return(0,i.d)(this)}};function d(e){var t,s;switch(null===(t=null==e?void 0:e.geometry)||void 0===t?void 0:t.type){case"point":return"text"===(null===(s=null==e?void 0:e.symbol)||void 0===s?void 0:s.type)?"text":"point";case"polyline":return"polyline";default:return"polygon"}}async function p(e,t,s,i){const o=function(e){if(e)return(0,a.a)(e.webmap,!0)||(0,a.a)(e.current,!0)||null;return null}(e)||{enabled:!0,selfEnabled:!0,featureEnabled:!0,featureSourcesIds:[t.id]};return new i({enabled:o.enabled,selfEnabled:o.selfEnabled,featureEnabled:o.featureEnabled,featureSources:await u(s,o.featureSourcesIds)})}async function u(e,t){const s=await async function(e){const[t]=await(0,n.l)(["esri/core/CollectionFlattener"]),{map:s}=e,{allLayers:i}=s,o=new t({getCollections:()=>[i],getChildrenFunction:e=>"layers"in e?e.layers:"sublayers"in e?e.sublayers:null,itemFilterFunction:e=>!e.isTable});return[...new Set(o.toArray())]}(e);return s.filter((e=>t.includes(e.id))).map((e=>({layer:e,enabled:!0})))}class g{constructor(e,t,s,i,o){this.mapNotesLayer=e,this.mapView=t,this.sketchViewModelPoint=new s({layer:this.mapNotesLayer.pointLayer,view:this.mapView,updateOnGraphicClick:!1,snappingOptions:i}),this.sketchViewModelPoint.on("update",(e=>o(e))),this.sketchViewModelLine=new s({layer:this.mapNotesLayer.polylineLayer,view:this.mapView,updateOnGraphicClick:!1,snappingOptions:i}),this.sketchViewModelLine.on("update",(e=>o(e))),this.sketchViewModelPolygon=new s({layer:this.mapNotesLayer.polygonLayer,view:this.mapView,updateOnGraphicClick:!1,snappingOptions:i}),this.sketchViewModelPolygon.on("update",(e=>o(e))),this.sketchViewModelText=new s({layer:this.mapNotesLayer.textLayer,view:this.mapView,updateOnGraphicClick:!1,snappingOptions:i}),this.sketchViewModelText.on("update",(e=>o(e)))}duplicate(){this.duplicatePoint(),this.duplicateLine(),this.duplicatePolygon(),this.duplicateText()}delete(){this.deletePoint(),this.deleteLine(),this.deletePolygon(),this.deleteText()}cancel(){this.cancelPoint(),this.cancelLine(),this.cancelPolygon(),this.cancelText()}destroy(){this.destroyPoint(),this.destroyLine(),this.destroyPolygon(),this.destroyText()}updatePoint(e){this.sketchViewModelPoint.update(e)}duplicatePoint(){this.sketchViewModelPoint.duplicate()}deletePoint(){this.sketchViewModelPoint.delete()}cancelPoint(){this.sketchViewModelPoint.cancel()}destroyPoint(){this.sketchViewModelPoint.destroy()}updateLine(e){this.sketchViewModelLine.update(e)}duplicateLine(){this.sketchViewModelLine.duplicate()}deleteLine(){this.sketchViewModelLine.delete()}cancelLine(){this.sketchViewModelLine.cancel()}destroyLine(){this.sketchViewModelLine.destroy()}updatePolygon(e){this.sketchViewModelPolygon.update(e)}duplicatePolygon(){this.sketchViewModelPolygon.duplicate()}deletePolygon(){this.sketchViewModelPolygon.delete()}cancelPolygon(){this.sketchViewModelPolygon.cancel()}destroyPolygon(){this.sketchViewModelPolygon.destroy()}updateText(e){this.sketchViewModelText.update(e)}duplicateText(){this.sketchViewModelText.duplicate()}deleteText(){this.sketchViewModelText.delete()}cancelText(){this.sketchViewModelText.cancel()}destroyText(){this.sketchViewModelText.destroy()}}const y=class{constructor(e){(0,i.r)(this,e),this.arcgisSketchFeaturesUpdated=(0,i.c)(this,"arcgisSketchFeaturesUpdated",7),this.arcgisSketchFeaturesAddSketch=(0,i.c)(this,"arcgisSketchFeaturesAddSketch",7),this.arcgisSketchFeaturesEditFeatures=(0,i.c)(this,"arcgisSketchFeaturesEditFeatures",7),this.arcgisSketchFeaturesCopyToNewSketchLayer=(0,i.c)(this,"arcgisSketchFeaturesCopyToNewSketchLayer",7),this.renderingSymbolPreviews=!1,this.listItemNodes=[],this.graphicsSelectionHandles=[],this.graphicsUpdateHandles=[],this.selectedGraphics=[],this.duplicatedGraphicIndices=[],this.freezeGraphicsListOrder=!1,this.activeSVMCount=0,this.onGraphicUpdate=e=>{if(this.listItemNodes=this.listItemNodes.slice(0,this.graphics.length),"start"===e.state)if(this.freezeGraphicsListOrder||this.activeSVMCount)this.listItemNodes.forEach(((e,t)=>this.listItemNodes[t].selected=(0,r.i)(this.selectedGraphics.find((e=>e.index===t))))),this.freezeGraphicsListOrder=!1,this.activeSVMCount-=1;else{let t=!1;this.selectedGraphics=[],this.graphics.forEach(((s,i)=>{t||JSON.stringify(s.toJSON())!==JSON.stringify(e.graphics[0].toJSON())?this.listItemNodes[i]&&(this.listItemNodes[i].selected=!1):(t=!0,this.selectedGraphics.push({index:i,graphic:s}),this.listItemNodes[i]&&(this.listItemNodes[i].selected=!0),this.addActionsPopover())}))}"complete"===e.state&&this.arcgisSketchFeaturesUpdated.emit()},this.layer=void 0,this.mapView=void 0,this.showAddSketch=!0,this.showEditFeature=!0,this.snappingSessionStorageIds=void 0,this.open=!0,this.graphics=void 0}sketchUpdatedHandler(e){e.stopPropagation(),(0,i.f)(this.hostElement)}async setFocus(){this.addFeatureButtonNode.setFocus()}async done(){var e;(null===(e=this.snappingSessionStorageIds)||void 0===e?void 0:e.current)&&function(e,t){const s=[...new Set([...e.featureSources.filter((e=>e.enabled)).map((e=>e.layer.id))])],i={enabled:e.enabled,selfEnabled:e.selfEnabled,featureEnabled:e.featureEnabled,featureSourcesIds:s};(0,a.b)(t,i,!0)}(this.snappingOptions,this.snappingSessionStorageIds.current),this.sketchFeaturesSVModel.destroy(),this.mapView.popupEnabled=!0}async componentWillLoad(){[this.strings]=await(0,c.g)(this.hostElement),await this.loadAllModules(),this.snappingOptions=await p(this.snappingSessionStorageIds,this.layer,this.mapView,this.SnappingOptions),this.sketchFeaturesSVModel=new g(this.layer,this.mapView,this.SketchViewModel,this.snappingOptions,this.onGraphicUpdate),this.combineMapNotesGraphics(),h.strings=this.strings,h.snappingOptions=this.snappingOptions,h.snappingSessionStorageIds=this.snappingSessionStorageIds}async componentDidRender(){var e,t,s;const{strings:i}=this;if(!this.renderingSymbolPreviews){this.renderingSymbolPreviews=!0;for(let o=0;o<this.graphics.length;o++){const n=this.hostElement.shadowRoot.getElementById(`image-${o}`);n.textContent="",await this.symbolUtils.renderPreviewHTML(this.graphics[o].symbol,Object.assign({node:n,scale:!0,maxSize:20,size:{width:20,height:"polyline"===this.graphics[o].geometry.type?6:20}},"text"===(null===(e=this.graphics[o].symbol)||void 0===e?void 0:e.type)&&{overrideText:(null===(s=null===(t=this.graphics[o].symbol)||void 0===t?void 0:t.text)||void 0===s?void 0:s[0])||i.textPreview}))}this.renderingSymbolPreviews=!1}}componentDidLoad(){this.watchForChangesToMapNotesLayer(),this.watchForGraphicSelectionOnClick()}componentDidUpdate(){this.duplicatedGraphicIndices.length&&(this.listItemNodes.forEach(((e,t)=>this.listItemNodes[t].selected=this.duplicatedGraphicIndices.includes(t))),this.selectedGraphics=[],this.listItemNodes.forEach(((e,t)=>{e.selected&&this.selectedGraphics.push({index:t,graphic:this.graphics[t]})})),this.duplicatedGraphicIndices=[])}disconnectedCallback(){var e;this.graphicsSelectionHandles.forEach((e=>null==e?void 0:e.remove())),this.graphicsUpdateHandles.forEach((e=>null==e?void 0:e.remove())),null===(e=this.hitTestHandle)||void 0===e||e.remove(),this.unselectAllGraphics(),this.sketchFeaturesSVModel.cancel(),this.sketchFeaturesSVModel.destroy()}render(){const{strings:e,graphics:t,selectedGraphics:s,showAddSketch:o,open:n}=this;return this.listItemNodes=[],(0,i.h)(i.H,{key:"5a29bc07c7e4f51c0f69841d0a881900244b8820"},(0,i.h)("calcite-block",{key:"c0d20422aa16641ae8caaf376159d450ab36c629",ref:e=>this.blockNode=e,heading:e.sketches,open:n,collapsible:!0,onCalciteBlockOpen:()=>{s.length&&this.addActionsPopover()},onCalciteBlockClose:()=>this.removeActionsPopover()},(0,i.h)("calcite-list",{key:"c23736355e2955b200e06d6f239e131224316183",selectionMode:"multiple"},t.map(((e,t)=>this.renderPickListItem(e,t)))),o?(0,i.h)("calcite-button",{ref:e=>this.addFeatureButtonNode=e,iconStart:"pencil-mark",appearance:"transparent",width:"full",onClick:()=>{const{layer:e}=this;this.removeActionsPopover(),this.unselectAllGraphics(),this.sketchFeaturesSVModel.cancel(),this.arcgisSketchFeaturesAddSketch.emit({layer:e})}},e.addSketch):null))}renderPickListItem(e,t){var s;const{strings:o,showEditFeature:n}=this;return(0,i.h)("calcite-list-item",{id:`graphic-${t}`,label:(null===(s=null==e?void 0:e.attributes)||void 0===s?void 0:s.title)||this.getStringFromType(e),onClick:()=>this.handleFeatureSelectionViaList(),onKeyDown:e=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),e.stopPropagation(),this.handleFeatureSelectionViaList())},ref:e=>this.listItemNodes.push(e)},(0,i.h)("div",{slot:"content-start",id:`image-${t}`}),n?(0,i.h)("calcite-action",{slot:"actions-end",text:o.edit,title:o.edit,scale:"s",icon:"pencil",onClick:t=>{t.preventDefault(),t.stopPropagation(),this.arcgisSketchFeaturesEditFeatures.emit({features:[e]})}}):null)}async loadAllModules(){[this.reactiveUtils,this.symbolUtils,this.SketchViewModel,this.SnappingOptions,this.drawUtils]=await(0,n.l)(["esri/core/reactiveUtils","esri/symbols/support/symbolUtils","esri/widgets/Sketch/SketchViewModel","esri/views/interactive/snapping/SnappingOptions","esri/views/draw/support/drawUtils"])}combineMapNotesGraphics(){this.graphics=[...this.layer.pointLayer.graphics,...this.layer.polylineLayer.graphics,...this.layer.polygonLayer.graphics,...this.layer.textLayer.graphics]}watchForChangesToMapNotesLayer(){const{reactiveUtils:e}=this;for(const t of[this.layer.pointLayer,this.layer.polylineLayer,this.layer.polygonLayer,this.layer.textLayer]){const s=e.on((()=>t.graphics),"change",(()=>{this.freezeGraphicsListOrder||this.combineMapNotesGraphics()}));this.graphicsSelectionHandles.push(s);const i=e.on((()=>t),"graphic-update",(e=>{"geometry"!==(null==e?void 0:e.property)&&this.combineMapNotesGraphics()}));this.graphicsUpdateHandles.push(i)}}watchForGraphicSelectionOnClick(){var e;null===(e=this.hitTestHandle)||void 0===e||e.remove(),this.hitTestHandle=this.mapView.on("click",(async e=>{var t;const s=(await this.mapView.hitTest(e,{include:this.layer})).results;if(s.length){const e=["point","polyline","polygon"];s.sort((function(t,s){return e.indexOf(t.graphic.geometry.type)-e.indexOf(s.graphic.geometry.type)}));const t=s[0].graphic;this.unselectAllGraphics(!0),this.handleFeatureSelectionViaHitTest(t)}else null===(t=this.listItemNodes)||void 0===t||t.forEach((e=>{e&&(e.selected=!1)})),this.removeActionsPopover(),this.unselectAllGraphics(),this.sketchFeaturesSVModel.cancel(),this.combineMapNotesGraphics(),this.freezeGraphicsListOrder=!1,this.activeSVMCount=0}))}unselectAllGraphics(e){this.selectedGraphics=[],this.listItemNodes.forEach((e=>{e&&(e.selected=!1)})),e||this.removeActionsPopover()}addActionsPopover(){this.sketchActionsPopoverNode||(this.sketchActionsPopoverNode=document.createElement("arcgis-sketch-actions-popover"),this.sketchActionsPopoverNode.referenceElement=this.blockNode,this.sketchActionsPopoverNode.selectedGraphics=this.selectedGraphics,this.sketchActionsPopoverNode.addEventListener("arcgisSketchActionsBulkEdit",(e=>{this.removeActionsPopover(),this.unselectAllGraphics();const t=e.detail.graphics.map((e=>e.graphic));this.arcgisSketchFeaturesEditFeatures.emit({features:t})})),this.sketchActionsPopoverNode.addEventListener("arcgisSketchActionsBulkDuplicate",(()=>{this.sketchFeaturesSVModel.duplicate(),this.offsetDuplicatedFeatures(),this.combineMapNotesGraphics();const e=this.selectedGraphics.map((e=>e.graphic));this.duplicatedGraphicIndices=[],e.forEach((e=>{let t=!1;this.graphics.forEach(((s,i)=>{t||this.duplicatedGraphicIndices.includes(i)||JSON.stringify(s.toJSON())!==JSON.stringify(e.toJSON())||(this.duplicatedGraphicIndices.push(i),t=!0)}))}))})),this.sketchActionsPopoverNode.addEventListener("arcgisSketchActionsCopyToNewSketchLayer",(()=>{const e=this.selectedGraphics.map((e=>e.graphic));this.arcgisSketchFeaturesCopyToNewSketchLayer.emit({features:e})})),this.sketchActionsPopoverNode.addEventListener("arcgisSketchActionsBulkDelete",(()=>{this.removeActionsPopover(),this.unselectAllGraphics(),this.sketchFeaturesSVModel.delete(),this.combineMapNotesGraphics(),this.freezeGraphicsListOrder=!1,this.activeSVMCount=0})),document.body.appendChild(this.sketchActionsPopoverNode)),this.sketchActionsPopoverNode.setFocus()}removeActionsPopover(){var e,t;null===(t=null===(e=this.sketchActionsPopoverNode)||void 0===e?void 0:e.parentElement)||void 0===t||t.removeChild(this.sketchActionsPopoverNode),this.sketchActionsPopoverNode=void 0}getStringFromType(e){var t,s;const{strings:i}=this;switch(null===(t=null==e?void 0:e.geometry)||void 0===t?void 0:t.type){case"point":return"text"===(null===(s=null==e?void 0:e.symbol)||void 0===s?void 0:s.type)?i.text:i.point;case"polyline":return i.line;case"polygon":return i.polygon;default:return i.point}}handleFeatureSelectionViaHitTest(e){var t;switch(this.freezeGraphicsListOrder=!0,this.activeSVMCount=1,e.layer){case this.layer.pointLayer:this.sketchFeaturesSVModel.updatePoint([e]);break;case this.layer.textLayer:this.sketchFeaturesSVModel.updateText([e]);break;case this.layer.polylineLayer:this.sketchFeaturesSVModel.updateLine([e]);break;case this.layer.polygonLayer:this.sketchFeaturesSVModel.updatePolygon([e]);break;default:return}null===(t=this.graphics)||void 0===t||t.forEach(((t,s)=>{if(JSON.stringify(t.toJSON())===JSON.stringify(e.toJSON())){this.selectedGraphics.find((t=>JSON.stringify(t.graphic.toJSON())===JSON.stringify(e.toJSON())))||this.selectedGraphics.push({index:s,graphic:t})}})),this.addActionsPopover()}handleFeatureSelectionViaList(){this.listItemNodes=this.listItemNodes.filter((e=>(0,r.i)(e))),this.listItemNodes.forEach((e=>{const t=parseInt(e.id.split("-")[1]);if(e.selected){this.freezeGraphicsListOrder=!0;this.selectedGraphics.find((e=>e.index===t))||this.selectedGraphics.push({index:t,graphic:this.graphics[t]})}else this.selectedGraphics=this.selectedGraphics.filter((e=>e.index!==t))})),this.selectedGraphics.length?(this.addActionsPopover(),this.sketchActionsPopoverNode.selectedGraphics=this.selectedGraphics,(0,i.f)(this.sketchActionsPopoverNode)):this.removeActionsPopover();let e=[],t=[],s=[],o=[];this.selectedGraphics.forEach((i=>{switch(d(i.graphic)){case"polyline":t=[...t,i.graphic];break;case"polygon":s=[...s,i.graphic];break;case"text":o=[...o,i.graphic];break;default:e=[...e,i.graphic]}}));const n=[e,t,s,o].filter((e=>e.length));this.activeSVMCount=n.length,this.freezeGraphicsListOrder=!0,e.length?this.sketchFeaturesSVModel.updatePoint(e):this.sketchFeaturesSVModel.cancelPoint(),t.length?this.sketchFeaturesSVModel.updateLine(t):this.sketchFeaturesSVModel.cancelLine(),s.length?this.sketchFeaturesSVModel.updatePolygon(s):this.sketchFeaturesSVModel.cancelPolygon(),o.length?this.sketchFeaturesSVModel.updateText(o):this.sketchFeaturesSVModel.cancelText(),this.watchForGraphicSelectionOnClick(),this.selectedGraphics.length||(this.sketchFeaturesSVModel.cancel(),this.combineMapNotesGraphics(),this.freezeGraphicsListOrder=!1,this.activeSVMCount=0)}offsetDuplicatedFeatures(){const{drawUtils:e}=this;this.selectedGraphics.forEach((t=>e.move(t.graphic.geometry,15*this.mapView.resolution,15*this.mapView.resolution)));let t=[],s=[],i=[],o=[];this.selectedGraphics.forEach((e=>{switch(d(e.graphic)){case"polyline":s=[...s,e.graphic];break;case"polygon":i=[...i,e.graphic];break;case"text":o=[...o,e.graphic];break;default:t=[...t,e.graphic]}}));const n=[t,s,i,o].filter((e=>e.length));this.activeSVMCount=n.length,this.freezeGraphicsListOrder=!0,t.length&&this.sketchFeaturesSVModel.updatePoint(t),s.length&&this.sketchFeaturesSVModel.updateLine(s),i.length&&this.sketchFeaturesSVModel.updatePolygon(i),o.length&&this.sketchFeaturesSVModel.updateText(o)}get hostElement(){return(0,i.d)(this)}};y.style=".actions-start-padding{padding:8px}"},91616:(e,t,s)=>{s.d(t,{a:()=>h,b:()=>p,c:()=>o,d:()=>i,e:()=>n,f:()=>l,g:()=>g,h:()=>u,i:()=>c,m:()=>a,t:()=>r,u:()=>d});const i=(e,t)=>{let s,i="idle";const o=(...o)=>new Promise((n=>{switch(i){case"flushed":i="idle",s?(clearTimeout(s),n(e(...o))):n(null);break;case"invoked":clearTimeout(s),i="idle",n(e(...o));break;case"cancelled":clearTimeout(s),i="idle",n(null);break;default:s&&clearTimeout(s),i="pending",s=setTimeout((()=>(i="idle",n(e(...o)))),t)}}));return o.flush=function(...e){return i="flushed",o(...e)},o.invoke=function(...e){return i="invoked",o(...e)},o.cancel=function(...e){return i="cancelled",o(...e)},o.getStatus=function(){return i},o},o=(e,t)=>{let s;return(...i)=>new Promise((o=>{s||(s=setTimeout((()=>{clearTimeout(s),s=void 0,o(e(...i))}),t))}))};function n(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function c(e){return null!=e}async function a(e,t){return await Promise.all([e,r(t)]),e}function r(e){return new Promise((t=>setTimeout(t,e)))}const h=(e,t)=>Object.fromEntries((e||[]).map((e=>{const{key:s,data:i}=t(e);return[s,i]}))),l=(e,t)=>e.length===t.length&&e.reduce(((e,s)=>e&&t.indexOf(s)>-1),!0);function d(e,t){const s=[],i={};return e.forEach((e=>{const o=t(e);null==i[o]&&(i[o]=e,s.push(e))})),s}function p(e){const t={boolean:{},number:{},string:{}},s=[];return e.filter((e=>{let i=typeof e;return i in t?!t[i].hasOwnProperty(e)&&(t[i][e]=!0):!(s.indexOf(e)>=0)&&s.push(e)}))}const u=(e,t)=>[...Array(Math.ceil(e.length/t))].map(((s,i)=>e.slice(t*i,t+t*i))),g=(e,t)=>e.includes(t)},10699:(e,t,s)=>{s.d(t,{c:()=>r});var i=s(20536);const o=e=>!("isConnected"in e)||e.isConnected,n=((e,t)=>{let s;return(...i)=>{s&&clearTimeout(s),s=setTimeout((()=>{s=0,e(...i)}),t)}})((e=>{for(let t of e.keys())e.set(t,e.get(t).filter(o))}),2e3),c=e=>"function"==typeof e?e():e,a=(e,t)=>{const s=e.indexOf(t);s>=0&&(e[s]=e[e.length-1],e.length--)},r=(e,t)=>{const s=((e,t=(e,t)=>e!==t)=>{const s=c(e);let i=new Map(Object.entries(null!=s?s:{}));const o={dispose:[],get:[],set:[],reset:[]},n=()=>{var t;i=new Map(Object.entries(null!==(t=c(e))&&void 0!==t?t:{})),o.reset.forEach((e=>e()))},r=e=>(o.get.forEach((t=>t(e))),i.get(e)),h=(e,s)=>{const n=i.get(e);t(s,n,e)&&(i.set(e,s),o.set.forEach((t=>t(e,s,n))))},l="undefined"==typeof Proxy?{}:new Proxy(s,{get:(e,t)=>r(t),ownKeys:e=>Array.from(i.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,t)=>i.has(t),set:(e,t,s)=>(h(t,s),!0)}),d=(e,t)=>(o[e].push(t),()=>{a(o[e],t)});return{state:l,get:r,set:h,on:d,onChange:(t,s)=>{const i=d("set",((e,i)=>{e===t&&s(i)})),o=d("reset",(()=>s(c(e)[t])));return()=>{i(),o()}},use:(...e)=>{const t=e.reduce(((e,t)=>(t.set&&e.push(d("set",t.set)),t.get&&e.push(d("get",t.get)),t.reset&&e.push(d("reset",t.reset)),t.dispose&&e.push(d("dispose",t.dispose)),e)),[]);return()=>t.forEach((e=>e()))},dispose:()=>{o.dispose.forEach((e=>e())),n()},reset:n,forceUpdate:e=>{const t=i.get(e);o.set.forEach((s=>s(e,t,t)))}}})(e,t);return s.use((()=>{if("function"!=typeof i.a)return{};const e=new Map;return{dispose:()=>e.clear(),get:t=>{const s=(0,i.a)();s&&((e,t,s)=>{const i=e.get(t);i?i.includes(s)||i.push(s):e.set(t,[s])})(e,t,s)},set:t=>{const s=e.get(t);s&&e.set(t,s.filter(i.f)),n(e)},reset:()=>{e.forEach((e=>e.forEach(i.f))),n(e)}}})()),s}},58151:(e,t,s)=>{s.d(t,{a:()=>l,b:()=>h,c:()=>d,d:()=>n,e:()=>o,g:()=>a,r:()=>r,s:()=>c,u:()=>p});var i=s(91616);function o(e,t,s,i){!function(e,t,s){s=s||{};let i=null==s?void 0:s.expires;if("number"==typeof i){const e=new Date,t=24*i*60*60*1e3;e.setTime(Date.now()+t),i=s.expires=e}"string"!=typeof i&&(null==i?void 0:i.toUTCString)&&(s.expires=i.toUTCString());let o,n=`${e}=${encodeURIComponent(t)}`;for(o in s){n+=`; ${o}`;const e=s[o];!0!==e&&(n+=`=${e}`)}document.cookie=n}(e,i?JSON.stringify(t):t,s)}function n(e,t){const s=function(e){const t=document.cookie,s=new RegExp(`(?:^|; )${(0,i.e)(e)}=([^;]*)`),o=t.match(s);return o?decodeURIComponent(o[1]):void 0}(e);return s&&t?JSON.parse(s):s}function c(e,t,s){window.localStorage.setItem(e,s?JSON.stringify(t):t)}function a(e,t){const s=window.localStorage.getItem(e);return s&&t?JSON.parse(s):s}function r(e){window.localStorage.removeItem(e)}function h(e,t,s){window.sessionStorage.setItem(e,s?JSON.stringify(t):t)}function l(e,t){const s=window.sessionStorage.getItem(e);return s&&t?JSON.parse(s):s}function d(e){window.sessionStorage.removeItem(e)}function p(e,t,s){const i=new Date(t);i.setFullYear(t.getFullYear()+1),o(e,s,{expires:i}),s?c(e,"true",!1):r(e)}}}]);