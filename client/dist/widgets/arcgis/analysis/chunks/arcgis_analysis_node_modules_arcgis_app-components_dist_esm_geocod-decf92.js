/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_geocod-decf92.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_geocod-decf92"],{10493:(e,i,n)=>{n.d(i,{a:()=>d,b:()=>y,c:()=>t,d:()=>m,e:()=>s,f:()=>v,g:()=>c,i:()=>S});var a=n(91616),r=n(68537),l=n(1391),o=n(16808);const t={WORLD:"World",EU:"Europe",AD:"Andorra",AE:"United Arab Emirates",AF:"Afghanistan",AG:"Antigua and Barbuda",AI:"Anguilla",AL:"Albania",AM:"Armenia",AO:"Angola",AQ:"Antarctica",AR:"Argentina",AS:"American Samoa",AT:"Austria",AU:"Australia",AW:"Aruba",AZ:"Azerbaijan",BA:"Bosnia and Herzegovina",BB:"Barbados",BD:"Bangladesh",BE:"Belgium",BF:"Burkina Faso",BG:"Bulgaria",BH:"Bahrain",BI:"Burundi",BJ:"Benin",BL:"Saint Barth\xe9lemy",BM:"Bermuda",BN:"Brunei Darussalam",BO:"Bolivia, Plurinational State of",BQ:"Bonaire, Sint Eustatius and Saba",BR:"Brazil",BS:"Bahamas",BT:"Bhutan",BV:"Bouvet Island",BW:"Botswana",BY:"Belarus",BZ:"Belize",CA:"Canada",CD:"Congo, the Democratic Republic of the",CF:"Central African Republic",CG:"Congo",CH:"Switzerland",CI:"C\xf4te d'Ivoire",CK:"Cook Islands",CL:"Chile",CM:"Cameroon",CN:"China",CO:"Colombia",CR:"Costa Rica",CU:"Cuba",CV:"Cape Verde",CW:"Cura\xe7ao",CY:"Cyprus",CZ:"Czech Republic",DE:"Germany",DJ:"Djibouti",DK:"Denmark",DM:"Dominica",DO:"Dominican Republic",DZ:"Algeria",EC:"Ecuador",EE:"Estonia",EG:"Egypt",EH:"Western Sahara",ER:"Eritrea",ES:"Spain",ET:"Ethiopia",FI:"Finland",FJ:"Fiji",FK:"Falkland Islands (Malvinas)",FM:"Micronesia, Federated States of",FO:"Faroe Islands",FR:"France",GA:"Gabon",GB:"United Kingdom",GD:"Grenada",GE:"Georgia",GF:"French Guiana",GG:"Guernsey",GH:"Ghana",GI:"Gibraltar",GL:"Greenland",GM:"Gambia",GN:"Guinea",GP:"Guadeloupe",GQ:"Equatorial Guinea",GR:"Greece",GS:"South Georgia and the South Sandwich Islands",GT:"Guatemala",GW:"Guinea-Bissau",GY:"Guyana",HK:"Hong Kong",HM:"Heard Island and McDonald Islands",HN:"Honduras",HR:"Croatia",HT:"Haiti",HU:"Hungary",ID:"Indonesia",IE:"Ireland",IL:"Israel",IM:"Isle of Man",IN:"India",IO:"British Indian Ocean Territory",IQ:"Iraq",IR:"Iran, Islamic Republic of",IS:"Iceland",IT:"Italy",JE:"Jersey",JM:"Jamaica",JO:"Jordan",JP:"Japan",KE:"Kenya",KG:"Kyrgyzstan",KH:"Cambodia",KI:"Kiribati",KM:"Comoros",KN:"Saint Kitts and Nevis",KP:"Korea, Democratic People's Republic of",KR:"Korea, Republic of",KW:"Kuwait",KY:"Cayman Islands",KZ:"Kazakhstan",LA:"Lao People's Democratic Republic",LB:"Lebanon",LC:"Saint Lucia",LI:"Liechtenstein",LK:"Sri Lanka",LR:"Liberia",LS:"Lesotho",LT:"Lithuania",LU:"Luxembourg",LV:"Latvia",LY:"Libya",MA:"Morocco",MC:"Monaco",MD:"Moldova, Republic of",ME:"Montenegro",MF:"Saint Martin (French part)",MG:"Madagascar",MH:"Marshall Islands",MK:"Macedonia, the former Yugoslav Republic of",ML:"Mali",MM:"Myanmar",MN:"Mongolia",MO:"Macao",MP:"Northern Mariana Islands",MQ:"Martinique",MR:"Mauritania",MS:"Montserrat",MT:"Malta",MU:"Mauritius",MV:"Maldives",MW:"Malawi",MX:"Mexico",MY:"Malaysia",MZ:"Mozambique",NA:"Namibia",NC:"New Caledonia",NE:"Niger",NG:"Nigeria",NI:"Nicaragua",NL:"Netherlands",NO:"Norway",NP:"Nepal",NR:"Nauru",NU:"Niue",NZ:"New Zealand",OM:"Oman",PA:"Panama",PE:"Peru",PF:"French Polynesia",PG:"Papua New Guinea",PH:"Philippines",PK:"Pakistan",PL:"Poland",PM:"Saint Pierre and Miquelon",PN:"Pitcairn",PS:"Palestine, State of",PT:"Portugal",PW:"Palau",PY:"Paraguay",QA:"Qatar",RE:"R\xe9union",RO:"Romania",RS:"Serbia",RU:"Russian Federation",RW:"Rwanda",SA:"Saudi Arabia",SB:"Solomon Islands",SC:"Seychelles",SD:"Sudan",SE:"Sweden",SG:"Singapore",SH:"Saint Helena, Ascension and Tristan da Cunha",SI:"Slovenia",SJ:"Svalbard and Jan Mayen",SK:"Slovakia",SL:"Sierra Leone",SM:"San Marino",SN:"Senegal",SO:"Somalia",SR:"Suriname",SS:"South Sudan",ST:"Sao Tome and Principe",SV:"El Salvador",SX:"Sint Maarten (Dutch part)",SY:"Syrian Arab Republic",SZ:"Swaziland",TC:"Turks and Caicos Islands",TD:"Chad",TF:"French Southern Territories",TG:"Togo",TH:"Thailand",TJ:"Tajikistan",TK:"Tokelau",TL:"Timor-Leste",TM:"Turkmenistan",TN:"Tunisia",TO:"Tonga",TR:"Turkey",TT:"Trinidad and Tobago",TV:"Tuvalu",TW:"Taiwan, Province of China",TZ:"Tanzania, United Republic of",UA:"Ukraine",UG:"Uganda",UM:"United States Minor Outlying Islands",US:"United States",UY:"Uruguay",UZ:"Uzbekistan",VA:"Holy See (Vatican City State)",VC:"Saint Vincent and the Grenadines",VE:"Venezuela, Bolivarian Republic of",VG:"Virgin Islands, British",VN:"Vietnam",VU:"Vanuatu",WF:"Wallis and Futuna",WS:"Samoa",XK:"Republic of Kosovo",YE:"Yemen",YT:"Mayotte",ZA:"South Africa",ZM:"Zambia",ZW:"Zimbabwe"};function s(e,i){const{sourceCountry:n,locationType:a,analyzeResults:r,candidateFieldsType:o,coordinateFieldType:t,type:s,standardizedFieldNames:c,selectedFields:v}=l.a,p=d(),g=i?l.a.backupLayerFields:Object.values(v),S=Object.assign(Object.assign({locationType:a||"address",sourceCountry:n,candidateFieldsType:o},"coordinates"===a&&function(e,i){return e.reduce(((e,n)=>{switch(n.locationType){case"latitude":e.latitudeFieldName=n.name,i||(e.coordinateFieldType="LatitudeAndLongitude");break;case"longitude":e.longitudeFieldName=n.name,i||(e.coordinateFieldType="LatitudeAndLongitude");break;case"mgrs":"MGRS"===i&&(e.coordinateFieldName=n.name,i||(e.coordinateFieldType="MGRS"));break;case"usng":"USNG"===i&&(e.coordinateFieldName=n.name,i||(e.coordinateFieldType="USNG"))}return e}),{coordinateFieldType:i})}(g,t)),"address"===a&&{addressFields:u(g,e,c)});let m;return m=i||"Microsoft Excel"!==s?Object.assign(Object.assign({},r.publishParameters),S):Object.assign(Object.assign({},r.publishParameters),{layers:[Object.assign(Object.assign({},p),S)],hasStaticData:!0,maxRecordCount:2e3,layerInfo:{capabilities:"Query"}}),"coordinates"===a&&["USNG","MGRS"].includes(t)&&(delete m.latitudeFieldName,delete m.longitudeFieldName),m}function u(e,i,n){if("Single"===i){const i=Object.keys(n)[0]||"Address",a=e.find((({locationType:e})=>e===i||"address"===(null==e?void 0:e.toLowerCase())));return{[i]:(null==a?void 0:a.name)||""}}return e.reduce(((e,i)=>("unknown"!==i.locationType&&(e[i.locationType]=i.name),e)),{})}function d(e,i){var n,a,r,o,t,s,u;const{type:d,analyzeResults:c=e,selectedSheet:v}=l.a,p=null==c?void 0:c.publishParameters;if(i)return"CSV"===d?null==p?void 0:p.layerInfo:null!==(a=null===(n=null==p?void 0:p.layers)||void 0===n?void 0:n[v])&&void 0!==a?a:null===(r=null==p?void 0:p.layers)||void 0===r?void 0:r[0];switch(d){case"Microsoft Excel":return null!==(t=null===(o=null==p?void 0:p.layers)||void 0===o?void 0:o[v])&&void 0!==t?t:null===(s=null==p?void 0:p.layers)||void 0===s?void 0:s[0];case"GeoJson":return null===(u=null==p?void 0:p.layers)||void 0===u?void 0:u[0];default:return null==p?void 0:p.layerInfo}}function c(e){switch(e){case"esriFieldTypeBigInteger":return["esriFieldTypeBigInteger","esriFieldTypeDouble","esriFieldTypeString"];case"esriFieldTypeSmallInteger":return["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString"];case"esriFieldTypeInteger":return["esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString"];case"esriFieldTypeSingle":return["esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString"];case"esriFieldTypeDouble":return["esriFieldTypeDouble","esriFieldTypeString"];case"esriFieldTypeDate":return["esriFieldTypeDate","esriFieldTypeString"];case"esriFieldTypeDateOnly":return["esriFieldTypeDateOnly","esriFieldTypeString"];case"esriFieldTypeTimeOnly":return["esriFieldTypeTimeOnly","esriFieldTypeString"];case"esriFieldTypeTimestampOffset":return["esriFieldTypeTimestampOffset","esriFieldTypeString"];case"esriFieldTypeOID":return["esriFieldTypeOID","esriFieldTypeInteger","esriFieldTypeString"];default:return["esriFieldTypeString"]}}function v(e,i){const n=null==i?void 0:i.filter((i=>i.url===e));return(null==n?void 0:n.length)?n.shift():null}function p(e=""){return!!(null==e?void 0:e.match(/(arcgis\.com.*\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi))}function g(e=""){return!!(null==e?void 0:e.match(/(arcgis\.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi))}function S(e){return!!e&&(g(e)||p(e))}function m(e,i,n){let a=n||e||i||"";return a="wo"===(null==a?void 0:a.toLowerCase())?"world":a,t[a.toUpperCase()]||(a="world"),a}function y(e,i,n){var l;let t=(0,o.m)(i)&&(0,o.o)(i);const s=function(e,i,n){return e.filter((e=>{const r=Object.assign({},e),l=g(null==r?void 0:r.url),o=p(null==r?void 0:r.url);return(l||o)&&((0,a.i)(r.name)?"Esri World Geocoder"!==r.name&&"ArcGIS Geocoding service"!==r.name||(r.name="ArcGIS Geocoding Service"):r.name="ArcGIS World Geocoding Service"),(!l||!n&&!i)&&((0,a.i)(r.batch)?!!r.batch:l||o)}))}(e,!t,n),u=null===(l=s[0])||void 0===l?void 0:l.url;if(null==s?void 0:s.length){t=!0;const e=v(s[0].url,s),a=g(null==e?void 0:e.url),l=p(null==e?void 0:e.url),o=a||l;let d=o||!!e.batch;return{allowGeocode:(!(0,r.g)(i)||t)&&(!n&&d||n&&(!a||l)&&d),isAgoWorldGeocodeServer:a,isServiceProxyAgoWorldGeocodeServer:l,isWorldGeocodeServer:o,geocodeServers:s,geocodeServiceUrl:u}}return null}},16808:(e,i,n)=>{n.d(i,{A:()=>G,B:()=>E,a:()=>O,b:()=>b,c:()=>N,d:()=>v,e:()=>p,f:()=>h,g:()=>T,h:()=>g,i:()=>y,j:()=>F,k:()=>M,l:()=>A,m:()=>d,n:()=>P,o:()=>B,p:()=>c,q:()=>k,r:()=>L,s:()=>U,t:()=>w,u:()=>D,v:()=>H,w:()=>R,x:()=>K,y:()=>s,z:()=>I});var a=n(79717),r=n(38973),l=n(68537),o=n(44090),t=n(25972);async function s(){return new Promise((async e=>{const{portal:i}=o.c;if(null==i?void 0:i.isPortal){const n=i.helperServices.geocode,a=await function(e){const{config:i,portal:n}=o.c;return new Promise((async(a,r)=>{const l=e.filter((e=>u(e.url,n))).filter((e=>e.isEsriBatchGeocoder))[0];if(l){const e=l.url.split("/servers/")[1].split("/rest/services/")[0],n=`${i.restBaseUrl}/content/items/${e}`;try{a((await(0,t.r)(n)).url)}catch(e){r(e)}}else r("No world geocoder configured")}))}(n);e(a)}else{const n=function(e){const i=null==e?void 0:e.portalHostname;if(-1!==i.indexOf("dev"))return"dev";if(-1!==i.indexOf("qa"))return"qa";return""}(i);e(`https://geocode${n}.arcgis.com/arcgis/rest/services/World/GeocodeServer`)}}))}function u(e="",i){var n;const a=i.isPortal,r=e.toLowerCase(),l=r.indexOf("/geocodeserver")>-1&&r.indexOf("/rest/services/")>-1,o=a&&r.indexOf(null===(n=i.portalHostname)||void 0===n?void 0:n.toLowerCase())>-1,t=!a&&r.indexOf("utility")&&r.indexOf(".arcgis.com")>-1;return l&&(o||t)}function d(e){return(0,l.b)(e)||(null==e?void 0:e.privileges.includes("portal:user:createItem"))}function c(e){return(0,l.b)(e)||(null==e?void 0:e.privileges.includes("portal:user:receiveItems"))}async function v(e,i){return!(0,l.b)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishFeatures"))&&await(0,a.i)(i,e)}const p=e=>!(0,l.b)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishServerServices"));async function g(e,i){return!(0,l.b)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishTiles"))&&await(0,a.i)(i,e)}const S=async(e,i)=>{var n;return await g(e,i)&&(!i.isPortal||!!i.supports3DTilesServices||!!(null===(n=i.sourceJSON)||void 0===n?void 0:n.supports3DTilesServices))};function m(e){return!(0,l.b)(e)&&!0}function y(e){var i;return!(0,l.b)(e)&&(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:publisher:publishScenes"))}const b=e=>!(0,l.b)(e);function T(e,i,n){var a,r;const l=!!(null===(r=null===(a=i.helperServices)||void 0===a?void 0:a.rasterAnalytics)||void 0===r?void 0:r.url),o=function(e,i,n){var a;return(null===(a=null==e?void 0:e.privileges)||void 0===a?void 0:a.includes("portal:publisher:publishDynamicImagery"))&&(i.isPortal||f(n))}(e,i,n),t=i.isPortal?o:o||function(e,i,n){var a;return(null===(a=null==e?void 0:e.privileges)||void 0===a?void 0:a.includes("portal:publisher:publishTiledImagery"))&&!i.isPortal&&f(n)}(e,i,n);return l&&t}function f(e){return null==e?void 0:e.some((e=>{var i;return null===(i=e.entitlements)||void 0===i?void 0:i.some((e=>"image"===e.toLowerCase()))}))}async function h(e){var i;const{userLicensedItems:n}=await(0,t.r)(`${null!==(i=e.restUrl)&&void 0!==i?i:e.portalUrl}/community/self?returnUserLicensedItems=true`);return n}function F(e,i){var n,a;const o=null===(n=i.helperServices)||void 0===n?void 0:n.geocode.some((({url:e})=>u(e,i))),t=null!==(a=null==e?void 0:e.privileges)&&void 0!==a?a:[];return!(0,l.b)(e)&&o&&(!i.isPortal||!(0,r.i)(i)&&t.includes("portal:user:viewOrgItems")&&t.includes("portal:user:createItem"))}const M=e=>!(0,l.b)(e);function G(e){return null==e?void 0:e.privileges.includes("premium:publisher:createAdvancedNotebooks")}function I(e){return null==e?void 0:e.privileges.includes("premium:publisher:createNotebooks")}function C(e){return["portal:publisher:createDataPipelines","portal:user:createItem","portal:publisher:publishFeatures"].every((i=>{var n;return null===(n=e.privileges)||void 0===n?void 0:n.includes(i)}))}function A(e,i){var n,a,r;return i.isPortal?!!(null===(n=null==e?void 0:e.privileges)||void 0===n?void 0:n.includes("portal:publisher:registerDataStores")):C(e)&&("1"===(null===(a=null==e?void 0:e.sourceJSON)||void 0===a?void 0:a.level)||"2"===(null===(r=null==e?void 0:e.sourceJSON)||void 0===r?void 0:r.level))}const P=e=>!(0,l.b)(e)&&C(e);function B(e){return!(0,l.b)(e)&&(null==e?void 0:e.privileges.includes("premium:user:geocode"))}const w=e=>null==e?void 0:e.privileges.includes("premium:user:geocode:stored");async function N(e,i,n){return!i.isPortal&&await v(e,i)&&await async function(e,i,n){return!(0,l.b)(e)&&!!i.supportsHostedServices&&d(e)&&(await g(e,i)||await v(e,i)||y(e)||m(e)||T(e,i,n))}(e,i,n)}async function O(e,i,n){switch(i){case"CSV":case"GeoJson":case"Microsoft Excel":case"Shapefile":case"File Geodatabase":case"Photos with Locations":return v(e,n);case"Tile Package":return g(e,n);case"3DTiles Package":return S(e,n);case"Vector Tile Package":return m(e);case"Scene Package":return y(e);case"Service Definition":return async function(e,i){return await v(e,i)&&await g(e,i)}(e,n);default:return!0}}function L(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:manageCredits"))}function D(e,i){var n,a,r;return(0,l.e)(e)||L(e)||!!((null!==(n=null==e?void 0:e.assignedCredits)&&void 0!==n?n:null===(a=null==e?void 0:e.sourceJSON)||void 0===a?void 0:a.assignedCredits)>-1&&(null===(r=null==i?void 0:i.portalProperties)||void 0===r?void 0:r.showCreditsOnProfile))}const R=e=>!1;function E(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewGroups"))}function U(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewUsers"))}function k(e){return(0,l.d)(e)||U(e)&&function(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:viewItems"))}(e)&&(function(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:updateItems"))}(e)||function(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:deleteItems"))}(e)||function(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:reassignItems"))}(e))}function K(e){return e.map((e=>`portal:app:access:item:${e.id}`))}const H=e=>e.privileges.includes("portal:user:assignPrivilegesToApps")}}]);