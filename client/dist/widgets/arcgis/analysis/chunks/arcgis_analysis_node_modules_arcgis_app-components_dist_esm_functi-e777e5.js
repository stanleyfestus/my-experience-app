/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_functi-e777e5.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_functi-e777e5"],{91616:(e,t,n)=>{n.d(t,{a:()=>u,b:()=>f,c:()=>i,d:()=>s,e:()=>r,f:()=>c,g:()=>g,h:()=>p,i:()=>o,m:()=>a,t:()=>l,u:()=>d});const s=(e,t)=>{let n,s="idle";const i=(...i)=>new Promise((r=>{switch(s){case"flushed":s="idle",n?(clearTimeout(n),r(e(...i))):r(null);break;case"invoked":clearTimeout(n),s="idle",r(e(...i));break;case"cancelled":clearTimeout(n),s="idle",r(null);break;default:n&&clearTimeout(n),s="pending",n=setTimeout((()=>(s="idle",r(e(...i)))),t)}}));return i.flush=function(...e){return s="flushed",i(...e)},i.invoke=function(...e){return s="invoked",i(...e)},i.cancel=function(...e){return s="cancelled",i(...e)},i.getStatus=function(){return s},i},i=(e,t)=>{let n;return(...s)=>new Promise((i=>{n||(n=setTimeout((()=>{clearTimeout(n),n=void 0,i(e(...s))}),t))}))};function r(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function o(e){return null!=e}async function a(e,t){return await Promise.all([e,l(t)]),e}function l(e){return new Promise((t=>setTimeout(t,e)))}const u=(e,t)=>Object.fromEntries((e||[]).map((e=>{const{key:n,data:s}=t(e);return[n,s]}))),c=(e,t)=>e.length===t.length&&e.reduce(((e,n)=>e&&t.indexOf(n)>-1),!0);function d(e,t){const n=[],s={};return e.forEach((e=>{const i=t(e);null==s[i]&&(s[i]=e,n.push(e))})),n}function f(e){const t={boolean:{},number:{},string:{}},n=[];return e.filter((e=>{let s=typeof e;return s in t?!t[s].hasOwnProperty(e)&&(t[s][e]=!0):!(n.indexOf(e)>=0)&&n.push(e)}))}const p=(e,t)=>[...Array(Math.ceil(e.length/t))].map(((n,s)=>e.slice(t*s,t+t*s))),g=(e,t)=>e.includes(t)},10699:(e,t,n)=>{n.d(t,{c:()=>l});var s=n(20536);const i=e=>!("isConnected"in e)||e.isConnected,r=((e,t)=>{let n;return(...s)=>{n&&clearTimeout(n),n=setTimeout((()=>{n=0,e(...s)}),t)}})((e=>{for(let t of e.keys())e.set(t,e.get(t).filter(i))}),2e3),o=e=>"function"==typeof e?e():e,a=(e,t)=>{const n=e.indexOf(t);n>=0&&(e[n]=e[e.length-1],e.length--)},l=(e,t)=>{const n=((e,t=(e,t)=>e!==t)=>{const n=o(e);let s=new Map(Object.entries(null!=n?n:{}));const i={dispose:[],get:[],set:[],reset:[]},r=()=>{var t;s=new Map(Object.entries(null!==(t=o(e))&&void 0!==t?t:{})),i.reset.forEach((e=>e()))},l=e=>(i.get.forEach((t=>t(e))),s.get(e)),u=(e,n)=>{const r=s.get(e);t(n,r,e)&&(s.set(e,n),i.set.forEach((t=>t(e,n,r))))},c="undefined"==typeof Proxy?{}:new Proxy(n,{get:(e,t)=>l(t),ownKeys:e=>Array.from(s.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,t)=>s.has(t),set:(e,t,n)=>(u(t,n),!0)}),d=(e,t)=>(i[e].push(t),()=>{a(i[e],t)});return{state:c,get:l,set:u,on:d,onChange:(t,n)=>{const s=d("set",((e,s)=>{e===t&&n(s)})),i=d("reset",(()=>n(o(e)[t])));return()=>{s(),i()}},use:(...e)=>{const t=e.reduce(((e,t)=>(t.set&&e.push(d("set",t.set)),t.get&&e.push(d("get",t.get)),t.reset&&e.push(d("reset",t.reset)),t.dispose&&e.push(d("dispose",t.dispose)),e)),[]);return()=>t.forEach((e=>e()))},dispose:()=>{i.dispose.forEach((e=>e())),r()},reset:r,forceUpdate:e=>{const t=s.get(e);i.set.forEach((n=>n(e,t,t)))}}})(e,t);return n.use((()=>{if("function"!=typeof s.a)return{};const e=new Map;return{dispose:()=>e.clear(),get:t=>{const n=(0,s.a)();n&&((e,t,n)=>{const s=e.get(t);s?s.includes(n)||s.push(n):e.set(t,[n])})(e,t,n)},set:t=>{const n=e.get(t);n&&e.set(t,n.filter(s.f)),r(e)},reset:()=>{e.forEach((e=>e.forEach(s.f))),r(e)}}})()),n}},23709:(e,t,n)=>{n.d(t,{g:()=>o,p:()=>a});var s=n(98034),i=n(74129),r=n(98072);const o=(e,t)=>async function(e,t){return new Promise(((n,o)=>{(0,s.l)(["esri/popup/FieldInfo"]).then((async([s])=>{var o,a,l;const u=[],c=new Map(null===(o=null==t?void 0:t.fieldInfos)||void 0===o?void 0:o.map((e=>[e.fieldName,e]))),d=await(0,r.e)(e);(null==d?void 0:d.size)&&(c.forEach((e=>{d.has(e.fieldName)&&(u.push(e),d.delete(e.fieldName))})),d.forEach((e=>{if(-1===["geometry"].indexOf(e.type)){const t=new s;t.fieldName=e.name,t.label=e.alias,t.visible=!1,u.push(t)}})),d.clear()),(null==t?void 0:t.expressionInfos)&&(null===(a=t.expressionInfos)||void 0===a||a.forEach((e=>{const t=`${i.f.expression}${e.name}`;if(c.has(t))u.push(c.get(t));else{const e=new s;e.fieldName=t,e.visible=!1,u.push(e)}}))),null===(l=null==t?void 0:t.fieldInfos)||void 0===l||l.forEach((e=>{-1!==e.fieldName.indexOf(i.f.relationship)&&u.push(e)})),n(u)}),(e=>{o(e)}))}))}(e,t),a=async(e,t,n)=>{var s,o;e.closePopup();let a=null;const u=(0,r.d)(t);if(u!==i.s.scene||(null==t?void 0:t.associatedLayer))return a=await l(e,t,n,u),a?("dockEnabled"in e.popup&&(e.popup.dockEnabled=!0),e.openPopup({features:[a],location:(null===(o=null===(s=a.geometry)||void 0===s?void 0:s.extent)||void 0===o?void 0:o.center)||a.geometry}),a):void 0},l=async(e,t,n,o)=>{var a,l,d,f,p,g,v,h,y,m,w;try{let b,E=null;if(o===i.s.ogcFeature){E=await e.whenLayerView(t);const[n]=await(0,s.l)(["esri/core/reactiveUtils"]);await n.whenOnce((()=>!E.updating))}else if(o===i.s.stream){E=await e.whenLayerView(t);const[n]=await(0,s.l)(["esri/core/reactiveUtils"]);await n.whenOnce((()=>!E.updating))}else E=t;if(o===i.s.imageryTile){const n=e.allLayerViews.find((e=>e.layer.id===t.id)),s=await n.fetchPopupFeatures(t.fullExtent.center);return null==s?void 0:s[0]}if(o===i.s.mapImage&&t.layer.version>=10.5&&!(null===(l=null===(a=t.layer.capabilities)||void 0===a?void 0:a.operations)||void 0===l?void 0:l.supportsQuery)&&(null===(f=null===(d=t.layer.capabilities)||void 0===d?void 0:d.operations)||void 0===f?void 0:f.supportsIdentify)){const n=await(0,r.h)(t,e);return n&&(n.sourceLayer=t),n}const x="isTable"in t&&t.isTable,k=E.createQuery();x||(k.geometry=e.center,k.distance=e.resolution),k.outFields=["*"];const T=await E.queryFeatures(k,{signal:n.signal});if(0===(null===(p=null==T?void 0:T.features)||void 0===p?void 0:p.length)){const s=E.createQuery();s.geometry=e.extent,s.outFields=["*"];const r=await E.queryFeatures(s,{signal:n.signal});if((null===(g=null==r?void 0:r.features)||void 0===g?void 0:g.length)>0)b=await c(r,e,t);else{const s=E.createQuery();s.where=E.definitionExpression||"1=1",s.outFields=["*"],((null===(h=null===(v=t.sourceJSON)||void 0===v?void 0:v.advancedQueryCapabilities)||void 0===h?void 0:h.supportsPagination)||o===i.s.ogcFeature)&&(s.start=0,s.num=1),s.outSpatialReference=e.spatialReference,b=null===(m=null===(y=await E.queryFeatures(s,{signal:n.signal}))||void 0===y?void 0:y.features)||void 0===m?void 0:m[0]}}else b=null===(w=null==T?void 0:T.features)||void 0===w?void 0:w[0];return b&&o===i.s.imagery&&(b=await u(t,b)),b}catch(e){console.log(e)}},u=async(e,t)=>{var n;const s=e.createQuery();s.outFields=["*"].concat(e.rasterFields.map((e=>e.name)).filter((e=>e.startsWith("Raster.")))),s.geometry=t.geometry,s.outSpatialReference=t.geometry.spatialReference;const i=await e.queryVisibleRasters(s,{returnTopmostRaster:!0,returnDomainValues:!0});return null!==(n=null==i?void 0:i[0])&&void 0!==n?n:t},c=async(e,t,n)=>{const i=await(0,r.j)(n);if("point"===i){let n=null;for(let s=0;s<e.features.length;s++){const i=e.features[s].geometry.distance(t.center);(0===s||(null==n?void 0:n[1])>i)&&(n=[e.features[s],i])}return n[0]}if("polyline"===i){let n=null;const[i]=await(0,s.l)(["esri/geometry/geometryEngine"]);for(let s=0;s<e.features.length;s++){const r=i.nearestVertex(e.features[s].geometry,t.center).distance;(0===s||(null==n?void 0:n[1])>r)&&(n=[e.features[s],r])}return n[0]}if("polygon"===i||"imagery"===(0,r.d)(n)){let n=null;for(let s=0;s<e.features.length;s++){const i=e.features[s].geometry.centroid.distance(t.center);(0===s||(null==n?void 0:n[1])>i)&&(n=[e.features[s],i])}return n[0]}return e.features[0]}}}]);