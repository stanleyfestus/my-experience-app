/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-5b7e87.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-5b7e87"],{99004:(e,t,a)=>{a.d(t,{c:()=>i,g:()=>r});var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==a.g?a.g:"undefined"!=typeof self?self:{};function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},87257:(e,t,a)=>{a.r(t),a.d(t,{arcgis_new_item_pages_data_store_browser:()=>l});var i=a(20536),r=a(76776),s=a(41011),n=a(1391),o=a(19832),c=a(5152);a(10699),a(38973),a(44090),a(85781),a(25972),a(98034),a(99004),a(369),a(66301),a(16093),a(76246),a(34472),a(64243),a(27995),a(90079),a(4291),a(67914),a(30554),a(78231),a(79717),a(90230),a(40883),a(86980),a(59377),a(68537);const l=class{constructor(e){(0,i.r)(this,e),this.newItemUpdatePage=(0,i.c)(this,"newItemUpdatePage",7),this.dataStoreContentType="tile-layer",this.selectedDataset=null,this.datastoreContents=void 0,this.originalDatasets=void 0,this.sortedDatasets=void 0,this.displayDatasets=void 0,this.pathHistories=[],this.cachedData={},this.error=null,this.loading=void 0,this.sortCriteria={direction:null,criteria:null},this.userTileLayerTypeSelection=void 0,this.itemsPerPage=void 0,this.totalItems=void 0,this.paginationData=void 0}async componentWillLoad(){if(this.dataStoreContentType="tileLayer"===n.a.newItemMode?"tile-layer":"scene-layer",this.dataStoreName=n.a.dataStoreName,this.i18n=o.u.i18n.dataStore,this.pathHistories=["/"],this.datastoreContents=n.a.datastoreContents,this.datastoreContents.path.length>1){const e=this.datastoreContents.path.split("/").filter((e=>e));this.pathHistories=this.pathHistories.concat(e)}this.originalDatasets=[...n.a.datastoreContents.children],this.sortedDatasets=[...this.originalDatasets],this.selectedDataset=n.a.dataset,this.cachedData=n.a.dataStoreCachedData,this.serverId=n.a.serverId}toggleSort(e){const{sortCriteria:t}=this,a=null==e?null:t.criteria!==e?"desc":"desc"===t.direction?"asc":null;if(null===e||null===a)return this.sortCriteria={criteria:null,direction:null},void(this.sortedDatasets=this.originalDatasets);this.sortCriteria={criteria:e,direction:a};const i="asc"===a?1:-1;this.sortedDatasets=[...this.sortedDatasets].sort((function(t,a){const r=t[e].toLowerCase(),s=a[e].toLowerCase();return r.localeCompare(s)*i}))}async exploreFolder(e,t){var a;this.loading=!0;if(!(null!=this.cachedData[e])){const i=await(0,s.g)(n.a.dataStoreId,e,t,this.serverId);if("failToListDataStoreContents"===(null===(a=i.error)||void 0===a?void 0:a.code))return this.loading=!1,void(this.error="failToListDataStoreContents");this.cachedData=Object.assign(Object.assign({},this.cachedData),{[e]:i.result})}const i=this.cachedData[e];this.pathHistories="/"===e?["/"]:e.split("/"),this.datastoreContents=this.filterContentsByUserSelection(i),this.originalDatasets=[...this.datastoreContents.children],this.loading=!1}filterContentsByUserSelection(e){const t=this.dataStoreContentType,a=n.a.tileLayerPublishType;return e.children?Object.assign(Object.assign({},e),{children:e.children.filter((e=>{const i=e.type;let r="folder"===i;return"tile-layer"===t?r||(r="tiles"===a&&"cacheDataset"===i||"3dTiles"===a&&"3DTilesDataset"===i||"vectorTiles"===a&&"vectorCacheDataset"===i):"scene-layer"===t&&(r||(r="extractedScenePackage"===i||"i3sRestCache"===i)),r}))}):Object.assign(Object.assign({},e),{children:[]})}renderErrorItem(){const{i18n:e,error:t,loading:a}=this;let r="",s="";if(t){const a=e.error;"failToListDataStoreContents"===t?(r=a.listing.heading,s=a.listing.description):(r=a.noDatasetErrorHeading,s=a.noDatasetErrorDescription)}return(0,i.h)("arcgis-new-item-alert",{heading:r,description:s,active:null!==t&&!a,onAlertDismiss:()=>{this.error=null}})}renderHeaderItem(e){const{i18n:t,sortCriteria:a}=this,{criteria:r,direction:s}=a;return(0,i.h)("div",{onClick:()=>this.toggleSort(e),class:{"data-set__header":!0,"data-set__header--selected":r===e&&null!=s}},"name"===e&&(0,i.h)("calcite-icon",{scale:"s",icon:"circle",class:"hidden-icon header-icon"}),"name"===e?t.fileName:t.fileType,(0,i.h)("calcite-icon",{class:{"blue-calcite-icon sort-icon":!0,"hidden-icon":r!==e||!s},scale:"s",icon:"asc"===s?"caret-up":"caret-down"}))}onDatastoreContentsChange(){this.toggleSort(null)}onSortedDataSetsChange(){this.calculatePagination(1)}calculatePagination(e){const{sortedDatasets:t}=this,a=t.length;this.totalItems=a;const i=Math.min(a,5),r=e-1,s=Math.min(r+i,a)-1;this.itemsPerPage=i,this.displayDatasets=t.slice(r,s+1),this.paginationData={startIndex:r,endIndex:s}}handleNext(){const e=this.selectedDataset;if(!e)return void(this.error="noDataSetSelected");let t;switch(n.a.dataset=e,n.a.dataStoreCachedId=n.a.dataStoreId,n.a.serverId=this.serverId,n.a.datastoreContents=this.datastoreContents,n.a.dataStoreCachedData=this.cachedData,r.i.title=e.name.split(".")[0],e.type){case"vectorCacheDataset":t="Vector Tile Service";break;case"i3sRestCache":case"extractedScenePackage":t="Scene Service";break;case"cacheDataset":t="Map Service";break;case"3DTilesDataset":t="3DTiles Service",r.i.title=(0,c.g)(n.a.dataset.path)}n.a.type=t,this.newItemUpdatePage.emit("serverList")}render(){const{i18n:e,loading:t,displayDatasets:a,originalDatasets:r,pathHistories:s,paginationData:n,dataStoreName:o}=this;return(0,i.h)(i.H,{key:"38bb95ab3d596e4cc4658fde27bfe8a097c4c49c"},(0,i.h)("div",{key:"a9093c19c83c8137e19456dbc5915429ca750bf7",class:"inner-container"},t?(0,i.h)("calcite-loader",{label:"datastore-loader",text:e.processing}):(0,i.h)(i.F,null,(0,i.h)("div",{class:"content-wrapper"},(0,i.h)("div",{class:"header-text"},e.header),(0,i.h)("div",{class:"breadcrumb-container"},s.map(((e,t)=>{const a=t===s.length-1,r=0===t,n=r?"/":s.slice(0,t+1).join("/");return(0,i.h)("div",{class:"breadcrumb__item",key:`${e}_${t}`},(0,i.h)("span",{onClick:a?void 0:()=>this.exploreFolder(n,"folder")},(0,i.h)("span",{class:{"breadcrumb--inactive":!a}},r?o:e)),!a&&(0,i.h)("calcite-icon",{icon:"chevron-right",scale:"s"}))}))),(0,i.h)("div",{class:"pagination-text"},a.length>0&&e.paginationRange.replace("${start}",`${n.startIndex+1}`).replace("${end}",`${n.endIndex+1}`).replace("${total}",`${r.length}`)),(0,i.h)("div",{class:"data-set-container"},(0,i.h)("div",{class:"data-set__item"},this.renderHeaderItem("name"),this.renderHeaderItem("type")),(0,i.h)("calcite-radio-button-group",{name:"file-group",onCalciteRadioButtonGroupChange:e=>{this.selectedDataset=e.target.selectedItem.value},layout:"vertical"},(0,i.h)("ul",{class:"item-list"},a.length>0?a.map((e=>{var t;const{name:a,path:r,type:n}=e,o="folder"===n;return(0,i.h)("li",{key:`dataSet--item__${r}`,class:"data-set__item",onClick:()=>{o&&this.exploreFolder(e.path,"folder")}},(0,i.h)("calcite-label",{layout:"inline",class:"description"},o?(0,i.h)("calcite-icon",{icon:"folder",scale:"s",class:"blue-calcite-icon"}):(0,i.h)("div",{class:"dataset"},(0,i.h)("calcite-radio-button",{value:e,checked:r===(null===(t=this.selectedDataset)||void 0===t?void 0:t.path)}),"3DTilesDataset"===n&&(0,i.h)("calcite-icon",{icon:"tiled-imagery-layer",scale:"s",class:"blue-calcite-icon tiles3D-dataset"})),"3DTilesDataset"===n?s[s.length-1]:a),(0,i.h)("p",{class:"item--title"},n))})):(0,i.h)("li",{class:"data-set__item"},(0,i.h)("calcite-label",{layout:"inline"},(0,i.h)("calcite-icon",{icon:"exclamation-mark-triangle",scale:"s"}),e.emptyFolder)))))),this.itemsPerPage>0&&(0,i.h)("div",{class:"pagination-wrapper"},(0,i.h)("calcite-pagination",{startItem:n.startIndex+1,totalItems:this.totalItems,pageSize:this.itemsPerPage,onCalcitePaginationChange:e=>{const t=e.target;this.calculatePagination(t.startItem)}})))),this.renderErrorItem())}get el(){return(0,i.d)(this)}static get watchers(){return{originalDatasets:["onDatastoreContentsChange"],sortedDatasets:["onSortedDataSetsChange"]}}};l.style=":host{background-color:var(--calcite-color-foreground-2);padding:0px}.inner-container{display:flex;flex-direction:column;padding:1.5rem;height:calc(100% - 65px)}.content-wrapper{flex-grow:1}.breadcrumb-container{margin-top:1rem;margin-bottom:1rem;font-weight:500;display:flex}.breadcrumb__item{display:flex;align-items:center;font-size:0.875rem;color:var(--calcite-color-text-2);margin-right:0.5rem}.breadcrumb--inactive{cursor:pointer;margin-right:0.5rem;color:#00619b}.pagination-text{font-size:0.75rem;font-weight:500;margin-top:1rem;margin-bottom:1rem;color:#757575}.data-set-container{background-color:var(--calcite-color-foreground-1)}.data-set__header{border-width:0px;border-bottom-width:2px;border-style:solid;font-size:0.875rem;padding:0px;border-color:transparent;width:-moz-fit-content;width:fit-content}.data-set__header:hover{cursor:pointer}.data-set__header--selected{border-color:#0079c1}.header-icon{margin-right:0.5rem}.item-list{margin-left:0px;margin-inline-start:0px;padding-inline-start:0px}.data-set__item{display:grid;grid-template-columns:repeat(2, minmax(0, 1fr));padding-left:0.75rem;padding-right:0.75rem;padding-top:0.5rem;padding-bottom:0.5rem}.data-set__item:hover{cursor:pointer}.data-set__item>.item--title{font-size:0.875rem;margin-top:0px;margin-bottom:0px}.blue-calcite-icon{--calcite-ui-icon-color:var(--calcite-color-brand)}.sort-icon{margin-left:6rem}.hidden-icon{visibility:hidden}.pagination-wrapper{display:flex;justify-content:center;margin-top:auto;padding-left:0.5rem;padding-right:0.5rem}.header-text{font-size:1rem;font-weight:500;color:var(--calcite-color-text-1)}.dataset{display:flex}.tiles3D-dataset{margin-left:0.5rem}"},98034:(e,t,a)=>{a.d(t,{e:()=>s,l:()=>n});var i,r=a(99004),s={exports:{}};i=s.exports,r.c,function(e){var t={Promise:"undefined"!=typeof window?window.Promise:void 0},a="4.24",i="next";function r(e){if(e.toLowerCase()===i)return i;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function s(e){return void 0===e&&(e=a),"https://js.arcgis.com/".concat(e,"/")}function n(e){void 0===e&&(e=a);var t=s(e),n=r(e);if(n!==i&&3===n.major){var o=n.minor<=10?"js/":"";return"".concat(t).concat(o,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}function o(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}function c(e,t){if(t){var a=document.querySelector(t);a.parentNode.insertBefore(e,a)}else document.head.appendChild(e)}function l(e){return document.querySelector('link[href*="'.concat(e,'"]'))}function d(e){return!e||r(e)?n(e):e}function h(e,t){var a=d(e),i=l(a);return i||c(i=o(a),t),i}var u={};function p(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}function g(e,t,a){var i;a&&(i=m(e,a));var r=function(){t(e),e.removeEventListener("load",r,!1),i&&e.removeEventListener("error",i,!1)};e.addEventListener("load",r,!1)}function m(e,t){var a=function(i){t(i.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",a,!1)};return e.addEventListener("error",a,!1),a}function f(e){void 0===e&&(e={}),u=e}function v(){return document.querySelector("script[data-esri-loader]")}function b(){var e=window.require;return e&&e.on}function y(e){void 0===e&&(e={});var a={};[u,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t])}));var i=a.version,r=a.url||s(i);return new t.Promise((function(e,t){var s=v();if(s){var n=s.getAttribute("src");n!==r?t(new Error("The ArcGIS API for JavaScript is already loaded (".concat(n,")."))):b()?e(s):g(s,e,t)}else if(b())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var o=a.css;o&&h(!0===o?i:o,a.insertCssBefore),g(s=p(r),(function(){s.setAttribute("data-esri-loader","loaded"),e(s)}),t),document.body.appendChild(s)}}))}function D(e){return new t.Promise((function(t,a){var i=window.require.on("error",a);window.require(e,(function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];i.remove(),t(e)}))}))}function C(e,t){if(void 0===t&&(t={}),b())return D(e);var a=v(),i=a&&a.getAttribute("src");return!t.url&&i&&(t.url=i),y(t).then((function(){return D(e)}))}e.utils=t,e.loadModules=C,e.getScript=v,e.isLoaded=b,e.loadScript=y,e.setDefaultOptions=f,e.loadCss=h,Object.defineProperty(e,"__esModule",{value:!0})}(i);const n=async(e,t)=>(await s.exports.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))}}]);