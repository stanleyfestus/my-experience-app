/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-20bfff.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-20bfff"],{1391:(e,i,n)=>{n.d(i,{a:()=>t,b:()=>l,c:()=>o,d:()=>r});const r=(0,n(10699).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),t=r.state,o=r.state,l=r.state},44069:(e,i,n)=>{n.d(i,{A:()=>t,a:()=>o,b:()=>l,c:()=>a,d:()=>s,u:()=>r});const r=["esriFieldTypeOID","esriFieldTypeGlobalID"],t={"file geodatabase":"filegeodatabase",shapefile:"shapefile",geojson:"geojson",csv:"CSV","microsoft excel":"excel",geopackage:"geoPackage","service definition":"serviceDefinition"},o={Shapefile:"shapefile","File Geodatabase":"fileGeodatabase",CSV:"csv","Microsoft Excel":"excel",GeoJson:"geojson",GeoPackage:"geoPackage"},l={csv:"CSV",excel:"Microsoft Excel",shapefile:"Shapefile",fgdb:"File Geodatabase",geojson:"GeoJson",googlesheets:"Microsoft Excel"},s=["zip","csv","xls","xlsx","geojson","gpkg","json","sd"],a=["zip","csv","xls","xlsx"]},51716:(e,i,n)=>{n.r(i),n.d(i,{arcgis_new_item_pages_append_key_pair_select:()=>d});var r=n(20536),t=n(1391),o=n(44069),l=n(19832),s=n(94881),a=n(44090);n(10699),n(10493),n(68537),n(78231),n(98034),n(99004),n(38973),n(16808),n(79717),n(25972),n(369),n(34472);const d=class{constructor(e){(0,r.r)(this,e),this.newItemUpdatePage=(0,r.c)(this,"newItemUpdatePage",7),this.newItemPrevPage=(0,r.c)(this,"newItemPrevPage",7),this.workflowComplete=(0,r.c)(this,"workflowComplete",7),this.handleTimezoneChange=e=>{this.selectedTimezone=e.detail},this.handleKeyPairChange=e=>{this.selectedKeyPair=e.detail},this.i18n=void 0,this.selectedKeyPair=void 0,this.selectedTimezone=void 0,this.oidFieldSelected=!1,this.error=void 0}handleNext(){if("add"!==t.a.addAppendSelectOption){if(Object.values(this.selectedKeyPair).includes(this.noneString))return void(this.error={title:l.u.i18n.error,message:this.i18n.noKeyPair});t.a.uidPair=this.selectedKeyPair}t.a.timezone=this.selectedTimezone,this.newItemUpdatePage.emit("appendMatchFields")}async handlePrev(e){var i;(null===(i=t.a.analyzeResults.publishParameters.layers)||void 0===i?void 0:i.length)>1||(e.preventDefault(),t.a.uidPair=null,this.newItemPrevPage.emit())}componentWillLoad(){var e;const{existingItem:i,dateFieldsTimeReference:n,originalFileName:r}=t.a;this.i18n=l.u.i18n.appendKeyValuePair,this.serviceLayer=t.a.sourceDataLayer,this.selectedTimezone=null!==(e=t.a.timezone)&&void 0!==e?e:"UTC",this.noneString=`<${l.u.i18n.appendKeyValuePair.noneField}>`,this.timezoneDescription=this.i18n.timezoneDescription.replace("${uploadedFileName}",r).replace("${featureLayerName}",i.title).replace("${featureLayerTimezone}",n.timeZone),this.findKeyPairs()}findKeyPairs(){var e;const i={},n=this.serviceLayer.fields||[],r=this.serviceLayer.indexes||[],l=t.a.backupLayerFields;r.filter((e=>null==e?void 0:e.isUnique)).forEach((e=>{var i;((null===(i=e.fields)||void 0===i?void 0:i.split(","))||[]).forEach((e=>{n.some((i=>i.name.toLowerCase()===e.toLowerCase()&&(i.isUniqueIndex=!0,!0)))}))})),this.serviceUIDFields=n.filter((e=>e.type&&o.u.includes(e.type)||e.isUniqueIndex)).sort(((e,i)=>e.name.localeCompare(i.name))),this.serviceUIDFields.forEach((e=>{const n=[];l.forEach((i=>{(0,s.c)(e,i)&&n.push(i.name)})),i[e.name]={name:e.name,type:e.type,idx:0,isUniqueIndex:null==e?void 0:e.isUniqueIndex,possibleMatches:[this.noneString,...n],disabled:!0}})),this.finalKeyPairs=Object.assign({[this.noneString]:{name:this.noneString,type:"None",possibleMatches:[this.noneString]}},i),this.selectedKeyPair=null!==(e=t.a.uidPair)&&void 0!==e?e:this.finalKeyPairs[this.noneString],t.a.serviceUIDFields=this.serviceUIDFields}render(){const{error:e,i18n:i,timezoneDescription:n}=this,{addAppendSelectOption:o,backupLayerFields:l}=t.a,{helpBase:s,helpMap:d}=a.c.config,u="add"===o,c=null==l?void 0:l.some((e=>"esriFieldTypeDate"===e.type)),v=`${s}${d[120004711]}`;return(0,r.h)(r.H,{key:"e66100e94e0e475bbb4b21d345546691ec013367"},!u&&(0,r.h)("arcgis-new-item-append-key-value-pair",{key:"49e545e6d2bf18c89fe51beabbcd4e30b96c1752",class:"key-value-pair",keyPairs:this.finalKeyPairs,onKeyPairChange:this.handleKeyPairChange}),c&&(0,r.h)("calcite-label",{key:"966a4f8a6b6de1c2525181c0b8a927e0aede80fa"},(0,r.h)("div",{key:"6e2d090a7bd5209cdfcaff992ee879e5a348d7e1",class:"timezone-header"},i.timezoneHeader),(0,r.h)("div",{key:"7fd1a793bf8be36c8c7daaa7188c7d677e99f7ee",class:"timezone-wrapper"},(0,r.h)("arcgis-new-item-timezone-dropdown",{key:"815bfb0ffe5d1004ae7da93fbb43f13d095f42db",class:"timezone",onTimezoneChange:this.handleTimezoneChange,defaultTimezone:this.selectedTimezone,subTitle:n}))),(0,r.h)("arcgis-new-item-alert",{key:"d4169193f7dfcf12dc8818fb1f8cf60b6965c5f8",active:"esriFieldTypeOID"===this.selectedKeyPair.type,kind:"warning",heading:i.learnMoreUIDTitle,link:{href:v,title:i.learnMoreUIDLink}}),(0,r.h)("arcgis-new-item-alert",{key:"babf18542e6facfc91f3082ccb3cc3a3cea0b881",heading:null==e?void 0:e.title,description:null==e?void 0:e.message,active:!!e,kind:"danger",onAlertDismiss:()=>this.error=null}))}get el(){return(0,r.d)(this)}};d.style=".timezone-wrapper{background-color:var(--calcite-color-background);padding-left:1rem}.timezone{margin-bottom:0.75rem;margin-inline-end:2.5rem;display:block}.timezone-header{font-size:1rem;font-weight:500;color:var(--calcite-color-text-1)}"},78231:(e,i,n)=>{n.d(i,{a:()=>s,b:()=>l,c:()=>u,d:()=>c,e:()=>v,f:()=>m,g:()=>I,h:()=>h,i:()=>a,j:()=>b,k:()=>P,l:()=>g,m:()=>k,n:()=>w,o:()=>f,p:()=>y,q:()=>p,u:()=>d});var r=n(98034),t=n(38973);function o(e){var i;return!!(null===(i=e.owner)||void 0===i?void 0:i.toLowerCase().includes("esri"))}function l(e){var i;return o(e)&&!!(null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("Requires Credits"))}function s(e){var i;return o(e)&&!!(null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("Requires Subscription"))}function a(e,i){return e.owner===i.username}function d(e,i){return a(e,i)||function(e,i){var n;if(null!=e.isAdmin)return!!e.isAdmin;const r=e.owner,t="admin"===e.itemControl,o=["esri_livingatlas","esri_demographics","esri_boundaries"];if((null===(n=e.portal)||void 0===n?void 0:n.isPortal)&&!a(e,i)&&t&&r.includes("esri_")&&!o.includes(r))return!1;return t}(e,i)}const u=(e,i)=>!!i.orgId&&e.every((e=>e.isOrgItem)),c=(e,i)=>`${(0,t.a)(i)}item.html?id=${e}`,v=(e,i)=>`${(0,t.g)(i)}/content/users/${e}`,p=e=>e.reduce(((e,i)=>(e[i.owner]=e[i.owner]?[...e[i.owner],i.id]:[i.id],e)),{});function f(e){var i;return null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("Spatiotemporal")}function m(e){var i;return null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("View Service")}function h(e){var i;return null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("Hosted Service")}function g(e){var i;return null===(i=e.typeKeywords)||void 0===i?void 0:i.includes("Multi Services View")}function y(e){return(null==e?void 0:e.hasViews)&&!e.sourceSchemaChangesAllowed}async function b(e){var i;const n=null==e?void 0:e.portalItem;if(!n)return Promise.resolve(null);const o=n.portal,[l]=await(0,r.l)(["esri/request"]);if(null==o?void 0:o.user){return l(`${(0,t.g)(o)}community/users/${o.user.username}`,{query:{f:"json",token:null===(i=n.portal.credential)||void 0===i?void 0:i.token},responseType:"json"}).then((e=>{var i,n;const r=null!==(n=null===(i=e.data)||void 0===i?void 0:i.groups)&&void 0!==n?n:[];return Promise.resolve(r)}),(()=>Promise.reject()))}return Promise.resolve(null)}async function P(e){var i;const n=null==e?void 0:e.portalItem;if(!n)return Promise.resolve(null);const o=n.portal,[l]=await(0,r.l)(["esri/request"]);return l(`${(0,t.g)(o)}content/items/${n.id}/groups`,{query:{f:"json",token:null===(i=n.portal.credential)||void 0===i?void 0:i.token},responseType:"json"}).then((e=>{var i,n,r,t,o,l;const s=[...null!==(n=null===(i=e.data)||void 0===i?void 0:i.admin)&&void 0!==n?n:[],...null!==(t=null===(r=e.data)||void 0===r?void 0:r.member)&&void 0!==t?t:[],...null!==(l=null===(o=e.data)||void 0===o?void 0:o.other)&&void 0!==l?l:[]];return Promise.resolve(s)}),(()=>Promise.reject()))}async function w(e,i,{relationshipType:n,direction:o}){const l=`${(0,t.g)(i)}content/items/${e}/relatedItems`,[s]=await(0,r.l)(["esri/request"]);return await s(l,{query:{f:"json",relationshipType:n,direction:o},method:"get",responseType:"json"})}function k(e,i){return null==e?void 0:e.some((e=>null==i?void 0:i.some((i=>e.id===i.id&&e.capabilities.includes("updateitemcontrol")))))}const I=(e,i)=>`${i}/content/items/${e}`},79717:(e,i,n)=>{n.d(i,{a:()=>v,b:()=>u,c:()=>s,d:()=>a,e:()=>p,f:()=>o,g:()=>c,h:()=>l,i:()=>f,q:()=>d});var r=n(25972),t=n(38973);function o(e){var i;return"ArcGISEnterpriseOnKubernetes"===(e.portalDeploymentType||(null===(i=e.sourceJSON)||void 0===i?void 0:i.portalDeploymentType))}function l(e){var i,n;return e.isPortal?"modern"===(null===(n=e.portalProperties)||void 0===n?void 0:n.homePage)||function(e){var i;return e.isPortal&&"modernOnly"===(null===(i=e.portalProperties)||void 0===i?void 0:i.homePage)}(e):"modern"===(null===(i=e.portalProperties)||void 0===i?void 0:i.homePage)||function(e){const i=new Date("June 30, 2020").getTime();return!e.isPortal&&e.created>=i}(e)}async function s(e){try{return{result:await(0,r.f)((()=>(0,r.r)(`${(0,t.g)(e)}portals/self/resources/home.page.json`)),"homePageConfig",e.id)}}catch(e){return{result:void 0}}}async function a(e){return(0,r.f)((()=>(0,r.r)(`${(0,t.g)(e)}portals/self/userDefaultSettings`)),"memberDefaults",e.id)}async function d(e={},i){return(0,r.r)(`${(0,t.g)(i)}/community/groups`,e)}const u=async(e,i)=>{var n;if(!e)return[];const o=`${(0,t.a)(null!==(n=i.restUrl)&&void 0!==n?n:i.portalUrl)}portals/self/servers`,l=await(0,r.f)((()=>(0,r.r)(o)),"selfServers",i.id);return null==l?void 0:l.servers},c=e=>v((0,t.c)(e)),v=e=>{var i;const n=`${(0,t.a)(null!==(i=(0,t.b)(e))&&void 0!==i?i:e)}info`;return(0,r.f)((()=>(0,r.r)(n,{},{addTokenManually:!1})),"portalInfo",n)};async function p(e,i){return!e.isPortal||await f(e,i)}async function f(e,i){if(!i||!e)return!1;if(!e.isPortal)return!0;const{result:n,error:t}=await(0,r.f)((()=>m(e,i)),"isPortalBackedBySDS",e.id);return!t&&n}const m=async(e,i)=>{if(e.isBackedBySDS)return{result:!0};if(!e.isPortal)return{result:!0};try{return{result:!!await h(i,e)}}catch(e){return console.error(e),{error:{code:"unhandledError",message:JSON.stringify(e)},result:!1}}},h=async(e,i)=>{var n;return(null!==(n=await u(e,i))&&void 0!==n?n:[]).filter((e=>e.isHosted))[0]}},68537:(e,i,n)=>{n.d(i,{a:()=>s,b:()=>o,c:()=>l,d:()=>f,e:()=>p,f:()=>v,g:()=>m,h:()=>g,i:()=>d,j:()=>h,k:()=>D,l:()=>a,m:()=>y,n:()=>c,o:()=>K,p:()=>P,q:()=>w,r:()=>S,s:()=>I,t:()=>k,u:()=>T,v:()=>_,w:()=>u,x:()=>x});var r=n(78231);const t=e=>{var i,n,r;return"string"==typeof(null==e?void 0:e.role)&&(null==e?void 0:e.role)?null==e?void 0:e.role:null!==(n=null!==(i=null==e?void 0:e.roleId)&&void 0!==i?i:null==e?void 0:e.id)&&void 0!==n?n:null===(r=null==e?void 0:e.sourceJSON)||void 0===r?void 0:r.id};function o(e){return e&&!e.orgId}function l(e,i){return(0,r.u)(e,i)||"update"===e.itemControl||(0,r.c)([e],i)&&p(i)}function s(e,i){const n=(0,r.c)([e],i),t=(0,r.u)(e,i)||p(i)&&n,o=m(i)&&b(i);return!!(t||n&&o)}const a=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:manageLicenses"))};function d(e){return["Trial Developer","Developer","Developer Subscription"].includes(null==e?void 0:e.type)}function u(e){return["Developer Subscription"].includes(null==e?void 0:e.type)}function c(e){return["Geoanalytics Engine","GeoAnalytics MS Fabric"].includes(null==e?void 0:e.type)}const v=e=>{var i;return null===(i=null==e?void 0:e.options)||void 0===i?void 0:i.includes("Developer")};function p(e){return"org_admin"===t(e)||"account_admin"===t(e)}function f(e){return["org_admin","account_admin"].includes(t(e))&&!(null==e?void 0:e.roleId)}function m(e){return!!(null==e?void 0:e.roleId)&&e.roleId.length>0}function h(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:updateItemCategorySchema"))}function g(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:updateGroups"))}function y(e){var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:assignToGroups"))}const b=e=>{var i;return!!(null===(i=null==e?void 0:e.privileges)||void 0===i?void 0:i.includes("portal:admin:deleteItems"))};function P(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToGroup")}function w(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToOrg")}function k(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToPublic")}function I(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToOrg")}function T(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToPublic")}function S(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToGroup")}function D(e,i,n,r){const t=r&&!["Trial","Trial Press","Trial Developer","Developer Subscription","Evaluation"].includes(r.type),o=((null==i?void 0:i.privileges)||[]).includes("portal:admin:manageCollaborations");return!(!(null==e?void 0:e.collaborationsEnabled)||!i||!p(i)&&!o||!(null==n?void 0:n.isPortal)&&!t)}function x(e){return!!e&&(!m(e)||m(e)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:viewItems")}(e))}const _=({items:e,user:i,portal:n})=>{const t=e[0],o=t.owner;if(n.isPortal&&o!==i.username&&o.includes("esri_")&&!["esri_livingatlas"].includes(o))return!1;const s=(0,r.u)(t,i),a=m(i),d=z(i),u=l(t,i)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:updateItems")}(i)&&!a&&(function(e,i){return!function(e){return!(!e.urlKey||!e.customBaseUrl)||!!e.isPortal}(i)||P(e)||w(e)||!!i.canSharePublic&&k(e)}(i,n)||z(i));return s||u||(0,r.c)(e,i)&&d};function z(e){return S(e)||I(e)||T(e)}function K(e){const i=["portal:user:createItem","portal:user:viewOrgItems","premium:publisher:createNotebooks","portal:publisher:createDataPipelines","features:user:edit","features:user:fullEdit","portal:admin:viewItems","portal:admin:updateItems","portal:admin:deleteItems"];return e.some((e=>i.includes(e)))}},19832:(e,i,n)=>{n.d(i,{a:()=>r,u:()=>t});const r=(0,n(10699).c)({nextText:"next",cancelText:"cancel",workflow:"content",scale:"m",disableScroll:!1,featureFlags:{}}),t=r.state}}]);