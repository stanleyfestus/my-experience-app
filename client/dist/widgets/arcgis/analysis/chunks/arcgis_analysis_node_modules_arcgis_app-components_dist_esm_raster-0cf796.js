/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_raster-0cf796.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_raster-0cf796"],{74024:(o,e,r)=>{r.d(e,{a:()=>C,b:()=>m,c:()=>h,d:()=>y,e:()=>f,f:()=>d,g:()=>u,h:()=>p});r(74129),r(98034);var l=r(37219);let s;const n="polygon";function t(){const{modules:o}=l.s;return[new o.esriColor("#ff4040"),new o.esriColor("#ff8200"),new o.esriColor("#faa83f"),new o.esriColor("#ffd159"),new o.esriColor("#74b566"),new o.esriColor("#008977"),new o.esriColor("#33e3c8"),new o.esriColor("#43abeb"),new o.esriColor("#4c64c9"),new o.esriColor("#9868ed"),new o.esriColor("#b155e6"),new o.esriColor("#db5181"),new o.esriColor("#e03b99"),new o.esriColor("#2b2b2b"),new o.esriColor("#bdbdbd"),new o.esriColor("#ffffff")]}async function a(o){const e=document.createElement("arcgis-symbol-styler");return e.initialSourceId=s,e.hideSvgUploadSymbols=l.s.hideSvgUploadSymbols,e.hideAddStyles=l.s.hideAddStyles,e.style="max-height: max(calc(100vh - 200px), 300px)",e.popoverProps={placement:"bottom-end",offsetDistance:10,offsetSkidding:l.s.isRTL?3:-3,pointerDisabled:"true",popoverWidth:315,refElement:await o.getPopoverRefElement()},e.addEventListener("arcgisSymbolStylerSourceIdChange",(({detail:o})=>s=o)),e}function i(o,e,r){return document.URL.indexOf("debug=true")>-1&&(console.log("symbol",JSON.stringify(e,null,2)),console.log("props",JSON.stringify(Object.assign(Object.assign({},r),{portal:"..."})))),o.edit(e,r)}function c(o,e){const{symbol:r,info:{marker:l,stroke:s,fill:n}}=e.detail;document.URL.indexOf("debug=true")>-1&&(console.log("onStylerEdit - symbol:",JSON.stringify(null==r?void 0:r.toJSON(),null,2)),console.log("onStylerEdit - info.marker:",JSON.stringify(l)),console.log("onStylerEdit - info.stroke:",JSON.stringify(s)),console.log("onStylerEdit - info.fill:",JSON.stringify(n))),o(e)}async function p(o){const{mapView:e,modules:r,portal:s,strings:p}=l.s,u=(0,l.a9)(),{onChange:d,popoverNode:m}=o,f=(0,l.d)(u,"color"),g=await a(m);let y,C;if(f){const o=f.stops.map((o=>o.color)),t=r.colorSchemes.getSchemes({basemapTheme:await r.colorUtils.getBackgroundColorTheme(e),geometryType:n,theme:"high-to-low"});let a=(0,l.ad)(t,0);a=a.filter((o=>{var e;return(null===(e=o.colors)||void 0===e?void 0:e.length)===f.stops.length}));const c=a.map((o=>({stops:o.colors.reverse(),tags:o.scheme.tags,name:o.scheme.name})));y=({detail:o})=>{const e=(0,l.a9)();(0,l.d)(e,"color").stops.reverse().forEach(((e,r)=>{e.color=o.info.fill.color[r]})),d()},C=i(g,(0,l.o)(),{portal:s,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"continuous",open:!0,colorRamps:c}},fill:{color:o.reverse()}}),g.stringOverrides={fillColor:p.styler.color,fillTransparency:p.styler.transparency}}else{const o=t;y=({detail:o})=>{(0,l.a9)().color=o.symbol.color,d()},C=i(g,(0,l.o)(),{portal:s,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",optional:!1,open:!0,suggestedColorsOpen:!0,transparencyOpen:!0,suggestedColors:o}},fill:{color:u.color||o[1]},fillEnabled:!0}),g.stringOverrides={fillColor:p.styler.color,fillTransparency:p.styler.transparency}}g.addEventListener("arcgisSymbolStylerEdit",c.bind(null,y)),m.addStyler(g),await C}async function u(o){const{modules:e,strings:r}=l.s,s=(0,l.a9)(),{onChange:n,popoverNode:t}=o,i=await a(t);o.defaultColors=s.colorRamp?g(s.colorRamp).map((o=>new e.esriColor(o))):null;const c=i.edit(new e.SimpleMarkerSymbol,w(o));i.stringOverrides={fillColor:r.styler.color};i.addEventListener("arcgisSymbolStylerFillChange",(({detail:o})=>{const r=e.esriLang.clone(o.color);(0,l.a9)().colorRamp=h(r.reverse()),n()})),t.addStyler(i),await c}async function d(o){const{modules:e,strings:r}=l.s,s=(0,l.a9)(),{onChange:n,popoverNode:t}=o,i=await a(t);o.defaultColors=s.colorRamp?g(s.colorRamp).map((o=>new e.esriColor(o))):null;const c=i.edit(new e.SimpleMarkerSymbol,w(o));i.stringOverrides={fillColor:r.styler.color};i.addEventListener("arcgisSymbolStylerFillChange",(({detail:o})=>{const r=e.esriLang.clone(o.color);(0,l.a9)().colorRamp=h(r.reverse()),n()})),t.addStyler(i),await c}async function m(o){var e;const{classedSymbolSelectedIdx:r,portal:s,modules:n,strings:p}=l.s,u=(0,l.a9)(),{onChange:d,popoverNode:m}=o,f=(0,l.a)();let g=(null===(e=u.classBreakInfos)||void 0===e?void 0:e.length)?n.esriLang.clone(u.classBreakInfos[r].symbol):(0,l.o)(f);const y="picture-marker"!==g.type&&!!g.color,C=(0,l.ab)(g),h=t();let w;if("simple-fill"===g.type){const o=g;o.outline&&(w={color:o.outline.color||new n.esriColor([0,0,0,.5]),size:o.outline.width,style:o.outline.style})}const v=await a(m),b=i(v,n.esriLang.clone(g),{portal:s,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.ac)(g),suggestedColors:h,parts:{transparency:!1}}},fill:{color:(0,l.Q)(g)},stroke:w,fillEnabled:y,strokeEnabled:C});v.stringOverrides={fillColor:p.styler.color,fillTransparency:p.styler.transparency},v.addEventListener("arcgisSymbolStylerEdit",c.bind(null,(({detail:{symbol:o}})=>{o.outline&&(o.outline.width=0);const e=(0,l.b)(),s=e.classBreakInfos.slice();s[r].symbol=o,e.classBreakInfos=s,d()}))),m.addStyler(v),await b}async function f(o){var e;const{modules:r,strings:s}=l.s,n=(0,l.a9)(),{onChange:t,popoverNode:i}=o;let c=b(n.authoringInfo.colorRamp,n.classBreakInfos.length).map((o=>new r.esriColor(o.slice(1))));n.classBreakInfos&&(c=n.classBreakInfos.map((o=>o.symbol.color)));const p=await a(i);o.defaultColors=((null===(e=n.authoringInfo)||void 0===e?void 0:e.colorRamp)?c:[[0,0,255],[0,255,255],[255,255,0],[255,0,0]]).map((o=>new r.esriColor(o))),k(o.defaultColors);const u=p.edit(new r.SimpleMarkerSymbol,w(o));p.stringOverrides={fillColor:s.styler.color,fillTransparency:s.styler.transparency};p.addEventListener("arcgisSymbolStylerFillChange",(({detail:o})=>{const e=r.esriLang.clone(o.color);let s=(0,l.a9)();const n=r.esriLang.clone(e).reverse();s.classBreakInfos.map(((o,e)=>o.symbol.color=new r.esriColor(n[e])));const a=function(o){var e;const{modules:r}=l.s,s=(0,l.a9)(),n=v(),t=r.esriLang.clone(n);t.forEach((o=>{o.stops=b(h(o.stops),s.classBreakInfos.length).map((o=>new r.esriColor(o.slice(1)))).reverse()}));const a=t.filter((e=>{const l=JSON.stringify(e.stops)===JSON.stringify(o),s=JSON.stringify(r.esriLang.clone(e.stops).reverse())===JSON.stringify(o);return l||s}));if(a.length){return h(null===(e=n.filter((o=>o.name===a[0].name))[0])||void 0===e?void 0:e.stops)}return null}(e);a&&(s.authoringInfo.colorRamp=a),t()})),i.addStyler(p),await u}function g(o){if("multipart"===(null==o?void 0:o.type)){const e=o.colorRamps,r=e.map((o=>o.fromColor));return r.push(e[e.length-1].toColor),r}return[o.fromColor,o.toColor]}async function y(o){var e,r,s,t,i;const{mapView:c,modules:p}=l.s,u=(0,l.a9)(),{onChange:d,popoverNode:m}=o,f=u.uniqueValueInfos,y=await a(m),C=p.typeSchemes.getSchemes({basemap:c.map.basemap,geometryType:(0,l.C)()||n}),v=[],S=(0,l.ad)(C,Math.min(f.length,10)),R=S[0].colors;v.push(...(null==f?void 0:f.length)?u.uniqueValueInfos.map(((o,e)=>(0,l.Q)(o.symbol)||new p.esriColor(R[e%R.length]))):[]);const O=S.map((o=>({stops:o.colors,tags:o.scheme.tags,name:o.scheme.name})));if(!(null===(e=u.authoringInfo)||void 0===e?void 0:e.colorRamp)&&v||!function(o){const{modules:e}=l.s,r=e.rasterColorRampUtils.getColorRampName(o);return!!r}(null===(r=u.authoringInfo)||void 0===r?void 0:r.colorRamp)&&!function(o){if(!(null==o?void 0:o.colorRamps))return!1;const{mapView:e,modules:r}=l.s,s=(0,l.a9)(),t=s.uniqueValueInfos,a=r.typeSchemes.getSchemes({basemap:e.map.basemap,geometryType:(0,l.C)()||n}),i=(0,l.ad)(a,Math.min(t.length,10)),c=i.filter((e=>e.colors.length===o.colorRamps.length+1)),p=[];p.push(o.colorRamps[0].fromColor),o.colorRamps.forEach((o=>{p.push(o.toColor)}));const u=c.filter((o=>{const e=JSON.stringify(o.colors)===JSON.stringify(p),l=JSON.stringify(r.esriLang.clone(o.colors).reverse())===JSON.stringify(p);return e||l}));return u.length>0}(null===(s=u.authoringInfo)||void 0===s?void 0:s.colorRamp))o.defaultColors=v.reverse()||null;else{const e=b(null===(t=u.authoringInfo)||void 0===t?void 0:t.colorRamp,u.uniqueValueInfos.length).map((o=>o.slice(1)));JSON.stringify(e)!==JSON.stringify(v)&&(o.defaultColors=v.reverse()||null)}o.extraColorRamps=O,o.defaultColors||(o.defaultColors=(null===(i=u.authoringInfo)||void 0===i?void 0:i.colorRamp)?g(u.authoringInfo.colorRamp).reverse().map((o=>new p.esriColor(o))):v.reverse()||null),k(o.defaultColors);const I=y.edit(new p.SimpleMarkerSymbol,w(o));y.stringOverrides={fillColor:""};y.addEventListener("arcgisSymbolStylerFillChange",(({detail:o})=>{const e=h(p.esriLang.clone(o.color)),r=(0,l.a9)(),s=r.authoringInfo||{};s.colorRamp=e,r.authoringInfo=s;const n=b(e,r.uniqueValueInfos.length).map((o=>o.slice(1))),t=[];r.uniqueValueInfos.forEach(((o,e)=>{o=o.clone(),t.push(o),(0,l.W)(o.symbol,new p.esriColor(n[e]))})),r.uniqueValueInfos=t,d()})),m.addStyler(y),await I}async function C(o){const{mapView:e,selectedValue:r,lastDefault:s,portal:n,modules:t}=l.s,p=(0,l.a9)(),u=(0,l.g)(),{onChange:d,popoverNode:m}=o,f=(0,l.B)();let g=-1===r?p.defaultSymbol||s.defaultSymbol:p.uniqueValueInfos[r].symbol;(function(o){return["simple-fill","simple-marker","simple-line","picture-marker","cim"].indexOf(null==o?void 0:o.type)>-1})(g)||(g=(0,l.o)(u),-1!==r||p.defaultSymbol||(s.defaultSymbol=g));const y="picture-marker"!==g.type&&!!g.color,C=(0,l.ab)(g);let h;if(-1===r)h=function(){const{modules:o}=l.s;return[new o.esriColor([255,255,255]),new o.esriColor([178,178,178]),new o.esriColor([128,128,128]),new o.esriColor([92,92,92]),new o.esriColor([77,77,77]),new o.esriColor([51,51,51]),new o.esriColor([26,26,26])]}();else{const o=t.typeSchemes.getSchemes({basemap:e.map.basemap,geometryType:(0,l.C)()});h=(0,l.ae)(o).slice(0,16)}let w;const v=g;w=v.outline?{color:v.outline.color?v.outline.color:new t.esriColor([0,0,0,.5]),size:v.outline.width,style:v.outline.style,autoAdjusted:!1}:{color:new t.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!1};const b=await a(m);let k;k=i(b,t.esriLang.clone(g),{portal:n,symbolFilter:f&&!(0,l.af)()?"simple":void 0,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,parts:{transparency:!1}}},fill:{color:(0,l.Q)(g)||S(h[r],.85)},stroke:w,fillEnabled:y,strokeEnabled:C}),b.addEventListener("arcgisSymbolStylerEdit",c.bind(null,(({detail:{symbol:o}})=>{o.outline&&(o.outline.width=0);const e=(0,l.b)();if(-1===r)e.defaultSymbol=o;else{const l=e.uniqueValueInfos.slice();l[r].symbol=o,e.uniqueValueInfos=l}d()}))),m.addStyler(b),await k}function h(o){const{modules:e}=l.s,r=[];for(let l=0;l<o.length-1;l++)r[l]=new e.AlgorithmicColorRamp({algorithm:"hsv",fromColor:o[l],toColor:o[l+1]||new e.esriColor({r:255,g:255,b:255,a:1})});if(o.length>2){return new e.MultipartColorRamp({colorRamps:r})}return r[0]}function w(o){const{layer:e,modules:r,portal:s}=l.s,n=e,t=(0,l.a9)(),{defaultColors:a,extraColorRamps:i}=o,c={color:(null==a?void 0:a.reverse())||[new r.esriColor([255,255,255,1]),new r.esriColor([0,0,0,1])]},p={color:new r.esriColor([0,0,0,.5]),size:1,style:"solid"},u=v();return i&&u.push(...i),u.sort((o=>o.tags.indexOf("raster")>-1?-1:1)),"class-breaks"===t.type?u.forEach((o=>{o.stops=b(h(o.stops),t.classBreakInfos.length).map((o=>new r.esriColor(o.slice(1)))).reverse()})):"unique-value"===t.type&&u.forEach((o=>o.stops.reverse())),{portal:s,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"class-breaks"===t.type?"discrete":"continuous",colorRamps:u,open:!0,colorRampsOpen:!0,parts:{colorRamps:!0,transparency:"imagery-tile"===n.type&&"unique-value"!==t.type},extraParts:{autoStrokeAdjust:!1,width:!0}}},stroke:Object.assign(Object.assign({},p),{color:[new r.esriColor([13,38,68,1]),new r.esriColor([56,98,122,1]),new r.esriColor([98,158,176,1]),new r.esriColor([177,205,194,1]),new r.esriColor([255,252,212,1])]}),fill:c}}function v(){const{modules:o}=l.s;return o.rasterColorRampUtils.all().map((({name:o,colors:e})=>({name:o,stops:e,tags:["raster"]})))}function b(o,e){const{modules:r}=l.s;return r.rasterColorRampUtils.convertColorRampToColormap(o,{numColors:e,interpolateAlpha:!0})}function S(o,e){return o&&(o.a=e),o}function k(o){const{modules:e}=l.s;null==o||o.forEach(((r,l)=>{0===r.r&&0===r.g&&0===r.b&&0===r.a&&(o[l]=new e.esriColor([255,255,255,0]))}))}}}]);