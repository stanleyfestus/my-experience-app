/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-c0311a.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-c0311a"],{99004:(e,t,r)=>{r.d(t,{c:()=>a,g:()=>n});var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{};function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},1391:(e,t,r)=>{r.d(t,{a:()=>n,b:()=>o,c:()=>i,d:()=>a});const a=(0,r(10699).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),n=a.state,i=a.state,o=a.state},90250:(e,t,r)=>{r.r(t),r.d(t,{arcgis_new_item_pages_feature_layer_from_scratch:()=>y});var a=r(20536),n=r(44090),i=r(91616),o=r(46227),l=r(76776),s=r(19832),c=r(90079),d=r(27995),u=r(15834),f=r(79238);r(10699),r(38973),r(1391),r(4291),r(369),r(25972),r(98034),r(99004);const y=class{constructor(e){(0,a.r)(this,e),this.newItemUpdatePage=(0,a.c)(this,"newItemUpdatePage",7),this.layerNameInputRefs={},this.nameFieldChangedByUser={},this.getDuplicateLayerNameId=()=>{const{layerInfos:e}=this,t={};for(let r=0;r<e.length;r++){const{name:a,id:n}=e[r];if(t[a])return n;t[a]=!0}return null},this.getDefaultName=e=>{const{layerInfos:t}=this,r=t.reduce(((t,r)=>{const a=(n=r.name,parseInt(n.split("_")[1]));var n;return!r.name.startsWith(e)||isNaN(a)?t:t<=a?a+1:t}),1);return`${e}_${r}`},this.addLayer=()=>{const{i18n:e,layerInfos:t,getDefaultName:r,layerNameInputRefs:a}=this,n=e.layer,l=(0,o.g)(),s=r(n);this.layerInfos=[...t,{id:l,type:"point",name:s}],(0,i.t)(100).then((()=>{var e;null===(e=a[l])||void 0===e||e.setFocus()}))},this.deleteLayer=(e,t)=>{const{layerNameInputRefs:r,layerInfos:a,nameFieldChangedByUser:n}=this;1!==a.length&&(this.layerInfos=function(e,t){const r=[...e];return r.splice(t,1),r}(a,t),delete r[e],delete n[e])},this.changeLayerName=(e,t)=>{const{layerInfos:r,nameFieldChangedByUser:a}=this,n=r[e];n.name=t,a[n.id]=!0},this.changeLayerType=(e,t,r)=>{const{layerInfos:a,nameFieldChangedByUser:n,i18n:i,getDefaultName:o}=this,l=Object.assign({},a[e]);n[l.id]||("table"===t&&"table"!==r?l.name=o(i.layer):"table"!==t&&"table"===r&&(l.name=o(i.table))),l.type=r,this.layerInfos=[...a.slice(0,e),l,...a.slice(e+1)]},this.setAlertMessage=e=>{this.alertInfo=this.i18n.error[e]},this.alertInfo=void 0,this.layerInfos=[],this.layerPreference={captureGPS:!1,enableZDefaults:!1,enableMDefaults:!1}}async componentWillLoad(){this.addCreateI18n=s.u.i18n,this.i18n=this.addCreateI18n.featureLayerFromScratch;const{layerPreference:e,newLayerInfos:t}=(0,d.a)();this.layerPreference=e,t.length<=0?this.addLayer():this.layerInfos=[...t]}async handleNext(){var e,t,r;const{layerInfos:a,layerNameInputRefs:i,setAlertMessage:o,getDuplicateLayerNameId:s,newItemUpdatePage:c,layerPreference:f}=this,{portal:y}=n.c,p=null===(e=a.find((e=>!e.name.trim())))||void 0===e?void 0:e.id;if(p)return(0,u.f)("Missing layer name"),null===(t=i[p])||void 0===t||t.setFocus(),void o("emptyName");const m=s();if(m)return(0,u.f)("Layer names must be unique"),null===(r=i[m])||void 0===r||r.setFocus(),void o("duplicateTitle");1===this.layerInfos.length&&(l.i.title=this.layerInfos[0].name),(0,d.b)(this.layerInfos,f,y),c.emit("itemProperties")}render(){const{i18n:e,alertInfo:t,addCreateI18n:r,addLayer:n,layerInfos:i,layerNameInputRefs:o,deleteLayer:l,layerPreference:s,changeLayerName:d,changeLayerType:y}=this;return(0,a.h)(a.H,{key:"31f1b7d3c246af89e3e4e44d31c3ddf18a1f3672"},(0,a.h)("arcgis-new-item-description",{key:"5cad7740bcfc5e4fd201f02e11e9386ddc8eb026",header:e.header}),(0,a.h)("div",{key:"ef869577d01576d2afc7e362f6e3552e3a82e6ae",class:"add-new-container"},(0,a.h)("div",{key:"8b0a02c30dc224682d0f5251dcfa2f9e487cdd08",class:"layer-container"},i.map((({id:e,name:t,type:n},s)=>{const u=i[s];return(0,a.h)("li",{class:"info-card",key:e,value:e},(0,a.h)("calcite-input",{value:t,class:"layer-name-input",label:r.featureLayerFromScratch.label,placeholder:r.featureLayer.placeholders[n],onCalciteInputInput:e=>{const t=e.target;d(s,t.value)},ref:t=>o[e]=t}),(0,a.h)("calcite-combobox",{label:r.featureLayer.type[u.type],class:"layer-type",selectionMode:"single",clearDisabled:!0,onCalciteComboboxChange:e=>{const t=e.target;y(s,u.type,t.selectedItems[0].value)}},c.f.filter((e=>"multipatch"!==e)).map((e=>(0,a.h)("calcite-combobox-item",{textLabel:r.featureLayer.type[e],icon:f.a[e],selected:u.type===e,value:e})))),i.length>1&&(0,a.h)("calcite-button",{appearance:"transparent",kind:"danger",scale:"m",href:"","icon-start":"trash",onClick:()=>l(e,s)}))}))),(0,a.h)("calcite-button",{key:"6e7b0ead0ef2c43a249446001de6f167dcd693df",appearance:"transparent",scale:"m","icon-start":"plus",class:"add-layer",onClick:n},e.add)),(0,a.h)("arcgis-new-item-layer-preference",{key:"409e2669fb26747f564c1d39e8e50c522513824e",i18n:e,defaultPreference:s,onLayerPreferenceChange:e=>{const{layerPreference:t}=this,r=e.detail;!t.captureGPS&&r.captureGPS&&(0,u.e)("captureGPS"),!t.enableZDefaults&&r.enableZDefaults&&(0,u.e)("enableZDefaults"),!t.enableMDefaults&&r.enableMDefaults&&(0,u.e)("enableMDefaults"),this.layerPreference=e.detail}}),(0,a.h)("arcgis-new-item-alert",{key:"bfc8b986d743d4d4294008d9aa67b771fe982e8c",heading:null==t?void 0:t.title,description:null==t?void 0:t.description,active:!!t,onAlertDismiss:()=>this.alertInfo=null}))}get el(){return(0,a.d)(this)}};y.style="p{margin-top:0px;margin-bottom:0px}button{cursor:pointer;transition-duration:200ms;border:none;box-shadow:none;background:transparent;line-height:16px}label{margin-bottom:0px}.add-new-container{margin-top:1rem;margin-bottom:1.5rem;padding:1.5rem;padding-bottom:2.5rem;background-color:var(--calcite-color-background)}.add-layer{margin-top:1rem;width:-moz-fit-content;width:fit-content}.info-card{--calcite-font-size--2:0.875rem;display:flex;flex-grow:1;align-items:center;border-width:1px;border-style:solid;background-color:var(--calcite-color-foreground-1);border-color:var(--calcite-color-border-1);padding:1rem}.info-card:not(:last-of-type){border-bottom-width:0px}.info-card:first-child{border-top-left-radius:var(--calcite-border-radius);border-top-right-radius:var(--calcite-border-radius)}.info-card:last-child{border-bottom-right-radius:var(--calcite-border-radius);border-bottom-left-radius:var(--calcite-border-radius)}.layer-icon{margin-inline-end:1rem}.layer-name-input,.layer-type{flex-grow:1;margin-inline-end:1rem;flex-basis:100%}.layer-type:last-child{margin-inline-end:0px}"},15834:(e,t,r)=>{r.d(t,{a:()=>p,b:()=>f,c:()=>h,d:()=>y,e:()=>d,f:()=>m,i:()=>u});var a=r(44090),n=r(1391),i=r(25972),o=r(38973);const l="create feature layer",s="my content",c=e=>{switch(e){case"build":return"blank";case"existing":return"fs";case"template":return"template";case"link":return"url"}},d=e=>{const t=a.c.telemetry;null==t||t.stepWorkflow(l,"enable "+("captureGPS"===e?"gps":"enableZDefaults"===e?"z":"m"),{category:l,attribute:c(n.a.addFeatureLayerType),pageName:s})},u=e=>{const t=a.c.telemetry;null==t||t.stepWorkflow(l,`expand ${e} details`,{category:l,attribute:c(n.a.addFeatureLayerType),pageName:s})},f=()=>{const e=a.c.telemetry;null==e||e.stepWorkflow(l,"filter",{category:l,attribute:c(n.a.addFeatureLayerType),pageName:s})},y=e=>{const t=c(e),r=a.c.telemetry;null==r||r.stepWorkflow(l,"from option",{category:l,attribute:t,pageName:s})},p=()=>{const{addFeatureLayerType:e,serviceInfo:t}=n.a,r=t,i=a.c.telemetry;null==i||i.endWorkflow(l,{category:l,attribute:c(e),pageName:s,count:r.layers.length,number:r.tables.length})},m=e=>{var t;null===(t=a.c.telemetry)||void 0===t||t.logError({category:l,error:e})};async function h(){const e=(0,o.g)().replace("portal/sharing/rest/","server/admin/services/types/customdataproviders/checkcdf");try{return await(0,i.r)(e,"post")}catch(e){return e}}},76776:(e,t,r)=>{r.d(t,{a:()=>a,i:()=>n});const a=(0,r(10699).c)({title:"",snippet:"",tags:[],categories:[]}),n=a.state},98034:(e,t,r)=>{r.d(t,{e:()=>i,l:()=>o});var a,n=r(99004),i={exports:{}};a=i.exports,n.c,function(e){var t={Promise:"undefined"!=typeof window?window.Promise:void 0},r="4.24",a="next";function n(e){if(e.toLowerCase()===a)return a;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function i(e){return void 0===e&&(e=r),"https://js.arcgis.com/".concat(e,"/")}function o(e){void 0===e&&(e=r);var t=i(e),o=n(e);if(o!==a&&3===o.major){var l=o.minor<=10?"js/":"";return"".concat(t).concat(l,"esri/css/esri.css")}return"".concat(t,"esri/themes/light/main.css")}function l(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}function s(e,t){if(t){var r=document.querySelector(t);r.parentNode.insertBefore(e,r)}else document.head.appendChild(e)}function c(e){return document.querySelector('link[href*="'.concat(e,'"]'))}function d(e){return!e||n(e)?o(e):e}function u(e,t){var r=d(e),a=c(r);return a||s(a=l(r),t),a}var f={};function y(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}function p(e,t,r){var a;r&&(a=m(e,r));var n=function(){t(e),e.removeEventListener("load",n,!1),a&&e.removeEventListener("error",a,!1)};e.addEventListener("load",n,!1)}function m(e,t){var r=function(a){t(a.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",r,!1)};return e.addEventListener("error",r,!1),r}function h(e){void 0===e&&(e={}),f=e}function g(){return document.querySelector("script[data-esri-loader]")}function b(){var e=window.require;return e&&e.on}function v(e){void 0===e&&(e={});var r={};[f,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}));var a=r.version,n=r.url||i(a);return new t.Promise((function(e,t){var i=g();if(i){var o=i.getAttribute("src");o!==n?t(new Error("The ArcGIS API for JavaScript is already loaded (".concat(o,")."))):b()?e(i):p(i,e,t)}else if(b())t(new Error("The ArcGIS API for JavaScript is already loaded."));else{var l=r.css;l&&u(!0===l?a:l,r.insertCssBefore),p(i=y(n),(function(){i.setAttribute("data-esri-loader","loaded"),e(i)}),t),document.body.appendChild(i)}}))}function w(e){return new t.Promise((function(t,r){var a=window.require.on("error",r);window.require(e,(function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];a.remove(),t(e)}))}))}function I(e,t){if(void 0===t&&(t={}),b())return w(e);var r=g(),a=r&&r.getAttribute("src");return!t.url&&a&&(t.url=a),v(t).then((function(){return w(e)}))}e.utils=t,e.loadModules=I,e.getScript=g,e.isLoaded=b,e.loadScript=v,e.setDefaultOptions=h,e.loadCss=u,Object.defineProperty(e,"__esModule",{value:!0})}(a);const o=async(e,t)=>(await i.exports.loadModules(e,t)).map((e=>e.__esModule&&e.default?e.default:e))},79238:(e,t,r)=>{r.d(t,{a:()=>a,e:()=>n,f:()=>i});const a={point:"point",line:"line",polygon:"polygon",multipatch:"cube",table:"table",multipoint:"layer-points"},n={esriGeometryPoint:"point",esriGeometryPolyline:"line",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"cube",esriGeometryMultipoint:"point",none:"table"},i={esriFieldTypeOID:"key",esriFieldTypeBoolean:"boolean",esriFieldTypeString:"string",esriFieldTypeSingle:"number",esriFieldTypeDouble:"number",esriFieldTypeInteger:"integer",esriFieldTypeSmallInteger:"integer",esriFieldTypeGlobalID:"key",esriFieldTypeDate:"date-time",esriFieldTypeBigInteger:"integer",esriFieldTypeDateOnly:"calendar",esriFieldTypeTimeOnly:"clock",esriFieldTypeTimestampOffset:"time-zone",esriFieldTypeGUID:"key"}},19832:(e,t,r)=>{r.d(t,{a:()=>a,u:()=>n});const a=(0,r(10699).c)({nextText:"next",cancelText:"cancel",workflow:"content",scale:"m",disableScroll:!1,featureFlags:{}}),n=a.state}}]);