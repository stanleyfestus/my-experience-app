/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_resize-c163ae.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_resize-c163ae"],{88800:(t,e,n)=>{n.d(e,{a:()=>y,b:()=>p,c:()=>g,d:()=>v,e:()=>w,f:()=>b,g:()=>d,h:()=>h,i:()=>u,q:()=>m,u:()=>O});var r=n(369),i=n(38973),s=n(44090),o=n(25972),a=n(91589);const l='owner:"esri" AND title:"AppSwitcher Config" AND type: "Application Configuration"';async function u(t){const e=(0,i.g)(t);if(!e)return;const n=`${e}portals/self/settings`;return(0,o.f)((()=>$(n)),"portalSettings",e)}async function c(t){const e=(0,i.g)();if(!e||!t)return;return $(`${e}content/items/${t}/data`)}async function d(){var t;const{portal:e,user:n}=s.c;if(!(null==e?void 0:e.id)||!n)return;const r=await async function(){const t=(0,i.g)();if(!t)return;return $(`${t}search`,{num:1,start:0,sortField:"title",sortOrder:"asc",q:l})}(),o=null===(t=null==r?void 0:r.results)||void 0===t?void 0:t[0];if(!o)return;const a=o.id;return await c(a)}async function p(){const{user:t}=s.c;return $(`${(0,i.g)()}community/users/${t.username}/properties`)}async function g(){const{portal:t}=s.c;return $(`${(0,i.g)()}portals/${t.id}/approvedApps`,{returnAllApps:!1})}async function y(){const{user:t}=s.c,e=`${(0,i.g)()}community/users/${t.username}/provisionedListings`;return(0,a.f)(e,{returnAppClientIds:!0,returnAllProvisions:!0},"provisionedListings")}async function v(){const t=`${(0,i.g)()}portals/self/subscriptionInfo`;try{const e=await $(t);return(null==e?void 0:e.orgCapabilities)||[]}catch(t){return[]}}async function m(t,e){if(!e||!(null==t?void 0:t.length))return;return $(`${(0,i.g)()}search`,{num:100,q:`id:(${t.map((t=>`"${t.itemId}"`)).join(" OR ")})`})}const f='owner:"esri" AND title:"BlockedApps Config" AND type: "Application Configuration"';async function b(){var t,e;const n=`${(0,i.g)()}search`;try{const r=await $(n,{num:10,start:0,sortField:"title",sortOrder:"asc",q:f});if(!r)return[];const i=(null===(e=null===(t=r.results)||void 0===t?void 0:t[0])||void 0===e?void 0:e.id)||"",s=await c(i);return(null==s?void 0:s.blockedApps)||[]}catch(t){return[]}}async function h(){const t=`${(0,i.g)()}portals/self/servers`,e=await $(t);return(null==e?void 0:e.servers)||[]}async function w(){const t=`${(0,i.g)()}portals/self/signinSettings`;return await $(t)}async function $(t,e){e||(e={}),e.f="json";const n=(0,r.g)();n&&(e.token=n);const i=new URL(t);Object.keys(e).forEach((t=>i.searchParams.append(t,e[t])));const s=await fetch(i);return await s.json()}async function O(t){const{user:e}=s.c,n=function(t){let e=(0,i.g)();return"/"!==e.slice(-1)&&(e+="/"),`${e}${t}`}(`community/users/${e.username}/setProperties`),o=new FormData;return o.append("properties",JSON.stringify(t)),async function(t,e){e.append("f","json");const n=(0,r.g)();n&&e.append("token",n),fetch(t,{method:"POST",body:e})}(n,o)}},96295:(t,e,n)=>{n.d(e,{H:()=>r,R:()=>i});const r='-typekeywords:("MapAreaPackage") -type:("Map Area" OR "Indoors Map Configuration" OR "Code Attachment")',i="Indoors Map Configuration,Code Attachment"},91589:(t,e,n)=>{n.d(e,{f:()=>i});var r=n(25972);async function i(t,e,n="results",i=!1){let s,o,a,l,u=1,c=[];e.start=u,e.num||(e.num=100);try{const d=await(0,r.r)(t,e);if(!(null==d?void 0:d[n]))return c;for(c=[...c,...d[n]],u=d.nextStart,s=d.total-c.length,o=Math.ceil(s/e.num),a=[],l=0;l<o;l++)if(e.start=u+l*e.num,i){const i=await(0,r.r)(t,e);(null==i?void 0:i[n])&&(c=[...c,...i[n]])}else a.push((0,r.r)(t,e));if(!i){(await Promise.all(a)).forEach((t=>{c=[...c,...t[n]]}))}return c}catch(t){return c}}},5157:(t,e,n)=>{n.d(e,{D:()=>i,b:()=>r,s:()=>s});const r={xxs:320,xs:480,sm:640,md:768,lg:1024,xl:1280},i=960;function s(t){var e,n;return null!==(e=(n=t.state).resizeObserver)&&void 0!==e||(n.resizeObserver=new ResizeObserver(o)),t.state.resizeObserver}function o(t){t.forEach((t=>{if(t.contentRect.width>0){const e=new CustomEvent("arcgisBrowserResize",{detail:{width:t.contentRect.width,height:t.contentRect.height}});t.target.dispatchEvent(e)}}))}},72721:(t,e,n)=>{n.d(e,{M:()=>b,a:()=>j,b:()=>N,c:()=>_,d:()=>D,e:()=>M,f:()=>T,g:()=>$,h:()=>C,i:()=>R,j:()=>E,k:()=>I,l:()=>x,m:()=>A,n:()=>S,o:()=>B,p:()=>m,q:()=>O,r:()=>L,s:()=>z,u:()=>H});var r=n(5479),i=n(79717),s=n(30554),o=n(96295),a=n(25972),l=n(91616),u=n(38973),c=n(91589),d=n(88800),p=n(74597),g=n(53841),y=n(67914),v=n(62532);async function m(t){const e=(0,u.c)(t),{collaborations:n}=await(0,a.r)(`${e}portals/self/collaborationsSummary`,{includeParticipantInfo:!0});return n}async function f(t,e,n,r,i){return async function(t,e,n,r,i){const s=(0,u.c)(n);return await(0,a.r)(`${s}portals/self/collaboratedItems`,Object.assign(Object.assign({collaborationId:t},e?{participantId:e}:{}),{start:r,num:i}))}(t,e,n,r,i)}const b=175,h=["nonspatial","point","polygon","multipoint","polyline"];let w;function $(t,e,n){var r;const i={};null===(r=t.results)||void 0===r||r.forEach((t=>{var e;null===(e=null==t?void 0:t.tags)||void 0===e||e.forEach((t=>{t&&(i[t]=(i[t]||0)+1)}))}));const s=Object.entries(i).sort(((t,e)=>e[1]-t[1])).map((([t])=>t));return(0,l.b)([...e||[],...s||[],...n||[]])}async function O({portal:t,query:e,user:n,contentUser:r,userContentGroups:l,store:c,config:d,allowedSubscriptionContentTypes:g,groupId:y,showHiddenItems:v}){var m,$,O,j,A,P,C,T,E;let L=(0,u.g)(t),_={};const{num:M,start:R,sortOrder:F,sortField:x,filters:D,baseQuery:z,baseFilter:B,searchTerm:N,bucket:H,allowedGeometries:U}=e;if((null==w?void 0:w.signal)&&w.abort(),c.state.recycleBin)return w=new AbortController,"my"===H?q({query:e,portal:t,user:r||n}):G({query:e,portal:t});if("group"===H&&l&&0===l.length)return{highlights:[],nextStart:-1,num:60,results:[],start:1,total:0};const W=y||"group"===H&&(null===(m=null==D?void 0:D.group)||void 0===m?void 0:m.id)&&"all"!==(null===($=null==D?void 0:D.group)||void 0===$?void 0:$.group)&&(null===(O=null==D?void 0:D.group)||void 0===O?void 0:O.group)||"living atlas"===H&&(null!==(j=null==c?void 0:c.state.livingAtlasGroupId)&&void 0!==j?j:await async function(t,e){var n,r;const s=await(0,i.q)({q:t.livingAtlasGroupQuery,num:1,sortField:"title",sortOrder:"asc"},t),o=(null===(r=null===(n=s.results)||void 0===n?void 0:n[0])||void 0===r?void 0:r.id)||"";e&&(e.state.livingAtlasGroupId=o);return o}(t,c))||"living atlas analysis"===H&&(null!==(A=null==c?void 0:c.state.livingAtlasAnalysisGroupId)&&void 0!==A?A:await async function(t,e){var n,r;const s=await(0,i.q)({q:k(t),num:1,sortField:"title",sortOrder:"asc"},t),o=(null===(r=null===(n=s.results)||void 0===n?void 0:n[0])||void 0===r?void 0:r.id)||"";e&&(e.state.livingAtlasAnalysisGroupId=o);return o}(t,c));if("subscription content"===H)return S(t,n,g);await I(t,H)&&(L="https://www.arcgis.com/sharing/rest/",_.addTokenManually=!1);const J=W?`content/groups/${W}/`:"",Q=`${L}${J}search`,V=function(t,e){if(!(null==t?void 0:t.length)||t.length===(null==h?void 0:h.length)||(null==e?void 0:e.isPortal))return"";return`((-typekeywords:"Hosted Service") OR (typekeywords:"Hosted Service" AND geometrytype:(${t.map((t=>`"${t}"`)).join(" OR ")})))`}(U,t),K=Object.keys(D||{}),X=H?await async function({bucket:t,contentUser:e,user:n,portal:r,filters:i}){switch(t){case"my":return`owner: ${(e||n).username}`;case"org":return`orgid:${r.id} ${r.isPortal?"-owner:esri_apps -owner:esri_webstyles -owner:esri_nav":""}`;case"favorites":return`group: ${await(0,s.h)()}`;case"group":if(!(null==i?void 0:i.group)||"all"===(null==i?void 0:i.group.group)){const t=await(0,s.e)(n);return(null==t?void 0:t.length)>b?"":`group:(${null==t?void 0:t.map((({id:t})=>t)).join(" OR ")})`}default:return""}}({bucket:H,user:n,contentUser:r,portal:t,store:c,filters:D}):"",Y=N&&(null===(P=(0,p.c)(N))||void 0===P?void 0:P.length)?`(${(0,p.c)(N)}) `:"",Z=!(!(null==d?void 0:d.semanticSearchEnabled)||!(null===(C=null==t?void 0:t.portalProperties)||void 0===C?void 0:C.semanticSearchEnabled))||n&&!n.orgId,tt=Object.assign(Object.assign(Object.assign({},B?{filter:`${B}`}:{}),Z?{enriched:!0}:{}),{q:`${z||""} ${V} ${X} ${Y} ${v?"":o.H}`,displaySublayers:!0,displayHighlights:!0,displayServiceProperties:!0}),et=Boolean(D.collaborations);let nt;et&&(nt=await async function(t,e,n,r){var i,s,o;const a=e.collaboration.id,l=null===(o=null===(s=null===(i=e.additionalParams)||void 0===i?void 0:i.origin)||void 0===s?void 0:s.split("__"))||void 0===o?void 0:o[1],u=await f(a,l,t,n,r),c=(null==u?void 0:u.collaboratedItems.map((t=>Object.keys(t)[0])))||[];return e.value=c.length?`id:(${c.join(" OR ")})`:"",u}(t,D.collaborations,R,M));const rt=[],it=K.reduce(((t,e)=>{const{param:n,value:r,additionalParams:i}=D[e];if(H&&"group"===e&&"group"!==H||"group"===e&&J||"folder"===e&&"my"!==H||"contentType"===e||"region"===e&&!["living atlas","living atlas analysis"].includes(H))return t;"categories"===e&&r&&rt.push(D[e].category),"region"===e&&r&&rt.push(D[e].categoryValue);const s="categories"===n?{}:{[n]:`${t[n]||""} ${r}`};return Object.assign(Object.assign(Object.assign({},t),s),null!=i?i:{})}),tt),st=Object.assign(Object.assign({num:M,start:et?1:R},"relevance"===x?{}:{sortField:x,sortOrder:F}),it||{}),ot=rt.length?rt.map((t=>`categories=${JSON.stringify([t])}`)).join("&"):"",at=rt.length?"?":"";try{const t=await(0,a.r)(`${Q}${at}${ot}`,st,_);let e=Object.assign(Object.assign({},t),{queryParams:st});return D.collaborations&&nt&&(null===(T=e.results)||void 0===T?void 0:T.length)&&(e=function(t,e){const{start:n,num:r,nextStart:i,total:s}=e;if(null!=n&&null!=r&&null!=s&&null!=i){const e=Object.assign(Object.assign({},t),{start:n,num:r,total:s});return e.queryParams.start=n,e.queryParams.num=r,e}return t}(e,nt)),e}catch(t){if(498===(null===(E=null==t?void 0:t.details)||void 0===E?void 0:E.httpStatus)&&"Invalid token."===(null==t?void 0:t.message)){const t=await(0,a.r)(`${Q}${at}${ot}`,st,Object.assign(Object.assign({},_),{addTokenManually:!1}));return Object.assign(Object.assign({},t),{queryParams:st})}}}function j(t,e){if(!e.deepLayerSearchEnabled)return{};const n={};return(t.highlights||[]).forEach((e=>{var r;const i=null===(r=t.results)||void 0===r?void 0:r.find((t=>t.id===e.id));if(!(null==i?void 0:i.sublayers))return;const s=Object.keys(e).filter((t=>"id"!==t&&t.includes("sublayers."))).reduce(((t,n)=>{const r=function(t){const e=t.replace("sublayers.","");return{fieldaliases:"fieldAliases",title:"title"}[e]||e}(n);return t[r]=e[n].map((t=>t.replaceAll("<em>","").replaceAll("</em>",""))),t}),{}),o=i.sublayers.filter((t=>Object.keys(t).some((e=>{var n;return null===(n=s[e])||void 0===n?void 0:n.some((n=>t[e].includes(n)))})))).map((t=>t.id));n[e.id]=Object.assign(Object.assign({},e),{sublayers:o})})),n}function k(t){return`title:"Living Atlas Analysis Layers" AND owner:${!0===t.isPortal?"esri_livingatlas":"esri"}`}async function I(t,e){var n;if((null==t?void 0:t.isPortal)&&"all"===e){const e=await(0,d.i)(t);if(null===(n=null==e?void 0:e.portalConfigProperties)||void 0===n?void 0:n.searchArcGISOnlineEnabled)return!0}return!1}async function A(t,e){return t&&e?(0,a.f)((async()=>{const n=`${(0,u.g)(e)}community/users/${t.username}/provisionedListings`;return(0,c.f)(n,{},"provisionedListings")}),"provisionedListings",`${e.id}-${t.username}`):[]}async function S(t,e,n){return e?(0,a.f)((async()=>{const i=await A(e,t);if(!(null==i?void 0:i.length))return{total:0,results:[],start:-1,num:100,nextStart:0};const s=null==i?void 0:i.map((t=>t.itemId)),o=await Promise.all(s.map((e=>async function(t,e){try{return(0,g.d)(t,e)}catch(t){return null}}(e,t)))),a=await Promise.all(null==s?void 0:s.map((e=>async function(t,e){var n;try{return null!==(n=(await(0,r.b)(t,e,{relationshipType:"Listed2ImplicitlyListed",direction:"forward"})).relatedItems)&&void 0!==n?n:[]}catch(t){return[]}}(e,t)))),l=a.reduce(((t,e)=>t.concat(e)),o).filter((t=>function(t,e){return null!=e||(e=["Map Service","Image Service","Feature Service","Stream Service","Vector Tile Service","WMS","WFS","WMTS","KML","Feature Collection","Feed"]),e.includes(null==t?void 0:t.type)}(t,n)));return{total:l.length,results:l,start:l.length?1:0,num:100,nextStart:0}}),"subscriptionContent",`${t.id}-${e.username}`):{total:0,results:[],start:0,num:100,nextStart:0}}async function P(t,e){return new Promise((async(n,r)=>{var i;null===(i=null==w?void 0:w.signal)||void 0===i||i.addEventListener("abort",(()=>{r(new DOMException("Aborted","AbortError"))}));const{start:s,num:l,sortField:u,sortOrder:c,searchTerm:d}=t,p=await(0,a.r)(e,{foldersContent:!0,inRecycleBin:!0,ignoreTypes:o.R,start:s,num:l,sortField:u,sortOrder:c}),g=d?p.items.filter((t=>t.title.toLowerCase().includes(d.toLowerCase()))):p.items,y=!!d&&g.length!==p.items.length;return n(Object.assign(Object.assign({},p),{results:g,num:l,queryParams:t,partial:y}))}))}const C=async({portal:t,user:e,forOrg:n})=>{var r;const i={start:0,num:100,sortField:"size",sortOrder:"desc"},s=n?await G({portal:t,query:i}):await q({query:i,portal:t,user:e});return null===(r=null==s?void 0:s.results)||void 0===r?void 0:r.reduce(((t,e)=>t+e.size),0)};async function q({query:t,portal:e,user:n}){return P(t,`${(0,u.g)(e)}content/users/${n.username}/`)}async function G({query:t,portal:e}){return P(t,`${(0,u.g)(e)}content/portals/${e.id}/`)}async function T(t,e,n){if(!(null==e?void 0:e.length)||!(null==n?void 0:n.length))return{result:{}};try{const r=[];(0,l.h)(e,100).forEach((e=>{r.push((0,a.r)(`${(0,u.g)(t)}content/itemsgroups`,{items:n.map((t=>t.id)).join(","),groups:e.map((t=>t.id)).join(",")}))}));const i=(await Promise.all(r)).reduce(((t,e)=>(Object.values(e).forEach((e=>{const{groupId:n,items:r}=e;r.forEach((({itemId:e})=>{t[e]=[...t[e]||[],n]}))}),{}),t)),{});return{result:i}}catch(t){return{result:{}}}}async function E(t,e){try{const n=`${(0,u.g)(t)}search`;return{result:(await(0,a.r)(n,{q:`id:(${e.join(" OR ")})`})).results}}catch(t){return{result:[]}}}async function L(t,e,n,r){var i;const s=await I(e,r.state.bucket),o=s?`https://www.arcgis.com/sharing/rest/content/items/${t.id}`:(0,y.g)(t.id,e),l=s||!n?{disableIdentityLookup:!0,addTokenManually:!1}:{};try{return{result:await(0,a.r)(o,{},l)}}catch(t){if("SB_0005"===(null===(i=null==t?void 0:t.details)||void 0===i?void 0:i.messageCode))return{error:{code:"disabledSubscription"}}}return{error:{code:"unhandledError"}}}function _({bucket:t,oldBucket:e,filters:n,user:r,switchingBucket:i,keepSpecialFilters:s}){var o,a,l,u;const c=Object.assign({},n);"my"===t||s&&"recycle"!==(null===(o=c.folder)||void 0===o?void 0:o.folder)||delete c.folder,"org"!==t&&("recycle"===(null===(a=c.contentType)||void 0===a?void 0:a.contentType)?c.contentType.contentType="all":s||delete c.contentType),"group"===t||s||delete c.group;const d="recycle"===(null===(l=null==n?void 0:n.folder)||void 0===l?void 0:l.folder)||"recycle"===(null===(u=null==n?void 0:n.contentType)||void 0===u?void 0:u.contentType);if((0,v.u)(r,t,d)||delete c.deleteProtection,i){const n=["group","living atlas","living atlas analysis","subscription content"];(n.includes(t)||n.includes(e))&&delete c.categories,"living atlas"===t?(delete c.modified,delete c.created,delete c.sharing,delete c.collaborations):delete c.region}return c}function M(t){const e=t;return!(!(null==e?void 0:e.item)||!e.sublayer)}function R(t){const e=t;return!(!(null==e?void 0:e.item)||!e.task)}function F({item:t,sublayer:e,task:n,selectedItem:r}){var i,s,o;return R(r)&&n?(null==t?void 0:t.id)===(null===(i=r.item)||void 0===i?void 0:i.id)&&n===r.task:M(r)&&e?(null==t?void 0:t.id)===(null===(s=r.item)||void 0===s?void 0:s.id)&&e.id===(null===(o=r.sublayer)||void 0===o?void 0:o.id):(null==t?void 0:t.id)===r.id}function x({item:t,sublayer:e,task:n,selectedItems:r}){return(r||[]).some((r=>F({item:t,sublayer:e,task:n,selectedItem:r})))}function D({item:t,sublayer:e,task:n,selectedItems:r}){return(r||[]).filter((r=>!F({item:t,sublayer:e,task:n,selectedItem:r})))}function z({item:t,sublayer:e,task:n,selectedItems:r}){const i=n?{item:t,task:n}:e?{item:t,sublayer:e}:t;return x({item:t,sublayer:e,task:n,selectedItems:r})?[...r]:[...r,i]}function B({item:t,selectedItems:e}){return e.filter((e=>{var n;return(null===(n=e.item)||void 0===n?void 0:n.id)===(null==t?void 0:t.id)}))}function N(t){return R(t)||M(t)?t.item:t}function H({selectedItems:t,items:e}){let n=!1;const r=t.map((t=>{const r=N(t),i=e.find((t=>t.id===r.id));return i&&(n=!0),function(t,e){return R(e)||M(e)?Object.assign(Object.assign({},e),{item:t}):t}(i,t)}));return n?r:t}},39489:(t,e,n)=>{n.d(e,{a:()=>s,b:()=>a,g:()=>u,i:()=>i,o:()=>o});var r=n(91102);const i=t=>"item-browser"===t.state.type,s=(t,e,n)=>{e.onChange("filters",(e=>{e[t]&&e[t].value||n()}))},o=(t,e)=>{t.onChange("preview",(t=>{e()}))},a=(t,e)=>{t.onChange("groupId",(t=>{e()}))},l=new Map;function u(t,e){const n=l.get(t);if(n)return n;const i=(0,r.c)(t,e);return i?(l.set(t,i.store),i.store):null}},74597:(t,e,n)=>{n.d(e,{c:()=>i});var r=n(91102);function i(t=""){return(0,r.s)(t).replace(/[<>\/\\?]/g,"\\$&").trim()}},80619:(t,e,n)=>{n.d(e,{I:()=>r,a:()=>i});const r=["folder","group","contentType"],i=99999},62532:(t,e,n)=>{n.d(e,{u:()=>s});var r=n(68537),i=n(16808);function s(t,e,n){return!!t&&(!e||["my","org"].includes(e))&&!n&&!(0,r.b)(t)&&("org"!==e||(0,i.q)(t))}},80549:(t,e,n)=>{function r({geometry:t,type:e}){switch(e){case"Catalog Layer":return{icon:"catalog-dataset",type:"catalog",isGeometry:!1};case"Parcel Layer":return{icon:"parcel-layer",type:"parcel",isGeometry:!1};case"Oriented Imagery Layer":return{icon:"oriented-imagery-layer",type:"oriented imagery",isGeometry:!1};case"Table":return{icon:"table",type:"table",isGeometry:!0}}switch(t){case"point":case"esriGeometryPoint":return{type:"point",icon:"point",isGeometry:!0};case"esriGeometryMultipoint":case"multipoint":return{type:"multipoint",icon:"layer-points",isGeometry:!0};case"line":case"polyline":case"esriGeometryPolyline":return{type:"line",icon:"line",isGeometry:!0};case"polygon":case"esriGeometryPolygon":return{type:"polygon",icon:"polygon",isGeometry:!0};case"multipatch":case"esriGeometryMultiPatch":return{type:"multipatch",icon:"cube",isGeometry:!0};default:return{type:"table",icon:"table",isGeometry:!0}}}n.d(e,{g:()=>r})}}]);