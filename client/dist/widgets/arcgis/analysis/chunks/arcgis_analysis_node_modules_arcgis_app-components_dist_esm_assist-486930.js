/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_assist-486930.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_assist-486930"],{26359:(e,i,n)=>{n.d(i,{a:()=>o,b:()=>t,s:()=>a});n(74129),n(98034);var s=n(37219);const o={true:"https://ndh-inf-ml-p01.esri.com/dev/mapping",vpn:"https://ndh-inf-ml-p01.esri.com/dev/mapping",aws:"https://devsummitdemowin.webgistesting.net/dev/mapping"};async function t(e){const{text:i}=e,{layer:n,modules:o}=s.s;if(!(0,s.p)(n))return;const t={token:"",map_data:{data:n.fields.map((e=>({fieldName:e.name,alias:e.alias,dataType:e.type})))},messages:i,entry_point:"style"},a={method:"post",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}};console.log("request body: ",t);try{const{data:e}=await o.esriRequest(l(),a);if(e.status_code&&200!==e.status_code)return console.log("*** question/response: ",JSON.stringify({question:i,response:e})),Promise.resolve({message:e.botMessage,status:"error",type:"response"});const n=e[0],s=n.botMessage,t="map_style"===n.actionType?"valid":"invalid";return Promise.resolve({message:s,status:t,dataObject:n,type:"response"})}catch(e){return Promise.resolve({message:e.message,status:"error",type:"response"})}}async function a(e){const{text:i}=e,{layer:n,modules:o}=s.s;if(!(0,s.p)(n))return;const t=n.fields.map((e=>({fieldName:e.name,alias:e.alias,dataType:e.type}))),a={method:"post",body:JSON.stringify({token:"",map_data:{data:t},messages:i,entry_point:"style"}),headers:{"Content-Type":"application/json"}};console.log(JSON.stringify(a));try{await o.esriRequest(l(),a)}catch(e){}}function l(){var e;const{modules:i}=s.s,n=i.urlUtils.urlToObject(document.URL),t=n.query||{};return(null===(e=n.query)||void 0===e?void 0:e.assistUrl)||o[t.assist]}},55136:(e,i,n)=>{n.d(i,{a:()=>a,c:()=>t,g:()=>l});var s=n(98072),o=n(37219);n(98034);function t(e){var i;const{layer:n,useFeatureReduction:t,mapImageSublayer:a,mapView:l,modules:r}=o.s,d=n;e=e||{};const u=(0,o.n)((0,o.b)());return r.ColorCreator.createContinuousRenderer({layer:d,view:l,field:e.fieldInfos[0].field,theme:"above-and-below",colorScheme:(0,o.R)("above-and-below"),normalizationField:e.fieldInfos[1].field,outlineOptimizationEnabled:!a&&((0,s.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:(0,o.B)()),sizeOptimizationEnabled:!a&&(!(0,s.i)(e.sizeOptimizationEnabled)||e.sizeOptimizationEnabled),legendOptions:e.legendOptions,defaultSymbolEnabled:!1,forBinning:"binning"===(null===(i=d.featureReduction)||void 0===i?void 0:i.type)&&t}).then((e=>(((0,o.I)(e.renderer,"color")||{}).style="ratio",(0,o.m)(u,e.renderer),Promise.resolve(e))),(e=>Promise.reject(e)))}function a(e){var i,n,t,a;const{layer:r,useFeatureReduction:d,mapImageSublayer:u,mapView:f,modules:c}=o.s,m=r;e=e||{};const b=(0,o.b)(),p=(0,o.d)(b,"color");if(p&&e.fieldInfo&&e.fieldInfo.field==p.field&&e.normalizationField===p.normalizationField&&(delete e.fieldInfos,(0,o.V)(e)))return Promise.resolve({renderer:b.clone()});const v=(0,o.I)(b,"color"),z=(0,o.n)(b);let g=e.fieldInfos?e.fieldInfos[0]:p?{field:p.field,expression:p.valueExpression,expressionTitle:p.valueExpressionTitle,simpleFieldType:o.t.NUMBER}:{field:b.field,expression:b.valueExpression,expressionTitle:b.valueExpressionTitle,simpleFieldType:o.t.NUMBER};const h=e.normalizationField?e.normalizationField:p?p.normalizationField:b.normalizationField,I=b.classBreakInfos&&b.classBreakInfos.length?b.classBreakInfos[0].symbol:null,y=b.defaultSymbol,O=b.defaultLabel;let V=!1;(null===e.normalizationField||e.normalizationField||e.fieldInfo)&&(V=!0);const S=e.discardMinMax?void 0:(0,s.i)(e.min)?e.min:V?void 0:v?v.minSliderValue:b.classBreakInfos[0].minValue,E=e.discardMinMax?void 0:(0,s.i)(e.max)?e.max:V?void 0:v?v.maxSliderValue:b.classBreakInfos[b.classBreakInfos.length-1].maxValue;return c.ColorCreator.createContinuousRenderer({layer:m,view:f,field:g?g.field:b.field,theme:"above-and-below",colorScheme:(0,o.R)("above-and-below"),normalizationField:h,minValue:S,maxValue:E,outlineOptimizationEnabled:!u&&((0,s.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!z.sizeOutlineVisVar),sizeOptimizationEnabled:!u&&((0,s.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:!!z.sizeAutoVisVar),legendOptions:(null===(i=e.legendOptions)||void 0===i?void 0:i.toJSON())||(null===(n=null==p?void 0:p.legendOptions)||void 0===n?void 0:n.toJSON())||(null===(t=b.legendOptions)||void 0===t?void 0:t.toJSON()),defaultSymbolEnabled:(0,s.i)(e.defaultSymbolEnabled)?e.defaultSymbolEnabled:!!b.defaultSymbol,forBinning:"binning"===(null===(a=m.featureReduction)||void 0===a?void 0:a.type)&&d}).then((i=>{if(e.discardMinMax){const e=(0,o.d)(b,"color"),n=(0,o.d)(i.renderer,"color");e.stops.forEach(((e,i)=>e.value=n.stops[i].value));const s=!!v&&"percent"===v.style,t=!!v&&"percent-of-total"===v.style;e.stops[0].label=`< ${l(e.stops[0].value,s,t)}`,e.stops[2].label=`${l(e.stops[2].value,s,t)}`,e.stops[4].label=`> ${l(e.stops[4].value,s,t)}`}return((0,o.I)(i.renderer,"color")||{}).style="ratio",(0,o.m)(z,i.renderer),I&&i.renderer.classBreakInfos&&i.renderer.classBreakInfos.length&&(i.renderer.classBreakInfos[0].symbol=I),y&&(i.renderer.defaultSymbol=y,i.renderer.defaultLabel=O),Promise.resolve(i)}),(e=>Promise.reject(e)))}function l(e,i,n){return n?Math.round(e/(1+e)*1e4)/100+"%":i?Math.round(1e4*e)/100+"%":`${e}`}},8383:(e,i,n)=>{n.d(i,{a:()=>t,b:()=>l,c:()=>o,u:()=>a});n(74129),n(98034);var s=n(37219);function o(e){var i;const{layer:n,mapView:o,modules:t}=s.s,a=n,l=(0,s.b)();return e=e||{},"heatmap"===(0,s.a)()&&(e.radius=e.radius||l.radius,e.heatmapScheme=e.heatmapScheme||(0,s.Z)()),(null===(i=e.fieldInfos)||void 0===i?void 0:i.length)&&(0,s.P)([e.fieldInfos[0].field]),t.HeatmapCreator.createRenderer({layer:a,view:o,field:e.fieldInfos&&e.fieldInfos.length?e.fieldInfos[0].field:null,radius:e.radius||10,heatmapScheme:e.heatmapScheme||void 0})}function t(e){var i;const{layer:n,mapView:o,modules:t}=s.s,a=n;e=e||{};const l=(0,s.b)(),r=l.authoringInfo;return t.HeatmapCreator.createRenderer({layer:a,view:o,field:e.fieldInfos&&e.fieldInfos.length?e.fieldInfos[0].field:l.field,fadeRatio:null!==(i=e.fadeRatio)&&void 0!==i?i:null==r?void 0:r.fadeRatio,radius:e.radius||l.radius||10,heatmapScheme:e.heatmapScheme||(0,s.Z)()})}function a(e){const{modules:i}=s.s,n=(0,s.b)();return i.HeatmapCreator.updateRenderer({renderer:n,fadeRatio:e})}function l(e){const{layer:i,mapView:n,modules:o}=s.s,t=i,a=(0,s.b)();return e=e||{},o.heatmapStatistics({layer:t,view:n,field:a.field,radius:e.radius||a.radius||10}).then((e=>(a.minDensity=e.min,a.maxDensity=e.max,Promise.resolve(e))),(e=>Promise.reject(e)))}},28832:(e,i,n)=>{n.d(i,{a:()=>a,b:()=>r,c:()=>t,d:()=>l});var s=n(98072),o=n(37219);n(98034);function t(e){var i;const{layer:n,useFeatureReduction:t,mapImageSublayer:a,mapView:l,modules:r}=o.s,d=n;e=e||{};const u=(0,o.n)((0,o.b)());return r.LocationCreator.createRenderer({layer:d,view:l,outlineOptimizationEnabled:!a&&(!(0,s.i)(e.outlineOptimizationEnabled)||e.outlineOptimizationEnabled),sizeOptimizationEnabled:!a&&(!(0,s.i)(e.sizeOptimizationEnabled)||e.sizeOptimizationEnabled),forBinning:"binning"===(null===(i=d.featureReduction)||void 0===i?void 0:i.type)&&t}).then((e=>((0,o.m)(u,e.renderer),Promise.resolve(e))),(e=>Promise.reject(e)))}function a(e){var i;const{layer:n,useFeatureReduction:t,mapImageSublayer:a,mapView:l,modules:r}=o.s,d=n;e=e||{};const u=(0,o.b)(),f=(0,o.a)(),c=(0,o.n)(u),m=u.symbol?u.symbol:(0,o.o)(f),b={layer:d,view:l,outlineOptimizationEnabled:!a&&((0,s.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!c.sizeOutlineVisVar),sizeOptimizationEnabled:!a&&((0,s.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:!!c.sizeAutoVisVar),forBinning:"binning"===(null===(i=d.featureReduction)||void 0===i?void 0:i.type)&&t};return r.LocationCreator.createRenderer(b).then((e=>((0,o.m)(c,e.renderer),m&&(e.renderer.symbol=m),Promise.resolve(e))),(e=>Promise.reject(e)))}function l(){var e;const{layer:i,useFeatureReduction:n,mapView:s,modules:t}=o.s,a=i;return t.LocationCreator.createRenderer({layer:a,view:s,outlineOptimizationEnabled:!0,forBinning:"binning"===(null===(e=a.featureReduction)||void 0===e?void 0:e.type)&&n}).then((e=>{const i=(0,o.d)(e.renderer,"size","outline");return Promise.resolve(i)}))}function r(){var e;const{layer:i,useFeatureReduction:n,mapView:s,modules:t}=o.s,a=i;return t.LocationCreator.createRenderer({layer:a,view:s,outlineOptimizationEnabled:!1,sizeOptimizationEnabled:!0,forBinning:"binning"===(null===(e=a.featureReduction)||void 0===e?void 0:e.type)&&n}).then((e=>{const i=(0,o.d)(e.renderer,"size","auto");return Promise.resolve(i)}))}},36933:(e,i,n)=>{n.d(i,{a:()=>u,b:()=>f,c:()=>l,d:()=>r});var s=n(98072),o=n(37219),t=(n(98034),n(74129),n(11780)),a=n(90817);function l(e){var i;const{layer:n,useFeatureReduction:t,mapView:a,modules:l}=o.s,r=n;return e=e||{},l.DotDensityCreator.createRenderer({layer:r,view:a,attributes:(0,s.i)(e.attributes)?e.attributes:(u=e.fieldInfos,u.map((e=>({field:e.field,label:d(e.field)})))),dotBlendingEnabled:!(0,s.i)(e.dotBlendingEnabled)||e.dotBlendingEnabled,dotValueOptimizationEnabled:!(0,s.i)(e.dotValueOptimizationEnabled)||e.dotValueOptimizationEnabled,outlineOptimizationEnabled:!(0,s.i)(e.outlineOptimizationEnabled)||e.outlineOptimizationEnabled,legendOptions:e.legendOptions,forBinning:"binning"===(null===(i=r.featureReduction)||void 0===i?void 0:i.type)&&t});var u}function r(e){var i,n,t,a,l,r,d;const{layer:u,mapView:f,modules:c}=o.s,m=u;e=e||{};const b=(0,o.b)();return c.DotDensityCreator.createRenderer({layer:m,view:f,attributes:null!==(i=e.attributes)&&void 0!==i?i:b.attributes.map((e=>new c.AttributeColorInfo({field:e.field,label:e.label}))),dotBlendingEnabled:null!==(n=e.dotBlendingEnabled)&&void 0!==n?n:b.dotBlendingEnabled,dotValueOptimizationEnabled:null!==(t=e.dotValueOptimizationEnabled)&&void 0!==t?t:(0,s.i)(b.referenceScale),outlineOptimizationEnabled:null===(a=e.dotValueOptimizationEnabled)||void 0===a||a,legendOptions:null!==(l=e.legendOptions)&&void 0!==l?l:b.legendOptions,forBinning:null!==(r=e.forBinning)&&void 0!==r?r:"binning"===(null===(d=m.featureReduction)||void 0===d?void 0:d.type)})}function d(e){const i=o.s.fields.filter((i=>i.layerField.name===e));return i.length?i[0].label:""}function u(e){e=e||{};const i=[],n=[];return i.push(e.fieldInfos[0]),i.push(e.fieldInfos[1]),n.push(e.fieldInfos[2]),function(e){if("relationship"===(0,o.a)()&&void 0===e.normalizationField1&&void 0===e.normalizationField2){const i=(0,o.b)().authoringInfo;if(e.fieldInfos&&e.fieldInfos.length>1&&e.fieldInfos[0].field==i.field1.field&&e.fieldInfos[1].field==i.field2.field)return!0}return!1}(e)?c((0,o.b)(),n,e).then((e=>Promise.resolve({renderer:e})),(e=>Promise.reject(e))):(0,a.c)(Object.assign(Object.assign({},e),{fieldInfos:i})).then((i=>c(i.renderer,n,e).then((e=>(i.renderer=e,Promise.resolve(i))),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function f(e,i){return e=e||{},(0,t.f)(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?[e.fieldInfos[2]]:null})).then((n=>(0,a.a)(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?[e.fieldInfos[0],e.fieldInfos[1]]:null})).then((e=>(function(e,i){var n,s;const{modules:t}=o.s;e.visualVariables=(0,o.T)(e,"size")||[],e.visualVariables=(0,o.T)(e,"size","auto")||[];const a=(0,o.d)(i,"size");e.visualVariables.push(a),e.authoringInfo=e.authoringInfo||new t.AuthoringInfo({}),e.authoringInfo.visualVariables=(0,o.U)(e,"size")||[];const l=(0,o.I)(i,"size");if(e.authoringInfo.visualVariables.push(l),(0,o.B)()){const t=(null===(n=i.classBreakInfos)||void 0===n?void 0:n.length)?i.classBreakInfos[0].symbol:(null===(s=i.uniqueValueInfos)||void 0===s?void 0:s.length)?i.uniqueValueInfos[0].symbol:(0,o.o)("relationship-size"),a=e.uniqueValueInfos.slice();a.map((e=>{const i=(0,o.Q)(e.symbol);e.symbol=t.clone(),(0,o.W)(e.symbol,i)})),e.uniqueValueInfos=a,e.backgroundFillSymbol=i.backgroundFillSymbol;const l=(0,o.d)(i,"size","outline");l&&e.visualVariables.push(l)}}(e.renderer,n.renderer),e.backgroundFillSymbol=(0,o.b)().backgroundFillSymbol,"size"===i&&(e.statistics=n.statistics),Promise.resolve(e))),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function c(e,i,n){const{modules:s}=o.s;return(0,t.c)(Object.assign(Object.assign({},n),{fieldInfos:i})).then((i=>{const n=i.renderer;e.visualVariables=(0,o.T)(e,"size")||[],e.visualVariables=(0,o.T)(e,"size","auto")||[];const t=(0,o.d)(n,"size"),a=(0,o.I)(n,"reference-size");a||e.visualVariables.push(t),e.authoringInfo.visualVariables=(0,o.U)(e,"size")||[];const l=(0,o.I)(n,"size");if(e.authoringInfo.visualVariables.push(l),(0,o.B)()){let i=n.classBreakInfos[0].symbol;const t=[];e.uniqueValueInfos.forEach((e=>{t.push(s.esriLang.clone(e))})),t.forEach((i=>{e.removeUniqueValueInfo(i.value)})),t.forEach((n=>{const s=i.clone();(0,o.W)(s,(0,o.Q)(n.symbol)),e.addUniqueValueInfo({value:n.value,symbol:s,label:n.label})})),e.backgroundFillSymbol=n.backgroundFillSymbol;const l=(0,o.d)(n,"size","outline");!a&&l&&e.visualVariables.push(l)}return Promise.resolve(e)}),(e=>Promise.reject(e)))}},20250:(e,i,n)=>{n.d(i,{a:()=>t,b:()=>a,g:()=>l,s:()=>r});var s=n(98072),o=n(37219);n(98034);function t(){const{mapView:e}=o.s,i=(0,o.b)(),n=i.authoringInfo,t="class-breaks"===i.type?i.classBreakInfos:i.uniqueValueInfos,a=(0,o.d)(i,"size"),l=(0,o.I)(i,"reference-size"),d=!!a&&!(0,s.i)(a.minSize),u=!!a&&"number"==typeof a.minSize,f="above-and-below"===(null==n?void 0:n.univariateTheme);let c=2,m=20;if(l)l.referenceSizeScale&&r(),[c,m]=[l.sizeStops[0].size,l.sizeStops[1].size];else if(a)if(f){const e=a.stops;[c,m]=[e[2].size,Math.max(e[0].size,e[4].size)]}else if(d){const e=a.stops;[c,m]=[e[0].size,e[e.length-1].size]}else if(u)[c,m]=[a.minSize,a.maxSize];else{const i=e.scale,n=a.minSize.stops,s=a.maxSize.stops;[c,m]=[n[n.length-1].size,s[s.length-1].size];for(let e=0;e<n.length;e++){const o=n[e],t=s[e];if(i<=o.value){if(e>0){let a=n[e-1],l=s[e-1];const r=(i-a.value)/(o.value-a.value);[c,m]=[a.size+(o.size-a.size)*r,l.size+(t.size-l.size)*r]}else[c,m]=[n[0].size,s[0].size];break}}}else if(t){const e=t[0].symbol,i=t[t.length-1].symbol;[c,m]=[(0,o.X)(e),(0,o.X)(i)],c>m&&([c,m]=[m,c])}return[c,m]}function a(e){const{mapView:i,modules:n}=o.s,a=(0,o.b)(),l=(0,o.d)(a,"size");let r=e[0],d=(0,s.i)(e[1])?e[1]:r;if(l){const o=a.authoringInfo,u="above-and-below"===(null==o?void 0:o.univariateTheme),f=!!l&&!(0,s.i)(l.minSize),c=!!l&&"number"==typeof l.minSize;let[m,b]=t();const p=m>b;if(!p&&r>=b?r=b-.75:p&&r>=m&&(r=m-.75),!p&&m>=d?d=m+.75:p&&b>=d&&(d=b+.75),u){const i=l.stops,n=p?e[1]:e[0],s=p?e[0]:e[1],o=Math.max(...i.map((e=>e.value))),t=i[2].value,a=Math.min(...i.map((e=>e.value))),r=Math.abs(o-t),d=Math.abs(a-t),u=r>d?r:d,f=s-n;i.forEach((e=>{const{value:i}=e;e.size=Math.abs(i-t)/u*f+n}))}else if(f){const e=l.stops;l.stops=null,l.minSize=r,l.maxSize=d,l.minDataValue=e[0].value,l.maxDataValue=e[e.length-1].value}else if(c)p?(l.maxSize=r,l.minSize=d):(l.minSize=r,l.maxSize=d);else{const e=i.scale;let s=n.esriLang.clone(l.minSize.stops),o=n.esriLang.clone(l.maxSize.stops);p&&([s,o]=[o,s]);let t=r/s[s.length-1].size,a=d/o[o.length-1].size;for(let i=0;i<s.length;i++){const n=s[i],l=o[i];if(e<=n.value){if(i>0){let u=s[i-1],f=o[i-1];const c=(e-u.value)/(n.value-u.value),[m,b]=[u.size+(n.size-u.size)*c,f.size+(l.size-f.size)*c];t=r/m,a=d/b}else t=r/s[0].size,a=d/o[0].size;break}}s.forEach((e=>e.size=Math.round(t*e.size*10)/10)),o.forEach((e=>e.size=Math.round(a*e.size*10)/10)),p&&([s,o]=[o,s]),l.minSize.stops=s,l.maxSize.stops=o}}else{const e=a.classBreakInfos[0].symbol,i=a.classBreakInfos[a.classBreakInfos.length-1].symbol;let n=(0,o.X)(e),s=(0,o.X)(i),t=!1;n>s&&([n,s]=[s,n],t=!0),n!==s&&r>s&&(r=s-.75),n=r,n!==s&&n>d&&(d=n+.75),s=d;const l=1===a.classBreakInfos.length?1:Math.max(s-n,10)/(a.classBreakInfos.length-1);a.classBreakInfos.forEach(((e,i)=>{const a=e.symbol;t?(0,o.Y)(a,s-l*i):(0,o.Y)(a,n+l*i)}))}}function l(e,i){const n=e.stops,s=n.length-1,o=n[0].value,t=n[s].value;if(i<=o)return n[0].size;if(i>=t)return n[s].size;for(let e=0;e<=s;e++){const s=n[e],o=n[e+1];if(i>=s.value&&i<o.value){const e=o.value-s.value,n=s.size-o.size,t=(i-s.value)/e,a=s.size-n*t;return Math.round(100*a)/100}}return 1}function r(){const{mapView:e}=o.s,i=(0,o.b)(),n=(0,o.I)(i,"reference-size"),s=n.referenceSizeScale/e.scale;n.sizeStops.forEach((e=>e.size*=s)),n.referenceSizeScale=e.scale}},14310:(e,i,n)=>{n.d(i,{a:()=>l,b:()=>r,c:()=>a,d:()=>d});n(74129),n(98034);var s=n(37219),o=n(11780),t=n(85714);function a(e){const i=(0,s.a)(),n=(e=e||{}).fieldInfos.length>1?e.fieldInfos[1]:e.fieldInfos[0];if((0,o.s)({fieldInfos:[n]})&&["color-size","type-size"].indexOf(i)>-1){if((0,s.d)((0,s.b)(),"size")&&(0,s.b)().authoringInfo)return u((0,s.b)(),e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))}return(0,o.c)(Object.assign(Object.assign({},e),{fieldInfos:[e.fieldInfos[1]]})).then((i=>u(i.renderer,e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function l(e){const i=(0,s.a)(),n=(e=e||{}).fieldInfos.length>1?e.fieldInfos[1]:e.fieldInfos[0];if((0,o.s)({fieldInfos:[n]})&&["color-size-age","type-size-age"].indexOf(i)>-1){if((0,s.d)((0,s.b)(),"size")&&(0,s.b)().authoringInfo)return u((0,s.b)(),e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))}return(0,o.a)(Object.assign(Object.assign({},e),{fieldInfos:[e.fieldInfos[1]]})).then((i=>u(i.renderer,e).then((e=>Promise.resolve(e)),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function r(e,i){return e=e||{},(0,o.f)(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?[e.fieldInfos[1]]:null})).then((n=>(0,t.a)(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?[e.fieldInfos[0]]:null})).then((e=>(f(e.renderer,n.renderer),e.backgroundFillSymbol=(0,s.b)().backgroundFillSymbol,"size"===i&&(e.statistics=n.statistics),Promise.resolve(e))),(e=>Promise.reject(e)))),(e=>Promise.reject(e)))}function d(e,i){const{modules:n}=s.s;return e=e||{},(0,o.h)(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?[e.fieldInfos[1]]:null})).then((o=>{if(delete e.units,delete e.startTime,delete e.endTime,(0,s.V)(e)){const e=(0,s.b)().clone();e.visualVariables=(0,s.T)(e,"size")||[];const i=(0,s.d)(o.renderer,"size");e.visualVariables.push(i),e.authoringInfo=e.authoringInfo||new n.AuthoringInfo({}),e.authoringInfo.visualVariables=(0,s.U)(e,"size")||[];const t=(0,s.I)(o.renderer,"size");return e.authoringInfo.visualVariables.push(t),Promise.resolve({renderer:e})}return(0,t.a)(Object.assign(Object.assign({},e),{fieldInfos:e.fieldInfos?[e.fieldInfos[0]]:null})).then((e=>(f(e.renderer,o.renderer),e.backgroundFillSymbol=(0,s.b)().backgroundFillSymbol,"size"===i&&(e.statistics=o.statistics),Promise.resolve(e))),(e=>Promise.reject(e)))}),(e=>Promise.reject(e)))}function u(e,i){const n=(0,s.a)();if((0,t.s)(i)&&["type","type-size","type-size-age"].indexOf(n)>-1){const i=(0,s.b)().clone();return f(i,e),Promise.resolve({renderer:i})}return(0,t.c)(Object.assign(Object.assign({},i),{fieldInfos:[i.fieldInfos[0]]})).then((i=>(f(i.renderer,e),Promise.resolve(i))),(e=>Promise.reject(e)))}function f(e,i){const{modules:n}=s.s;e.visualVariables=(0,s.T)(e,"size")||[],e.visualVariables=(0,s.T)(e,"size","auto")||[];const o=(0,s.d)(i,"size");e.visualVariables.push(o),e.authoringInfo=e.authoringInfo||new n.AuthoringInfo({}),e.authoringInfo.visualVariables=(0,s.U)(e,"size")||[];const t=(0,s.I)(i,"size");if(e.authoringInfo.visualVariables.push(t),(0,s.B)()){const n=i.classBreakInfos&&i.classBreakInfos.length?i.classBreakInfos[0].symbol:i.uniqueValueInfos&&i.uniqueValueInfos.length?i.uniqueValueInfos[0].symbol:(0,s.o)("type-size"),o=e.uniqueValueInfos.slice();o.map((e=>{const i=(0,s.Q)(e.symbol);e.symbol=n.clone(),(0,s.W)(e.symbol,i)})),e.uniqueValueInfos=o,e.backgroundFillSymbol=i.backgroundFillSymbol;const t=(0,s.d)(i,"size","outline");t&&e.visualVariables.push(t)}}}}]);