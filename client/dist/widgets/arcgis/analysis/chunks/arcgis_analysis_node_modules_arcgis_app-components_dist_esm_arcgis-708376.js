/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-708376.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-708376"],{99004:(e,r,t)=>{t.d(r,{c:()=>n,g:()=>i});var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t.g?t.g:"undefined"!=typeof self?self:{};function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}},1391:(e,r,t)=>{t.d(r,{a:()=>i,b:()=>s,c:()=>o,d:()=>n});const n=(0,t(10699).c)({typeKeywords:[],customParameters:[],analyzedLocationTypes:[],allowStoredAuth:!0,isSecured:null,checkAuth:!1}),i=n.state,o=n.state,s=n.state},76246:(e,r,t)=>{t.d(r,{a:()=>n,i:()=>i});const n={FeatureServer:"Feature Service",GeocodeServer:"Geocoding Service",GeoDataServer:"Geodata Service",GeometryServer:"Geometry Service",GeoenrichmentServer:"Geoenrichment Service",GPServer:"Geoprocessing Service",GlobeServer:"Globe Service",ImageServer:"Image Service",MapServer:"Map Service",NAServer:"Network Analysis Service",ElevationServer:"Image Service",VectorTileServer:"Vector Tile Service",SceneServer:"Scene Service",StreamServer:"Stream Service",WMServer:"Workflow Manager Service",TiledImageServer:"Image Service",VideoServer:"Video Service",KnowledgeGraphServer:"Knowledge Graph Layer"},i=e=>!!Object.values(n).includes(e)},59285:(e,r,t)=>{t.r(r),t.d(r,{arcgis_new_item_pages_feature_layer_select:()=>v});var n=t(20536),i=t(76776),o=t(1391),s=t(19832),a=t(15834),l=t(44090),c=t(60127),u=t(66301),d=t(16808);t(10699),t(25972),t(98034),t(99004),t(38973),t(369),t(16093),t(76246),t(34472),t(79717),t(68537),t(78231);const v=class{constructor(e){(0,n.r)(this,e),this.newItemUpdatePage=(0,n.c)(this,"newItemUpdatePage",7),this.options={build:{icon:"layer",page:"featureLayerFromScratch"},existing:{icon:"layers",page:"featureLayerFromExisting"},template:{icon:"add-layer",page:"featureLayerFromTemplate"},link:{icon:"link",page:"featureLayerFromURL"},custom:{icon:"serial-port",page:"featureLayerFromCustomDataProvider"}},this.selected="build",this.cdfEnabled=void 0,this.openCDPAlert=void 0,this.hasCDPPrivileges=void 0}async componentWillLoad(){const{user:e,portal:r}=l.c;o.a.enablePublishing=!1,o.a.newItemMode="featureLayer",o.a.type="Feature Service",i.i.tags=[],i.i.snippet="",o.a.serviceInfo=null,o.a.selectedServiceInfoLayersNames=null,this.selected=o.a.addFeatureLayerType||"build",this.i18n=s.u.i18n.featureLayerSelect,this.cdfEnabled=await(0,a.c)(),this.hasCDPPrivileges=await this.canPublishCustomDataProvider(e,r);const t=await(0,c.g)();this.hasCustomDataProviders=t&&Object.keys(t).length>0}handleNext(){const e=this.selected;o.a.addFeatureLayerType=e,o.a.enablePublishing=!0,(0,a.d)(e),this.openCDPAlert="custom"===this.selected&&!this.hasCustomDataProviders,this.openCDPAlert||this.newItemUpdatePage.emit(this.options[this.selected].page)}async canPublishCustomDataProvider(e,r){const t=await(0,d.m)(e),n=await(0,d.d)(e,r);return t&&n}render(){const{i18n:e,options:r}=this,{portal:t,config:{helpBase:i,helpMap:o}}=l.c;return(0,n.h)("div",{key:"66cb48406dd171f7a41bebc9d61acd555948791c"},(0,n.h)("arcgis-new-item-description",{key:"962b40f7835f802d15f62228b062821af581f471",header:e.heading}),(0,n.h)("calcite-tile-select-group",{key:"df91e77627fb70fd6ecf17980678b80141a94236",layout:"vertical",class:"tile-select"},Object.keys(r).map((i=>{var o;const{icon:s}=r[i];if("custom"!==i||this.hasCDPPrivileges&&"Error"!==(null===(o=this.cdfEnabled)||void 0===o?void 0:o.message)&&t.isPortal&&!(0,u.i)())return(0,n.h)("calcite-tile-select",{checked:this.selected===i,heading:e.options[i].title,description:e.options[i].description,icon:s,name:"feature-layer-create-mode","input-enabled":!0,width:"full",type:"radio",value:i,onCalciteTileSelectChange:e=>{this.selected=e.target.value}})}))),(0,n.h)("calcite-alert",{key:"1eee103bf076c1db66af01f0edbfb48c05a8aefa",icon:"exclamation-mark-triangle",open:this.openCDPAlert,label:this.i18n.alertTitle,kind:"danger",onCalciteAlertClose:()=>this.openCDPAlert=!1},(0,n.h)("div",{key:"72acf891f1fc94483a6b99906a054d7a393f79af",slot:"title"},e.alertTitle," "),(0,n.h)("div",{key:"230f9f13096d899d0311c182458da40b8c1960c7",slot:"message"},e.alertDesc),(0,n.h)("calcite-link",{key:"fe4c617948dea61ecf52d98a2e78db51a0a5adc6",slot:"link",href:`${i}${o[120004964]}`},e.learnMore)))}get el(){return(0,n.d)(this)}};v.style=".tile-select{margin-top:1.25rem}"},60127:(e,r,t)=>{t.d(r,{g:()=>o});var n=t(38973),i=t(25972);async function o(){const e=(0,n.g)().replace("portal/sharing/rest/","server/admin/services/types/customdataproviders");try{return await(0,i.r)(e,"post")}catch(e){console.warn(e)}}},66301:(e,r,t)=>{t.d(r,{a:()=>a,b:()=>d,c:()=>s,d:()=>u,e:()=>y,f:()=>l,g:()=>p,h:()=>c,i:()=>h});var n=t(25972),i=t(44090),o=t(16093);function s(e,r){const t={type:"folder",path:`/fileShares/${r}`,info:{datastoreConnectionType:"shared",path:e.publisherFolderPath,hostName:e.publisherFolderPathHostname}};return"newPath"===e.serverFolderPath?(t.clientPath=e.publisherFolderPath,t.info.path=e.newServerFolderPath,t.info.datastoreConnectionType="replicated"):"nfsHostAndPath"===e.serverFolderPath&&(t.clientPath=e.publisherFolderPath,t.provider="UserManaged",t.info.datastoreConnectionType="replicated",t.info.fileServerPath=e.nfsSharePath,t.info.fileServerHost=e.nfsHostName,t.info.fileServerType="nfs"),t}function a(e,r){const t={type:"egdb",path:"/enterpriseDatabases/"+r,info:{dataStoreConnectionType:"shared"}};return"newConnection"===e.serverDatabaseOption?(t.info.connectionString=e.serverConnectionString,t.info.clientConnectionString=e.publisherConnectionString,t.info.dataStoreConnectionType="replicated"):"bigQuery"===e.databaseProvider||"snowflake"===e.databaseProvider?t.info.JDBCConnection=e.jdbcConnection:t.info.connectionString=e.publisherConnectionString,t}const l=async(e,r,t,n)=>{let i,o;if((null==t?void 0:t.length)>0){try{o=JSON.parse(t)}catch(e){return{error:{code:"invalidJSON"}}}i=function(e,r){const{type:t,project_id:n,private_key_id:i,private_key:o,client_email:s,client_id:a,auth_uri:l,token_uri:c,auth_provider_x509_cert_url:u,client_x509_cert_url:d}=r,v={oAuthType:0,projectId:e,url:"jdbc:bigquery://https://www.googleapis.com/bigquery/v2:443",oAuthPvtKeyFile:{type:t,project_id:n,private_key_id:i,private_key:o,client_email:s,client_id:a,auth_uri:l,token_uri:c,auth_provider_x509_cert_url:u,client_x509_cert_url:d}};return v}(e,o)}else(null==n?void 0:n.length)>0&&(i=function(e,r,t){const n={name:"BigqueryArcgisPlatform_RefreshToken",className:"com.esri.sds.bigquery.jdbc.GBQDataSource",oAuthType:2,projectId:e,defaultDataset:r,url:"jdbc:bigquery://https://www.googleapis.com/bigquery/v2:443",oAuthRefreshToken:t};return n}(e,r,n));return{result:{type:"egdb",path:"/enterpriseDatabases/bigQuerySvrDevDataJdbc",id:null,clientPath:null,info:{JDBCConnection:i}}}};function c(e){const{user:r,password:t,database:n,role:i,server:o,warehouse:s,schema:a}=e;return{path:"/enterpriseDatabases/snowflakeJdbc",type:"egdb",info:{JDBCConnection:{user:r,password:t,database:n,role:i,connectionUrl:`jdbc:snowflake://${o}`,warehouse:s,schema:a}}}}function u(e,r){if("Arango"===e.noSqlProvider){const r={type:"nosql",path:"/nosqlDatabases/Arango_enterprise",info:{systemManaged:!1,dsFeature:"graphStore",isManagedData:!1,category:"database",factory:"nosql",provider:"ArangoDB",implementation:"ArangoDB",purposes:["knowledge-graph"],connectionProperties:{hosts:[],useSsl:e.useSsl,username:e.username,password:e.password,database:e.database}}};return""!==e.hosts?r.info.connectionProperties.hosts=e.hosts.split(","):delete r.info.connectionProperties.hosts,r}const t={type:"nosql",path:`/nosqlDatabases/${r}`,info:{provider:"Neo4J",isManaged:!1,dsFeature:"graphStore",factory:"nosql",implementation:"Neo4j",category:"database",systemManaged:!1,isManagedData:!1,purposes:["knowledge-graph"],connectionProperties:{connectionUri:e.connectionUri,username:e.username,password:e.password,database:e.database,fallbackServerAddresses:[]}}};return""!==e.fallBackServers?t.info.connectionProperties.fallbackServerAddresses.push(e.fallBackServers.split(",")):delete t.info.connectionProperties.fallbackServerAddresses,t}function d(e,r){const t=e.provider,n={info:{}},i={credentialType:"accesskey"};return"amazon"===t&&("accessKey"===e.credentialType?(i.accessKeyId=e.accessKey,i.secretAccessKey=e.secretKey):i.credentialType=e.credentialType,"custom"===e.selectedRegion.id?i.regionEndpointUrl=e.storageURL:(i.regionEndpointUrl=v(e.regions,e.selectedRegion),i.region=e.selectedRegion.id),n.info.objectStore=e.bucketName,n.provider="amazon"),"google"===t&&(i.accessKeyId=e.accessKey,i.secretAccessKey=e.secretKey,i.regionEndpointUrl="https://storage.googleapis.com",n.info.objectStore=e.bucketName,n.provider="Google"),"azure"!==t&&"azuredatalakegen2store"!==t||("sharedKey"===e.azureAuthenticationType?(i.credentialType="accessKey",i.accountKey=e.accountKey):"activeDirectory"===e.azureAuthenticationType?(i.credentialType=e.azureIdentityType,"servicePrincipal"===e.azureIdentityType?(i.tenantId=e.tenantId,i.clientId=e.clientId,i.clientSecret=e.clientSecret,i.authorityHost=e.authorityHost):"userAssignedIdentity"===e.azureIdentityType&&(i.managedIdentityClientId=e.clientId)):"sasToken"===e.azureAuthenticationType?(i.credentialType=e.azureAuthenticationType,i.sasToken=e.token):"anonymous"===e.azureAuthenticationType&&(i.credentialType=e.azureAuthenticationType),"other"===e.environment.id||"anonymous"===e.azureAuthenticationType?i.regionEndpointUrl=e.endpoint:i.accountEndpoint=v(e.regions,e.environment),i.accountName=e.accountName,"azure"===t?(n.info.objectStore=e.containerName,n.provider="azure"):(n.info.folder=e.cloudFolder?`${e.containerName}/${(0,o.j)(e.cloudFolder)}`:e.containerName,n.provider="azureDataLakeStore")),"alibaba"===t&&(i.accessKeyId=e.accessKey,i.secretAccessKey=e.secretKey,n.info.objectStore=e.bucketName,n.provider="Alibaba",i.regionEndpointUrl="custom"===e.selectedRegion.id?e.storageURL:v(e.regions,e.selectedRegion)),i.defaultEndpointsProtocol="https",e.cloudFolder&&"azuredatalakegen2store"!==t&&(n.info.objectStore=n.info.objectStore+"/"+(0,o.j)(e.cloudFolder)),n.type="cloudStore",n.path="/cloudStores/"+r,n.info.connectionString=JSON.stringify(i),n}function v(e,r){let t;return e.forEach((function(e){e.id===r.id&&(t=e.blobStoreEndpoint||e.storageEndpointSuffix)})),t}const p=async(e,r)=>{const t=e.results.out_connectionString.paramUrl,i=`${r}/Get%20Database%20Connection%20String/jobs/${e.jobId}/${t}`,o=await(0,n.r)(i);return f(o)},f=e=>{const r=e.value;return{connectionStringProps:g(r),connectionString:r}},g=e=>{let r=[];return e&&e.split(";").forEach((e=>{const t=e.split("=");2!==t.length||m(r,t[0])||r.push({key:t[0],value:t[1]})})),r},m=(e,r)=>e.some((e=>e.key===r)),h=()=>{var e;const r=i.c.portal,t=r.portalDeploymentType||(null===(e=r.sourceJSON)||void 0===e?void 0:e.portalDeploymentType);return r.isPortal&&"ArcGISEnterpriseOnKubernetes"===t},y=e=>{if(!e)return"";return`${e}/rest/services/System/PublishingTools/GPServer`}},15834:(e,r,t)=>{t.d(r,{a:()=>f,b:()=>v,c:()=>m,d:()=>p,e:()=>u,f:()=>g,i:()=>d});var n=t(44090),i=t(1391),o=t(25972),s=t(38973);const a="create feature layer",l="my content",c=e=>{switch(e){case"build":return"blank";case"existing":return"fs";case"template":return"template";case"link":return"url"}},u=e=>{const r=n.c.telemetry;null==r||r.stepWorkflow(a,"enable "+("captureGPS"===e?"gps":"enableZDefaults"===e?"z":"m"),{category:a,attribute:c(i.a.addFeatureLayerType),pageName:l})},d=e=>{const r=n.c.telemetry;null==r||r.stepWorkflow(a,`expand ${e} details`,{category:a,attribute:c(i.a.addFeatureLayerType),pageName:l})},v=()=>{const e=n.c.telemetry;null==e||e.stepWorkflow(a,"filter",{category:a,attribute:c(i.a.addFeatureLayerType),pageName:l})},p=e=>{const r=c(e),t=n.c.telemetry;null==t||t.stepWorkflow(a,"from option",{category:a,attribute:r,pageName:l})},f=()=>{const{addFeatureLayerType:e,serviceInfo:r}=i.a,t=r,o=n.c.telemetry;null==o||o.endWorkflow(a,{category:a,attribute:c(e),pageName:l,count:t.layers.length,number:t.tables.length})},g=e=>{var r;null===(r=n.c.telemetry)||void 0===r||r.logError({category:a,error:e})};async function m(){const e=(0,s.g)().replace("portal/sharing/rest/","server/admin/services/types/customdataproviders/checkcdf");try{return await(0,o.r)(e,"post")}catch(e){return e}}},78231:(e,r,t)=>{t.d(r,{a:()=>a,b:()=>s,c:()=>u,d:()=>d,e:()=>v,f:()=>g,g:()=>T,h:()=>m,i:()=>l,j:()=>b,k:()=>w,l:()=>h,m:()=>P,n:()=>S,o:()=>f,p:()=>y,q:()=>p,u:()=>c});var n=t(98034),i=t(38973);function o(e){var r;return!!(null===(r=e.owner)||void 0===r?void 0:r.toLowerCase().includes("esri"))}function s(e){var r;return o(e)&&!!(null===(r=e.typeKeywords)||void 0===r?void 0:r.includes("Requires Credits"))}function a(e){var r;return o(e)&&!!(null===(r=e.typeKeywords)||void 0===r?void 0:r.includes("Requires Subscription"))}function l(e,r){return e.owner===r.username}function c(e,r){return l(e,r)||function(e,r){var t;if(null!=e.isAdmin)return!!e.isAdmin;const n=e.owner,i="admin"===e.itemControl,o=["esri_livingatlas","esri_demographics","esri_boundaries"];if((null===(t=e.portal)||void 0===t?void 0:t.isPortal)&&!l(e,r)&&i&&n.includes("esri_")&&!o.includes(n))return!1;return i}(e,r)}const u=(e,r)=>!!r.orgId&&e.every((e=>e.isOrgItem)),d=(e,r)=>`${(0,i.a)(r)}item.html?id=${e}`,v=(e,r)=>`${(0,i.g)(r)}/content/users/${e}`,p=e=>e.reduce(((e,r)=>(e[r.owner]=e[r.owner]?[...e[r.owner],r.id]:[r.id],e)),{});function f(e){var r;return null===(r=e.typeKeywords)||void 0===r?void 0:r.includes("Spatiotemporal")}function g(e){var r;return null===(r=e.typeKeywords)||void 0===r?void 0:r.includes("View Service")}function m(e){var r;return null===(r=e.typeKeywords)||void 0===r?void 0:r.includes("Hosted Service")}function h(e){var r;return null===(r=e.typeKeywords)||void 0===r?void 0:r.includes("Multi Services View")}function y(e){return(null==e?void 0:e.hasViews)&&!e.sourceSchemaChangesAllowed}async function b(e){var r;const t=null==e?void 0:e.portalItem;if(!t)return Promise.resolve(null);const o=t.portal,[s]=await(0,n.l)(["esri/request"]);if(null==o?void 0:o.user){return s(`${(0,i.g)(o)}community/users/${o.user.username}`,{query:{f:"json",token:null===(r=t.portal.credential)||void 0===r?void 0:r.token},responseType:"json"}).then((e=>{var r,t;const n=null!==(t=null===(r=e.data)||void 0===r?void 0:r.groups)&&void 0!==t?t:[];return Promise.resolve(n)}),(()=>Promise.reject()))}return Promise.resolve(null)}async function w(e){var r;const t=null==e?void 0:e.portalItem;if(!t)return Promise.resolve(null);const o=t.portal,[s]=await(0,n.l)(["esri/request"]);return s(`${(0,i.g)(o)}content/items/${t.id}/groups`,{query:{f:"json",token:null===(r=t.portal.credential)||void 0===r?void 0:r.token},responseType:"json"}).then((e=>{var r,t,n,i,o,s;const a=[...null!==(t=null===(r=e.data)||void 0===r?void 0:r.admin)&&void 0!==t?t:[],...null!==(i=null===(n=e.data)||void 0===n?void 0:n.member)&&void 0!==i?i:[],...null!==(s=null===(o=e.data)||void 0===o?void 0:o.other)&&void 0!==s?s:[]];return Promise.resolve(a)}),(()=>Promise.reject()))}async function S(e,r,{relationshipType:t,direction:o}){const s=`${(0,i.g)(r)}content/items/${e}/relatedItems`,[a]=await(0,n.l)(["esri/request"]);return await a(s,{query:{f:"json",relationshipType:t,direction:o},method:"get",responseType:"json"})}function P(e,r){return null==e?void 0:e.some((e=>null==r?void 0:r.some((r=>e.id===r.id&&e.capabilities.includes("updateitemcontrol")))))}const T=(e,r)=>`${r}/content/items/${e}`},76776:(e,r,t)=>{t.d(r,{a:()=>n,i:()=>i});const n=(0,t(10699).c)({title:"",snippet:"",tags:[],categories:[]}),i=n.state},98034:(e,r,t)=>{t.d(r,{e:()=>o,l:()=>s});var n,i=t(99004),o={exports:{}};n=o.exports,i.c,function(e){var r={Promise:"undefined"!=typeof window?window.Promise:void 0},t="4.24",n="next";function i(e){if(e.toLowerCase()===n)return n;var r=e&&e.match(/^(\d)\.(\d+)/);return r&&{major:parseInt(r[1],10),minor:parseInt(r[2],10)}}function o(e){return void 0===e&&(e=t),"https://js.arcgis.com/".concat(e,"/")}function s(e){void 0===e&&(e=t);var r=o(e),s=i(e);if(s!==n&&3===s.major){var a=s.minor<=10?"js/":"";return"".concat(r).concat(a,"esri/css/esri.css")}return"".concat(r,"esri/themes/light/main.css")}function a(e){var r=document.createElement("link");return r.rel="stylesheet",r.href=e,r}function l(e,r){if(r){var t=document.querySelector(r);t.parentNode.insertBefore(e,t)}else document.head.appendChild(e)}function c(e){return document.querySelector('link[href*="'.concat(e,'"]'))}function u(e){return!e||i(e)?s(e):e}function d(e,r){var t=u(e),n=c(t);return n||l(n=a(t),r),n}var v={};function p(e){var r=document.createElement("script");return r.type="text/javascript",r.src=e,r.setAttribute("data-esri-loader","loading"),r}function f(e,r,t){var n;t&&(n=g(e,t));var i=function(){r(e),e.removeEventListener("load",i,!1),n&&e.removeEventListener("error",n,!1)};e.addEventListener("load",i,!1)}function g(e,r){var t=function(n){r(n.error||new Error("There was an error attempting to load ".concat(e.src))),e.removeEventListener("error",t,!1)};return e.addEventListener("error",t,!1),t}function m(e){void 0===e&&(e={}),v=e}function h(){return document.querySelector("script[data-esri-loader]")}function y(){var e=window.require;return e&&e.on}function b(e){void 0===e&&(e={});var t={};[v,e].forEach((function(e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}));var n=t.version,i=t.url||o(n);return new r.Promise((function(e,r){var o=h();if(o){var s=o.getAttribute("src");s!==i?r(new Error("The ArcGIS API for JavaScript is already loaded (".concat(s,")."))):y()?e(o):f(o,e,r)}else if(y())r(new Error("The ArcGIS API for JavaScript is already loaded."));else{var a=t.css;a&&d(!0===a?n:a,t.insertCssBefore),f(o=p(i),(function(){o.setAttribute("data-esri-loader","loaded"),e(o)}),r),document.body.appendChild(o)}}))}function w(e){return new r.Promise((function(r,t){var n=window.require.on("error",t);window.require(e,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];n.remove(),r(e)}))}))}function S(e,r){if(void 0===r&&(r={}),y())return w(e);var t=h(),n=t&&t.getAttribute("src");return!r.url&&n&&(r.url=n),b(r).then((function(){return w(e)}))}e.utils=r,e.loadModules=S,e.getScript=h,e.isLoaded=y,e.loadScript=b,e.setDefaultOptions=m,e.loadCss=d,Object.defineProperty(e,"__esModule",{value:!0})}(n);const s=async(e,r)=>(await o.exports.loadModules(e,r)).map((e=>e.__esModule&&e.default?e.default:e))},79717:(e,r,t)=>{t.d(r,{a:()=>v,b:()=>u,c:()=>a,d:()=>l,e:()=>p,f:()=>o,g:()=>d,h:()=>s,i:()=>f,q:()=>c});var n=t(25972),i=t(38973);function o(e){var r;return"ArcGISEnterpriseOnKubernetes"===(e.portalDeploymentType||(null===(r=e.sourceJSON)||void 0===r?void 0:r.portalDeploymentType))}function s(e){var r,t;return e.isPortal?"modern"===(null===(t=e.portalProperties)||void 0===t?void 0:t.homePage)||function(e){var r;return e.isPortal&&"modernOnly"===(null===(r=e.portalProperties)||void 0===r?void 0:r.homePage)}(e):"modern"===(null===(r=e.portalProperties)||void 0===r?void 0:r.homePage)||function(e){const r=new Date("June 30, 2020").getTime();return!e.isPortal&&e.created>=r}(e)}async function a(e){try{return{result:await(0,n.f)((()=>(0,n.r)(`${(0,i.g)(e)}portals/self/resources/home.page.json`)),"homePageConfig",e.id)}}catch(e){return{result:void 0}}}async function l(e){return(0,n.f)((()=>(0,n.r)(`${(0,i.g)(e)}portals/self/userDefaultSettings`)),"memberDefaults",e.id)}async function c(e={},r){return(0,n.r)(`${(0,i.g)(r)}/community/groups`,e)}const u=async(e,r)=>{var t;if(!e)return[];const o=`${(0,i.a)(null!==(t=r.restUrl)&&void 0!==t?t:r.portalUrl)}portals/self/servers`,s=await(0,n.f)((()=>(0,n.r)(o)),"selfServers",r.id);return null==s?void 0:s.servers},d=e=>v((0,i.c)(e)),v=e=>{var r;const t=`${(0,i.a)(null!==(r=(0,i.b)(e))&&void 0!==r?r:e)}info`;return(0,n.f)((()=>(0,n.r)(t,{},{addTokenManually:!1})),"portalInfo",t)};async function p(e,r){return!e.isPortal||await f(e,r)}async function f(e,r){if(!r||!e)return!1;if(!e.isPortal)return!0;const{result:t,error:i}=await(0,n.f)((()=>g(e,r)),"isPortalBackedBySDS",e.id);return!i&&t}const g=async(e,r)=>{if(e.isBackedBySDS)return{result:!0};if(!e.isPortal)return{result:!0};try{return{result:!!await m(r,e)}}catch(e){return console.error(e),{error:{code:"unhandledError",message:JSON.stringify(e)},result:!1}}},m=async(e,r)=>{var t;return(null!==(t=await u(e,r))&&void 0!==t?t:[]).filter((e=>e.isHosted))[0]}},16808:(e,r,t)=>{t.d(r,{A:()=>k,B:()=>N,a:()=>L,b:()=>y,c:()=>A,d:()=>v,e:()=>p,f:()=>S,g:()=>b,h:()=>f,i:()=>h,j:()=>P,k:()=>T,l:()=>O,m:()=>u,n:()=>_,o:()=>D,p:()=>d,q:()=>q,r:()=>$,s:()=>E,t:()=>x,u:()=>j,v:()=>K,w:()=>G,x:()=>F,y:()=>l,z:()=>C});var n=t(79717),i=t(38973),o=t(68537),s=t(44090),a=t(25972);async function l(){return new Promise((async e=>{const{portal:r}=s.c;if(null==r?void 0:r.isPortal){const t=r.helperServices.geocode,n=await function(e){const{config:r,portal:t}=s.c;return new Promise((async(n,i)=>{const o=e.filter((e=>c(e.url,t))).filter((e=>e.isEsriBatchGeocoder))[0];if(o){const e=o.url.split("/servers/")[1].split("/rest/services/")[0],t=`${r.restBaseUrl}/content/items/${e}`;try{n((await(0,a.r)(t)).url)}catch(e){i(e)}}else i("No world geocoder configured")}))}(t);e(n)}else{const t=function(e){const r=null==e?void 0:e.portalHostname;if(-1!==r.indexOf("dev"))return"dev";if(-1!==r.indexOf("qa"))return"qa";return""}(r);e(`https://geocode${t}.arcgis.com/arcgis/rest/services/World/GeocodeServer`)}}))}function c(e="",r){var t;const n=r.isPortal,i=e.toLowerCase(),o=i.indexOf("/geocodeserver")>-1&&i.indexOf("/rest/services/")>-1,s=n&&i.indexOf(null===(t=r.portalHostname)||void 0===t?void 0:t.toLowerCase())>-1,a=!n&&i.indexOf("utility")&&i.indexOf(".arcgis.com")>-1;return o&&(s||a)}function u(e){return(0,o.b)(e)||(null==e?void 0:e.privileges.includes("portal:user:createItem"))}function d(e){return(0,o.b)(e)||(null==e?void 0:e.privileges.includes("portal:user:receiveItems"))}async function v(e,r){return!(0,o.b)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishFeatures"))&&await(0,n.i)(r,e)}const p=e=>!(0,o.b)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishServerServices"));async function f(e,r){return!(0,o.b)(e)&&(null==e?void 0:e.privileges.includes("portal:publisher:publishTiles"))&&await(0,n.i)(r,e)}const g=async(e,r)=>{var t;return await f(e,r)&&(!r.isPortal||!!r.supports3DTilesServices||!!(null===(t=r.sourceJSON)||void 0===t?void 0:t.supports3DTilesServices))};function m(e){return!(0,o.b)(e)&&!0}function h(e){var r;return!(0,o.b)(e)&&(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:publisher:publishScenes"))}const y=e=>!(0,o.b)(e);function b(e,r,t){var n,i;const o=!!(null===(i=null===(n=r.helperServices)||void 0===n?void 0:n.rasterAnalytics)||void 0===i?void 0:i.url),s=function(e,r,t){var n;return(null===(n=null==e?void 0:e.privileges)||void 0===n?void 0:n.includes("portal:publisher:publishDynamicImagery"))&&(r.isPortal||w(t))}(e,r,t),a=r.isPortal?s:s||function(e,r,t){var n;return(null===(n=null==e?void 0:e.privileges)||void 0===n?void 0:n.includes("portal:publisher:publishTiledImagery"))&&!r.isPortal&&w(t)}(e,r,t);return o&&a}function w(e){return null==e?void 0:e.some((e=>{var r;return null===(r=e.entitlements)||void 0===r?void 0:r.some((e=>"image"===e.toLowerCase()))}))}async function S(e){var r;const{userLicensedItems:t}=await(0,a.r)(`${null!==(r=e.restUrl)&&void 0!==r?r:e.portalUrl}/community/self?returnUserLicensedItems=true`);return t}function P(e,r){var t,n;const s=null===(t=r.helperServices)||void 0===t?void 0:t.geocode.some((({url:e})=>c(e,r))),a=null!==(n=null==e?void 0:e.privileges)&&void 0!==n?n:[];return!(0,o.b)(e)&&s&&(!r.isPortal||!(0,i.i)(r)&&a.includes("portal:user:viewOrgItems")&&a.includes("portal:user:createItem"))}const T=e=>!(0,o.b)(e);function k(e){return null==e?void 0:e.privileges.includes("premium:publisher:createAdvancedNotebooks")}function C(e){return null==e?void 0:e.privileges.includes("premium:publisher:createNotebooks")}function I(e){return["portal:publisher:createDataPipelines","portal:user:createItem","portal:publisher:publishFeatures"].every((r=>{var t;return null===(t=e.privileges)||void 0===t?void 0:t.includes(r)}))}function O(e,r){var t,n,i;return r.isPortal?!!(null===(t=null==e?void 0:e.privileges)||void 0===t?void 0:t.includes("portal:publisher:registerDataStores")):I(e)&&("1"===(null===(n=null==e?void 0:e.sourceJSON)||void 0===n?void 0:n.level)||"2"===(null===(i=null==e?void 0:e.sourceJSON)||void 0===i?void 0:i.level))}const _=e=>!(0,o.b)(e)&&I(e);function D(e){return!(0,o.b)(e)&&(null==e?void 0:e.privileges.includes("premium:user:geocode"))}const x=e=>null==e?void 0:e.privileges.includes("premium:user:geocode:stored");async function A(e,r,t){return!r.isPortal&&await v(e,r)&&await async function(e,r,t){return!(0,o.b)(e)&&!!r.supportsHostedServices&&u(e)&&(await f(e,r)||await v(e,r)||h(e)||m(e)||b(e,r,t))}(e,r,t)}async function L(e,r,t){switch(r){case"CSV":case"GeoJson":case"Microsoft Excel":case"Shapefile":case"File Geodatabase":case"Photos with Locations":return v(e,t);case"Tile Package":return f(e,t);case"3DTiles Package":return g(e,t);case"Vector Tile Package":return m(e);case"Scene Package":return h(e);case"Service Definition":return async function(e,r){return await v(e,r)&&await f(e,r)}(e,t);default:return!0}}function $(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:manageCredits"))}function j(e,r){var t,n,i;return(0,o.e)(e)||$(e)||!!((null!==(t=null==e?void 0:e.assignedCredits)&&void 0!==t?t:null===(n=null==e?void 0:e.sourceJSON)||void 0===n?void 0:n.assignedCredits)>-1&&(null===(i=null==r?void 0:r.portalProperties)||void 0===i?void 0:i.showCreditsOnProfile))}const G=e=>!1;function N(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:viewGroups"))}function E(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:viewUsers"))}function q(e){return(0,o.d)(e)||E(e)&&function(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:viewItems"))}(e)&&(function(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:updateItems"))}(e)||function(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:deleteItems"))}(e)||function(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:reassignItems"))}(e))}function F(e){return e.map((e=>`portal:app:access:item:${e.id}`))}const K=e=>e.privileges.includes("portal:user:assignPrivilegesToApps")},68537:(e,r,t)=>{t.d(r,{a:()=>a,b:()=>o,c:()=>s,d:()=>f,e:()=>p,f:()=>v,g:()=>g,h:()=>h,i:()=>c,j:()=>m,k:()=>I,l:()=>l,m:()=>y,n:()=>d,o:()=>x,p:()=>w,q:()=>S,r:()=>C,s:()=>T,t:()=>P,u:()=>k,v:()=>_,w:()=>u,x:()=>O});var n=t(78231);const i=e=>{var r,t,n;return"string"==typeof(null==e?void 0:e.role)&&(null==e?void 0:e.role)?null==e?void 0:e.role:null!==(t=null!==(r=null==e?void 0:e.roleId)&&void 0!==r?r:null==e?void 0:e.id)&&void 0!==t?t:null===(n=null==e?void 0:e.sourceJSON)||void 0===n?void 0:n.id};function o(e){return e&&!e.orgId}function s(e,r){return(0,n.u)(e,r)||"update"===e.itemControl||(0,n.c)([e],r)&&p(r)}function a(e,r){const t=(0,n.c)([e],r),i=(0,n.u)(e,r)||p(r)&&t,o=g(r)&&b(r);return!!(i||t&&o)}const l=e=>{var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:manageLicenses"))};function c(e){return["Trial Developer","Developer","Developer Subscription"].includes(null==e?void 0:e.type)}function u(e){return["Developer Subscription"].includes(null==e?void 0:e.type)}function d(e){return["Geoanalytics Engine","GeoAnalytics MS Fabric"].includes(null==e?void 0:e.type)}const v=e=>{var r;return null===(r=null==e?void 0:e.options)||void 0===r?void 0:r.includes("Developer")};function p(e){return"org_admin"===i(e)||"account_admin"===i(e)}function f(e){return["org_admin","account_admin"].includes(i(e))&&!(null==e?void 0:e.roleId)}function g(e){return!!(null==e?void 0:e.roleId)&&e.roleId.length>0}function m(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:updateItemCategorySchema"))}function h(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:updateGroups"))}function y(e){var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:assignToGroups"))}const b=e=>{var r;return!!(null===(r=null==e?void 0:e.privileges)||void 0===r?void 0:r.includes("portal:admin:deleteItems"))};function w(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToGroup")}function S(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToOrg")}function P(e){return((null==e?void 0:e.privileges)||[]).includes("portal:user:shareToPublic")}function T(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToOrg")}function k(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToPublic")}function C(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:shareToGroup")}function I(e,r,t,n){const i=n&&!["Trial","Trial Press","Trial Developer","Developer Subscription","Evaluation"].includes(n.type),o=((null==r?void 0:r.privileges)||[]).includes("portal:admin:manageCollaborations");return!(!(null==e?void 0:e.collaborationsEnabled)||!r||!p(r)&&!o||!(null==t?void 0:t.isPortal)&&!i)}function O(e){return!!e&&(!g(e)||g(e)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:viewItems")}(e))}const _=({items:e,user:r,portal:t})=>{const i=e[0],o=i.owner;if(t.isPortal&&o!==r.username&&o.includes("esri_")&&!["esri_livingatlas"].includes(o))return!1;const a=(0,n.u)(i,r),l=g(r),c=D(r),u=s(i,r)&&function(e){return((null==e?void 0:e.privileges)||[]).includes("portal:admin:updateItems")}(r)&&!l&&(function(e,r){return!function(e){return!(!e.urlKey||!e.customBaseUrl)||!!e.isPortal}(r)||w(e)||S(e)||!!r.canSharePublic&&P(e)}(r,t)||D(r));return a||u||(0,n.c)(e,r)&&c};function D(e){return C(e)||T(e)||k(e)}function x(e){const r=["portal:user:createItem","portal:user:viewOrgItems","premium:publisher:createNotebooks","portal:publisher:createDataPipelines","features:user:edit","features:user:fullEdit","portal:admin:viewItems","portal:admin:updateItems","portal:admin:deleteItems"];return e.some((e=>r.includes(e)))}},58151:(e,r,t)=>{t.d(r,{a:()=>u,b:()=>c,c:()=>d,d:()=>o,e:()=>i,g:()=>a,r:()=>l,s:()=>s,u:()=>v});var n=t(91616);function i(e,r,t,n){!function(e,r,t){t=t||{};let n=null==t?void 0:t.expires;if("number"==typeof n){const e=new Date,r=24*n*60*60*1e3;e.setTime(Date.now()+r),n=t.expires=e}"string"!=typeof n&&(null==n?void 0:n.toUTCString)&&(t.expires=n.toUTCString());let i,o=`${e}=${encodeURIComponent(r)}`;for(i in t){o+=`; ${i}`;const e=t[i];!0!==e&&(o+=`=${e}`)}document.cookie=o}(e,n?JSON.stringify(r):r,t)}function o(e,r){const t=function(e){const r=document.cookie,t=new RegExp(`(?:^|; )${(0,n.e)(e)}=([^;]*)`),i=r.match(t);return i?decodeURIComponent(i[1]):void 0}(e);return t&&r?JSON.parse(t):t}function s(e,r,t){window.localStorage.setItem(e,t?JSON.stringify(r):r)}function a(e,r){const t=window.localStorage.getItem(e);return t&&r?JSON.parse(t):t}function l(e){window.localStorage.removeItem(e)}function c(e,r,t){window.sessionStorage.setItem(e,t?JSON.stringify(r):r)}function u(e,r){const t=window.sessionStorage.getItem(e);return t&&r?JSON.parse(t):t}function d(e){window.sessionStorage.removeItem(e)}function v(e,r,t){const n=new Date(r);n.setFullYear(r.getFullYear()+1),i(e,t,{expires:n}),t?s(e,"true",!1):l(e)}},19832:(e,r,t)=>{t.d(r,{a:()=>n,u:()=>i});const n=(0,t(10699).c)({nextText:"next",cancelText:"cancel",workflow:"content",scale:"m",disableScroll:!1,featureFlags:{}}),i=n.state},16093:(e,r,t)=>{t.d(r,{a:()=>w,b:()=>m,c:()=>g,d:()=>d,e:()=>y,f:()=>b,g:()=>p,h:()=>h,i:()=>S,j:()=>u,r:()=>c,s:()=>f,u:()=>v});var n=t(38973),i=t(44090),o=t(98034),s=t(58151),a=t(76246),l=t(34472);function c(e){return"/"===(null==e?void 0:e.slice(-1))?e.slice(0,e.length-1):e}function u(e){return e.startsWith("/")||e.startsWith("\\")?e.slice(1):e}async function d(e){var r;const t=null!==(r=null===i.c||void 0===i.c?void 0:i.c.api)&&void 0!==r?r:4,[n]=await(0,o.l)([4===t?"esri/core/urlUtils":"esri/urlUtils"]);let s=n.urlToObject(e);s.query=s.query||{};for(let e in s.query||{})s.query.hasOwnProperty(e)&&(Array.isArray(s.query[e])||(s.query[e]=s.query[e].replace(/(&lt;|&gt;|<|>|%3C|%3E)/g,"")));return s}function v(e){return(null==e?void 0:e.replace(/^.*\//,"").replace(/.[^.]*$/,""))||""}function p(e){const r=(null==e?void 0:e.replace(/^.*\//,"").replace(/\?+.*/,""))||"",t=r.replace(/^.*\./,"").toLowerCase();return l.b.includes(t)?r:""}function f(e){return["WFS","GeoJson","CSV","GeoRSS","KML","OGCFeatureServer","WMS","WMTS"].includes(e)}function g(e){const{config:r,portal:t}=i.c;let n=!1;if(!e)return!1;if((r.httpsDomains||[]).forEach((r=>{(e.indexOf(`.${r}/`)>-1||e.indexOf(`/${r}/`)>-1)&&(n=!0)})),!n){let r=t.portalHostname;r.indexOf("/")>-1&&(r=r.substring(0,r.indexOf("/"))),e.indexOf(r)>-1&&(n=!0)}return n}function m(e){if(!e)return!1;const{config:r,portal:t}=i.c,o=(0,n.g)(t),s=new URL(o).hostname,a=!1===r.isMultiTenant,l=-1!==e.indexOf(".arcgis.com/"),c=-1!==e.indexOf("//services")||-1!==e.indexOf("//tiles")||-1!==e.indexOf("//features")||-1!==e.indexOf("//locationservices"),u=t.supportsHostedServices&&-1!==e.indexOf(s)&&!a;return l&&c||!l&&u}function h(){var e;if(-1===window.location.protocol.toLowerCase().indexOf("https")){const r=(0,s.d)("esri_auth",!0);return"web"!==(null===(e=null==r?void 0:r.auth_tier)||void 0===e?void 0:e.toLowerCase())}return!0}function y(e){let r=e.toLowerCase();-1==r.indexOf("http://")&&-1==r.indexOf("https://")&&(r=(e="https://"+e).toLowerCase());let t=r.indexOf("//");t=r.indexOf("/",t+2),-1==t?r=(e+="/arcgis/rest/services").toLowerCase():t==r.length-1&&(r=(e+="arcgis/rest/services").toLowerCase());let n=r.indexOf("/arcgis",t);n==r.length-7?r=(e+="/rest/services").toLowerCase():n==r.length-8&&(r=(e+="rest/services").toLowerCase()),n=r.indexOf("/server",t),r.endsWith("/server")?r=(e+="/rest/services").toLowerCase():r.endsWith("/server/")&&(r=(e+="rest/services").toLowerCase());const i=r.indexOf("/rest/services",t),o=r.indexOf("/services",t),s=r.indexOf("/rest",t);return-1==i&&o>-1?r=(e=`${e.substring(0,o)}/rest/services${e.substring(o+9)}`).toLowerCase():-1==i&&s>-1&&(r=(e=`${e.substring(0,s)}/rest/services${e.substring(s+5)}`).toLowerCase()),r.indexOf("/rest/services"),e}const b=(e,r=!1)=>(e=c(e=e.trim()),/(http|https|ftp):\/\/?/.exec(e)||(e=`https://${e}`),!r&&"https:"!==location.protocol||!m(e)&&!g(e)||(e=e.replace("http:/","https:/")),e=e.indexOf("/dynamicLayer?")>-1?e.substring(0,e.indexOf("/dynamicLayer?")):e),w=(e,r=!1)=>{var t,i,o;if(!e)return{error:{code:"invalidUrl"}};if(S(e,r))return{error:{code:"httpWarning"}};const s=decodeURIComponent(e),l=s.replace(n.v,"").match(/((\.|\/)*(kml|kmz))/gi),c=s.replace(n.v,"").match(/((\/|\=)(wmts|wms|wfs))/gi),u=s.replace(n.v,"").match(/((\/|\=)(OGC|OGCFeatureServer))/gi),d=s.replace(n.v,"").match(/((\.|\/)*(rss))/gi),v=null===(t=s.replace(n.v,"").match(n.r))||void 0===t?void 0:t[1],p=s.replace(n.v,"").match(n.h),f=s.replace(n.v,"").match(/((\.|\/)*(csv))/gi),g=s.replace(n.v,"").match(/(\.|\/)((\$?{(z|level)})\/*(\$?{(x|col)})\/*(\$?{(y|row)}))/gi);let m=null;if(s.match(n.f))m="GeoJson";else if(!u||c||v)if(v&&!c)m=a.a[v];else if(p)m="Map Service";else if(c){const e="/"===(null==c?void 0:c[0].charAt(0))?"/":"=";m=null===(o=null===(i=null==c?void 0:c[0])||void 0===i?void 0:i.split(e)[1])||void 0===o?void 0:o.toUpperCase()}else l?m="KML":d?m="GeoRSS":f?m="CSV":g?m="Tile Layer":s.endsWith("KnowledgeGraphServer")&&(m="Knowledge Graph");else m="OGCFeatureServer";return{result:m}},S=(e,r)=>!r&&e.includes("http://")}}]);