/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_symbol-e6a149.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_symbol-e6a149"],{28832:(e,o,s)=>{s.d(o,{a:()=>r,b:()=>n,c:()=>i,d:()=>a});var l=s(98072),t=s(37219);s(98034);function i(e){var o;const{layer:s,useFeatureReduction:i,mapImageSublayer:r,mapView:a,modules:n}=t.s,c=s;e=e||{};const u=(0,t.n)((0,t.b)());return n.LocationCreator.createRenderer({layer:c,view:a,outlineOptimizationEnabled:!r&&(!(0,l.i)(e.outlineOptimizationEnabled)||e.outlineOptimizationEnabled),sizeOptimizationEnabled:!r&&(!(0,l.i)(e.sizeOptimizationEnabled)||e.sizeOptimizationEnabled),forBinning:"binning"===(null===(o=c.featureReduction)||void 0===o?void 0:o.type)&&i}).then((e=>((0,t.m)(u,e.renderer),Promise.resolve(e))),(e=>Promise.reject(e)))}function r(e){var o;const{layer:s,useFeatureReduction:i,mapImageSublayer:r,mapView:a,modules:n}=t.s,c=s;e=e||{};const u=(0,t.b)(),p=(0,t.a)(),d=(0,t.n)(u),m=u.symbol?u.symbol:(0,t.o)(p),y={layer:c,view:a,outlineOptimizationEnabled:!r&&((0,l.i)(e.outlineOptimizationEnabled)?e.outlineOptimizationEnabled:!!d.sizeOutlineVisVar),sizeOptimizationEnabled:!r&&((0,l.i)(e.sizeOptimizationEnabled)?e.sizeOptimizationEnabled:!!d.sizeAutoVisVar),forBinning:"binning"===(null===(o=c.featureReduction)||void 0===o?void 0:o.type)&&i};return n.LocationCreator.createRenderer(y).then((e=>((0,t.m)(d,e.renderer),m&&(e.renderer.symbol=m),Promise.resolve(e))),(e=>Promise.reject(e)))}function a(){var e;const{layer:o,useFeatureReduction:s,mapView:l,modules:i}=t.s,r=o;return i.LocationCreator.createRenderer({layer:r,view:l,outlineOptimizationEnabled:!0,forBinning:"binning"===(null===(e=r.featureReduction)||void 0===e?void 0:e.type)&&s}).then((e=>{const o=(0,t.d)(e.renderer,"size","outline");return Promise.resolve(o)}))}function n(){var e;const{layer:o,useFeatureReduction:s,mapView:l,modules:i}=t.s,r=o;return i.LocationCreator.createRenderer({layer:r,view:l,outlineOptimizationEnabled:!1,sizeOptimizationEnabled:!0,forBinning:"binning"===(null===(e=r.featureReduction)||void 0===e?void 0:e.type)&&s}).then((e=>{const o=(0,t.d)(e.renderer,"size","auto");return Promise.resolve(o)}))}},20250:(e,o,s)=>{s.d(o,{a:()=>i,b:()=>r,g:()=>a,s:()=>n});var l=s(98072),t=s(37219);s(98034);function i(){const{mapView:e}=t.s,o=(0,t.b)(),s=o.authoringInfo,i="class-breaks"===o.type?o.classBreakInfos:o.uniqueValueInfos,r=(0,t.d)(o,"size"),a=(0,t.I)(o,"reference-size"),c=!!r&&!(0,l.i)(r.minSize),u=!!r&&"number"==typeof r.minSize,p="above-and-below"===(null==s?void 0:s.univariateTheme);let d=2,m=20;if(a)a.referenceSizeScale&&n(),[d,m]=[a.sizeStops[0].size,a.sizeStops[1].size];else if(r)if(p){const e=r.stops;[d,m]=[e[2].size,Math.max(e[0].size,e[4].size)]}else if(c){const e=r.stops;[d,m]=[e[0].size,e[e.length-1].size]}else if(u)[d,m]=[r.minSize,r.maxSize];else{const o=e.scale,s=r.minSize.stops,l=r.maxSize.stops;[d,m]=[s[s.length-1].size,l[l.length-1].size];for(let e=0;e<s.length;e++){const t=s[e],i=l[e];if(o<=t.value){if(e>0){let r=s[e-1],a=l[e-1];const n=(o-r.value)/(t.value-r.value);[d,m]=[r.size+(t.size-r.size)*n,a.size+(i.size-a.size)*n]}else[d,m]=[s[0].size,l[0].size];break}}}else if(i){const e=i[0].symbol,o=i[i.length-1].symbol;[d,m]=[(0,t.X)(e),(0,t.X)(o)],d>m&&([d,m]=[m,d])}return[d,m]}function r(e){const{mapView:o,modules:s}=t.s,r=(0,t.b)(),a=(0,t.d)(r,"size");let n=e[0],c=(0,l.i)(e[1])?e[1]:n;if(a){const t=r.authoringInfo,u="above-and-below"===(null==t?void 0:t.univariateTheme),p=!!a&&!(0,l.i)(a.minSize),d=!!a&&"number"==typeof a.minSize;let[m,y]=i();const b=m>y;if(!b&&n>=y?n=y-.75:b&&n>=m&&(n=m-.75),!b&&m>=c?c=m+.75:b&&y>=c&&(c=y+.75),u){const o=a.stops,s=b?e[1]:e[0],l=b?e[0]:e[1],t=Math.max(...o.map((e=>e.value))),i=o[2].value,r=Math.min(...o.map((e=>e.value))),n=Math.abs(t-i),c=Math.abs(r-i),u=n>c?n:c,p=l-s;o.forEach((e=>{const{value:o}=e;e.size=Math.abs(o-i)/u*p+s}))}else if(p){const e=a.stops;a.stops=null,a.minSize=n,a.maxSize=c,a.minDataValue=e[0].value,a.maxDataValue=e[e.length-1].value}else if(d)b?(a.maxSize=n,a.minSize=c):(a.minSize=n,a.maxSize=c);else{const e=o.scale;let l=s.esriLang.clone(a.minSize.stops),t=s.esriLang.clone(a.maxSize.stops);b&&([l,t]=[t,l]);let i=n/l[l.length-1].size,r=c/t[t.length-1].size;for(let o=0;o<l.length;o++){const s=l[o],a=t[o];if(e<=s.value){if(o>0){let u=l[o-1],p=t[o-1];const d=(e-u.value)/(s.value-u.value),[m,y]=[u.size+(s.size-u.size)*d,p.size+(a.size-p.size)*d];i=n/m,r=c/y}else i=n/l[0].size,r=c/t[0].size;break}}l.forEach((e=>e.size=Math.round(i*e.size*10)/10)),t.forEach((e=>e.size=Math.round(r*e.size*10)/10)),b&&([l,t]=[t,l]),a.minSize.stops=l,a.maxSize.stops=t}}else{const e=r.classBreakInfos[0].symbol,o=r.classBreakInfos[r.classBreakInfos.length-1].symbol;let s=(0,t.X)(e),l=(0,t.X)(o),i=!1;s>l&&([s,l]=[l,s],i=!0),s!==l&&n>l&&(n=l-.75),s=n,s!==l&&s>c&&(c=s+.75),l=c;const a=1===r.classBreakInfos.length?1:Math.max(l-s,10)/(r.classBreakInfos.length-1);r.classBreakInfos.forEach(((e,o)=>{const r=e.symbol;i?(0,t.Y)(r,l-a*o):(0,t.Y)(r,s+a*o)}))}}function a(e,o){const s=e.stops,l=s.length-1,t=s[0].value,i=s[l].value;if(o<=t)return s[0].size;if(o>=i)return s[l].size;for(let e=0;e<=l;e++){const l=s[e],t=s[e+1];if(o>=l.value&&o<t.value){const e=t.value-l.value,s=l.size-t.size,i=(o-l.value)/e,r=l.size-s*i;return Math.round(100*r)/100}}return 1}function n(){const{mapView:e}=t.s,o=(0,t.b)(),s=(0,t.I)(o,"reference-size"),l=s.referenceSizeScale/e.scale;s.sizeStops.forEach((e=>e.size*=l)),s.referenceSizeScale=e.scale}},11230:(e,o,s)=>{s.d(o,{a:()=>T,b:()=>q,c:()=>p,d:()=>L,e:()=>A,f:()=>x,g:()=>v,h:()=>h,i:()=>j,j:()=>B,k:()=>k,l:()=>z,m:()=>I,n:()=>g,o:()=>G,p:()=>f,q:()=>P,r:()=>d,s:()=>S,t:()=>V,u:()=>E,v:()=>O,w:()=>C});s(74129),s(98034);var l=s(37219),t=s(20250),i=s(28832);let r;const a="polygon";function n(){const{modules:e}=l.s;return[new e.esriColor([255,255,255]),new e.esriColor([178,178,178]),new e.esriColor([128,128,128]),new e.esriColor([92,92,92]),new e.esriColor([77,77,77]),new e.esriColor([51,51,51]),new e.esriColor([26,26,26])]}function c(){const{modules:e}=l.s;return[new e.esriColor("#ff4040"),new e.esriColor("#ff8200"),new e.esriColor("#faa83f"),new e.esriColor("#ffd159"),new e.esriColor("#74b566"),new e.esriColor("#008977"),new e.esriColor("#33e3c8"),new e.esriColor("#43abeb"),new e.esriColor("#4c64c9"),new e.esriColor("#9868ed"),new e.esriColor("#b155e6"),new e.esriColor("#db5181"),new e.esriColor("#e03b99"),new e.esriColor("#2b2b2b"),new e.esriColor("#bdbdbd"),new e.esriColor("#ffffff")]}function u(){return c().reverse()}function p(e){const{referenceElement:o,heading:s}=e,l=document.createElement("arcgis-smart-mapping-styler-popover");return l.referenceElement=o,l.heading=s,document.body.appendChild(l),l.open=!0,l.reposition(),l}function d(e){var o;(null==e?void 0:e.parentNode)&&(e.open=!1,null===(o=e.parentNode)||void 0===o||o.removeChild(e))}async function m(e){const o=document.createElement("arcgis-symbol-styler");return o.initialSourceId=r,o.hideSvgUploadSymbols=l.s.hideSvgUploadSymbols,o.hideAddStyles=l.s.hideAddStyles,o.style="max-height: max(calc(100vh - 200px), 300px)",o.popoverProps={placement:"bottom-end",offsetDistance:10,offsetSkidding:l.s.isRTL?3:-3,pointerDisabled:"true",popoverWidth:315,refElement:await e.getPopoverRefElement()},o.addEventListener("arcgisSymbolStylerSourceIdChange",(({detail:e})=>r=e)),o}function y(e,o,s){return document.URL.indexOf("debug=true")>-1&&(console.log("symbol",JSON.stringify(o,null,2)),console.log("props",JSON.stringify(Object.assign(Object.assign({},s),{portal:"..."})))),e.edit(o,s)}function b(e,o){const{symbol:s,info:{marker:l,stroke:t,fill:i}}=o.detail;document.URL.indexOf("debug=true")>-1&&(console.log("onStylerEdit - symbol:",JSON.stringify(null==s?void 0:s.toJSON(),null,2)),console.log("onStylerEdit - info.marker:",JSON.stringify(l)),console.log("onStylerEdit - info.stroke:",JSON.stringify(t)),console.log("onStylerEdit - info.fill:",JSON.stringify(i))),e(o)}async function g(e){const{mapImageSublayer:o,portal:s,modules:t}=l.s,{onChange:i,popoverNode:r}=e,a=(0,l.b)(),c=(0,l.B)(),u="pie-chart"===(0,l.b)().type,p=(0,l.d)(a,"size"),d=(0,l.d)(a,"size","outline");let g=a.backgroundFillSymbol;g||(g=new t.SimpleFillSymbol,g.color=null,(0,l.b)().backgroundFillSymbol=g,i());const f=!!g.color,h=(0,l.ab)(g),v=n(),z=n();let k;k=g.outline?{color:g.outline.color?g.outline.color:new t.esriColor([0,0,0,.5]),size:g.outline.width,style:g.outline.style,autoAdjusted:!!d}:{color:new t.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!d},g.outline||(g.outline=new t.SimpleLineSymbol,(0,l.W)(g,new t.esriColor([0,0,0,0])));const w=await m(r),C=y(w,t.esriLang.clone(g),{portal:s,symbolFilter:"simple",sections:{fill:{type:"color",optional:!0,open:!0,suggestedColorsOpen:!0,transparencyOpen:!0,suggestedColors:v},stroke:{type:"color",optional:!0,suggestedColors:z,extraParts:{width:!0,autoStrokeAdjust:!(o||c&&u&&!p)&&"editable"}}},fill:{color:g.color?g.color:new t.esriColor([0,0,0,.5])},stroke:k,fillEnabled:f,strokeEnabled:h});return w.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:t}}})=>{(0,l.b)().backgroundFillSymbol=o,F(o,null==s?void 0:s.autoAdjusted,null==t?void 0:t.autoAdjusted,w,e)}))),r.addStyler(w),await C,M(g,w)}async function f(e){var o;const{mapImageSublayer:s,portal:t,modules:i}=l.s,{popoverNode:r}=e,a=(0,l.b)(),c=(0,l.d)(a,"size","outline"),u=!!a.backgroundColor,p=!!(null===(o=a.outline)||void 0===o?void 0:o.color),d=n(),g=n();let f;f=a.outline?{color:a.outline.color?a.outline.color:new i.esriColor([0,0,0,.5]),size:a.outline.width,style:a.outline.style,autoAdjusted:!!c}:{color:new i.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!c};const h=new i.SimpleFillSymbol;h.color=(0,l.b)().backgroundColor,h.outline=(0,l.b)().outline;const v=await m(r),z=y(v,i.esriLang.clone(h),{portal:t,symbolFilter:"simple",sections:{fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:!0,suggestedColors:d},stroke:{type:"color",optional:!0,suggestedColors:g,extraParts:{width:!0,autoStrokeAdjust:!s&&"editable"}}},fill:{color:a.backgroundColor?a.backgroundColor:new i.esriColor([0,0,0,.5])},stroke:f,fillEnabled:u,strokeEnabled:p});v.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:t}}})=>{(0,l.b)().backgroundColor=(0,l.Q)(o),(0,l.b)().outline=o.outline,F(o,null==s?void 0:s.autoAdjusted,null==t?void 0:t.autoAdjusted,v,e)}))),r.addStyler(v),await z;const k=new i.SimpleFillSymbol;return k.color=a.backgroundColor,k.outline=a.outline,M(k,v)}async function h(e){const{onChange:o,popoverNode:s}=e,{portal:t,modules:i}=l.s,r=(0,l.y)(),a=(0,l.z)(),c=(0,l.B)(),u=(0,l.b)(),p=(0,l.a)(),d=(0,l.d)(u,"size","auto"),g=(0,l.d)(u,"size","outline");let f=u.defaultSymbol;W(f)||(f=(0,l.o)(p));const h="picture-marker"!==f.type&&!!f.color,v=(0,l.ab)(f),z="cim"===f.type&&"CIMPointSymbol"===f.data.symbol.type,k=n(),w=n();let C;if(f||(f=c?new i.SimpleFillSymbol:a?new i.SimpleLineSymbol:new i.SimpleMarkerSymbol),"simple-fill"===f.type){const e=f;if(e.outline){const o=e.outline;C={color:o.color?o.color:new i.esriColor([0,0,0,.5]),size:o.width,style:o.style,autoAdjusted:!!g}}else C={color:new i.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!g}}else if("simple-line"===f.type){const e=f;C={color:e.color?e.color:new i.esriColor([0,0,0,.5]),size:e.width,style:e.style,marker:e.marker}}else if("simple-marker"===f.type&&f.outline){const e=f.outline;C={color:e.color?e.color:new i.esriColor([0,0,0,.5]),size:e.width,style:e.style}}else C="cim"===f.type?Y(f):{color:new i.esriColor([255,255,255,.5]),size:1};const S=await m(s);let O;O=y(S,i.esriLang.clone(f),a?{portal:t,symbolFilter:(0,l.af)()?void 0:"simple",sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:w,extraParts:{width:!d,autoStrokeAdjust:!1}}},stroke:C}:{portal:t,symbolFilter:c&&!(0,l.af)()?"simple":void 0,sections:{marker:z||["simple-marker","picture-marker"].indexOf(f.type)>-1?{open:!0,parts:{size:!d},symbolsOpen:!0,sizeOpen:!0,markerType:(0,l.af)()?"all":["simple","picture"]}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,suggestedColors:k},stroke:{type:"color",optional:!0,suggestedColors:w,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(f.type),width:!0,autoStrokeAdjust:!1}}},fill:{color:(0,l.Q)(f)||new i.esriColor([128,128,128])},marker:r?{size:(0,l.X)(f)}:void 0,stroke:C,fillEnabled:h,strokeEnabled:v}),S.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:e}})=>{(0,l.b)().defaultSymbol=e,o()}))),s.addStyler(S),await O}async function v(e){var o,s;const{mapImageSublayer:i,mapView:r,classedSymbolSelectedIdx:a,portal:n,modules:p}=l.s,{onChange:d,popoverNode:g}=e,f=(0,l.y)(),h=(0,l.z)(),v=(0,l.B)(),z=(0,l.b)(),k=(0,l.a)(),w=(0,l.d)(z,"size","auto"),C=(0,l.d)(z,"size","outline");let S=(null===(o=z.classBreakInfos)||void 0===o?void 0:o.length)?p.esriLang.clone(z.classBreakInfos[a].symbol):(0,l.o)(k);W(S)||(S=(0,l.o)(k)),w&&(0,l.Y)(S,(0,t.g)(w,r.scale));const O="picture-marker"!==S.type&&!!S.color,E=(0,l.ab)(S),j="cim"===S.type&&"CIMPointSymbol"===S.data.symbol.type,A=c(),x=u();let V;if((f||h)&&w?(0,l.Y)(S,(0,t.g)(w,r.scale)):v&&C&&S.outline&&(S.outline.width=(0,t.g)(C,r.scale)),"simple-fill"===S.type){const e=S;V=e.outline?{color:e.outline.color?e.outline.color:new p.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!C}:{color:new p.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!C}}else if("simple-marker"===S.type){const e=S;V=e.outline?{color:e.outline.color?e.outline.color:new p.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new p.esriColor([0,0,0,.5]),size:1}}else if("cim"===S.type)V=Y(S);else if("simple-line"===S.type){const e=S;V={size:e.width,style:e.style,marker:e.marker,color:e.color?e.color:new p.esriColor([0,0,0,.5])}}else V={color:new p.esriColor([255,255,255,.5]),size:1};const I=await m(g);let L;if(L=y(I,p.esriLang.clone(S),h?{portal:n,symbolFilter:(0,l.af)()?void 0:"simple",sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:A,extraParts:{style:"cim"!==S.type,arrow:"cim"!==S.type,width:"size"!==k,autoStrokeAdjust:!i&&"size"!==k&&"editable"},parts:{extra:"size"!==k&&!w||"cim"!==S.type}}},stroke:V}:{portal:n,symbolFilter:v&&!(0,l.af)()?"simple":void 0,sections:{marker:j||["simple-marker","picture-marker"].indexOf(S.type)>-1?{open:!0,parts:{size:"size"!==k&&(!!i||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:"size"!==k,markerType:(0,l.af)()?"all":["simple","picture"]}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.ac)(S),suggestedColors:A},stroke:{type:"color",optional:!0,suggestedColors:x,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(S.type),width:!0,autoStrokeAdjust:!(i||!v||"cim"===S.type||"size"===k)&&"editable"}}},fill:{color:(0,l.Q)(S)||X(A[1],.85)},marker:f?{size:(0,l.X)(S),autoAdjusted:!!w}:void 0,stroke:V,fillEnabled:O,strokeEnabled:E}),I.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:t}}})=>{const i=(0,l.b)(),r=i.classBreakInfos.slice(),n=r[a],c=(0,l.X)(n.symbol);n.symbol=o,i.classBreakInfos=r,"size"===k?((0,l.Y)(n.symbol,c),d()):F(o,null==s?void 0:s.autoAdjusted,null==t?void 0:t.autoAdjusted,I,e)}))),g.addStyler(I),await L,"size"!==k)return M((null===(s=z.classBreakInfos)||void 0===s?void 0:s.length)?z.classBreakInfos[0].symbol:void 0,I)}async function z(e){await w(Object.assign(Object.assign({},e),{type:"above"}))}async function k(e){await w(Object.assign(Object.assign({},e),{type:"below"}))}async function w(e){var o,s;const{portal:t,modules:i}=l.s,{onChange:r,popoverNode:a}=e,n=(0,l.b)(),p=(0,l.d)(n,"color"),d="above"===e.type;let g=(null===(s=null===(o=n.classBreakInfos)||void 0===o?void 0:o[d?1:0])||void 0===s?void 0:s.symbol)||(0,l.o)("color-size");W(g)||(g=(0,l.o)("color-size"));const f="picture-marker"!==g.type&&!!g.color,h=(0,l.ab)(g),v=c(),z="simple-line"===g.type?c():u();let k;if("simple-marker"===g.type){const e=g;k=e.outline?{color:e.outline.color?e.outline.color:new i.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new i.esriColor([0,0,0,.5]),size:1}}else if("simple-line"===g.type){const e=g;k={color:e.color,size:e.width,style:e.style,marker:e.marker}}else k="cim"===g.type?Y(g):{color:new i.esriColor([255,255,255,.5]),size:1};const w=await m(a),C=y(w,i.esriLang.clone(g),{portal:t,sections:{marker:p&&["simple-marker","cim"].indexOf(g.type)>-1?{open:!0,parts:{size:!1},symbolsOpen:!0,sizeOpen:!1,markerType:(0,l.af)()?["simple","cim:vector"]:["simple"]}:!p&&["simple-marker","picture-marker","cim"].indexOf(g.type)>-1?{open:!0,parts:{size:!1},symbolsOpen:!0,sizeOpen:!1}:void 0,fill:p?void 0:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.ac)(g),suggestedColors:v},stroke:p?void 0:{type:"color",optional:!0,suggestedColors:z,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(g.type),width:!0,autoStrokeAdjust:!1}}},fill:p?void 0:{color:(0,l.Q)(g)||X(v[1],.85)},marker:{size:(0,l.X)(g)},stroke:k,fillEnabled:f,strokeEnabled:h});w.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:e}})=>{const o=(0,l.b)();o.authoringInfo.univariateSymbolStyle="custom";const s=o.classBreakInfos.slice();s[d?1:0].symbol=e,o.classBreakInfos=s,r()}))),a.addStyler(w),await C}async function C(e){const{layer:o,mapImageSublayer:s,mapView:i,portal:r,modules:a}=l.s,{popoverNode:n}=e,p="ogc-feature"===o.type,d=(0,l.y)(),g=(0,l.z)(),f=(0,l.B)(),h=(0,l.b)(),v=(0,l.d)(h,"size","auto"),z=(0,l.d)(h,"size","outline");let k=h.symbol;W(k)||(k=(0,l.o)());const w="picture-marker"!==k.type&&!!k.color,C=(0,l.ab)(k),S="cim"===k.type&&"CIMPointSymbol"===k.data.symbol.type,O=c(),E="simple-line"===k.type?c():u();let j;if("simple-fill"===k.type){const e=k;j=e.outline?{color:e.outline.color?e.outline.color:new a.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!z}:{color:new a.esriColor([0,0,0,.5]),size:1,style:"solid"}}else if("simple-marker"===k.type){const e=k;j=e.outline?{color:e.outline.color?e.outline.color:new a.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new a.esriColor([0,0,0,.5]),size:1}}else if("simple-line"===k.type){const e=k;j={color:e.color,size:v?(0,t.g)(v,i.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!v}}else"cim"===k.type?(j=Y(k),g&&(j.size=v?(0,t.g)(v,i.scale):j.size,j.autoAdjusted=!!v,v&&(0,l.Y)(k,j.size))):j={color:new a.esriColor([255,255,255,.5]),size:1};const A=await m(n);let x;return x=y(A,a.esriLang.clone(k),g?{portal:r,symbolFilter:(0,l.af)()?void 0:"simple",sections:{stroke:{type:"color",optional:"cim"===k.type,open:!0,suggestedColorsOpen:!0,suggestedColors:E,extraParts:{style:"cim"!==k.type,arrow:"cim"!==k.type,width:!0,autoStrokeAdjust:!p&&!s&&"editable"}}},stroke:j}:{portal:r,symbolFilter:f&&!(0,l.af)()?"simple":void 0,sections:{marker:S||["simple-marker","picture-marker"].indexOf(k.type)>-1?{open:!0,symbolsOpen:!0,sizeOpen:!0,parts:{size:{autoSizeAdjust:!p&&!s&&"editable"}},markerType:(0,l.af)()?"all":["simple","picture"]}:void 0,fill:{type:"color",optional:!0,open:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.ac)(k),suggestedColors:O},stroke:{type:"color",optional:!0,suggestedColors:E,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(k.type),width:!0,autoStrokeAdjust:!(p||s||!f||"cim"===k.type)&&"editable"}}},fill:{color:(0,l.Q)(k)||X(O[1],.85)},marker:d?{size:v?(0,t.g)(v,i.scale):(0,l.X)(k),autoAdjusted:!s&&!!v}:void 0,stroke:j,fillEnabled:w,strokeEnabled:C}),A.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:t}}})=>{(0,l.b)().symbol=o,F(o,null==s?void 0:s.autoAdjusted,null==t?void 0:t.autoAdjusted,A,e)}))),n.addStyler(A),await x,M(h.symbol,A)}async function S(e,o){const{layer:s,portal:t,modules:i}=l.s,{onChange:r,popoverNode:a}=o,n=s,p="point"===e,d="line"===e;let g=p?n.pointSymbol:d?n.lineSymbol:n.polygonSymbol;W(g)||(g=(0,l.ay)(e));const f="picture-marker"!==g.type&&!!g.color,h=(0,l.ab)(g),v=c(),z="simple-line"===g.type?c():u();let k;if("simple-fill"===g.type){const e=g;k=e.outline?{color:e.outline.color?e.outline.color:new i.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!1}:{color:new i.esriColor([0,0,0,.5]),size:1,style:"solid"}}else if("simple-marker"===g.type){const e=g;k=e.outline?{color:e.outline.color?e.outline.color:new i.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new i.esriColor([0,0,0,.5]),size:1}}else if("simple-line"===g.type){const e=g;k={color:e.color,size:e.width,style:e.style,marker:e.marker,autoAdjusted:!1}}else k={color:new i.esriColor([255,255,255,.5]),size:1};const w=await m(a);let C;C=y(w,i.esriLang.clone(g),d?{portal:t,sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:z,extraParts:{width:!0,autoStrokeAdjust:!1}}},stroke:k}:{portal:t,sections:{marker:["simple-marker","picture-marker"].indexOf(g.type)>-1?{open:!0,symbolsOpen:!0,sizeOpen:!0,markerType:["simple","picture"]}:void 0,fill:{type:"color",optional:!0,open:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.ac)(g),suggestedColors:v},stroke:{type:"color",optional:!0,suggestedColors:z,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(g.type),width:!0,autoStrokeAdjust:!1}}},fill:{color:(0,l.Q)(g)||X(v[1],.85)},marker:p?{size:(0,l.X)(g),autoAdjusted:!1}:void 0,stroke:k,fillEnabled:f,strokeEnabled:h}),w.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:e}})=>{p?n.pointSymbol=e:d?n.lineSymbol=e:n.polygonSymbol=e,r()}))),a.addStyler(w),await C}async function O(e){var o,s;const{portal:t,modules:i}=l.s,{onChange:r,popoverNode:a}=e,n=(0,l.z)(),p=(0,l.b)(),d=(0,l.a)(),g=(0,l.d)(p,"color"),f=(0,l.I)(p,"reference-size");let h;if(["type-size","type-size-age","predominance-size","relationship-size"].indexOf(d)>-1){const e=(0,l.b)();h=(null===(o=e.uniqueValueInfos)||void 0===o?void 0:o.length)?e.uniqueValueInfos[0].symbol:(0,l.o)(d)}else h=(null===(s=p.classBreakInfos)||void 0===s?void 0:s.length)?p.classBreakInfos[0].symbol:(0,l.o)(d);W(h)||(h=(0,l.o)(d));const v="picture-marker"!==h.type&&!!h.color,z=(0,l.ab)(h),k="cim"===h.type&&"CIMPointSymbol"===h.data.symbol.type,w=c(),C="simple-line"===h.type?c():u();let S;if("simple-fill"===h.type){const e=h;S=e.outline?{color:e.outline.color?e.outline.color:new i.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style}:{color:new i.esriColor([0,0,0,.5]),size:1,style:"solid"}}else if("simple-marker"===h.type){const e=h;S=e.outline?{color:e.outline.color?e.outline.color:new i.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new i.esriColor([0,0,0,.5]),size:1}}else if("simple-line"===h.type){const e=h;S={color:e.color,size:e.width,style:e.style,marker:e.marker}}else S="cim"===h.type?Y(h):{color:new i.esriColor([255,255,255,.5]),size:1};const O=await m(a);let E;f&&(O.mode="minimal"),E=["color-size","color-age-size","color-size-age","type-size","type-size-age","predominance-size","relationship-size"].indexOf((0,l.a)())>-1?y(O,i.esriLang.clone(h),n?{portal:t,symbolFilter:(0,l.af)()?void 0:"simple",sections:{stroke:{type:"color",open:!0,extraOpen:!0,extraParts:{style:"cim"!==h.type,arrow:"cim"!==h.type,width:!1,autoStrokeAdjust:!1},suggestedColors:C,parts:{suggestedColors:!1,customColor:!1,transparency:!0,extra:"cim"!==h.type}}},stroke:S}:{portal:t,sections:{marker:k||["simple-marker","picture-marker"].indexOf(h.type)>-1?{open:!0,parts:{size:!1},symbolsOpen:!0,sizeOpen:!1,markerType:(0,l.af)()?["simple","cim:vector"]:["simple"]}:f?{parts:{preview:!1,size:!1,rotation:!1,color:!0,transparency:!0}}:void 0,stroke:{type:"color",open:!0,optional:!0,suggestedColors:C,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(h.type),width:!0,autoStrokeAdjust:!1}}},marker:{size:(0,l.X)(h)},stroke:S,strokeEnabled:z}):y(O,i.esriLang.clone(h),n?{portal:t,symbolFilter:(0,l.af)()?void 0:"simple",sections:{stroke:{type:"color",open:!0,extraParts:{style:"cim"!==h.type,arrow:"cim"!==h.type,width:!1,autoStrokeAdjust:!1},suggestedColorsOpen:!0,suggestedColors:C,parts:{extra:"cim"!==h.type}}},stroke:S}:{portal:t,sections:{marker:k||["simple-marker","picture-marker"].indexOf(h.type)>-1?{open:!0,parts:{size:!1},symbolsOpen:!0,sizeOpen:!1,markerType:(0,l.af)()?"all":["simple","picture"]}:f?{parts:{preview:!1,size:!1,rotation:!1,color:!0,transparency:!0}}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.ac)(h),suggestedColors:w},stroke:{type:"color",optional:!0,suggestedColors:C,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(h.type),width:!0,autoStrokeAdjust:!1}}},fill:{color:(0,l.Q)(h)||X(w[1],.85)},marker:{size:(0,l.X)(h)},stroke:S,fillEnabled:v,strokeEnabled:z}),O.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:e}})=>{const o=(0,l.b)();if(o.classBreakInfos){let s=o.classBreakInfos;if(!s||!s.length)return;s=s.slice(),s.forEach((s=>{const t=(0,l.X)(s.symbol),r=(0,l.Q)(s.symbol);s.symbol=e.clone(),g?(0,l.W)(s.symbol,new i.esriColor([0,0,0,.5])):o.uniqueValueInfos&&(0,l.W)(s.symbol,r),f||(0,l.Y)(s.symbol,t)})),o.classBreakInfos=s}else{let s=o.uniqueValueGroups;if(!(s&&s.length&&s[0].classes&&s[0].classes.length))return;s=s.slice(),s.forEach((o=>{o.classes.forEach((o=>{const s=(0,l.X)(o.symbol),t=(0,l.Q)(o.symbol);o.symbol=e.clone(),g?(0,l.W)(o.symbol,new i.esriColor([0,0,0,.5])):(0,l.W)(o.symbol,t),(0,l.Y)(o.symbol,s)}))})),o.uniqueValueGroups=s}r()}))),a.addStyler(O),await E}async function E(e){var o,s,i,r;const{mapImageSublayer:n,mapView:c,portal:p,modules:d}=l.s,{onChange:g,popoverNode:f}=e,h=(0,l.y)(),v=(0,l.z)(),z=(0,l.B)(),k=(0,l.b)(),w=k.authoringInfo,C=(0,l.a)(),S="univariate-color-size"===(null==w?void 0:w.type),O="above-and-below"===(null==w?void 0:w.univariateTheme),E=O&&!w.univariateSymbolStyle,j=(0,l.d)((0,l.b)(),"color"),A=(0,l.d)(k,"size","auto"),x=(0,l.d)(k,"size","outline"),V=(0,l.I)(k,"reference-size"),I=["color-size","color-age-size","color-size-age"].indexOf(C)>-1,L=(0,l.I)((0,l.b)(),"color");let B,q=j?j.stops.map((e=>e.color)):k.classBreakInfos.map((e=>{var o;return(null===(o=(0,l.Q)(e.symbol))||void 0===o?void 0:o.clone())||new d.esriColor([0,0,0,0])}));q.length>10&&(q=q.slice(0,10)),q.reverse();let P=(null===(o=k.classBreakInfos)||void 0===o?void 0:o.length)?k.classBreakInfos[0].symbol:(0,l.o)();if(!W(P)||(!O||E)&&!D(P)){const e=null!==(s=(0,l.X)(P))&&void 0!==s?s:P.width;P=(0,l.o)(C),(0,l.Y)(P,e)}const T=!(O&&!j&&"picture-marker"===P.type&&"picture-marker"===(null===(i=k.classBreakInfos[1].symbol)||void 0===i?void 0:i.type)),G=(0,l.ab)(P),R="cim"===P.type&&"CIMPointSymbol"===P.data.symbol.type,Q=await d.colorUtils.getBackgroundColorTheme(c),N=d.colorSchemes.getSchemes({basemapTheme:Q,geometryType:(0,l.C)()||a,theme:(null==w?void 0:w.univariateTheme)||(null==L?void 0:L.theme)||"high-to-low"});if(!j){const e=d.colorSchemes.getSchemes({basemap:c.map.basemap||"topo",geometryType:(0,l.C)()||a,theme:"above-and-below"});N.secondarySchemes.push(e.primaryScheme),N.secondarySchemes=N.secondarySchemes.concat(e.secondarySchemes)}const X=j?0:k.classBreakInfos.length;let _=(0,l.ad)(N,X);_=_.filter((e=>{var o;return null===(o=e.colors)||void 0===o?void 0:o.length}));const U=_.map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),J=u();let H;if((0,l.W)(P,q[q.length-1]),(I||h||v)&&A?(0,l.Y)(P,(0,t.g)(A,c.scale)):z&&x&&P.outline&&(P.outline.width=(0,t.g)(x,c.scale)),"simple-fill"===P.type){const e=P;H=e.outline?{color:e.outline.color?e.outline.color:new d.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!x}:{color:new d.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!x}}else if("simple-marker"===P.type){const e=P;H=e.outline?{color:e.outline.color?e.outline.color:new d.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new d.esriColor([0,0,0,.5]),size:1}}else if("cim"===P.type)H=Y(P),v&&(H.size=A?(0,t.g)(A,c.scale):H.size,H.autoAdjusted=!!A,A&&(0,l.Y)(P,H.size));else if("simple-line"===P.type){const e=P;H={color:new d.esriColor([255,255,255,.5]),size:A?(0,t.g)(A,c.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!A}}else H={color:new d.esriColor([255,255,255,.5]),size:1};const K=await m(f);let Z;return V&&(K.mode="minimal"),B=P.clone(),Z=v?y(K,d.esriLang.clone(P),{portal:p,symbolFilter:(0,l.af)()?void 0:"simple",sections:{stroke:{type:"color-ramp",style:j?"continuous":"discrete",colorRamps:U,open:!0,colorRampsOpen:!0,extraParts:{style:"cim"!==P.type,arrow:"cim"!==P.type,autoStrokeAdjust:!n&&!I&&"editable",width:!I},parts:{extra:!I||"cim"!==P.type}}},stroke:Object.assign(Object.assign({},H),{color:q})}):y(K,!O||E?d.esriLang.clone(P):(0,l.o)(),{portal:p,symbolFilter:z&&!(0,l.af)()?"simple":void 0,sections:{marker:O&&!E||!(R||["simple-marker","picture-marker"].indexOf(P.type)>-1)?O&&!E?{parts:{preview:!1,rotation:!1,size:!1}}:V?{parts:{preview:!1,size:!1}}:void 0:{open:!0,parts:{size:!I&&(!!n||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!I,markerType:(0,l.af)()?["simple","cim:vector"]:["simple"]},fill:{type:"color-ramp",style:j?"continuous":"discrete",open:!(0,l.az)(P),colorRampsOpen:!(0,l.az)(P),colorRamps:U},stroke:!O||E?{type:"color",optional:!0,open:!1,suggestedColors:J,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(P.type),width:!0,autoStrokeAdjust:!(n||!z||"cim"===P.type||I)&&"editable"}}:void 0},fill:{color:q},marker:O&&!E||!I&&!h?void 0:{size:A?(0,t.g)(A,c.scale):(0,l.X)(P),autoAdjusted:!!A},stroke:H,strokeEnabled:G,fillEnabled:T}),K.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:t,fill:i}}})=>{const r=(0,l.b)(),a=(0,l.d)(r,"color");let n=d.esriLang.clone((i||t).color);const c=q[0],u=q.length!==n.length||q.some(((e,o)=>e.r!==n[o].r||e.g!==n[o].g||e.b!==n[o].b))||c.r!==n[0].r||c.g!==n[0].g||c.b!==n[0].b,p=c.a!==n[0].a,m=n[0].a,y=(0,l.aC)(o,B);if(u&&!y.any&&(y.any=!0,y.color=!0),S&&O||n.reverse(),!O||E){if(y.any){const e=r.classBreakInfos.slice();e.forEach(((e,s)=>{e.symbol=(0,l.aD)(e.symbol,o,u&&!a?n[s%n.length]:p&&!a?(0,l.aE)((0,l.Q)(e.symbol),m):(0,l.Q)(e.symbol)||new d.esriColor([0,0,0,0]),y)})),r.classBreakInfos=e}}else if(!a){n.reverse();const e=r.classBreakInfos.slice();e.forEach(((e,o)=>{(0,l.W)(e.symbol,n[o])})),r.classBreakInfos=e}if(a){if(q.length!==n.length&&5===n.length){const e=a.stops.length,o=[];o[0]=a.stops[0],o[1]=a.stops[Math.floor(e/4)],o[2]=a.stops[Math.floor(e/2)],o[3]=a.stops[e-Math.ceil(e/4)],o[4]=a.stops[e-1],a.stops=o}a.stops.forEach(((e,o)=>{e.color=n[o]}));const e=r.classBreakInfos.slice();(0,l.W)(e[0].symbol,new d.esriColor([170,170,170,1])),r.classBreakInfos=e}I?g():F(o,null==s?void 0:s.autoAdjusted,null==t?void 0:t.autoAdjusted,K,e),B=o.clone(),q=a?a.stops.map((e=>e.color)):r.classBreakInfos.map((e=>(0,l.Q)(e.symbol)||new d.esriColor([0,0,0,0]))).reverse()}))),f.addStyler(K),await Z,M((null===(r=k.classBreakInfos)||void 0===r?void 0:r.length)?k.classBreakInfos[0].symbol:void 0,K,(e=>{z&&P.outline?P.outline.width=e:!z&&(0,l.Y)(P,e),B=P.clone()}))}async function j(e){var o,s,i,r,n;const{mapImageSublayer:c,mapView:p,portal:d,modules:g}=l.s,{onChange:f,popoverNode:h}=e,v=(0,l.y)(),z=(0,l.z)(),k=(0,l.B)(),w=(0,l.b)(),C=(0,l.a)(),S=["type-size","type-size-age"].indexOf(C)>-1,O=(0,l.d)(w,"size","auto"),E=(0,l.d)(w,"size","outline"),j=(0,l.I)(w,"reference-size"),A=w.uniqueValueGroups;let x,V=[];const I=A.length?A[A.length-1]:void 0;let L=(null===(o=null==I?void 0:I.classes)||void 0===o?void 0:o.length)&&(null===(s=(0,l.Q)(I.classes[I.classes.length-1].symbol))||void 0===s?void 0:s.a)||1;A.forEach((e=>V=V.concat(e.classes.map((e=>(0,l.Q)(e.symbol)||new g.esriColor([0,0,0,L])))))),V.reverse(),V.length>10&&(V=V.slice(0,10));const B=g.typeSchemes.getSchemes({basemap:p.map.basemap,geometryType:(0,l.C)()||a});let q=(null===(i=w.uniqueValueGroups)||void 0===i?void 0:i.length)&&w.uniqueValueGroups[0].classes.length?g.esriLang.clone(w.uniqueValueGroups[0].classes[0].symbol):(0,l.o)(C);if(!D(q)){const e=null!==(r=(0,l.X)(q))&&void 0!==r?r:q.width;q=(0,l.o)(C),(0,l.Y)(q,e)}const P=(0,l.ab)(q),T="cim"===q.type&&"CIMPointSymbol"===q.data.symbol.type;let G=0;A.forEach((e=>G+=e.classes.length));const R=(0,l.ad)(B,Math.min(G,10)).map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),Q=u();let N;if((0,l.W)(q,V[V.length-1]),(S||v||z)&&O?(0,l.Y)(q,(0,t.g)(O,p.scale)):k&&E&&q.outline&&(q.outline.width=(0,t.g)(E,p.scale)),"simple-fill"===q.type){const e=q;N=e.outline?{color:e.outline.color?e.outline.color:new g.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!E}:{color:new g.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!E}}else if("simple-marker"===q.type){const e=q;N=e.outline?{color:e.outline.color?e.outline.color:new g.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new g.esriColor([0,0,0,.5]),size:1}}else if("cim"===q.type)N=Y(q),z&&(N.size=O?(0,t.g)(O,p.scale):N.size,N.autoAdjusted=!!O,O&&(0,l.Y)(q,N.size));else if("simple-line"===q.type){const e=q;N={color:V[V.length-1],size:O?(0,t.g)(O,p.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!O}}else N={color:new g.esriColor([255,255,255,.5]),size:1};const X=await m(h);let W;return j&&(X.mode="minimal"),x=q.clone(),W=y(X,g.esriLang.clone(q),z?{portal:d,symbolFilter:(0,l.af)()?void 0:"simple",sections:{stroke:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:R,extraParts:{style:"cim"!==q.type,arrow:"cim"!==q.type,autoStrokeAdjust:!c&&!S&&"editable",width:!S},parts:{extra:!S||"cim"!==q.type}}},stroke:Object.assign(Object.assign({},N),{color:V})}:{portal:d,symbolFilter:k&&!(0,l.af)()?"simple":void 0,sections:{marker:T||["simple-marker","picture-marker"].indexOf(q.type)>-1?{open:!!(0,l.az)(q),parts:{size:!S&&(!!c||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!S,markerType:(0,l.af)()?["simple","cim:vector"]:["simple"]}:j?{parts:{preview:!1,size:!1}}:void 0,fill:{type:"color-ramp",style:"discrete",open:!(0,l.az)(q),colorRampsOpen:!(0,l.az)(q),colorRamps:R},stroke:{type:"color",optional:!0,open:!1,suggestedColors:Q,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(q.type),width:!0,autoStrokeAdjust:!(c||!k||"cim"===q.type||S)&&"editable"}}},fill:{color:V},marker:S||v?{size:O?(0,t.g)(O,p.scale):(0,l.X)(q),autoAdjusted:!!O}:void 0,stroke:N,strokeEnabled:P}),X.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:t,fill:i}}})=>{const r=g.esriLang.clone((i||t).color),a=V[0],n=V.length!==r.length||V.some(((e,o)=>e.r!==r[o].r||e.g!==r[o].g||e.b!==r[o].b))||a.r!==r[0].r||a.g!==r[0].g||a.b!==r[0].b,c=a.a!==r[0].a,u=r[0].a;r.reverse();const p=(0,l.b)(),d=(0,l.aC)(o,x);if(n&&!d.any&&(d.any=!0,d.color=!0),d.any){const e=p.uniqueValueGroups.slice();let s=0;e.forEach((e=>{e.classes.forEach(((e,t)=>{"picture-marker"===e.symbol.type&&(n||c)&&(e.symbol=g.esriLang.clone(o),(0,l.W)(e.symbol,r[(s+t)%r.length])),e.symbol=(0,l.aD)(e.symbol,o,n?r[(s+t)%r.length]:c?(0,l.aE)((0,l.Q)(e.symbol),u):(0,l.Q)(e.symbol)||new g.esriColor([0,0,0,0]),d)})),s+=e.classes.length})),p.uniqueValueGroups=e}S?f():F(o,null==s?void 0:s.autoAdjusted,null==t?void 0:t.autoAdjusted,X,e),x=o.clone(),n&&(V=[],p.uniqueValueGroups.forEach((e=>V=V.concat(e.classes.map((e=>(0,l.Q)(e.symbol)||new g.esriColor([0,0,0,0])))))),V.reverse(),V.length>10&&(V=V.slice(0,10)))}))),h.addStyler(X),await W,M((null===(n=w.uniqueValueGroups)||void 0===n?void 0:n.length)&&w.uniqueValueGroups[0].classes.length?w.uniqueValueGroups[0].classes[0].symbol:void 0,X,(e=>{k&&q.outline?q.outline.width=e:!k&&(0,l.Y)(q,e),x=q.clone()}))}async function A(e){var o;const{mapView:s,portal:t,modules:i}=l.s,{groupIdx:r,onChange:n,popoverNode:c}=e,u=(0,l.b)().uniqueValueGroups[r];let p=(null===(o=(0,l.Q)(u.classes[u.classes.length-1].symbol))||void 0===o?void 0:o.a)||1,d=u.classes.map((e=>(0,l.Q)(e.symbol)||new i.esriColor([0,0,0,p])));d.reverse(),d.length>10&&(d=d.slice(0,10));const g=await i.colorUtils.getBackgroundColorTheme(s),f=i.typeSchemes.getSchemes({basemapTheme:g,geometryType:(0,l.C)()||a}),h=i.colorSchemes.getSchemes({basemapTheme:g,geometryType:(0,l.C)()||a,theme:"high-to-low"});h.primaryScheme.colors=h.primaryScheme.colorsForClassBreaks[9].colors,h.primaryScheme.colorsForClassBreaks=void 0,h.secondarySchemes=h.secondarySchemes.filter((e=>{var o;return(null===(o=e.colorsForClassBreaks)||void 0===o?void 0:o.length)>=10})),h.secondarySchemes.forEach((e=>{e.colors=e.colorsForClassBreaks[9].colors,e.colorsForClassBreaks=void 0})),f.secondarySchemes.push(h.primaryScheme),f.secondarySchemes=f.secondarySchemes.concat(h.secondarySchemes);let v=u.classes.length;const z=(0,l.ad)(f,Math.min(v,10)).map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),k=await m(c),w=y(k,new i.SimpleFillSymbol,{portal:t,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:z,parts:{transparency:!1}}},fill:{color:d}});k.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{info:{fill:e}}})=>{const o=i.esriLang.clone(e.color).reverse(),s=(0,l.b)(),t=(0,l.a)(),a=s.uniqueValueGroups.slice();a[r].classes.forEach(((e,s)=>{"picture-marker"===e.symbol.type&&(e.symbol=(0,l.o)(t)),(0,l.W)(e.symbol,o[s%o.length])})),s.uniqueValueGroups=a,n(),d=s.uniqueValueGroups[r].classes.map((e=>(0,l.Q)(e.symbol))),d.reverse(),d.length>10&&(d=d.slice(0,10))}))),c.addStyler(k),await w}async function x(e){var o,s;const{mapImageSublayer:i,mapView:r,lastDefault:c,portal:p,modules:d}=l.s,{onChange:g,popoverNode:f,selectedValue:h}=e,v=(0,l.i)(),[z,k]=!v&&h.split("/").map((e=>parseInt(e))),w=(0,l.y)(),C=(0,l.z)(),S=(0,l.B)(),O=(0,l.b)(),E=(0,l.a)(),j=["type-size","type-size-age"].indexOf(E)>-1,A=(0,l.d)(O,"size","auto"),x=(0,l.d)(O,"size","outline"),V=(0,l.I)(O,"reference-size");let I;I=!v&&-1===z||v&&-1===h?O.defaultSymbol||c.defaultSymbol:v?O.uniqueValueInfos[h].symbol:O.uniqueValueGroups[z].classes[k].symbol,W(I)||(I=v?(0,l.ak)():(0,l.o)(E),(!v&&-1===z||v&&-1===h)&&!O.defaultSymbol&&(c.defaultSymbol=I));const L="picture-marker"!==I.type&&!!I.color,B=(0,l.ab)(I),q="cim"===I.type&&"CIMPointSymbol"===I.data.symbol.type;let P;if(!v&&-1===z||v&&-1===h)P=n();else{const e=d.typeSchemes.getSchemes({basemap:r.map.basemap,geometryType:(0,l.C)()||a});P=(0,l.ae)(e).slice(0,16)}const T=u();let G;if((j||w||C)&&A?(0,l.Y)(I,(0,t.g)(A,r.scale)):S&&x&&I.outline&&(I.outline.width=(0,t.g)(x,r.scale)),"simple-fill"===I.type){const e=I;G=e.outline?{color:e.outline.color?e.outline.color:new d.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!x}:{color:new d.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!x}}else if("simple-marker"===I.type){const e=I;G=e.outline?{color:e.outline.color?e.outline.color:new d.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new d.esriColor([0,0,0,.5]),size:1}}else if("cim"===I.type)G=Y(I),C&&(G.size=A?(0,t.g)(A,r.scale):G.size,G.autoAdjusted=!!A,A&&(0,l.Y)(I,G.size));else if("simple-line"===I.type){const e=I;G={size:A?(0,t.g)(A,r.scale):e.width,style:e.style,marker:e.marker,color:e.color,autoAdjusted:!!A}}else G={color:new d.esriColor([255,255,255,.5]),size:1};const R=await m(f);let Q;return V&&(R.mode="minimal"),Q=y(R,d.esriLang.clone(I),C?{portal:p,symbolFilter:(0,l.af)()?void 0:"simple",sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:P,extraParts:{style:"cim"!==I.type,arrow:"cim"!==I.type,autoStrokeAdjust:!i&&!j&&"editable",width:!j},parts:{extra:!j||"cim"!==I.type}}},stroke:G}:v?{portal:p,symbolFilter:"simple",sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,suggestedColors:P,parts:{transparency:!1}}},fill:{color:(0,l.Q)(I)||(-1===h?(0,l.ak)().color:X(P[h%P.length],.85))},stroke:G,fillEnabled:L}:{portal:p,symbolFilter:S&&!(0,l.af)()?"simple":void 0,sections:{marker:q||["simple-marker","picture-marker"].indexOf(I.type)>-1?{open:!0,parts:{size:!j&&(!!i||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!j,markerType:(0,l.af)()?"all":["simple","picture"]}:V?{parts:{preview:!1,size:!1,rotation:!1,color:!0,transparency:!0}}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.ac)(I),suggestedColors:P},stroke:{type:"color",optional:!0,suggestedColors:T,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(I.type),width:!0,autoStrokeAdjust:!(i||!S||"cim"===I.type||j)&&"editable"}}},fill:{color:(0,l.Q)(I)||X(P[k%P.length],.85)},marker:j||w?{size:A?(0,t.g)(A,r.scale):(0,l.X)(I),autoAdjusted:!!A}:void 0,stroke:G,fillEnabled:L,strokeEnabled:B}),R.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:t}}})=>{const i=(0,l.b)();if(!v&&-1===z||v&&-1===h)i.defaultSymbol=o;else if(v){const e=i.uniqueValueInfos.slice();e[h].symbol=o,i.uniqueValueInfos=e}else{const e=i.uniqueValueGroups.slice();e[z].classes[k].symbol=o,i.uniqueValueGroups=e}j?g():F(o,null==s?void 0:s.autoAdjusted,null==t?void 0:t.autoAdjusted,R,e)}))),f.addStyler(R),await Q,M(v?(null===(o=O.uniqueValueInfos)||void 0===o?void 0:o.length)?O.uniqueValueInfos[0].symbol:void 0:(null===(s=O.uniqueValueGroups)||void 0===s?void 0:s.length)&&O.uniqueValueGroups[0].classes.length?O.uniqueValueGroups[0].classes[0].symbol:void 0,R)}async function V(e){var o,s,i;const{mapImageSublayer:r,mapView:a,portal:n,modules:c}=l.s,{onChange:p,popoverNode:d}=e,g=(0,l.y)(),f=(0,l.z)(),h=(0,l.B)(),v=(0,l.b)(),z=(0,l.a)(),k="relationship-size"===z,w=(0,l.I)(v,"reference-size"),C=(0,l.d)(v,"size","auto"),S=(0,l.d)(v,"size","outline"),O=v.uniqueValueGroups[0].classes,E=O.map((e=>(0,l.Q)(e.symbol)||new c.esriColor([0,0,0,0]))),j=c.relationshipSchemes.getSchemes({basemap:a.map.basemap||"topo",geometryType:(0,l.C)()});let A=(null===(o=v.uniqueValueGroups[0].classes)||void 0===o?void 0:o.length)?c.esriLang.clone(v.uniqueValueGroups[0].classes[0].symbol):(0,l.o)(z);if(!D(A)){const e=null!==(s=(0,l.X)(A))&&void 0!==s?s:A.width;A=(0,l.o)(z),(0,l.Y)(A,e)}const x=(0,l.ab)(A),V="cim"===A.type&&"CIMPointSymbol"===A.data.symbol.type,I=(0,l.ad)(j,Math.sqrt(O.length)).map((({colors:e,scheme:{tags:o,name:s}})=>({stops:c.relationshipSchemes.flatten2DArray(e),tags:o,name:s}))),L=u();let B;if("simple-fill"===A.type){const e=A;B=e.outline?{color:e.outline.color?e.outline.color:new c.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!S}:{color:new c.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!S}}else if("simple-marker"===A.type){const e=A;B=e.outline?{color:e.outline.color?e.outline.color:new c.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new c.esriColor([0,0,0,.5]),size:1}}else if("cim"===A.type)B=Y(A),f&&(B.size=C?(0,t.g)(C,a.scale):B.size,B.autoAdjusted=!!C,C&&(0,l.Y)(A,B.size));else if("simple-line"===A.type){const e=A;B={color:new c.esriColor([255,255,255,.5]),size:C?(0,t.g)(C,a.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!C}}else B={color:new c.esriColor([255,255,255,.5]),size:1};const q=await m(d);let P;return w&&(q.mode="minimal"),P=y(q,c.esriLang.clone(A),f?{portal:n,symbolFilter:(0,l.af)()?void 0:"simple",sections:{stroke:{type:"color-ramp",style:"2d",open:!0,colorRampsOpen:!0,colorRamps:I,extraParts:{style:"cim"!==A.type,arrow:"cim"!==A.type,autoStrokeAdjust:!r&&!k&&"editable",width:!k},parts:{extra:!k||"cim"!==A.type}}},stroke:Object.assign(Object.assign({},B),{color:E})}:{portal:n,symbolFilter:h&&!(0,l.af)()?"simple":void 0,sections:{marker:V||["simple-marker","picture-marker"].indexOf(A.type)>-1?{open:!!(0,l.az)(A),parts:{size:!k&&(!!r||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!k,markerType:(0,l.af)()?["simple","cim:vector"]:["simple"]}:w?{parts:{preview:!1,size:!1,rotation:!1}}:void 0,fill:{type:"color-ramp",style:"2d",open:!(0,l.az)(A),colorRampsOpen:!(0,l.az)(A),colorRamps:I},stroke:{type:"color",optional:!0,open:!1,suggestedColors:L,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(A.type),width:!0,autoStrokeAdjust:!(r||!h||"cim"===A.type||k)&&"editable"}}},fill:{color:E},marker:k||g?{size:C?(0,t.g)(C,a.scale):(0,l.X)(A),autoAdjusted:!!C}:void 0,stroke:B,strokeEnabled:x}),q.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:t,fill:i}}})=>{const r=c.esriLang.clone((i||t).color),a=(0,l.b)(),n=a.uniqueValueGroups[0].classes.slice();n.forEach(((e,s)=>{e.symbol=o.clone(),(0,l.W)(e.symbol,r[s%r.length])})),a.uniqueValueGroups[0].classes=n,k?p():F(o,null==s?void 0:s.autoAdjusted,null==t?void 0:t.autoAdjusted,q,e)}))),d.addStyler(q),await P,M((null===(i=v.uniqueValueGroups[0].classes)||void 0===i?void 0:i.length)?v.uniqueValueGroups[0].classes[0].symbol:void 0,q)}async function I(e){var o,s,i,r;const{mapImageSublayer:a,mapView:n,portal:c,modules:p}=l.s,{onChange:d,popoverNode:g}=e,f=(0,l.y)(),h=(0,l.z)(),v=(0,l.B)(),z=(0,l.b)(),k=(0,l.a)(),w="predominance-size"===k,C=(0,l.d)(z,"size","auto"),S=(0,l.d)(z,"size","outline"),O=z.uniqueValueGroups[0].classes;let E,j=O.length&&(null===(o=(0,l.Q)(O[O.length-1].symbol))||void 0===o?void 0:o.a)||1,A=O.map((e=>(0,l.Q)(e.symbol)||new p.esriColor([0,0,0,j])));A.reverse();const x=p.predominanceSchemes.getSchemes({basemap:n.map.basemap,geometryType:(0,l.C)(),numColors:O.length});let V=(null===(s=z.uniqueValueGroups[0].classes)||void 0===s?void 0:s.length)?p.esriLang.clone(z.uniqueValueGroups[0].classes[0].symbol):(0,l.o)(k);if(!D(V)){const e=null!==(i=(0,l.X)(V))&&void 0!==i?i:V.width;V=(0,l.o)(k),(0,l.Y)(V,e)}const I=(0,l.ab)(V),L="cim"===V.type&&"CIMPointSymbol"===V.data.symbol.type,B=(0,l.ad)(x,O.length).map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),q=u();let P;if((0,l.W)(V,A[A.length-1]),(w||f||h)&&C?(0,l.Y)(V,(0,t.g)(C,n.scale)):v&&S&&V.outline&&(V.outline.width=(0,t.g)(S,n.scale)),"simple-fill"===V.type){const e=V;P=e.outline?{color:e.outline.color?e.outline.color:new p.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!S}:{color:new p.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!S}}else if("simple-marker"===V.type){const e=V;P=e.outline?{color:e.outline.color?e.outline.color:new p.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new p.esriColor([0,0,0,.5]),size:1}}else if("cim"===V.type)P=Y(V),h&&(P.size=C?(0,t.g)(C,n.scale):P.size,P.autoAdjusted=!!C,C&&(0,l.Y)(V,P.size));else if("simple-line"===V.type){const e=V;P={color:new p.esriColor([255,255,255,.5]),size:C?(0,t.g)(C,n.scale):e.width,style:e.style,marker:e.marker,autoAdjusted:!!C}}else P={color:new p.esriColor([255,255,255,.5]),size:1};const T=await m(g);let G;return E=V.clone(),G=y(T,p.esriLang.clone(V),h?{portal:c,symbolFilter:(0,l.af)()?void 0:"simple",sections:{stroke:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:B,parts:{transparency:!0,extra:!w||"cim"!==V.type},extraParts:{style:"cim"!==V.type,arrow:"cim"!==V.type,autoStrokeAdjust:!a&&!w&&"editable",width:!w}}},stroke:Object.assign(Object.assign({},P),{color:A})}:{portal:c,symbolFilter:v&&!(0,l.af)()?"simple":void 0,sections:{marker:L||["simple-marker","picture-marker"].indexOf(V.type)>-1?{open:!!(0,l.az)(V),parts:{size:!w&&(!!a||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!w,markerType:(0,l.af)()?["simple","cim:vector"]:["simple"]}:void 0,fill:{type:"color-ramp",style:"discrete",open:!(0,l.az)(V),colorRampsOpen:!(0,l.az)(V),colorRamps:B},stroke:{type:"color",optional:!0,open:!1,suggestedColors:q,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(V.type),width:!0,autoStrokeAdjust:!(a||!v||"cim"===V.type||w)&&"editable"}}},fill:{color:A},marker:w||f?{size:C?(0,t.g)(C,n.scale):(0,l.X)(V),autoAdjusted:!!C}:void 0,stroke:P,strokeEnabled:I}),T.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:t,fill:i}}})=>{const r=p.esriLang.clone((i||t).color),a=A[0],n=A.length!==r.length||A.some(((e,o)=>e.r!==r[o].r||e.g!==r[o].g||e.b!==r[o].b))||a.r!==r[0].r||a.g!==r[0].g||a.b!==r[0].b,c=a.a!==r[0].a,u=r[0].a;r.reverse();const m=(0,l.b)(),y=(0,l.aC)(o,E);if(n&&!y.any&&(y.any=!0,y.color=!0),y.any){const e=m.uniqueValueGroups[0].classes.slice();e.forEach(((e,s)=>{"picture-marker"===e.symbol.type&&(n||c)&&(e.symbol=p.esriLang.clone(o),(0,l.W)(e.symbol,r[s%r.length])),e.symbol=(0,l.aD)(e.symbol,o,n?r[s%r.length]:c?(0,l.aE)((0,l.Q)(e.symbol),u):(0,l.Q)(e.symbol)||new p.esriColor([0,0,0,0]),y)})),m.uniqueValueGroups[0].classes=e}w?d():F(o,null==s?void 0:s.autoAdjusted,null==t?void 0:t.autoAdjusted,T,e),E=o.clone(),n&&(A=m.uniqueValueGroups[0].classes.map((e=>(0,l.Q)(e.symbol)||new p.esriColor([0,0,0,.5]))),A.reverse())}))),g.addStyler(T),await G,M((null===(r=z.uniqueValueGroups[0].classes)||void 0===r?void 0:r.length)?z.uniqueValueGroups[0].classes[0].symbol:void 0,T,(e=>{v&&V.outline?V.outline.width=e:!v&&(0,l.Y)(V,e),E=V.clone()}))}async function L(e){var o;const{mapImageSublayer:s,mapView:i,selectedValue:r,lastDefault:a,portal:c,modules:p}=l.s,{onChange:d,popoverNode:g}=e,f=(0,l.y)(),h=(0,l.z)(),v=(0,l.B)(),z=(0,l.b)(),k=(0,l.a)(),w="predominance-size"===k,C=(0,l.d)(z,"size","auto"),S=(0,l.d)(z,"size","outline");let O;O=-1===r?z.defaultSymbol||a.defaultSymbol:z.uniqueValueGroups[0].classes[r].symbol,W(O)||(O=(0,l.o)(k),-1!==r||z.defaultSymbol||(a.defaultSymbol=O));const E="picture-marker"!==O.type&&!!O.color,j=(0,l.ab)(O),A="cim"===O.type&&"CIMPointSymbol"===O.data.symbol.type;let x;if(-1===r)x=n();else{const e=p.predominanceSchemes.getSchemes({basemap:i.map.basemap,geometryType:(0,l.C)(),numColors:10});x=(0,l.ae)(e).slice(0,16)}const V=u();let I;if((w||f||h)&&C?(0,l.Y)(O,(0,t.g)(C,i.scale)):v&&S&&O.outline&&(O.outline.width=(0,t.g)(S,i.scale)),"simple-fill"===O.type){const e=O;I=e.outline?{color:e.outline.color?e.outline.color:new p.esriColor([0,0,0,.5]),size:e.outline.width,style:e.outline.style,autoAdjusted:!!S}:{color:new p.esriColor([0,0,0,.5]),size:1,style:"solid",autoAdjusted:!!S}}else if("simple-marker"===O.type){const e=O;I=e.outline?{color:e.outline.color?e.outline.color:new p.esriColor([0,0,0,.5]),size:e.outline.width}:{color:new p.esriColor([0,0,0,.5]),size:1}}else if("cim"===O.type)I=Y(O);else if("simple-line"===O.type){const e=O;I={size:e.width,style:e.style,marker:e.marker,color:e.color}}else I={color:new p.esriColor([255,255,255,.5]),size:1};const L=await m(g);let B;return B=y(L,p.esriLang.clone(O),h?{portal:c,symbolFilter:(0,l.af)()?void 0:"simple",sections:{stroke:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:x,extraParts:{style:"cim"!==O.type,arrow:"cim"!==O.type,autoStrokeAdjust:!s&&!w&&"editable",width:!w},parts:{extra:!w||"cim"!==O.type}}},stroke:I}:{portal:c,symbolFilter:v&&!(0,l.af)()?"simple":void 0,sections:{marker:A||["simple-marker","picture-marker"].indexOf(O.type)>-1?{open:!0,parts:{size:!w&&(!!s||{autoSizeAdjust:"editable"})},symbolsOpen:!0,sizeOpen:!w,markerType:(0,l.af)()?"all":["simple","picture"]}:void 0,fill:{type:"color",open:!0,optional:!0,suggestedColorsOpen:!0,transparencyOpen:(0,l.ac)(O),suggestedColors:x},stroke:{type:"color",optional:!0,suggestedColors:V,extraParts:{style:-1===["simple-marker","picture-marker","cim"].indexOf(O.type),width:!0,autoStrokeAdjust:!(s||!v||"cim"===O.type||w)&&"editable"}}},fill:{color:(0,l.Q)(O)||X(x[r],.85)},marker:w||f?{size:C?(0,t.g)(C,i.scale):(0,l.X)(O),autoAdjusted:!!C}:void 0,stroke:I,fillEnabled:E,strokeEnabled:j}),L.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:o,info:{marker:s,stroke:t}}})=>{const i=(0,l.b)();if(-1===r)i.defaultSymbol=o;else{const e=i.uniqueValueGroups[0].classes.slice();e[r].symbol=o,i.uniqueValueGroups[0].classes=e}w?d():F(o,null==s?void 0:s.autoAdjusted,null==t?void 0:t.autoAdjusted,L,e)}))),g.addStyler(L),await B,M((null===(o=z.uniqueValueGroups[0].classes)||void 0===o?void 0:o.length)?z.uniqueValueGroups[0].classes[0].symbol:void 0,L)}async function B(e){const{mapView:o,portal:s,strings:t,modules:i}=l.s,{onChange:r,popoverNode:c}=e,u=(0,l.b)(),p=u.attributes,d=p.map((e=>e.color)),g=i.pieChartSchemes.getSchemes({basemap:o.map.basemap,geometryType:(0,l.C)()||a,numColors:p.length}),f=n(),h=(0,l.ad)(g,p.length).map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),v=(0,l.o)();let z;if(v.outline=u.outline,"simple-fill"===v.type)if(v.outline){const e=v.outline;z={color:e.color?e.color:new i.esriColor([0,0,0,.5]),size:e.width,style:e.style}}else z={color:new i.esriColor([0,0,0,.5]),size:1,style:"solid"};else if("simple-marker"===v.type&&v.outline){const e=v.outline;z={color:e.color?e.color:new i.esriColor([0,0,0,.5]),size:e.width,style:e.style}}const k=await m(c),w=y(k,v,{portal:s,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:h},stroke:{type:"color",optional:!0,suggestedColors:f,extraParts:{style:!1,width:!0,autoStrokeAdjust:!1}}},fill:{color:d.reverse()},stroke:z});k.stringOverrides={fillColor:t.styler.color,fillTransparency:t.styler.transparency},k.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:e,info:{fill:o}}})=>{const s=i.esriLang.clone(o.color);s.reverse(),(0,l.b)().attributes.forEach(((e,o)=>e.color=s[o])),(0,l.b)().outline=e.outline.clone(),r()}))),c.addStyler(k),await w}async function q(e){var o;const{mapView:s,selectedAttribute:t,lastDefault:i,portal:r,strings:n,modules:c}=l.s,{onChange:u,popoverNode:p}=e,d=(0,l.b)(),g=d.attributes;let f;f=-1===t?(null===(o=d.othersCategory)||void 0===o?void 0:o.color)||(null==i?void 0:i.otherColor)||new c.esriColor([170,170,170,1]):-2===t?d.defaultColor||(null==i?void 0:i.defaultColor)||new c.esriColor([170,170,170,1]):g[t].color;const h=c.pieChartSchemes.getSchemes({basemap:s.map.basemap,geometryType:(0,l.C)()||a,numColors:g.length}),v=(0,l.ae)(h).slice(0,16),z=(0,l.o)();z.outline=void 0,(0,l.W)(z,f);const k=await m(p),w=y(k,z,{portal:r,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:v}},fill:{color:f}});k.stringOverrides={fillColor:n.styler.color,fillTransparency:n.styler.transparency},k.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:e}})=>{var o;-1===t?(0,l.b)().othersCategory?(0,l.b)().othersCategory.color=(0,l.Q)(e):(0,l.b)().othersCategory={color:(0,l.Q)(e),label:(null==i?void 0:i.otherLabel)||n.styler.other,threshold:null!==(o=null==i?void 0:i.threshold)&&void 0!==o?o:0}:-2===t?(0,l.b)().defaultColor=(0,l.Q)(e):(0,l.b)().attributes[t].color=(0,l.Q)(e),u()}))),p.addStyler(k),await w}async function P(e){const{mapView:o,portal:s,strings:t,modules:i}=l.s,{onChange:r,popoverNode:a}=e,n=(0,l.b)().attributes,c=n.map((e=>e.color)),u=i.dotDensitySchemes.getSchemes({basemap:o.map.basemap,numColors:n.length}),p=(0,l.ad)(u,n.length).map((e=>({stops:e.colors,tags:e.scheme.tags,name:e.scheme.name}))),d=await m(a),g=y(d,(0,l.o)(),{portal:s,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"discrete",open:!0,colorRampsOpen:!0,colorRamps:p}},fill:{color:c}});d.stringOverrides={fillColor:t.styler.dotColor,fillTransparency:t.styler.dotTransparency},d.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{info:{fill:e}}})=>{(0,l.b)().attributes.forEach(((o,s)=>o.color=e.color[s])),r()}))),a.addStyler(d),await g}async function T(e){const{mapView:o,portal:s,strings:t,modules:i}=l.s,{onChange:r,popoverNode:a,selectedAttribute:n}=e,c=(0,l.b)().attributes,u=i.dotDensitySchemes.getSchemes({basemap:o.map.basemap,numColors:c.length}),p=(0,l.ae)(u).slice(0,16),d=await m(a),g=y(d,(0,l.o)(),{portal:s,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color",open:!0,suggestedColorsOpen:!0,suggestedColors:p}},fill:{color:c[n].color}});d.stringOverrides={fillColor:t.styler.dotColor,fillTransparency:t.styler.dotTransparency},d.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{symbol:e}})=>{(0,l.b)().attributes[n].color=(0,l.Q)(e),r()}))),a.addStyler(d),await g}async function G(e){const{mapView:o,portal:s,strings:t,modules:i}=l.s,{onChange:r,popoverNode:a}=e,n=(0,l.b)().colorStops,c=n.filter(((e,o)=>o>=3)).map((e=>e.color)),u=await i.colorUtils.getBackgroundColorTheme(o),p=i.heatmapSchemes.getSchemes({basemapTheme:u}),d=(0,l.ad)(p,n.length).map((e=>({stops:e.colors.reverse(),tags:e.scheme.tags,name:e.scheme.name}))),g=await m(a),f=y(g,(0,l.o)(),{portal:s,sections:{marker:{parts:{preview:!1,rotation:!1,size:!1}},fill:{type:"color-ramp",style:"continuous",open:!0,colorRampsOpen:!0,colorRamps:d,parts:{transparency:!1}}},fill:{color:c.reverse()}});g.stringOverrides={fillTransparency:t.styler.transparency},g.addEventListener("arcgisSymbolStylerEdit",b.bind(null,(({detail:{info:{fill:e}}})=>{const o=i.esriLang.clone(e.color);o.reverse();const s=Math.max(n.length-o.length,0);(0,l.b)().colorStops.forEach(((e,l)=>{const t=e.color.a;e.color=l<=s-2||l<=s?i.esriLang.clone(o[0]):i.esriLang.clone(o[l-s]),e.color.a=t})),r()}))),a.addStyler(g),await f}function F(e,o,s,r,a){const{modules:n}=l.s,c=(0,l.y)(),u=(0,l.z)();c?R(o,(0,l.X)(e),e,r,a):u?R(s,(0,l.X)(e),e,r,a):function(e,o,s,r,a){const{mapView:n}=l.s,{onChange:c}=a,u=(0,l.b)(),p=(0,l.d)(u,"size","outline");e&&!p?(0,i.d)().then((e=>{if(e){const o=(0,l.b)();o.visualVariables=o.visualVariables||[],o.visualVariables.push(e),N(e,n.scale,s,r)}c()})):!e&&p?(u.visualVariables=u.visualVariables.filter((e=>!("size"===e.type&&"outline"===e.target))),u.visualVariables&&!u.visualVariables.length&&(u.visualVariables=void 0),c()):(e&&function(e,o){const{mapView:s}=l.s,{onChange:r}=o,a=s.scale;let n=(0,l.b)();const c=(0,l.d)(n,"size","outline"),u=c.stops;if(0!==e&&0===u[u.length-2].size)(0,i.d)().then((o=>{if(o){const s=(0,t.g)(o,a);Q(o,(0===e?Math.max(.5,e):e)/(0===s?Math.max(.5,s):s));const i=(0,l.T)((0,l.b)(),"size","outline")||[];i.push(o),(0,l.b)().visualVariables=i,r(),setTimeout((()=>{}),2e3)}}));else{const o=(0,t.g)(c,a),s=(0===e?Math.max(.5,e):e)/(0===o?Math.max(.5,o):o);Q(c,s),0!==e&&0!==o||(!function(e,o,s){const l=e.stops,t=l.length-1,i=l[0].value,r=l[t].value;if(o<=i){for(let e=0;e<=t;e++)l[e].size=s;return}if(o>=r)return void(l[t].size=s);for(let e=0;e<t;e++){const i=l[e],r=l[e+1];if(o>=i.value&&o<r.value){for(let o=e+1;o<=t;o++)l[o].size=s;break}}}(c,a,e),c.stops.forEach(((e,o)=>{o>0&&e.size===c.stops[o-1].size&&(o===c.stops.length-1?o>1&&(c.stops[o-1].size=(c.stops[o-2].size+e.size)/2):e.size=(c.stops[o+1].size+c.stops[o-1].size)/2)})))}}(o,a),c())}(s,"cim"===e.type?(0,l.aF)(e):(0,l.X)(e.outline||new n.SimpleLineSymbol),e,r,a)}function R(e,o,s,r,a){const{mapView:n}=l.s,{onChange:c}=a,u=(0,l.b)();o=Math.max(o,.1);const p=(0,l.d)(u,"size","auto");if(e&&!p)(0,i.b)().then((e=>{if(e){const o=(0,l.b)();if(o.visualVariables=o.visualVariables||[],o.visualVariables.push(e),(0,l.aA)(s)){Q(e,(0,l.X)(s)/(0,t.g)(e,n.scale))}N(e,n.scale,s,r)}c()}));else if(!e&&p){const e=(0,l.T)(u,"size","auto");(null==e?void 0:e.length)?u.visualVariables=e:u.visualVariables=void 0,c()}else e&&function(e){const{mapView:o}=l.s,s=o.scale,i=(0,l.b)(),r=(0,l.d)(i,"size","auto"),a=(0,t.g)(r,s),n=e/a;Q(r,n)}(o),c()}function Q(e,o){e.stops.forEach((e=>{e.size*=o}))}function M(e,o,s){const{mapView:t,modules:i}=l.s;let r;return i.reactiveUtils.when((()=>t.stationary),(()=>{const i=t.scale;if(r!==i){const t=(0,l.b)(),a=(0,l.d)(t,"size","simple-fill"===e.type?"outline":"auto");a&&N(a,i,e,o,s),r=i}}))}function N(e,o,s,i,r){const a=(0,t.g)(e,o),n=["simple-line","simple-fill"].indexOf(s.type)>-1||(0,l.aA)(s)?"stroke":"marker";i.setSize(n,a),null==r||r(a)}function X(e,o){return e&&(e.a=o),e}function Y(e){var o,s,t;const{modules:i}=l.s;if((0,l.aA)(e))return{color:(null===(o=(0,l.Q)(e))||void 0===o?void 0:o.clone())||new i.esriColor([255,255,255,.5]),size:null!==(s=(0,l.X)(e))&&void 0!==s?s:1};{const o=(0,l.aB)(e);return{color:new i.esriColor(null==o?void 0:o.color)||new i.esriColor([255,255,255,.5]),size:null!==(t=null==o?void 0:o.width)&&void 0!==t?t:1}}}function W(e){return["simple-fill","simple-marker","simple-line","picture-marker","cim"].indexOf(null==e?void 0:e.type)>-1}function D(e){return["simple-fill","simple-marker","simple-line","cim"].indexOf(e.type)>-1}}}]);