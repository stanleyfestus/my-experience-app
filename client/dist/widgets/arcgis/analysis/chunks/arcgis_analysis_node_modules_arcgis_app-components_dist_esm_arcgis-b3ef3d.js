/*! For license information please see arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-b3ef3d.js.LICENSE.txt */
"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_arcgis_analysis_node_modules_arcgis_app-components_dist_esm_arcgis-b3ef3d"],{77256:(s,e,a)=>{a.r(e),a.d(e,{arcgis_smart_mapping_class_breaks_color_slider:()=>t});var l=a(20536),r=(a(74129),a(98034),a(37219)),i=a(9710),o=a(53753);a(99004),a(34752),a(91102),a(73807),a(37568),a(10699),a(98072);const t=class{constructor(s){(0,l.r)(this,s),this.arcgisSmartMappingClassBreaksColorSliderChange=(0,l.c)(this,"arcgisSmartMappingClassBreaksColorSliderChange",7),this.arcgisSmartMappingClassBreaksColorSliderError=(0,l.c)(this,"arcgisSmartMappingClassBreaksColorSliderError",7),this.styleSheetStatus="not-loaded"}render(){const{config:s}=r.s;return(0,l.h)(l.H,{key:"5608c7a107e0a718d76982e5e47a48210fcccad0"},(0,l.h)("link",{key:"0d1e27c12f90670828df9c8bdfac4dedc3963a9b",rel:"stylesheet",href:`${s.jsapiUrl}/themes/light/main.css`,onLoad:()=>{this.styleSheetStatus="loaded",(0,l.f)(this.hostElement)},onError:()=>{this.styleSheetStatus="failed",(0,l.f)(this.hostElement)}}),"loaded"===this.styleSheetStatus?this.renderClassBreaksColorSlider():"not-loaded"===this.styleSheetStatus?this.renderClassBreaksColorSliderLoading():null)}renderClassBreaksColorSlider(){const{strings:s}=r.s;if(1!==(0,r.b)().classBreakInfos.length){return(this.prepareClassBreaksColorSlider()||this.classBreaksColorSlider)&&this.classBreaksColorSlider.min!==this.classBreaksColorSlider.max?(0,l.h)("div",{class:"slider-box"},(0,l.h)("calcite-label",null,s.panels.classBreaks.dataRange),(0,l.h)("div",{class:"slider-box-buttons-front"},this.renderInvertButton()),(0,l.h)("div",{ref:s=>{s&&this.afterClassBreaksColorSliderCreate(s)}})):this.classBreaksColorSlider&&this.classBreaksColorSlider.min===this.classBreaksColorSlider.max?null:this.renderClassBreaksColorSliderLoading()}this.classBreaksColorSlider&&(this.classBreaksColorSlider.destroy(),this.classBreaksColorSlider=void 0)}renderInvertButton(){const{strings:s}=r.s;return(0,l.h)("arcgis-smart-mapping-action",{text:s.panels.classBreaks.invertSlider,icon:"arrowUpDown",onClick:()=>this.handleInvertSlider()})}renderClassBreaksColorSliderLoading(){const{strings:s}=r.s;return(0,l.h)("div",{class:"slider-box"},(0,l.h)("calcite-loader",{label:s.loading}))}prepareClassBreaksColorSlider(){const{modules:s}=r.s,e=(0,r.b)();let a,l;a=e.classBreakInfos[0].minValue,l=e.classBreakInfos[e.classBreakInfos.length-1].maxValue,({min:a,max:l}=(0,r.aG)({min:a,max:l}));const t=(0,o.g)(),n={min:a,max:l,breaks:t,precision:(0,i.g)(t)};return this.classBreaksColorSlider?this.classBreaksColorSlider.set(n):(this.classBreaksColorSlider=new s.ClassedColorSlider(n),this.classBreaksColorSlider.min===this.classBreaksColorSlider.max&&this.classBreaksColorSlider.set(n),this.createclassBreaksColorSliderChangeEvents()),(0,r.O)(this.classBreaksColorSlider)}afterClassBreaksColorSliderCreate(s){if(this.classBreaksColorSlider.container)s.append(this.classBreaksColorSlider.container);else{const e=document.createElement("div");s.append(e),this.classBreaksColorSlider.container=e}}createclassBreaksColorSliderChangeEvents(){this.classBreaksColorSlider&&(this.classBreaksColorSlider.on("min-change",(s=>{const e=(0,r.b)().classBreakInfos;s.value>e[0].maxValue?this.handleMinMaxChange(e[0].maxValue,e[e.length-1].maxValue):this.handleMinMaxChange(s.value,e[e.length-1].maxValue)})),this.classBreaksColorSlider.on("max-change",(s=>{const e=(0,r.b)().classBreakInfos;s.value<e[e.length-1].minValue?this.handleMinMaxChange(e[0].minValue,e[e.length-1].minValue):this.handleMinMaxChange(e[0].minValue,s.value)})),this.classBreaksColorSlider.on("thumb-change",(()=>this.updateRendererBreaks(this.classBreaksColorSlider.breaks))),this.classBreaksColorSlider.on("thumb-drag",(()=>this.updateRendererBreaks(this.classBreaksColorSlider.breaks))))}handleInvertSlider(){const{modules:s}=r.s,e=(0,r.b)();let a=e.classBreakInfos.map((e=>(0,r.Q)(e.symbol)||new s.esriColor({r:64,g:64,b:64,a:1})));a=a.reverse(),e.classBreakInfos.map(((s,e)=>{(0,r.Q)(s.symbol)&&(0,r.W)(s.symbol,a[e])})),(0,r.u)(),this.arcgisSmartMappingClassBreaksColorSliderChange.emit({invertColors:!0})}handleMinMaxChange(s,e){const a=(0,r.b)();let l=a.classBreakInfos[0],i=a.classBreakInfos[a.classBreakInfos.length-1];l.minValue=s,l.label=(0,r.aH)(l,this.classBreaksColorSlider.precision),i.maxValue=e,i.label=(0,r.aH)(i,this.classBreaksColorSlider.precision),(0,r.u)(),this.arcgisSmartMappingClassBreaksColorSliderChange.emit({updateValues:!0})}updateRendererBreaks(s){(0,r.b)().classBreakInfos.forEach(((e,a)=>{e.minValue===s[a].min&&e.maxValue===s[a].max||(e.minValue=s[a].min,e.maxValue=s[a].max,e.label=(0,r.aH)(e,this.classBreaksColorSlider.precision))})),(0,r.u)(),this.arcgisSmartMappingClassBreaksColorSliderChange.emit({updateValues:!0})}get hostElement(){return(0,l.d)(this)}};t.style=".slider-box{height:320px}.slider-box .esri-classed-color-slider{min-width:200px}.slider-box .esri-classed-color-slider .esri-slider .esri-slider__content{height:175px}.slider-box .esri-classed-color-slider .esri-slider .esri-slider__label,.slider-box .esri-classed-color-slider .esri-slider .esri-slider__min,.slider-box .esri-classed-color-slider .esri-slider .esri-slider__max{text-decoration:underline}.slider-box .esri-classed-color-slider .esri-slider .esri-slider__label:hover,.slider-box .esri-classed-color-slider .esri-slider .esri-slider__min:hover,.slider-box .esri-classed-color-slider .esri-slider .esri-slider__max:hover{border:1px solid #bbb;background-color:#f3f3f3;text-decoration:none;z-index:1}.slider-box-buttons-front{display:flex}"},9710:(s,e,a)=>{a.d(e,{a:()=>t,b:()=>o,g:()=>d,u:()=>i});var l=a(98072),r=a(37219);a(98034);function i(s){const{modules:e}=r.s,a=(0,r.b)(),i=e.esriLang.clone(a.classBreakInfos);a.classBreakInfos=[],i.forEach(((e,o)=>{e=function(s,e,a,i){if((0,l.i)(e))if(0===e);else if(e<1){const l=Math.round(1/e);s.minValue="first"===i?Math.floor(s.minValue/e)/l:Math.round(s.minValue/e)/l,s.maxValue="last"===i?Math.ceil(s.maxValue/e)/l:Math.round(s.maxValue/e)/l,s.label=`${a>0?"> ":""}${s.minValue.toLocaleString(r.s.fullLocale,{maximumSignificantDigits:15})} - ${s.maxValue.toLocaleString(r.s.fullLocale,{maximumSignificantDigits:15})}`}else s.minValue="first"===i?Math.floor(s.minValue/e)*e:Math.round(s.minValue/e)*e,s.maxValue="last"===i?Math.ceil(s.maxValue/e)*e:Math.round(s.maxValue/e)*e,s.label=(a>0?"> ":"")+s.minValue.toLocaleString()+" - "+s.maxValue.toLocaleString();return s}(e,s,o,0===o?"first":o===i.length-1?"last":void 0),a.addClassBreakInfo({minValue:e.minValue,maxValue:e.maxValue,symbol:e.symbol,label:e.label})}))}function o(s){const e=(0,r.b)().classBreakInfos;let a=s,l=1/0;e.forEach((s=>{a||(a=Math.max(n(s.minValue),n(s.maxValue))),l=Math.min(l,s.maxValue-s.minValue)}));const i=[];return l>1e7?(i.push(1e7),i.push(1e6),i.push(1e5),i.push(1e4),i.push(1e3),i.push(100),i.push(10),a>0&&i.push(1),a>1&&i.push(.1),a>2&&i.push(.01)):l>1e6?(i.push(1e6),i.push(1e5),i.push(1e4),i.push(1e3),i.push(100),i.push(10),a>0&&i.push(1),a>1&&i.push(.1),a>2&&i.push(.01)):l>1e5?(i.push(1e5),i.push(1e4),i.push(1e3),i.push(100),i.push(10),a>0&&i.push(1),a>1&&i.push(.1),a>2&&i.push(.01)):l>1e4?(i.push(1e4),i.push(1e3),i.push(100),i.push(10),a>0&&i.push(1),a>1&&i.push(.1),a>2&&i.push(.01)):l>1e3?(i.push(1e3),i.push(100),i.push(10),a>0&&i.push(1),a>1&&i.push(.1),a>2&&i.push(.01),a>3&&i.push(.001)):l>100?(i.push(100),i.push(10),a>0&&i.push(1),a>1&&i.push(.1),a>2&&i.push(.01),a>3&&i.push(.001),a>4&&i.push(1e-4),a>5&&i.push(1e-5)):l>10?(i.push(10),a>0&&i.push(1),a>1&&i.push(.1),a>2&&i.push(.01),a>3&&i.push(.001),a>4&&i.push(1e-4),a>5&&i.push(1e-5),a>6&&i.push(1e-6)):l>1?(a>0&&i.push(1),a>1&&i.push(.1),a>2&&i.push(.01),a>3&&i.push(.001),a>4&&i.push(1e-4),a>5&&i.push(1e-5),a>6&&i.push(1e-6)):l>.1?(a>1&&i.push(.1),a>2&&i.push(.01),a>3&&i.push(.001),a>4&&i.push(1e-4),a>5&&i.push(1e-5),a>6&&i.push(1e-6)):l>.01?(a>2&&i.push(.01),a>3&&i.push(.001),a>4&&i.push(1e-4),a>5&&i.push(1e-5),a>6&&i.push(1e-6)):l>.001?(a>3&&i.push(.001),a>4&&i.push(1e-4),a>5&&i.push(1e-5),a>6&&i.push(1e-6),a>7&&i.push(1e-7)):l>1e-4?(a>4&&i.push(1e-4),a>5&&i.push(1e-5),a>6&&i.push(1e-6),a>7&&i.push(1e-7),a>8&&i.push(1e-8)):l>1e-5&&(a>5&&i.push(1e-5),a>6&&i.push(1e-6),a>7&&i.push(1e-7),a>8&&i.push(1e-8),a>9&&i.push(1e-9)),i}function t(){const s=(0,r.b)();let e=1e10;return s.classBreakInfos.forEach((s=>{e=Math.min(e,h(s.minValue)),e=Math.min(e,h(s.maxValue))})),e}function n(s){let e=1;for(;Math.round(s*e)/e!==s;)e*=10;return Math.log(e)/Math.LN10}function h(s){let e=1e-8;for(;u(Math.round(s/e)*e)===s;)e*=10;return e/10}function u(s){return parseFloat(s.toPrecision(12))}function d(s){var e,a,r,i,o,t,h,d;let c=0;s.forEach((s=>{(0,l.i)(s.value)?c=Math.max(n(u(s.value)),c):((0,l.i)(s.minValue)&&(c=Math.max(n(u(s.minValue)),c)),(0,l.i)(s.maxValue)&&(c=Math.max(n(u(s.maxValue)),c)),(0,l.i)(s.min)&&(c=Math.max(n(u(s.min)),c)),(0,l.i)(s.max)&&(c=Math.max(n(u(s.max)),c)))})),c=Math.min(c,3);const p=s[0],m=s[s.length-1],C=Math.min(null!==(a=null!==(e=p.minValue)&&void 0!==e?e:p.min)&&void 0!==a?a:p.value,null!==(i=null!==(r=m.minValue)&&void 0!==r?r:m.min)&&void 0!==i?i:m.value),g=Math.max(null!==(t=null!==(o=p.maxValue)&&void 0!==o?o:p.max)&&void 0!==t?t:p.value,null!==(d=null!==(h=m.maxValue)&&void 0!==h?h:m.max)&&void 0!==d?d:m.value)-C;return g/s.length<2e-7?c=8:g/s.length<2e-6?c=7:g/s.length<2e-5?c=6:g/s.length<2e-4?c=5:g/s.length<.002?c=4:g/s.length<.02?c=3:g/s.length<.2?c=Math.max(c,2):g/s.length<2&&(c=Math.max(c,1)),Math.round(c)}}}]);