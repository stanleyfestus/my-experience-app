System.register(["jimu-core","jimu-arcgis","jimu-theme","jimu-ui","esri/core/Collection","esri/widgets/BuildingExplorer","esri/widgets/BuildingExplorer/BuildingExplorerViewModel","esri/core/reactiveUtils"],(function(e,t){var n={},r={},o={},a={},i={},l={},s={},c={};return{setters:[function(e){n.AllDataSourceTypes=e.AllDataSourceTypes,n.React=e.React,n.classNames=e.classNames,n.css=e.css,n.hooks=e.hooks,n.jsx=e.jsx,n.lodash=e.lodash},function(e){r.JimuMapViewComponent=e.JimuMapViewComponent,r.zoomToUtils=e.zoomToUtils},function(e){o.useTheme=e.useTheme},function(e){a.Dropdown=e.Dropdown,a.DropdownButton=e.DropdownButton,a.DropdownItem=e.DropdownItem,a.DropdownMenu=e.DropdownMenu,a.Tooltip=e.Tooltip,a.WidgetPlaceholder=e.WidgetPlaceholder,a.defaultMessages=e.defaultMessages},function(e){i.default=e.default},function(e){l.default=e.default},function(e){s.default=e.default},function(e){c.default=e.default}],execute:function(){e((()=>{var e={40280:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#000" fill-rule="evenodd" d="M7.469 1.66a1 1 0 0 0-1.003.115L.7 6.1a.5.5 0 1 0 .6.8l5.299-3.974A1 1 0 0 1 7.6 2.81L15.3 5.957a.5.5 0 1 0 .402-.915zM1.5 10.83l4.959-3.815V18.16L1.5 17.327zm5.376 8.413q.089.015.173-.001l12.364-1.999a.5.5 0 0 0 .42-.493v-6.167a.5.5 0 0 0-.326-.469L7.132 5.531a.5.5 0 0 0-.479.073L.695 10.187a.5.5 0 0 0-.195.396v7.167a.5.5 0 0 0 .417.493zm3.915-8.774a.5.5 0 0 1 .45-.069l4.125 1.375a.5.5 0 0 1 .342.475v4.58l3.126-.506v-5.393L7.459 6.718v11.444l3.124-.505v-6.782a.5.5 0 0 1 .208-.406m3.917 2.141v4.38l-3.125.506v-5.927z" clip-rule="evenodd"></path></svg>'},75889:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#000" fill-rule="evenodd" d="M7.469 1.66a1 1 0 0 0-1.003.115L.7 6.1a.5.5 0 1 0 .6.8l5.299-3.974A1 1 0 0 1 7.6 2.81L15.3 5.957a.5.5 0 1 0 .402-.915zM1.5 10.83l4.959-3.815V18.16L1.5 17.327zm5.376 8.413q.089.015.173-.001l12.364-1.999a.5.5 0 0 0 .42-.493v-6.167a.5.5 0 0 0-.326-.469L7.132 5.531a.5.5 0 0 0-.479.073L.695 10.187a.5.5 0 0 0-.195.396v7.167a.5.5 0 0 0 .417.493zm3.915-8.774a.5.5 0 0 1 .45-.069l4.125 1.375a.5.5 0 0 1 .342.475v4.58l3.126-.506v-5.393L7.459 6.718v11.444l3.124-.505v-6.782a.5.5 0 0 1 .208-.406m3.917 2.141v4.38l-3.125.506v-5.927z" clip-rule="evenodd"></path></svg>'},45508:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5"></path><path fill="#000" fill-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14" clip-rule="evenodd"></path></svg>'},28996:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0" clip-rule="evenodd"></path></svg>'},23321:e=>{"use strict";e.exports=i},62243:e=>{"use strict";e.exports=c},83214:e=>{"use strict";e.exports=l},63990:e=>{"use strict";e.exports=s},62686:e=>{"use strict";e.exports=r},79244:e=>{"use strict";e.exports=n},1888:e=>{"use strict";e.exports=o},14321:e=>{"use strict";e.exports=a}},t={};function u(n){var r=t[n];if(void 0!==r)return r.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,u),o.exports}u.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return u.d(t,{a:t}),t},u.d=(e,t)=>{for(var n in t)u.o(t,n)&&!u.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.p="";var d={};return u.p=window.jimuConfig.baseUrl,(()=>{"use strict";u.r(d),u.d(d,{__set_webpack_public_path__:()=>In,default:()=>En});var e=u(79244),t=u(62686),n=u(1888);const r=function(){this.__data__=[],this.size=0};const o=function(e,t){return e===t||e!=e&&t!=t};const a=function(e,t){for(var n=e.length;n--;)if(o(e[n][0],t))return n;return-1};var i=Array.prototype.splice;const l=function(e){var t=this.__data__,n=a(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)};const s=function(e){var t=this.__data__,n=a(t,e);return n<0?void 0:t[n][1]};const c=function(e){return a(this.__data__,e)>-1};const v=function(e,t){var n=this.__data__,r=a(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function p(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}p.prototype.clear=r,p.prototype.delete=l,p.prototype.get=s,p.prototype.has=c,p.prototype.set=v;const f=p;const g=function(){this.__data__=new f,this.size=0};const h=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};const m=function(e){return this.__data__.get(e)};const w=function(e){return this.__data__.has(e)};const y="object"==typeof global&&global&&global.Object===Object&&global;var b="object"==typeof self&&self&&self.Object===Object&&self;const j=y||b||Function("return this")();const _=j.Symbol;var x=Object.prototype,M=x.hasOwnProperty,V=x.toString,O=_?_.toStringTag:void 0;const L=function(e){var t=M.call(e,O),n=e[O];try{e[O]=void 0;var r=!0}catch(e){}var o=V.call(e);return r&&(t?e[O]=n:delete e[O]),o};var S=Object.prototype.toString;const R=function(e){return S.call(e)};var C=_?_.toStringTag:void 0;const E=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":C&&C in Object(e)?L(e):R(e)};const I=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};const k=function(e){if(!I(e))return!1;var t=E(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const N=j["__core-js_shared__"];var z,P=(z=/[^.]+$/.exec(N&&N.keys&&N.keys.IE_PROTO||""))?"Symbol(src)_1."+z:"";const A=function(e){return!!P&&P in e};var T=Function.prototype.toString;const D=function(e){if(null!=e){try{return T.call(e)}catch(e){}try{return e+""}catch(e){}}return""};var B=/^\[object .+?Constructor\]$/,F=Function.prototype,J=Object.prototype,U=F.toString,W=J.hasOwnProperty,$=RegExp("^"+U.call(W).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const H=function(e){return!(!I(e)||A(e))&&(k(e)?$:B).test(D(e))};const G=function(e,t){return null==e?void 0:e[t]};const q=function(e,t){var n=G(e,t);return H(n)?n:void 0};const Q=q(j,"Map");const K=q(Object,"create");const X=function(){this.__data__=K?K(null):{},this.size=0};const Y=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t};var Z=Object.prototype.hasOwnProperty;const ee=function(e){var t=this.__data__;if(K){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Z.call(t,e)?t[e]:void 0};var te=Object.prototype.hasOwnProperty;const ne=function(e){var t=this.__data__;return K?void 0!==t[e]:te.call(t,e)};const re=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=K&&void 0===t?"__lodash_hash_undefined__":t,this};function oe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}oe.prototype.clear=X,oe.prototype.delete=Y,oe.prototype.get=ee,oe.prototype.has=ne,oe.prototype.set=re;const ae=oe;const ie=function(){this.size=0,this.__data__={hash:new ae,map:new(Q||f),string:new ae}};const le=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};const se=function(e,t){var n=e.__data__;return le(t)?n["string"==typeof t?"string":"hash"]:n.map};const ce=function(e){var t=se(this,e).delete(e);return this.size-=t?1:0,t};const ue=function(e){return se(this,e).get(e)};const de=function(e){return se(this,e).has(e)};const ve=function(e,t){var n=se(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function pe(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}pe.prototype.clear=ie,pe.prototype.delete=ce,pe.prototype.get=ue,pe.prototype.has=de,pe.prototype.set=ve;const fe=pe;const ge=function(e,t){var n=this.__data__;if(n instanceof f){var r=n.__data__;if(!Q||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new fe(r)}return n.set(e,t),this.size=n.size,this};function he(e){var t=this.__data__=new f(e);this.size=t.size}he.prototype.clear=g,he.prototype.delete=h,he.prototype.get=m,he.prototype.has=w,he.prototype.set=ge;const me=he;const we=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};const ye=function(e){return this.__data__.has(e)};function be(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new fe;++t<n;)this.add(e[t])}be.prototype.add=be.prototype.push=we,be.prototype.has=ye;const je=be;const _e=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};const xe=function(e,t){return e.has(t)};const Me=function(e,t,n,r,o,a){var i=1&n,l=e.length,s=t.length;if(l!=s&&!(i&&s>l))return!1;var c=a.get(e),u=a.get(t);if(c&&u)return c==t&&u==e;var d=-1,v=!0,p=2&n?new je:void 0;for(a.set(e,t),a.set(t,e);++d<l;){var f=e[d],g=t[d];if(r)var h=i?r(g,f,d,t,e,a):r(f,g,d,e,t,a);if(void 0!==h){if(h)continue;v=!1;break}if(p){if(!_e(t,(function(e,t){if(!xe(p,t)&&(f===e||o(f,e,n,r,a)))return p.push(t)}))){v=!1;break}}else if(f!==g&&!o(f,g,n,r,a)){v=!1;break}}return a.delete(e),a.delete(t),v};const Ve=j.Uint8Array;const Oe=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};const Le=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n};var Se=_?_.prototype:void 0,Re=Se?Se.valueOf:void 0;const Ce=function(e,t,n,r,a,i,l){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!i(new Ve(e),new Ve(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=Oe;case"[object Set]":var c=1&r;if(s||(s=Le),e.size!=t.size&&!c)return!1;var u=l.get(e);if(u)return u==t;r|=2,l.set(e,t);var d=Me(s(e),s(t),r,a,i,l);return l.delete(e),d;case"[object Symbol]":if(Re)return Re.call(e)==Re.call(t)}return!1};const Ee=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e};const Ie=Array.isArray;const ke=function(e,t,n){var r=t(e);return Ie(e)?r:Ee(r,n(e))};const Ne=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,a=[];++n<r;){var i=e[n];t(i,n,e)&&(a[o++]=i)}return a};const ze=function(){return[]};var Pe=Object.prototype.propertyIsEnumerable,Ae=Object.getOwnPropertySymbols;const Te=Ae?function(e){return null==e?[]:(e=Object(e),Ne(Ae(e),(function(t){return Pe.call(e,t)})))}:ze;const De=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};const Be=function(e){return null!=e&&"object"==typeof e};const Fe=function(e){return Be(e)&&"[object Arguments]"==E(e)};var Je=Object.prototype,Ue=Je.hasOwnProperty,We=Je.propertyIsEnumerable,$e=Fe(function(){return arguments}())?Fe:function(e){return Be(e)&&Ue.call(e,"callee")&&!We.call(e,"callee")};const He=$e;const Ge=function(){return!1};var qe="object"==typeof exports&&exports&&!exports.nodeType&&exports,Qe=qe&&"object"==typeof module&&module&&!module.nodeType&&module,Ke=Qe&&Qe.exports===qe?j.Buffer:void 0;const Xe=(Ke?Ke.isBuffer:void 0)||Ge;var Ye=/^(?:0|[1-9]\d*)$/;const Ze=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Ye.test(e))&&e>-1&&e%1==0&&e<t};const et=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var tt={};tt["[object Float32Array]"]=tt["[object Float64Array]"]=tt["[object Int8Array]"]=tt["[object Int16Array]"]=tt["[object Int32Array]"]=tt["[object Uint8Array]"]=tt["[object Uint8ClampedArray]"]=tt["[object Uint16Array]"]=tt["[object Uint32Array]"]=!0,tt["[object Arguments]"]=tt["[object Array]"]=tt["[object ArrayBuffer]"]=tt["[object Boolean]"]=tt["[object DataView]"]=tt["[object Date]"]=tt["[object Error]"]=tt["[object Function]"]=tt["[object Map]"]=tt["[object Number]"]=tt["[object Object]"]=tt["[object RegExp]"]=tt["[object Set]"]=tt["[object String]"]=tt["[object WeakMap]"]=!1;const nt=function(e){return Be(e)&&et(e.length)&&!!tt[E(e)]};const rt=function(e){return function(t){return e(t)}};var ot="object"==typeof exports&&exports&&!exports.nodeType&&exports,at=ot&&"object"==typeof module&&module&&!module.nodeType&&module,it=at&&at.exports===ot&&y.process,lt=function(){try{var e=at&&at.require&&at.require("util").types;return e||it&&it.binding&&it.binding("util")}catch(e){}}();var st=lt&&lt.isTypedArray;const ct=st?rt(st):nt;var ut=Object.prototype.hasOwnProperty;const dt=function(e,t){var n=Ie(e),r=!n&&He(e),o=!n&&!r&&Xe(e),a=!n&&!r&&!o&&ct(e),i=n||r||o||a,l=i?De(e.length,String):[],s=l.length;for(var c in e)!t&&!ut.call(e,c)||i&&("length"==c||o&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ze(c,s))||l.push(c);return l};var vt=Object.prototype;const pt=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||vt)};const ft=function(e,t){return function(n){return e(t(n))}}(Object.keys,Object);var gt=Object.prototype.hasOwnProperty;const ht=function(e){if(!pt(e))return ft(e);var t=[];for(var n in Object(e))gt.call(e,n)&&"constructor"!=n&&t.push(n);return t};const mt=function(e){return null!=e&&et(e.length)&&!k(e)};const wt=function(e){return mt(e)?dt(e):ht(e)};const yt=function(e){return ke(e,wt,Te)};var bt=Object.prototype.hasOwnProperty;const jt=function(e,t,n,r,o,a){var i=1&n,l=yt(e),s=l.length;if(s!=yt(t).length&&!i)return!1;for(var c=s;c--;){var u=l[c];if(!(i?u in t:bt.call(t,u)))return!1}var d=a.get(e),v=a.get(t);if(d&&v)return d==t&&v==e;var p=!0;a.set(e,t),a.set(t,e);for(var f=i;++c<s;){var g=e[u=l[c]],h=t[u];if(r)var m=i?r(h,g,u,t,e,a):r(g,h,u,e,t,a);if(!(void 0===m?g===h||o(g,h,n,r,a):m)){p=!1;break}f||(f="constructor"==u)}if(p&&!f){var w=e.constructor,y=t.constructor;w==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof w&&w instanceof w&&"function"==typeof y&&y instanceof y||(p=!1)}return a.delete(e),a.delete(t),p};const _t=q(j,"DataView");const xt=q(j,"Promise");const Mt=q(j,"Set");const Vt=q(j,"WeakMap");var Ot="[object Map]",Lt="[object Promise]",St="[object Set]",Rt="[object WeakMap]",Ct="[object DataView]",Et=D(_t),It=D(Q),kt=D(xt),Nt=D(Mt),zt=D(Vt),Pt=E;(_t&&Pt(new _t(new ArrayBuffer(1)))!=Ct||Q&&Pt(new Q)!=Ot||xt&&Pt(xt.resolve())!=Lt||Mt&&Pt(new Mt)!=St||Vt&&Pt(new Vt)!=Rt)&&(Pt=function(e){var t=E(e),n="[object Object]"==t?e.constructor:void 0,r=n?D(n):"";if(r)switch(r){case Et:return Ct;case It:return Ot;case kt:return Lt;case Nt:return St;case zt:return Rt}return t});const At=Pt;var Tt="[object Arguments]",Dt="[object Array]",Bt="[object Object]",Ft=Object.prototype.hasOwnProperty;const Jt=function(e,t,n,r,o,a){var i=Ie(e),l=Ie(t),s=i?Dt:At(e),c=l?Dt:At(t),u=(s=s==Tt?Bt:s)==Bt,d=(c=c==Tt?Bt:c)==Bt,v=s==c;if(v&&Xe(e)){if(!Xe(t))return!1;i=!0,u=!1}if(v&&!u)return a||(a=new me),i||ct(e)?Me(e,t,n,r,o,a):Ce(e,t,s,n,r,o,a);if(!(1&n)){var p=u&&Ft.call(e,"__wrapped__"),f=d&&Ft.call(t,"__wrapped__");if(p||f){var g=p?e.value():e,h=f?t.value():t;return a||(a=new me),o(g,h,n,r,a)}}return!!v&&(a||(a=new me),jt(e,t,n,r,o,a))};const Ut=function e(t,n,r,o,a){return t===n||(null==t||null==n||!Be(t)&&!Be(n)?t!=t&&n!=n:Jt(t,n,r,o,e,a))};const Wt=function(e,t){return Ut(e,t)};var $t=u(14321);const Ht={_widgetLabel:"Building Explorer",select3DScene:"Please select a 3D scene to active this widget",selectLayerToExplore:"Select a layer to explore",noBuildingLayers:"The map does not contain any building scene layers",noTool:"No available tools.",preConfigTool:"Please re-configure the tools to continue.",layersSelected:"{number} layers selected"},Gt=e.React.memo((t=>{const n=e.hooks.useTranslation(Ht,$t.defaultMessages),[r,o]=e.React.useState(!1),[a,i]=e.React.useState(t.defaultValue||null);e.React.useEffect((()=>{i(t.defaultValue)}),[t.defaultValue]);const l=e=>{i(e),o(!1),t.onOptionClick(e)};return(0,e.jsx)("div",{className:"single-mode-selector"},(0,e.jsx)($t.Dropdown,{isOpen:r,toggle:()=>{o(!r)},activeIcon:!0,direction:"down",size:"sm",fluid:!0},(0,e.jsx)($t.DropdownButton,{size:"sm",type:"default"},(()=>{var e;let r="";if(""===a)r=n("selectLayerToExplore");else{const n=t.allVisibleBuildingLayerViews.find((e=>e.id===a));r=null===(e=null==n?void 0:n.layer)||void 0===e?void 0:e.title}return r})()),(0,e.jsx)($t.DropdownMenu,{css:e.css`
      & {
        max-width: 536px;
        overflow: hidden;
      }
    `},(()=>{const r=[];if(t.allVisibleBuildingLayerViews&&t.allVisibleBuildingLayerViews.length>0){const t="";r.push((0,e.jsx)($t.DropdownItem,{key:t,header:!1,active:a===t,onClick:()=>{l(t)}},n("none")))}return t.allVisibleBuildingLayerViews.forEach(((t,n)=>{var o;r.push((0,e.jsx)($t.DropdownItem,{key:n,header:!1,active:a===t.id,onClick:()=>{l(t.id)}},(0,e.jsx)("div",{className:"text-truncate"},null===(o=t.layer)||void 0===o?void 0:o.title)))})),r})())))}));var qt,Qt=u(23321);function Kt(e){var t;const n=[];return null===(t=null==e?void 0:e.getAllJimuLayerViews())||void 0===t||t.forEach((e=>{"building-scene"===e.type&&n.push(e)})),n}function Xt(e,t){const n=Kt(t),r=new Qt.default;return null==n||n.forEach((t=>{(null==e?void 0:e.includes(t.id))&&r.push(t.layer)})),r}!function(e){e.Single="SINGLE"}(qt||(qt={}));const Yt=e.React.memo((n=>{var r,o,a,i,l,s,c;const[u,d]=e.React.useState(null!==(r=n.selectedLayerViewIdsState)&&void 0!==r?r:[]),v=e.React.useRef([]);v.current=u;const[p,f]=e.React.useState([]);e.React.useEffect((()=>{var e,t;f(Kt(n.jimuMapView));const r=e=>{f(Kt(n.jimuMapView))};null===(e=n.jimuMapView)||void 0===e||e.addJimuLayerViewCreatedListener(r);return null===(t=n.jimuMapView)||void 0===t||t.addJimuLayerViewRemovedListener((e=>{f(Kt(n.jimuMapView)),e.id===v.current[0]&&d([""])})),()=>{var e,t;null===(e=n.jimuMapView)||void 0===e||e.removeJimuLayerViewCreatedListener(r),null===(t=n.jimuMapView)||void 0===t||t.removeJimuLayerViewRemovedListener(r)}}),[n.jimuMapView]);const g=e.React.useRef(null),h=e.React.useCallback((e=>{var t;let n=!1;return null===g.current&&(n=!0,g.current=new Map),g.current.set(null===(t=null==m?void 0:m.current)||void 0===t?void 0:t.dataSourceId,e),n}),[]),m=e.React.useRef(null);m.current=n.jimuMapView;const w=e.React.useCallback((e=>{var r;const o=h(e);if(n.generalConfig.zoomToLayer&&!o){const n=Xt(e,null==m?void 0:m.current),o=null==n?void 0:n.toArray();o&&o.length>0&&t.zoomToUtils.zoomTo(null===(r=null==m?void 0:m.current)||void 0===r?void 0:r.view,o,{})}}),[n.generalConfig.zoomToLayer,h]),{onLayerSelectChanged:y}=n;e.React.useEffect((()=>{w(u),y(u)}),[u,w,y]),e.React.useEffect((()=>{var e;const t=null===(e=n.mapConfig)||void 0===e?void 0:e.layersOnLoad,r=function(e){return!e||(null==e?void 0:e.length)<=0||!(!e||1!==e.length||""!==e[0])}(t);let o=[];o=r?[]:t.asMutable(),d(o)}),[null===(o=n.mapConfig)||void 0===o?void 0:o.layerMode,null===(a=n.mapConfig)||void 0===a?void 0:a.layersOnLoad,null===(i=n.jimuMapView)||void 0===i?void 0:i.dataSourceId]),e.React.useEffect((()=>{var e,t;const r=null===(e=g.current)||void 0===e?void 0:e.get(null===(t=n.jimuMapView)||void 0===t?void 0:t.dataSourceId);r&&r&&d(r)}),[null===(l=n.jimuMapView)||void 0===l?void 0:l.dataSourceId]);const b=null!==(c=null===(s=n.mapConfig)||void 0===s?void 0:s.layerMode)&&void 0!==c?c:qt.Single;return(0,e.jsx)("div",{className:"layer-selector w-100 pt-2 px-2"},b===qt.Single&&(0,e.jsx)(Gt,{defaultValue:(()=>{var e,t,r;const o=(null===(e=n.mapConfig)||void 0===e?void 0:e.layersOnLoad)&&(null===(t=n.mapConfig)||void 0===t?void 0:t.layersOnLoad[0])||"";return null!==(r=n.selectedLayerViewIdsState&&n.selectedLayerViewIdsState[0])&&void 0!==r?r:o})(),allVisibleBuildingLayerViews:p,onOptionClick:e=>{Wt([e],u)&&w(u),d([e])}}))}));var Zt=u(83214),en=u(63990),tn=u(62243),nn=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))};const rn=e.lodash.debounce((function(t,n,r){if(n){const n=function(e){const t=new Map;for(const n of e.layers)for(const e of n.filters)for(const r of e.filterBlocks)"solid"===r.filterMode.type&&t.set(n.id,r.filterExpression);return t}(t);if(n.size<=0)return;Xt(r.selectedLayerViewIds,r.jimuMapView).forEach((t=>nn(this,void 0,void 0,(function*(){const o=n.get(t.id),a=r.jimuMapView.getJimuLayerViewByAPILayer(t),i=yield null==a?void 0:a.createLayerDataSource();(null==i?void 0:i.isDataSourceSet())&&(yield null==i?void 0:i.childDataSourcesReady()),function(t,n,r){const o=function(e){const t=e.length>1?e.map((e=>`(${e})`)).join(" and "):e[0];return{where:t?`${t}`:""}}(n.map((e=>null==e?void 0:e.where))),a=(null==t?void 0:t.isDataSourceSet())&&(null==t?void 0:t.getAllChildDataSources().filter((t=>t.type===e.AllDataSourceTypes.BuildingComponentSubLayer)));null==a||a.forEach(((e,t)=>{e.updateQueryParams(o,r)}))}(i,[{where:o}],r.widgetId)}))))}}),200);function on(e,t){let n="";return t===qt.Single?n=e[0]:t===qt.Multiple&&(n=qt.Multiple),n}function an(e,t,n,r){r.widgetStatesRef.current&&!n||(r.widgetStatesRef.current=null,r.widgetStatesRef.current=new Map);let o=function(e){var t;return null===(t=e.widgetStatesRef.current)||void 0===t?void 0:t.get(e.dsID)}(r);o||(o={layerMode:t,caches:new Map},r.widgetStatesRef.current.set(r.dsID,o));const a=on(e,t);let i;i=o.caches.has(a)?o.caches.get(a):{_initLevel:{enable:r.vm.level.enabled,value:r.vm.level.value,allowedValues:r.vm.level.allowedValues},_initPhase:{enable:r.vm.phase.enabled,value:r.vm.phase.value,allowedValues:r.vm.phase.allowedValues}},i=Object.assign(i,{level:{enable:r.vm.level.enabled,value:r.vm.level.value,allowedValues:r.vm.level.allowedValues},phase:{enable:r.vm.phase.enabled,value:r.vm.phase.value,allowedValues:r.vm.phase.allowedValues}}),o.caches.set(a,i)}function ln(e){var t;const n=null===(t=null==e?void 0:e.sublayers)||void 0===t?void 0:t.find((e=>"Overview"===e.modelName));return"building-component"===(null==n?void 0:n.type)?n:null}function sn(e){var t;const n=null===(t=null==e?void 0:e.sublayers)||void 0===t?void 0:t.find((e=>"FullModel"===e.modelName));return"building-group"===(null==n?void 0:n.type)?n:e}function cn(e,t,n){n&&!n.isDestroyed()&&(null==e||e.forEach((e=>{let n=!1;"fullModel"===t&&(n=!0);const r=sn(e),o=ln(e);r&&(r.visible=n),o&&(o.visible=!n)})))}var un;!function(e){e.Init="init",e.SwitchMap="switchMap",e.SettingChange="settingChange",e.LayersChange="layersChange",e.LevelChange="levelChange",e.LevelEnabledOn="levelEnabledOn",e.LevelEnabledOff="levelEnabledOff",e.PhaseChange="phaseChange"}(un||(un={}));const dn=t=>{const{onUpdated:n}=t,r=e.React.useRef(null),o=e.React.useRef(null);o.current=t;const a=e.React.useRef(null),i=()=>{var e;null===(e=r.current)||void 0===e||e.when((()=>{var e;!function(e){var t,n;const r=null===(t=e.widgetStatesRef.current)||void 0===t?void 0:t.get(e.dsID);r&&(null===(n=null==r?void 0:r.caches)||void 0===n||n.forEach(((e,t,n)=>{e.level=null,e.phase=null})))}({widgetStatesRef:a,dsID:null===(e=o.current.jimuMapView)||void 0===e?void 0:e.dataSourceId})}))},l=e.React.useCallback((()=>{var e;i(),null===(e=r.current)||void 0===e||e.when((()=>{var e,t;an(o.current.selectedLayerViewIds,(null===(e=o.current.mapConfig)||void 0===e?void 0:e.layerMode)||qt.Single,true,{widgetStatesRef:a,dsID:null===(t=o.current.jimuMapView)||void 0===t?void 0:t.dataSourceId,vm:r.current.viewModel})}))}),[]),s=e=>{var t,n;an(o.current.selectedLayerViewIds,(null===(t=o.current.mapConfig)||void 0===t?void 0:t.layerMode)||qt.Single,!1,{widgetStatesRef:a,dsID:null===(n=o.current.jimuMapView)||void 0===n?void 0:n.dataSourceId,vm:r.current.viewModel})},c=e.React.useCallback((()=>{const e=r.current.viewModel;rn(e,o.current.settingConfig.general.applyFilterOnDs,{selectedLayerViewIds:o.current.selectedLayerViewIds,jimuMapView:o.current.jimuMapView,widgetId:o.current.widgetId})}),[]),u=e=>{var t,n,r;return{visibleElements:{levels:null===(t=null==e?void 0:e.enableLevel)||void 0===t||t,phases:null===(n=null==e?void 0:e.enablePhase)||void 0===n||n,disciplines:null===(r=null==e?void 0:e.enableCtegories)||void 0===r||r}}},d=e.React.useCallback(((e,t)=>{const n=Xt(o.current.selectedLayerViewIds,o.current.jimuMapView);Wt(r.current.layers,n)||cn(r.current.layers,"overview",o.current.jimuMapView),r.current.layers=n,cn(n,"fullModel",o.current.jimuMapView),[un.SettingChange].includes(t)&&o.current.settingConfig.general.applyFilterOnDs&&c()}),[c]),v=e.React.useCallback(((e,t)=>{tn.default.whenOnce((()=>"ready"===e.state)).then((()=>{t!==un.Init&&null!==a.current||(l(),c()),tn.default.watch((()=>[e.level.state,e.level.value,e.level.enabled,e.level.allowedValues]),(([e,t,n,r])=>{"ready"===e&&(s(n?un.LevelEnabledOn:un.LevelEnabledOff),c())})),tn.default.watch((()=>[e.phase.state,e.phase.value,e.phase.allowedValues]),(([e,t,n])=>{"ready"===e&&(s(un.PhaseChange),c())}))}))}),[c,l]),p=e.React.useCallback(((e,t)=>{if(!o.current.jimuMapView)return;let a={container:e,view:o.current.jimuMapView.view,viewModel:null,layers:[]};const i={view:o.current.jimuMapView.view},l=o.current.mapConfig;o.current.mapConfig&&(a=Object.assign(a,u(l))),a.viewModel=new en.default(i),r.current=new Zt.default(a);const s=r.current.viewModel;return v(s,t),d(s,t),r.current.when((()=>{n&&n(),d(r.current.viewModel,un.Init)})),r.current}),[n,v,d]);e.React.useEffect((()=>{var e;null===(e=r.current)||void 0===e||e.when((()=>{d(r.current.viewModel,un.LayersChange)}))}),[t.selectedLayerViewIds,d]),e.React.useEffect((()=>{var e;null===(e=r.current)||void 0===e||e.when((()=>{r.current.visibleElements=u(o.current.mapConfig).visibleElements,d(r.current.viewModel,un.SettingChange)}))}),[t.settingConfig,d]);const f=e.React.useCallback((()=>{}),[]);return{buildingExplorerRef:r.current,updateBuildingExplorerWidget:p,destroyBuildingExplorerWidget:f,clearToInit:i}};var vn=u(28996),pn=u.n(vn),fn=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const gn=t=>{const n=window.SVG,{className:r}=t,o=fn(t,["className"]),a=(0,e.classNames)("jimu-icon jimu-icon-component",r);return n?e.React.createElement(n,Object.assign({className:a,src:pn()},o)):e.React.createElement("svg",Object.assign({className:a},o))};var hn=u(45508),mn=u.n(hn),wn=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const yn=t=>{const n=window.SVG,{className:r}=t,o=wn(t,["className"]),a=(0,e.classNames)("jimu-icon jimu-icon-component",r);return n?e.React.createElement(n,Object.assign({className:a,src:mn()},o)):e.React.createElement("svg",Object.assign({className:a},o))};var bn=u(75889),jn=u.n(bn),_n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const xn=t=>{const n=window.SVG,{className:r}=t,o=_n(t,["className"]),a=(0,e.classNames)("jimu-icon jimu-icon-component",r);return n?e.React.createElement(n,Object.assign({className:a,src:jn()},o)):e.React.createElement("svg",Object.assign({className:a},o))},Mn=e.React.memo((t=>{const n=e.hooks.useTranslation(Ht,$t.defaultMessages);return(0,e.jsx)("div",{className:"status-tips d-flex flex-column h-100 align-items-center justify-content-center"},(0,e.jsx)("div",{className:""},t.isNoSelectedLayersFlag&&!t.isNoBuildingLayersFlag&&(0,e.jsx)(xn,{size:40,color:"var(--light-700)"}),t.isNoBuildingLayersFlag&&(0,e.jsx)(gn,{size:40,color:"var(--warning-900)"}),t.isNoToolFlag&&(0,e.jsx)(yn,{size:32,color:"var(--info-500)"})),(0,e.jsx)("div",{className:"mt-2",style:{textAlign:"center"}},t.isNoBuildingLayersFlag&&n("noBuildingLayers"),t.isNoToolFlag&&(0,e.jsx)("div",{className:"d-flex flex-column h-100 align-items-center justify-content-center"},(0,e.jsx)("div",null,n("noTool")),(0,e.jsx)("div",null,n("preConfigTool")))))}));const Vn=e.React.memo((t=>{var r,o;(0,n.useTheme)();const a=e.React.useRef(null),i=e.React.useRef(null),l=t.config.mapSettings[null===(r=t.jimuMapView)||void 0===r?void 0:r.dataSourceId],[s,c]=e.React.useState([]),{updateBuildingExplorerWidget:u,destroyBuildingExplorerWidget:d,clearToInit:v}=dn({jimuMapView:t.jimuMapView,settingConfig:t.config,mapConfig:l,selectedLayerViewIds:s,widgetId:t.widgetId}),p=e.React.useRef();p.current=u;const f=e.React.useRef();function g(){const e=document.createElement("div");return e.className="widget-container w-100",a.current.innerHTML="",a.current.appendChild(e),e}f.current=v;const h=e.React.useCallback((()=>{var e,t,n;(null===(t=null===(e=i.current)||void 0===e?void 0:e.view)||void 0===t?void 0:t.map)&&d(),null===(n=null==i?void 0:i.current)||void 0===n||n.destroy(),i.current=null,(null==a?void 0:a.current)&&(a.current.innerHTML="")}),[d]);e.React.useEffect((()=>{h()}),[h]);const m=e.React.useRef(!1);e.React.useEffect((()=>{p.current(g(),un.SwitchMap),m.current=!0}),[null===(o=t.jimuMapView)||void 0===o?void 0:o.dataSourceId]),e.React.useEffect((()=>{m.current||(f.current(),p.current(g(),un.Init)),m.current=!1}),[null==l?void 0:l.layerMode,null==l?void 0:l.layersOnLoad]);const w=e.React.useCallback((()=>{const e=Kt(t.jimuMapView);return!(e&&e.length>0)}),[t.jimuMapView]),[y,b]=e.React.useState(!0);e.React.useEffect((()=>{var e,n;b(w());const r=e=>{const n=Kt(t.jimuMapView),r=!(n&&n.length>0);b(r)};null===(e=t.jimuMapView)||void 0===e||e.addJimuLayerViewCreatedListener(r);return null===(n=t.jimuMapView)||void 0===n||n.addJimuLayerViewRemovedListener((e=>{const n=Kt(t.jimuMapView),r=!(n&&n.length>0);b(r)})),()=>{var e,n;null===(e=t.jimuMapView)||void 0===e||e.removeJimuLayerViewCreatedListener(r),null===(n=t.jimuMapView)||void 0===n||n.removeJimuLayerViewRemovedListener(r)}}),[t.jimuMapView,w]);const j=0===(null==s?void 0:s.length)||""===s[0],_=!((null==l?void 0:l.enableLevel)||void 0===(null==l?void 0:l.enableLevel)||(null==l?void 0:l.enablePhase)||void 0===(null==l?void 0:l.enablePhase)||(null==l?void 0:l.enableCtegories)||void 0===(null==l?void 0:l.enableCtegories));return(0,e.jsx)("div",{className:"d-flex flex-column w-100 p-2 ",css:e.css`
    .status-tips {
      min-width: 200px;
      min-height: 200px;
    }

    .layer-selector {

      .single-mode-selector,
      .jimu-multi-select {
        .jimu-dropdown-button {
          padding-left: 6px;
          justify-content: flex-start;
        }

        .jimu-dropdown-button,
        .jimu-dropdown-button:hover {
          background-color: var(--sys-color-surface-paper);
          border: none;

          .placeholder,
          .dropdown-button-content {
            color: var(--ref-palette-neutral-1100); /* dark-800 */
          }
          .dropdown-button-content {
            flex: none;
            max-width: 100%;
          }
        }
      }

      .jimu-multi-select .dropdown >.dropdown-button {
        padding-left: 6px;
        padding-right: 6px;
      }
      .jimu-multi-select .dropdown >.dropdown-button:hover {
        border: none;
      }
    }

    .widget-container.esri-building-explorer {
      max-height: calc(100%);
    }
    .widget-container {
      overflow-y: hidden;
      background-color: var(--sys-color-surface-paper);

      .esri-building-level-picker,
      .esri-building-phase-picker {
        background-color: var(--sys-color-surface-paper);
      }

      .esri-building-level-picker-label__clear-button {
        /*background-color: var(--sys-color-surface-background);*/
      }
      .esri-icon-close:before {
        color: var(--ref-palette-neutral-1100);
      }

      .esri-building-level-picker__arrow-up,
      .esri-building-level-picker__arrow-down,
      .esri-building-phase-picker__arrow-left,
      .esri-building-phase-picker__arrow-right {
        color: var(--ref-palette-neutral-1100);
      }

      ..esri-building-level-picker-item--active .esri-building-level-picker-item__base .rect,
      .esri-building-phase-picker__phase.esri-building-phase-picker__phase--current {
        background-color: var(--Primary-Primary-500);
      }
    }
  `},(0,e.jsx)("div",{className:"w-100 "+(y?"d-none":"d-flex")},(0,e.jsx)(Yt,{generalConfig:t.config.general,mapConfig:l,jimuMapView:t.jimuMapView,selectedLayerViewIdsState:s,onLayerSelectChanged:c})),(j||y||_)&&(0,e.jsx)(Mn,{isNoSelectedLayersFlag:j,isNoBuildingLayersFlag:y,isNoToolFlag:_}),(0,e.jsx)("div",{className:j?"d-none":"d-flex ",ref:a}))}));var On=u(40280),Ln=u.n(On);const Sn=[{name:"preventOverflow",options:{altAxis:!0}}],Rn=e.React.memo((t=>{const r=e.hooks.useTranslation(Ht,$t.defaultMessages),o=((0,n.useTheme)(),r("select3DMapHint")),a=!0;return(0,e.jsx)(e.React.Fragment,null,(0,e.jsx)($t.Tooltip,{disableHoverListener:a,disableTouchListener:a,disableFocusListener:a,modifiers:Sn,showArrow:!0,title:(0,e.jsx)("div",{className:"p-2",style:{background:"var(--ref-palette-neutral-300)",border:"1px solid var(--ref-palette-neutral-700)"}},o),arrowStyle:{background:"var(--light-200)",border:{color:"var(--light-800)",width:"1px"}}},(0,e.jsx)("div",{className:(0,e.classNames)("h-100",{"hide-msg":!1}),css:e.css`
    &.hide-msg {
      .message-wrapper {
        display: none;
      }
    }

    .jimu-widget-placeholder {
      min-width: 200px;
      min-height: 200px;
    }
  `},(0,e.jsx)($t.WidgetPlaceholder,{widgetId:t.widgetId,icon:Ln(),title:o,message:o}))))}));var Cn=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{s(r.next(e))}catch(e){a(e)}}function l(e){try{s(r.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}))};const En=n=>{var r,o;const a=null===(r=n.useMapWidgetIds)||void 0===r?void 0:r[0],[i,l]=e.React.useState(null),s=e.React.useCallback((e=>Cn(void 0,void 0,void 0,(function*(){var t;"3d"===(null===(t=null==e?void 0:e.view)||void 0===t?void 0:t.type)?(yield e.whenJimuMapViewLoaded(),yield e.whenAllJimuLayerViewLoaded(),l(e)):l(null)}))),[]),c=!(a&&"3d"===(null===(o=null==i?void 0:i.view)||void 0===o?void 0:o.type)),u=i&&!c;return(0,e.jsx)("div",{className:"widget-building-explorer jimu-widget",css:e.css`
      background-color: var(--sys-color-surface-paper);
      overflow: auto;
    `},c&&(0,e.jsx)(Rn,{widgetId:n.id}),(0,e.jsx)("div",{className:u?"d-flex h-100 ":"d-none"},(0,e.jsx)(Vn,{widgetId:n.id,config:n.config,jimuMapView:i})),a&&(0,e.jsx)(t.JimuMapViewComponent,{useMapWidgetId:a,onActiveViewChange:s}))};function In(e){u.p=e}})(),d})())}}}));