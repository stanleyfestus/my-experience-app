System.register(["jimu-core","jimu-arcgis","jimu-ui","esri/widgets/Swipe","jimu-ui/basic/list-tree","jimu-theme","jimu-core/dnd","esri/widgets/Legend"],(function(e,t){var l={},n={},r={},i={},a={},o={},s={},c={};return{setters:[function(e){l.AppMode=e.AppMode,l.DataSourceManager=e.DataSourceManager,l.Immutable=e.Immutable,l.React=e.React,l.ReactRedux=e.ReactRedux,l.classNames=e.classNames,l.css=e.css,l.getAppStore=e.getAppStore,l.hooks=e.hooks,l.jsx=e.jsx,l.polished=e.polished},function(e){n.DataSourceTypes=e.DataSourceTypes,n.JimuMapViewComponent=e.JimuMapViewComponent,n.MapViewManager=e.MapViewManager},function(e){r.Alert=e.Alert,r.CollapsablePanel=e.CollapsablePanel,r.DistanceUnits=e.DistanceUnits,r.Icon=e.Icon,r.Switch=e.Switch,r.WidgetPlaceholder=e.WidgetPlaceholder,r.defaultMessages=e.defaultMessages},function(e){i.default=e.default},function(e){a.List=e.List},function(e){o.useTheme=e.useTheme},function(e){s.interact=e.interact},function(e){c.default=e.default}],execute:function(){e((()=>{var e={11466:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"><path fill="#000" d="M9 0v20h1V0zM0 3.5A1.5 1.5 0 0 1 1.5 2h5v1h-5a.5.5 0 0 0-.5.5v13a.5.5 0 0 0 .5.5h5v1h-5A1.5 1.5 0 0 1 0 16.5zM20 16.5a1.5 1.5 0 0 1-1.5 1.5h-6v-1h6a.5.5 0 0 0 .5-.5v-13a.5.5 0 0 0-.5-.5h-6V2h6A1.5 1.5 0 0 1 20 3.5z"></path><path fill="#000" d="m6.354 6.646.707.708L4.414 10l2.647 2.646-.707.708L3 10zM12 12.646l.707.707L16.061 10l-3.354-3.354-.707.708L14.646 10z"></path></svg>'},39524:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M7.5 1.5a.5.5 0 0 1 1 0v2.8a.5.5 0 0 1-1 0zm6.028.874a.5.5 0 0 1 .062.705l-1.414 1.685a.5.5 0 1 1-.766-.643l1.414-1.685a.5.5 0 0 1 .704-.062m-10.352.062a.5.5 0 1 0-.766.643l1.414 1.685a.5.5 0 0 0 .766-.643zM6.244 10.6H5.43zM.961 9.8h4.88c.211 0 .359.19.359.4q0 .207.045.4a1.8 1.8 0 0 0 3.51 0h.814a2.6 2.6 0 0 1-5.139 0H.8v3.6h14.4v-3.6H9.755q.045-.194.045-.4c0-.21.148-.4.358-.4h4.881l-2.267-3.4H3.228zm11.81-4.2a.8.8 0 0 1 .666.356l2.429 3.642a.8.8 0 0 1 .134.444V14.2a.8.8 0 0 1-.8.8H.8a.8.8 0 0 1-.8-.8v-4.158a.8.8 0 0 1 .134-.444l2.429-3.642a.8.8 0 0 1 .665-.356z" clip-rule="evenodd"></path></svg>'},26490:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M3.154 3.154a.527.527 0 0 1 .746 0l1.317 1.317A8.6 8.6 0 0 1 8 4c2.667 0 5.667 1.333 7 4-.696 1.393-1.847 2.422-3.168 3.087l1.014 1.013a.527.527 0 1 1-.746.746l-1.317-1.317A8.6 8.6 0 0 1 8 12c-2.667 0-5.667-1.333-7-4 .696-1.393 1.847-2.422 3.168-3.087L3.154 3.9a.527.527 0 0 1 0-.746m1.698 2.443C3.726 6.087 2.782 6.882 2 8c1.422 2.033 3.382 3 6 3a8.7 8.7 0 0 0 2.03-.225l-.675-.674A2.5 2.5 0 0 1 5.9 6.644zm6.296 4.805C12.275 9.913 13.218 9.119 14 8c-1.422-2.033-3.382-3-6-3q-1.088 0-2.03.225l.675.674a2.5 2.5 0 0 1 3.457 3.456zM6.5 8c0-.221.048-.431.134-.62l1.987 1.986A1.5 1.5 0 0 1 6.5 8m.88-1.366 1.986 1.987a1.5 1.5 0 0 0-1.987-1.987" clip-rule="evenodd"></path></svg>'},73529:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 12c-2.667 0-5.667-1.333-7-4 1.333-2.667 4.333-4 7-4s5.667 1.333 7 4c-1.333 2.667-4.333 4-7 4m0-7c-2.618 0-4.578.967-6 3 1.422 2.033 3.382 3 6 3s4.578-.967 6-3c-1.422-2.033-3.382-3-6-3m0 5.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5m0-1a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3" clip-rule="evenodd"></path></svg>'},39420:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M14 8A6 6 0 1 1 2 8a6 6 0 0 1 12 0m1 0A7 7 0 1 1 1 8a7 7 0 0 1 14 0M5.354 6.646l-.708.708L8 10.707l3.354-3.353-.707-.708L8 9.293z" clip-rule="evenodd"></path></svg>'},3485:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m10.646 10.06.707-.707L8 6 4.646 9.353l.708.707L8 7.414z"></path><path fill="#000" fill-rule="evenodd" d="M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0m-1 0A6 6 0 1 1 2 8a6 6 0 0 1 12 0" clip-rule="evenodd"></path></svg>'},28996:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0" clip-rule="evenodd"></path></svg>'},27416:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#000" fill-rule="nonzero" d="m6 11.943 4 1.711V4.057L6 2.346zm-1 .17V2.494l-4 1.48v9.619zm6 1.393 4-1.48V2.407l-4 1.48zM0 15V3.307L5.75 1.18l4.528 1.937L16 1v11.693l-5.75 2.127-4.528-1.937z"></path></svg>'},95930:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="#000" fill-rule="nonzero" d="M7.5 4V1.39Q5.854 2.484 4.985 4zm0 3.5V5H4.512a8.1 8.1 0 0 0-.5 2.5zm0 3.5V8.5H4.012a8.1 8.1 0 0 0 .5 2.5zm0 3.61V12H4.985q.869 1.515 2.515 2.61m2.543.087A7 7 0 0 0 13.745 12h-1.6a8.3 8.3 0 0 1-2.102 2.697M11.015 12H8.5v2.61q1.646-1.095 2.515-2.61m1.974-3.5a9.3 9.3 0 0 1-.441 2.5h1.778c.365-.767.594-1.61.656-2.5zm-1.001 0H8.5V11h2.988a8.1 8.1 0 0 0 .5-2.5m.56-3.5q.381 1.163.441 2.5h1.993a7 7 0 0 0-.656-2.5zm-1.06 0H8.5v2.5h3.488a8.1 8.1 0 0 0-.5-2.5m-1.445-3.697Q11.408 2.473 12.145 4h1.6a7 7 0 0 0-3.702-2.697M8.5 4h2.515Q10.146 2.485 8.5 1.39zm-.527 12a8 8 0 1 1 .055-16 8 8 0 0 1-.055 16M5.957 1.302A7 7 0 0 0 2.255 4h1.6a8.3 8.3 0 0 1 2.102-2.697M3.011 7.5q.06-1.337.441-2.5H1.674a7 7 0 0 0-.656 2.5zm.441 3.5a9.3 9.3 0 0 1-.441-2.5H1.018c.062.89.291 1.733.656 2.5zm2.505 3.697A8.3 8.3 0 0 1 3.855 12h-1.6a7 7 0 0 0 3.702 2.697"></path></svg>'},44828:e=>{"use strict";e.exports=c},11221:e=>{"use strict";e.exports=i},62686:e=>{"use strict";e.exports=n},79244:e=>{"use strict";e.exports=l},26245:e=>{"use strict";e.exports=s},1888:e=>{"use strict";e.exports=o},14321:e=>{"use strict";e.exports=r},98640:e=>{"use strict";e.exports=a}},t={};function u(l){var n=t[l];if(void 0!==n)return n.exports;var r=t[l]={exports:{}};return e[l](r,r.exports,u),r.exports}u.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return u.d(t,{a:t}),t},u.d=(e,t)=>{for(var l in t)u.o(t,l)&&!u.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.p="";var d={};return u.p=window.jimuConfig.baseUrl,(()=>{"use strict";u.r(d),u.d(d,{__set_webpack_public_path__:()=>Ve,default:()=>Ie});var e=u(79244),t=u(62686),l=u(14321);const n={_widgetLabel:"Swipe",leadingLayers:"Leading layers",trailingLayers:"Trailing layers",webSceneNotSupported:"Web scenes are not supported.",noConfiguredLayerText:"There is currently no configured layer.",noValidLayerText:"There is no valid layer.",mapOccupiedMsg:"Another active Swipe that connects to the targeted Map has been toggled off.",runtimeLayers:"Runtime layers",dragToCompare:"Drag to compare",currentDisplay:"is currently being displayed"};var r,i,a=u(11466),o=u.n(a);!function(e){e.SimpleHorizontal="SIMPLE_HORIZONTAL",e.SimpleVertical="SIMPLE_VERTICAL",e.AdvancedHorizontal="ADVANCED_HORIZONTAL",e.AdvancedVertical="ADVANCED_VERTICAL"}(r||(r={})),function(e){e.SwipeBetweenLayers="SWIPE_BETWEEN_LAYERS_OF_ONE_MAP",e.SwipeBetweenMaps="SWIPE_BETWEEN_WEBMAPS_OR_WEBSCENES"}(i||(i={}));var s=u(11221),c=function(e,t,l,n){return new(l||(l=Promise))((function(r,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function o(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof l?t:new l((function(e){e(t)}))).then(a,o)}s((n=n.apply(e,t||[])).next())}))};const{useEffect:p,useRef:v}=e.React;function m(t){var l,n;const{widgetId:i,activeMapView:a,leadingLayersId:o,trailingLayersId:u,swipeStyle:d,sliderPosition:m,dividerColor:y,handlerColor:g,isDesignMode:h}=t,w=null===(n=null===(l=(0,e.getAppStore)().getState())||void 0===l?void 0:l.appContext)||void 0===n?void 0:n.isRTL,f=null==a?void 0:a.mapWidgetId,x=v(null),b=d===r.SimpleHorizontal&&w,L=v(b?100-m.distance:m.distance),S=v(document.querySelector(`div[data-widgetid=${f}]`)),M=v(!1);p((()=>{L.current=b?100-m.distance:m.distance}),[b,m]),p((()=>{var e;const t=null===(e=S.current)||void 0===e?void 0:e.querySelector(".esri-swipe");t&&(t.style.pointerEvents=h?null:"none")}),[h,S]);const I=(e,t)=>c(this,void 0,void 0,(function*(){return yield e.whenJimuLayerViewLoaded(t)}));return p((()=>()=>{M.current=!0}),[]),p((()=>{function e(){var e;x.current&&(x.current.position=0,x.current.leadingLayers.removeAll(),x.current.trailingLayers.removeAll(),null===(e=null==a?void 0:a.view)||void 0===e||e.ui.remove(x.current))}return(null==a?void 0:a.view)&&function(){var t,l;const n=null===(t=null==o?void 0:o.asMutable())||void 0===t?void 0:t.map((e=>I(a,e))),c=null===(l=null==u?void 0:u.asMutable())||void 0===l?void 0:l.map((e=>I(a,e))),p=d===r.SimpleVertical?"vertical":"horizontal";n&&c&&Promise.all(n.concat(c)).then((t=>{if(M.current)return;const l=null==o?void 0:o.asMutable().map((e=>t.filter((t=>t.id===e))[0].layer)),n=null==u?void 0:u.asMutable().map((e=>t.filter((t=>t.id===e))[0].layer));e(),x.current=new s.default({id:i,leadingLayers:l,trailingLayers:n,view:null==a?void 0:a.view,direction:p,position:L.current}),null==a||a.view.ui.add(x.current),x.current.watch("position",(()=>{x.current.position&&(L.current=x.current.position)})),x.current.when((()=>{if(M.current)return void e();S.current.querySelector(".esri-swipe__divider").style.backgroundColor=y;const t=S.current.querySelector(".esri-swipe__handle");t&&(t.style.backgroundColor=g)}))}))}(),()=>{e()}}),[i,a,m,o,u,d,y,g]),null}var y=u(98640),g=u(73529),h=u.n(g),w=u(26490),f=u.n(w);const x=t=>{const{layerList:n,onChange:r,isAllowDeactivateLayers:i,toggleLayerVisibility:a,highlightIndex:o}=t,s=e.hooks.useTranslation(l.defaultMessages),c=e.ReactRedux.useSelector((t=>t.appRuntimeInfo.appMode===e.AppMode.Express)),u=e.React.useCallback((e=>[{label:s("visibility"),iconProps:{icon:(null==e?void 0:e.visible)?h():f(),size:16},action:()=>{var l;null===(l=null==t?void 0:t.onToggleLayerVisibility)||void 0===l||l.call(t,e.layerId)}}]),[t,s]),[d,p]=e.React.useState((()=>{const e=c?null==n?void 0:n.filter((e=>e.visible)):n;return null==e?void 0:e.map((e=>({itemKey:e.layerId,itemStateTitle:e.title,itemStateChecked:!!i&&e.selected,isCheckboxDisabled:!e.visible,itemStateCommands:a?u(e):[]})))}));e.React.useEffect((()=>{const e=c?null==n?void 0:n.filter((e=>e.visible)):n,t=null==e?void 0:e.map((e=>({itemKey:e.layerId,itemStateTitle:e.title,itemStateChecked:!!i&&e.selected,isCheckboxDisabled:!e.visible,itemStateCommands:a?u(e):[]})));p(t)}),[u,i,c,n,a]);return(0,e.jsx)("div",{className:"layer-list",css:b(o)},(0,e.jsx)(y.List,{size:"default",className:"w-100",itemsJson:d,isMultiSelection:i,dndEnabled:!1,disableDoubleClickTitle:!0,onUpdateItem:(e,t)=>{if(!i)return;const[l,n]=e.itemJsons;p([...n]),r(l.itemKey)}}))};function b(t){return e.css`
    .jimu-tree-item_template-card .jimu-tree-item__body:hover {
      background-color: transparent !important;
    }
    .jimu-tree-main {
      .jimu-tree-item:nth-of-type(${t}) {
        .jimu-tree-item__body {
          border-left: .125rem solid var(--sys-color-primary-main) !important;
        }
      }
    }
  `}var L=u(39524),S=u.n(L),M=function(e,t){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(l[n[r]]=e[n[r]])}return l};const I=t=>{const l=window.SVG,{className:n}=t,r=M(t,["className"]),i=(0,e.classNames)("jimu-icon jimu-icon-component",n);return l?e.React.createElement(l,Object.assign({className:i,src:S()},r)):e.React.createElement("svg",Object.assign({className:i},r))},V=t=>{const{swipeLayerMode:l}=t,r=e.hooks.useTranslation(n);return(0,e.jsx)("div",{css:C,className:"no-layer-placeholder w-100"},(0,e.jsx)("div",{className:"no-layer-placeholder-icon"},(0,e.jsx)(I,{size:32,color:"var(--dark-500)"})),(0,e.jsx)("div",{className:"no-layer-placeholder-text"},(0,e.jsx)("span",null,r(l?"noConfiguredLayerText":"noValidLayerText"))))},C=e.css`
.no-layer-placeholder-text, .no-layer-placeholder-icon{
  display: table;
  margin: 0 auto;
}
.no-layer-placeholder-text {
  color: var(--ref-palette-neutral-1000);
  font-size: 13px;
  margin-top: 16px;
  text-align: center;
}
.no-layer-placeholder-icon {
  color: var(--ref-palette-neutral-1100);
}
`;var j=u(3485),A=u.n(j),E=u(39420),O=u.n(E),R=function(e,t,l,n){return new(l||(l=Promise))((function(r,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function o(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof l?t:new l((function(e){e(t)}))).then(a,o)}s((n=n.apply(e,t||[])).next())}))};const{useState:P,useEffect:k,useRef:N}=e.React;function T(t){var r,i,a,o;const{swipeMapViewList:s,activeMapView:c,isAllowDeactivateLayers:u,toggleLayerVisibility:d,handlePanelSelectedLeadingLayers:p,handlePanelSelectedTrailingLayers:v,runtimeAddedLayers:m,handleRuntimePanelSelectedLeadingLayers:y,handleRuntimePanelSelectedTrailingLayers:g}=t,[h,w]=P(!1),[f,b]=P(!1),[L,S]=P(!1),[M,I]=P(!1),C=e.React.useRef([]),j=e.React.useRef([]),E=e.React.useRef([]),T=e.React.useRef([]),z=e.hooks.useTranslation(n),[q,$]=P(null),[_,F]=P(null),[H,J]=P([]),[B,W]=P([]),U=N(q),G=N(_),Y=N(H),X=N(B),[K,Q]=P((null===(r=null==s?void 0:s[null==c?void 0:c.id])||void 0===r?void 0:r.leadingLayersId)||(0,e.Immutable)([])),[Z,ee]=P((null===(i=null==s?void 0:s[null==c?void 0:c.id])||void 0===i?void 0:i.trailingLayersId)||(0,e.Immutable)([])),[te,le]=P((0,e.Immutable)([])),[ne,re]=P((0,e.Immutable)([])),ie=(e,t)=>R(this,void 0,void 0,(function*(){return yield e.whenJimuLayerViewLoaded(t)})),ae=e.hooks.useEventCallback(((t,l,n,r)=>{var i,a,o;const d=t?"leadingLayersId":"trailingLayersId",p=null===(o=null===(a=null===(i=null==s?void 0:s[null==c?void 0:c.id])||void 0===i?void 0:i[d])||void 0===a?void 0:a.asMutable())||void 0===o?void 0:o.map((e=>ie(c,e)));p&&Promise.all(p).then((t=>{const i=t.map((e=>({layerId:e.id,title:e.layer.title,selected:!0,visible:e.layer.visible,allowOperation:u})));l(i),n.current=i;const a=[];null==i||i.forEach((e=>{e.selected&&a.push(e.layerId)})),r((0,e.Immutable)(a))}))}));k((()=>{ae(!0,$,U,p),ae(!1,F,G,v)}),[s,c,u,p,v,ae]),k((()=>{const t=null==m?void 0:m.asMutable({deep:!0}).map((e=>{const t=c.jimuLayerViews[e];return{layerId:e,title:t.layer.title,selected:!1,visible:t.layer.visible,allowOperation:!0}}));J(t),Y.current=t,W(t),X.current=t;const l=[];null==t||t.forEach((e=>{e.selected&&l.push(e.layerId)})),y((0,e.Immutable)(l)),g((0,e.Immutable)(l))}),[c,y,g,m]);const oe=e.hooks.useEventCallback(((t,l,n,r)=>{var i,a,o;const u=t?"leadingLayersId":"trailingLayersId",d=null===(o=null===(a=null===(i=null==s?void 0:s[null==c?void 0:c.id])||void 0===i?void 0:i[u])||void 0===a?void 0:a.asMutable())||void 0===o?void 0:o.map((e=>ie(c,e)));d&&Promise.all(d).then((t=>{t.forEach((t=>{const i=[];i.push(t.layer.watch("visible",(()=>{const r=t.layer.visible,i=JSON.parse(JSON.stringify(l.current));i.forEach((e=>{e.layerId===t.id&&(e.visible=r)})),n((0,e.Immutable)(i)),l.current=(0,e.Immutable)(i)}))),r.current=i}))}))}));k((()=>{const e=C.current,t=j.current;return oe(!0,U,$,C),oe(!1,G,F,j),()=>{e.forEach((e=>{e.remove()})),t.forEach((e=>{e.remove()}))}}),[s,c,oe]);const se=e.hooks.useEventCallback(((t,l,n,r)=>{(t?H:B).forEach((t=>{const i=c.jimuLayerViews[t.layerId],a=[];a.push(i.layer.watch("visible",(()=>{const t=i.layer.visible,r=JSON.parse(JSON.stringify(l.current));r.forEach((e=>{e.layerId===i.id&&(e.visible=t)})),n((0,e.Immutable)(r)),l.current=(0,e.Immutable)(r)}))),r.current=a}))}));k((()=>{const e=E.current,t=T.current;return se(!0,Y,J,E),se(!1,X,W,T),()=>{e.forEach((e=>{e.remove()})),t.forEach((e=>{e.remove()}))}}),[c,H,B,se]),k((()=>{p(K)}),[p,K]),k((()=>{v(Z)}),[v,Z]),k((()=>{y(te)}),[y,te]),k((()=>{g(ne)}),[g,ne]);const ce=()=>{w(!h)},ue=()=>{b(!f)},de=()=>{S(!L)},pe=()=>{I(!M)},ve=(t,l,n,r,i)=>{const a=JSON.parse(JSON.stringify(t));a.forEach((e=>{e.layerId===i&&(e.selected=!e.selected)})),l((0,e.Immutable)(a)),r.current=a;const o=[];a.forEach((e=>{e.selected&&o.push(e.layerId)})),n((0,e.Immutable)(o))},me=e.React.useCallback((e=>R(this,void 0,void 0,(function*(){const t=yield ie(c,e);t.layer.visible=!t.layer.visible}))),[c]),ye=(null===(a=null==s?void 0:s[null==c?void 0:c.id])||void 0===a?void 0:a.leadingLayersId.length)>0,ge=(null===(o=null==s?void 0:s[null==c?void 0:c.id])||void 0===o?void 0:o.trailingLayersId.length)>0;return(0,e.jsx)("div",{css:D},(0,e.jsx)(l.CollapsablePanel,{className:"swipe-collapse",label:z("leadingLayers"),isOpen:h,"aria-label":ye?z("leadingLayers"):z("leadingLayers")+":"+z("noConfiguredLayerText"),onRequestOpen:ce,onRequestClose:ce},ye?(0,e.jsx)(x,{layerList:q,onChange:e=>{ve(q,$,Q,U,e)},isAllowDeactivateLayers:u,toggleLayerVisibility:d,onToggleLayerVisibility:me}):(0,e.jsx)(V,{swipeLayerMode:!0}),(null==H?void 0:H.length)>0&&(0,e.jsx)(l.CollapsablePanel,{className:"swipe-collapse runtime-layer-collapse",label:z("runtimeLayers"),isOpen:f,"aria-label":z("runtimeLayers"),onRequestOpen:ue,onRequestClose:ue,rightIcon:O(),rightActiveIcon:A()},(0,e.jsx)(x,{layerList:H,isAllowDeactivateLayers:!0,onChange:e=>{ve(H,J,le,Y,e)},toggleLayerVisibility:!0,onToggleLayerVisibility:me}))),(0,e.jsx)(l.CollapsablePanel,{className:"swipe-collapse",label:z("trailingLayers"),isOpen:M,"aria-label":ge?z("trailingLayers"):z("trailingLayers")+":"+z("noConfiguredLayerText"),onRequestOpen:pe,onRequestClose:pe},ge?(0,e.jsx)(x,{layerList:_,onChange:e=>{ve(_,F,ee,G,e)},isAllowDeactivateLayers:u,toggleLayerVisibility:d,onToggleLayerVisibility:me}):(0,e.jsx)(V,{swipeLayerMode:!0}),(null==B?void 0:B.length)>0&&(0,e.jsx)(l.CollapsablePanel,{className:"swipe-collapse runtime-layer-collapse",label:z("runtimeLayers"),isOpen:L,"aria-label":z("runtimeLayers"),onRequestOpen:de,onRequestClose:de,rightIcon:O(),rightActiveIcon:A()},(0,e.jsx)(x,{layerList:B,isAllowDeactivateLayers:!0,onChange:e=>{ve(B,W,re,X,e)},toggleLayerVisibility:!0,onToggleLayerVisibility:me}))))}const D=e.css`
.swipe-collapse {
  margin-top: 16px;
  .title {
    font-weight: 600;
  }
}
.runtime-layer-collapse {
  .title {
    font-size: 13px;
    font-weight: 500;
  }
}
.layer-list {
  margin-top: 12px;
  margin-bottom: 16px;
}
.no-layer-placeholder {
  margin-top: 16px;
  margin-bottom: 16px;
}
`;var z=u(1888),q=u(26245);const $=(e,t)=>{if((null==e?void 0:e.length)!==(null==t?void 0:t.length))return!1;const l=[...e].sort(),n=[...t].sort();for(let e=0;e<l.length;e++)if(l[e]!==n[e])return!1;return!0},_=l=>{var n;return(null===(n=e.DataSourceManager.getInstance().getDataSource(l))||void 0===n?void 0:n.type)===t.DataSourceTypes.WebMap},F=t=>{if(!t)return"";const l=e.DataSourceManager.getInstance().getDataSource(t);return(null==l?void 0:l.getLabel())||(null==l?void 0:l.getDataSourceJson().sourceLabel)||t};var H=function(e,t,l,n){return new(l||(l=Promise))((function(r,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function o(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof l?t:new l((function(e){e(t)}))).then(a,o)}s((n=n.apply(e,t||[])).next())}))};const{useRef:J,useEffect:B,useState:W}=e.React;function U(t){var i,a,o,s,c,u;const{activeMapView:d,inactiveMapView:p,jimuMapViewGroup:v,widgetId:m,swipeMode:y,swipeStyle:g,sliderPosition:h,mapUseDataSourcesOrderList:w,mapUseDataSources:f,dividerColor:x,handlerColor:b,isDesignMode:L}=t,S=null===(a=null===(i=(0,e.getAppStore)().getState())||void 0===i?void 0:i.appContext)||void 0===a?void 0:a.isRTL,M=d.mapWidgetId,I=J(null===(o=d.view)||void 0===o?void 0:o.width),V=J(null===(s=d.view)||void 0===s?void 0:s.height),C=`jimu-widget-swipe-${m}-handle-container`,j=$(f,w)?w:f,A=J((null==j?void 0:j[0])===(null==d?void 0:d.dataSourceId)),E=J(!1),O=J(!1),R=J(!1),P=J(!1),k={x:0,y:0},N=J(document.querySelector(`div[data-widgetid=${M}] .multi-map-container`)),T=J(null===(c=N.current)||void 0===c?void 0:c.querySelector(".multisourcemap-item-appear-noanimate")),D=J(null===(u=N.current)||void 0===u?void 0:u.querySelector(".multisourcemap-item-disappear-noanimate"));if(g===r.SimpleVertical)k.y=V.current*h.distance*.01;else{const e=S?100-h.distance:h.distance;k.x=I.current*e*.01}const[_,F]=W(k),U=J(),G=J(),Y=J(d.isClickOpenPopupEnabled()),X=J(d.isClickHighlightEnabled()),K=J(p.isClickOpenPopupEnabled()),Q=J(p.isClickHighlightEnabled()),Z=e.hooks.useTranslation(n,l.defaultMessages),ee=(0,z.useTheme)();B((()=>{d.isCached()||(N.current.style.pointerEvents=L?"none":null)}),[L]),B((()=>()=>{N.current&&(N.current.style.pointerEvents=null)}),[]),e.hooks.useUpdateEffect((()=>{A.current=!A.current}),[d]),B((()=>{if(!d.isCached())return T.current=N.current.querySelector(".multisourcemap-item-appear-noanimate"),D.current=N.current.querySelector(".multisourcemap-item-disappear-noanimate"),O.current=!1,E.current=!1,te(),le(),ne(),re(),ae(),ce(),v.hideMapTools(),()=>{oe()}}),[d]),B((()=>{const e=d.view.on("resize",(e=>{I.current=e.width,V.current=e.height,oe(),ne(),re(),ae(),ce(),v.hideMapTools()}));return()=>{e.remove()}}),[d]),B((()=>{const e=()=>{E.current=!1},t=()=>{N.current=document.querySelector(`div[data-widgetid=${M}] .multi-map-container`),T.current=N.current.querySelector(".multisourcemap-item-appear-noanimate"),D.current=N.current.querySelector(".multisourcemap-item-disappear-noanimate"),ne(),re(),ae(),ce(),v.hideMapTools(),le()};return d.addCacheListener(e),d.addRestoreListener(t),()=>{d.removeCacheListener(e),d.removeRestoreListener(t),oe()}}),[d]),B((()=>{if(d.isCached())return;G.current.style.backgroundColor=x;G.current.querySelector(".handler").style.backgroundColor=b}),[d,x,b]),B((()=>{F(k)}),[y]),e.hooks.useUpdateEffect((()=>{d.isCached()||(A.current=!A.current,re(_))}),[j]),B((()=>{if(d.isCached())return;const e={x:0,y:0},t=document.querySelector(`.jimu-widget-swipe-${m}-handle-container`);if(g===r.SimpleVertical)e.y=V.current*h.distance*.01,t.style.transform=`translateY(${e.y}px)`;else{const l=S?100-h.distance:h.distance;e.x=I.current*l*.01;const n=S?-(I.current-e.x):e.x;t.style.transform=`translateX(${n}px)`}re(e),F(e),v.hideMapTools()}),[h,m,g,S]);const te=()=>{d.view.popupEnabled&&d.view.closePopup(),p.view.popupEnabled&&p.view.closePopup()},le=()=>{d.disableClickOpenPopup(),d.disableClickHighlight(),p.disableClickOpenPopup(),p.disableClickHighlight()},ne=()=>{(D.current||T.current)&&D.current&&(D.current.style.opacity="1")},re=e=>{const t=e||_;let l=null,n=null;if(g===r.SimpleVertical){l=`inset(0px 0px ${V.current-t.y}px 0px)`,n=`inset(${t.y}px 0px 0px 0px)`}else if(g===r.SimpleHorizontal){l=`inset(0px ${I.current-t.x}px 0px 0px)`,n=`inset(0px 0px 0px ${t.x}px)`}const i=A.current?T.current:D.current,a=A.current?D.current:T.current;i&&(i.style.clipPath=l),a&&(a.style.clipPath=n)},ie=e=>{const t=e.key,l=e.shiftKey?5:.5,n=g===r.SimpleVertical,i=n?"ArrowDown"===t||"ArrowRight"===t:"ArrowUp"===t||"ArrowRight"===t,a=n?"ArrowUp"===t||"ArrowLeft"===t:"ArrowDown"===t||"ArrowLeft"===t;if((i||a)&&(i?(_.x=_.x+l*I.current*.01,_.y=_.y+l*V.current*.01):a&&(_.x=_.x-l*I.current*.01,_.y=_.y-l*V.current*.01),_.x||_.y)){_.x=_.x>I.current?I.current:_.x>0?_.x:0,_.y=_.y>V.current?V.current:_.y>0?_.y:0,F(_),re(_),e.target.style.transform=n?`translateY(${_.y}px)`:`translateX(${_.x}px)`;const t=n?_.y/V.current*100:_.x/I.current*100;e.target.attributes["aria-valuenow"].value=t.toFixed(4).toString(),e.target.attributes["aria-valuetext"].value=t.toFixed(4)+"%"}},ae=()=>{var e;if(document.getElementsByClassName(C)[0])return!1;(()=>{G.current=document.createElement("div"),G.current.className=C,G.current.setAttribute("style","\n  position: absolute;\n  border: 1px solid rgba(110,110,110,.5);\n"),G.current.style.backgroundColor=x,G.current.style.zIndex="1";const e={ariaLabel:Z("dragToCompare"),title:Z("dragToCompare"),role:"slider",tabIndex:0,onkeydown:ie,ariaValueMax:"100",ariaValueMin:"0"};for(const t in e)G.current[t]=e[t];const t=document.createElement("div");if(t.setAttribute("style","\n  width: 32px;\n  height: 32px;\n  border: 1px solid rgba(110,110,110,.5);\n  borderRadius: 2px;\n  position: absolute;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"),t.style.backgroundColor=b,g===r.SimpleVertical){G.current.style.top="-2px",G.current.style.transform=`translateY(${_.y}px)`,G.current.style.width=`${I.current}px`,G.current.style.height="4px",G.current.ariaOrientation=Z("vertical");const e=_.y/V.current*100;G.current.ariaValueNow=e.toFixed(4).toString(),G.current.ariaValueText=e.toFixed(4)+"%",t.className="handler esri-swipe__handle-icon esri-icon-drag-horizontal",t.style.top="-15px",t.style.left="50%",t.style.marginLeft="-16px",t.style.cursor="row-resize"}else{G.current.style.left="-2px";const e=S?-(I.current-_.x):_.x;G.current.style.transform=`translateX(${e}px)`,G.current.style.height=`${V.current}px`,G.current.style.width="4px",G.current.ariaOrientation=Z("horizontal");const l=_.x/I.current*100;G.current.ariaValueNow=l.toFixed(4).toString(),G.current.ariaValueText=l.toFixed(4)+"%",t.className="handler esri-swipe__handle-icon esri-icon-drag-vertical",t.style.left="-15px",t.style.top="50%",t.style.marginTop="-16px",t.style.cursor="col-resize"}G.current.appendChild(t),G.current.onfocus=function(){G.current.style.outline=`2px solid ${ee.sys.color.primary.dark}`,t.style.outline=`2px solid ${ee.sys.color.primary.dark}`},G.current.onblur=function(){G.current.style.outline="unset",t.style.outline="unset"}})(),null===(e=N.current)||void 0===e||e.appendChild(G.current),U.current=(e=>{var t,l;return e&&g===r.SimpleVertical?null===(t=(0,q.interact)(e))||void 0===t?void 0:t.draggable({startAxis:"y",lockAxis:"y",listeners:{move(e){_.y+=e.dy,_.y=_.y>V.current?V.current:_.y>0?_.y:0,F(_),re(_),e.target.style.transform=`translateY(${_.y}px)`;const t=_.y/V.current*100;G.current.ariaValueNow=t.toFixed(4).toString(),G.current.ariaValueText=t.toFixed(4)+"%"}}}):e&&g===r.SimpleHorizontal?null===(l=(0,q.interact)(e))||void 0===l?void 0:l.draggable({startAxis:"x",lockAxis:"x",listeners:{move(e){_.x+=e.dx,_.x=_.x>I.current?I.current:_.x>0?_.x:0,F(_),re(_);const t=S?-(I.current-_.x):_.x;e.target.style.transform=`translateX(${t}px)`;const l=_.x/I.current*100;G.current.ariaValueNow=l.toFixed(4).toString(),G.current.ariaValueText=l.toFixed(4)+"%"}}}):void 0})(G.current)},oe=()=>{E.current=!1;document.getElementsByClassName(C)[0]&&N.current&&G.current&&N.current.removeChild(G.current),U.current&&U.current.unset(),v.showMapTools(),(D.current||T.current)&&(D.current&&(D.current.style.opacity=null),T.current&&(T.current.style.clipPath=null),D.current&&(D.current.style.clipPath=null),T.current&&(T.current.style.opacity=null)),N.current.removeEventListener("mousedown",ue),N.current.removeEventListener("click",de),N.current.removeEventListener("wheel",de),d.isDestroyed()||(Y.current?d.enableClickOpenPopup():d.disableClickOpenPopup(),X.current?d.enableClickHighlight():d.disableClickHighlight()),p.isDestroyed()||(K.current?p.enableClickOpenPopup():p.disableClickOpenPopup(),Q.current?p.enableClickHighlight():p.disableClickHighlight())},se=()=>H(this,void 0,void 0,(function*(){yield v.switchMap(!0),P.current=!1})),ce=()=>{D.current&&!E.current&&(N.current.addEventListener("mousedown",ue),N.current.addEventListener("click",de),N.current.addEventListener("wheel",de),E.current=!0)},ue=e=>{e.target.classList.contains("multi-map-container")?R.current=!0:R.current=!1},de=e=>{if(e.target.classList.contains("multi-map-container")&&R.current){if(O.current||P.current)return;O.current=!0,P.current=!0,se()}};return null}function G(n){const{mapUseDataSourcesOrderList:r,mapUseDataSources:i}=n,a=$(i,r)?r:i,o=l=>{var n;return u((null===(n=e.DataSourceManager.getInstance().getDataSource(l))||void 0===n?void 0:n.type)===t.DataSourceTypes.WebMap?27416:95930)},s=F(a[0]),c=F(a[1]);return(0,e.jsx)("div",{css:Y},(0,e.jsx)("div",{className:"swipe-maps-panel"},(0,e.jsx)("div",{className:"swipe-maps-list d-flex justify-content-start"},(0,e.jsx)("div",{className:"d-flex flex-shrink-0 justify-content-center align-items-center swipe-maps-thumbnail"},(0,e.jsx)(l.Icon,{size:"12",color:"#FFFFFF",icon:o(a[0])})),(0,e.jsx)("div",{title:s,className:"swipe-maps-label text-truncate"},s)),(0,e.jsx)("div",{className:"swipe-maps-list d-flex justify-content-start"},(0,e.jsx)("div",{className:"d-flex flex-shrink-0 justify-content-center align-items-center swipe-maps-thumbnail"},(0,e.jsx)(l.Icon,{size:"12",color:"#FFFFFF",icon:o(a[1])})),(0,e.jsx)("div",{title:c,className:"swipe-maps-label text-truncate"},c))))}const Y=e.css`
.swipe-maps-panel {
  margin-top: 16px;
  .swipe-maps-list{
    width: 100%;
    margin-bottom: 14px;
    .swipe-maps-thumbnail {
      width:  20px;
      height:  20px;
      background-color: #089BDC;
      margin-right: 8px;
    }
    .swipe-maps-label {
      font-size: 13px;
      font-weight: 500;
      color: var(--ref-palette-neutral-1100);
    }
  }
}
`;var X=function(e,t,l,n){return new(l||(l=Promise))((function(r,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function o(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof l?t:new l((function(e){e(t)}))).then(a,o)}s((n=n.apply(e,t||[])).next())}))};const{useState:K,useEffect:Q,useRef:Z}=e.React,ee="\n  position: absolute;\n  overflow-y: scroll;\n  z-index: 7;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  margin: 0;\n",te="\n  position: absolute;\n  overflow-x: scroll;\n  z-index: 7;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  padding: 0;\n  margin: 0;\n",le="\n  padding: 0;\n  margin: 0;\n  display: flex;\n  flexDirection: column;\n  alignItems: stretch;\n  alignContent: stretch;\n  justifyContent: space-evenly;\n",ne="\n  padding: 0;\n  margin: 0;\n  height: 100%;\n  display: flex;\n  flexDirection: row;\n  alignItems: stretch;\n  alignContent: stretch;\n  justifyContent: space-evenly;\n",re="\n  position: absolute;\n  border: 1px solid rgba(110,110,110,.5);\n";function ie(e){const{jimuMapViewGroup:t,widgetId:l,activeMapView:n,inactiveMapView:i,firstTrailingLayersId:a,secondTrailingLayersId:o,swipeStyle:c,handleScrollingLayerOfFirstMapView:u,handleScrollingLayerOfSecondMapView:d,handleScrollFirstMapView:p,dividerColor:v,isDesignMode:m}=e,y=n.mapWidgetId,g=Z(null),h=Z(null),[w,f]=K(0),[x,b]=K((null==a?void 0:a.length)>0),L=Z(x),[S,M]=K(null==n?void 0:n.view.height),[I,V]=K(null==n?void 0:n.view.width),C=Z(document.querySelector(`div[data-widgetid=${y}] .multi-map-container`)),j=e=>{var t;return null===(t=e.current)||void 0===t?void 0:t.querySelector(".multisourcemap-item-appear-noanimate")},A=Z(j(C)),E=e=>{var t;return null===(t=e.current)||void 0===t?void 0:t.querySelector(".multisourcemap-item-disappear-noanimate")},O=Z(E(C)),R=Z([]),P=null==n?void 0:n.view,k=Z(0),N=Z(!1),T=Z(!1),D=Z(0),z=Z(0),q=Z(null),$=Z(null),F=Z(null),[H,J]=K(0),B=Z([]),W=Z(0),U=`jimu-widget-swipe-${l}-handle-container`,G=`jimu-widget-swipe-${l}-scroller`,Y=`jimu-widget-swipe-${l}-content`,ie=Z(),ae=Z(!0),oe=Z(!0),se=(e,t)=>X(this,void 0,void 0,(function*(){return yield e.whenJimuLayerViewLoaded(t)}));Q((()=>{C.current.style.pointerEvents=m?"none":null}),[m]),Q((()=>()=>{C.current.style.pointerEvents=null}),[]),Q((()=>{M(null==n?void 0:n.view.height),V(null==n?void 0:n.view.width)}),[n]),Q((()=>{const e=()=>{A.current=j(C),O.current=E(C),L.current||void 0===o||0===o.length||(c===r.AdvancedVertical?A.current.style.clipPath=`inset(0px 0px ${n.view.width}px 0px)`:A.current.style.clipPath=`inset(0px ${n.view.height}px 0px 0px)`),(null==o?void 0:o.length)>0&&(O.current.style.opacity="1")};return n.addRestoreListener(e),()=>{n.removeRestoreListener(e)}}),[n,y,o,c]),Q((()=>{const e=()=>{t.hideMapTools()};function u(){var e;const t=c===r.AdvancedVertical?"vertical":"horizontal",n=null===(e=null==o?void 0:o.asMutable())||void 0===e?void 0:e.map((e=>se(i,e)));n&&Promise.all(n).then((e=>{var n,r;const a=e.map((e=>e.layer));B.current=null==a?void 0:a.map((e=>new s.default({id:l,view:null==i?void 0:i.view,disabled:!0,position:100,direction:t,trailingLayers:[e],visibleElements:{handle:!1,divider:!0}})));const o=null===(n=null==B?void 0:B.current)||void 0===n?void 0:n[0];null===(r=null==i?void 0:i.view)||void 0===r||r.ui.add(o),null==o||o.leadingLayers.addMany(o.trailingLayers),null==o||o.trailingLayers.removeAll(),ae.current=!0}))}function d(){function e(){c===r.AdvancedVertical?t($.current.scrollTop-S*((null==a?void 0:a.length)||0)):t($.current.scrollLeft-I*((null==a?void 0:a.length)||0))}function t(e){W.current=e,T.current||(requestAnimationFrame((()=>{var e,t;T.current=!1;const l=c===r.AdvancedVertical?W.current/P.height:W.current/P.width,n=(null===(e=null==B?void 0:B.current)||void 0===e?void 0:e.length)-1;null===(t=null==B?void 0:B.current)||void 0===t||t.forEach(((e,t,r)=>{var a;null===(a=null==i?void 0:i.view)||void 0===a||a.ui.add(e),e.when((()=>{C.current.querySelectorAll(".esri-swipe__divider").forEach((function(e){e.style.backgroundColor=v}))}));let o=100*(t-l);0===t&&e.leadingLayers.length&&ae.current&&(e.trailingLayers.addMany(e.leadingLayers),e.leadingLayers.removeAll(),ae.current=!1),o<0&&e.trailingLayers.length?(e.leadingLayers.addMany(e.trailingLayers),e.trailingLayers.removeAll(),J(t)):o>=0&&e.leadingLayers.length&&(e.trailingLayers.addMany(e.leadingLayers),e.leadingLayers.removeAll(),J(t)),o>=0&&o<.1&&t===n&&J(t),o<0&&(o+=100),e.position=ce(o,0,100)}))})),T.current=!0)}function l(){c===r.AdvancedVertical?t($.current.scrollTop-S*((null==a?void 0:a.length)||0)):t($.current.scrollLeft-I*((null==a?void 0:a.length)||0))}(()=>{const e=C.current.querySelector(`#${G}`),t=C.current.querySelector(`#${Y}`);$.current=e,F.current=t})(),(()=>{var t;const n=c===r.AdvancedVertical?"vertical":"horizontal",a=null===(t=null==o?void 0:o.asMutable())||void 0===t?void 0:t.map((e=>se(i,e)));a&&Promise.all(a).then((t=>{var r,a;"vertical"===n?null===(r=null==i?void 0:i.view)||void 0===r||r.watch("height",l):null===(a=null==i?void 0:i.view)||void 0===a||a.watch("width",l),l(),$.current.addEventListener("scroll",e),"horizontal"===n&&$.current.addEventListener("wheel",de)}))})()}function p(){c===r.AdvancedVertical?m(g.current.scrollTop):m(g.current.scrollLeft)}function m(e){k.current=e,N.current||(requestAnimationFrame((()=>{var e;N.current=!1;const t=c===r.AdvancedVertical?k.current/P.height:k.current/P.width,l=(null===(e=R.current)||void 0===e?void 0:e.length)-1;R.current.forEach(((e,n,s)=>{P.ui.add(e),e.when((()=>{C.current.querySelectorAll(".esri-swipe__divider").forEach((function(e){e.style.backgroundColor=v}))}));let u=100*(n-t);u<0&&e.trailingLayers.length?(e.leadingLayers.addMany(e.trailingLayers),e.trailingLayers.removeAll(),f(n)):u>=0&&e.leadingLayers.length&&(e.trailingLayers.addMany(e.leadingLayers),e.leadingLayers.removeAll(),f(n)),(0===u||u<-100)&&(i&&_(i.dataSourceId)&&(null==o?void 0:o.length)>0&&oe.current&&(!function(){const e=()=>{const e=C.current.querySelector(`#${G}`),t=(null==a?void 0:a.length)>0?S*((null==a?void 0:a.length)-1):0;D.current=e.scrollTop-t,A.current.style.clipPath=`inset(0px 0px ${D.current}px 0px)`,D.current<S&&(b(!0),L.current=!0),D.current>=S&&(d(),b(!1),L.current=!1)},t=e=>{e.preventDefault();const t=C.current.querySelector(`#${G}`),l=(null==a?void 0:a.length)>0?I*((null==a?void 0:a.length)-1):0;z.current=t.scrollLeft-l,A.current.style.clipPath=`inset(0px ${z.current}px 0px 0px)`,z.current<I&&b(!0),z.current>=I&&(d(),b(!1))};var l,n,i,o;(()=>{const l=C.current.querySelector(`#${G}`);q.current=l,c===r.AdvancedVertical?l.addEventListener("scroll",e):l.addEventListener("scroll",t)})(),O.current.style.opacity="1",c===r.AdvancedVertical?(ie.current=document.createElement("div"),ie.current.id=U,ie.current.setAttribute("style",re),ie.current.style.transform=`translateY(${S}px`,ie.current.style.width=`${I}px`,ie.current.style.height="4px",ie.current.style.backgroundColor=v,ie.current.style.zIndex=null===(n=null===(l=A.current)||void 0===l?void 0:l.style)||void 0===n?void 0:n.zIndex):(ie.current=document.createElement("div"),ie.current.id=U,ie.current.setAttribute("style",re),ie.current.style.transform=`translateX(${I})px`,ie.current.style.height=`${S}px`,ie.current.style.width="4px",ie.current.style.backgroundColor=v,ie.current.style.zIndex=null===(o=null===(i=A.current)||void 0===i?void 0:i.style)||void 0===o?void 0:o.zIndex),C.current.appendChild(ie.current)}(),oe.current=!1),n===l&&f(n)),u<0&&(u+=100),e.position=ce(u,0,100)}))})),N.current=!0)}function y(){c===r.AdvancedVertical?m(g.current.scrollTop):m(g.current.scrollLeft)}function w(){var e;const l=C.current.querySelector(`#${G}`);l&&C.current.removeChild(l),null===(e=null==R?void 0:R.current)||void 0===e||e.forEach(((e,t,l)=>{var n;e.position=0,e.leadingLayers.removeAll(),e.trailingLayers.removeAll(),null===(n=P.ui)||void 0===n||n.remove(e)})),t.showMapTools()}return(null==n?void 0:n.view)&&C.current&&(!function(){const e=document.createElement("div");e.id=G;const t=document.createElement("div");t.className="content",c===r.AdvancedVertical?(e.setAttribute("style",ee),t.setAttribute("style",le),t.style.height=S*(((null==a?void 0:a.length)||0)+((null==o?void 0:o.length)||0))+"px"):(e.setAttribute("style",te),t.setAttribute("style",ne),t.style.width=I*(((null==a?void 0:a.length)||0)+((null==o?void 0:o.length)||0))+"px");C.current.appendChild(e),e.appendChild(t),g.current=e,h.current=t}(),(null==a?void 0:a.length)>0?(!function(){var e;const t=c===r.AdvancedVertical?"vertical":"horizontal",i=null===(e=null==a?void 0:a.asMutable())||void 0===e?void 0:e.map((e=>se(n,e)));i&&Promise.all(i).then((e=>{const r=e.map((e=>e.layer));R.current=null==r?void 0:r.map((e=>new s.default({id:l,view:null==n?void 0:n.view,disabled:!0,position:100,direction:t,trailingLayers:[e],visibleElements:{handle:!1,divider:!0}}))),"vertical"===t?P.watch("height",y):P.watch("width",y),y(),g.current.addEventListener("scroll",p),"horizontal"===t&&g.current.addEventListener("wheel",ue)}))}(),i&&u(),e(),oe.current=!0):(null==o?void 0:o.length)>0&&(O.current.style.opacity="1",c===r.AdvancedVertical?A.current.style.clipPath=`inset(0px 0px ${n.view.width}px 0px)`:A.current.style.clipPath=`inset(0px ${n.view.height}px 0px 0px)`,b(!1),L.current=!1,i&&u(),d(),e())),()=>{var e;w(),null===(e=null==B?void 0:B.current)||void 0===e||e.forEach(((e,t,l)=>{var n,r;e.position=0,e.leadingLayers.removeAll(),e.trailingLayers.removeAll(),null===(r=null===(n=null==i?void 0:i.view)||void 0===n?void 0:n.ui)||void 0===r||r.remove(e)})),b(!0),function(){const e=C.current.querySelector(".scrollerMap");e&&C.current.removeChild(e),O.current&&(O.current.style.opacity=null),A.current&&(A.current.style.clipPath=null),ie.current&&C.current.querySelector(`#${U}`)&&C.current.contains(ie.current)&&C.current.removeChild(ie.current)}()}}),[l,P,n,a,o,c,v,U,S,I,G,Y,i,t]),Q((()=>{var e;const t=null===(e=null==a?void 0:a.asMutable())||void 0===e?void 0:e.map((e=>se(n,e)));t&&Promise.all(t).then((e=>{u(e[w])}))}),[n,a,w,u]),Q((()=>{var e;const t=null===(e=null==o?void 0:o.asMutable())||void 0===e?void 0:e.map((e=>se(i,e)));t&&Promise.all(t).then((e=>{d(e[H])}))}),[o,H,i,d]),Q((()=>{p(x)}),[p,x]);const ce=(e,t,l)=>Math.min(l,Math.max(t,e)),ue=e=>{e.preventDefault();const t=-e.wheelDelta||30*-e.deltaY;g.current.scrollLeft=g.current.scrollLeft+t/2},de=e=>{e.preventDefault();const t=-e.wheelDelta||30*-e.deltaY;$.current.scrollLeft=$.current.scrollLeft+t/2};return null}var ae=u(44828),oe=function(e,t,l,n){return new(l||(l=Promise))((function(r,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function o(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof l?t:new l((function(e){e(t)}))).then(a,o)}s((n=n.apply(e,t||[])).next())}))};const{useState:se,useEffect:ce,useRef:ue}=e.React;function de(t){var r,i;const{scrollMapViewList:a,activeMapView:o,inactiveMapView:s,handlePanelSelectedFirstScrollLayer:c,handlePanelSelectedSecondScrollLayer:u,isAllowDeactivateLayers:d,toggleLayerVisibility:p,scrollingLayerOfFirstMapView:v,scrollingLayerOfSecondMapView:m,scrollFirstMapView:y,showSwipeOnMap:g,runtimeActiveMapViewAddedLayers:h,runtimeInactiveMapViewAddedLayers:w,handleRuntimePanelSelectedFirstScrollLayer:f,handleRuntimePanelSelectedSecondScrollLayer:b}=t,[L,S]=se(!1),[M,I]=se(!1),[C,j]=se(!1),[E,R]=se(!1),P=ue(null),k=e.React.useRef([]),N=e.React.useRef([]),T=e.hooks.useTranslation(n);ce((()=>{s||u((0,e.Immutable)([]))}),[u,s]);const[D,z]=se(null),q=ue(D),[$,H]=se((0,e.Immutable)([])),[J,B]=se([]),W=ue(J),[U,G]=se((0,e.Immutable)([])),[Y,X]=se([]),K=ue(Y),[Q,Z]=se((0,e.Immutable)([])),[ee,te]=se(null),le=ue(ee),[ne,re]=se((0,e.Immutable)([]));ce((()=>{const e=null==a?void 0:a[null==o?void 0:o.id];H(e)}),[a,o]),ce((()=>{const e=null==a?void 0:a[null==s?void 0:s.id];re(e)}),[a,s]);const ie=(e,t)=>oe(this,void 0,void 0,(function*(){return yield e.whenJimuLayerViewLoaded(t)})),de=e.hooks.useEventCallback((()=>{const e=P.current,t=document.querySelector(".currentLegend");if(t&&t.remove(),g&&((null==$?void 0:$.length)>0||(null==ne?void 0:ne.length)>0)){const t=document.createElement("div");t.className="currentLegend";new ae.default({view:y?null==o?void 0:o.view:null==s?void 0:s.view,style:"classic",layerInfos:[{layer:y?null==v?void 0:v.layer:null==m?void 0:m.layer}]}).container=t,e.appendChild(t)}})),ve=e.hooks.useEventCallback(((t,l,n,r,i)=>{var o,s;const c=null===(s=null===(o=null==a?void 0:a[null==t?void 0:t.id])||void 0===o?void 0:o.asMutable())||void 0===s?void 0:s.map((e=>ie(t,e)));c&&Promise.all(c).then((t=>{const a=t.map((e=>({layerId:e.id,title:null==e?void 0:e.layer.title,selected:!0,visible:null==e?void 0:e.layer.visible,allowOperation:d})));l(a),r.current=a;const o=[];a.forEach((e=>{e.selected&&e.visible&&o.push(e.layerId)})),n((0,e.Immutable)(o)),i((0,e.Immutable)(o))})).catch((e=>{console.error(e)}))}));ce((()=>{ve(o,z,H,q,c),ve(s,te,re,le,u)}),[a,o,s,d,c,u,ve]),ce((()=>{if((null==o?void 0:o.id)===(null==s?void 0:s.id))return;const t=null==h?void 0:h.asMutable({deep:!0}).map((e=>{const t=o.jimuLayerViews[e];return{layerId:e,title:t.layer.title,selected:!1,visible:t.layer.visible,allowOperation:!0}}));B(t),W.current=t;const l=[];if(t.forEach((e=>{e.selected&&e.visible&&l.push(e.layerId)})),G((0,e.Immutable)(l)),f((0,e.Immutable)(l)),s){const t=null==w?void 0:w.asMutable({deep:!0}).map((e=>{const t=s.jimuLayerViews[e];return{layerId:e,title:t.layer.title,selected:!1,visible:t.layer.visible,allowOperation:!0}}));X(t),K.current=t;const l=[];t.forEach((e=>{e.selected&&e.visible&&l.push(e.layerId)})),Z((0,e.Immutable)(l)),b((0,e.Immutable)(l))}}),[o,f,b,s,h,w]);const me=e.hooks.useEventCallback(((t,l,n,r,i)=>{var o,s;const c=null===(s=null===(o=null==a?void 0:a[null==t?void 0:t.id])||void 0===o?void 0:o.asMutable())||void 0===s?void 0:s.map((e=>ie(t,e)));c&&Promise.all(c).then((t=>{t.forEach((t=>{const a=[];a.push(null==t?void 0:t.layer.watch("visible",(()=>{const l=null==t?void 0:t.layer.visible,a=JSON.parse(JSON.stringify(n.current));a.forEach((e=>{e.layerId===t.id&&(e.visible=l)})),r(a),n.current=a;const o=[];null==a||a.forEach((e=>{e.selected&&e.visible&&o.push(e.layerId)})),i((0,e.Immutable)(o))}))),l.current=a}))}))}));ce((()=>{const e=k.current;return me(o,k,q,z,c),()=>{e.forEach((e=>{null==e||e.remove()}))}}),[a,o,me,c]);const ye=e.hooks.useEventCallback(((t,l,n,r,i,a)=>{l.forEach((l=>{const o=t.jimuLayerViews[l.layerId],s=[];s.push(null==o?void 0:o.layer.watch("visible",(()=>{const t=null==o?void 0:o.layer.visible,l=JSON.parse(JSON.stringify(n.current));l.forEach((e=>{e.layerId===o.id&&(e.visible=t)})),r(l),n.current=l;const a=[];null==l||l.forEach((e=>{e.selected&&e.visible&&a.push(e.layerId)})),i((0,e.Immutable)(a))}))),a.current=s}))}));ce((()=>{const e=N.current;return ye(o,J,W,B,f,N),()=>{e.forEach((e=>{null==e||e.remove()}))}}),[o,f,J,ye]),ce((()=>{c($)}),[c,$]),ce((()=>{f(U)}),[f,U]),ce((()=>{b(Q)}),[b,Q]),ce((()=>{u(ne)}),[u,ne]),ce((()=>{(v||m)&&de()}),[de,v,m,o,s,g,y,a,$,ne]);const ge=()=>{S(!L)},he=()=>{I(!M)},we=()=>{j(!C)},fe=()=>{R(!E)},xe=(t,l,n,r,i)=>{const a=JSON.parse(JSON.stringify(t));a.forEach((e=>{e.layerId===i&&(e.selected=!e.selected)})),l(a),r.current=a;const o=[];a.forEach((e=>{e.selected&&e.visible&&o.push(e.layerId)})),n((0,e.Immutable)(o))},be=(e,t,l,n)=>{var r;if(t){return(null===(r=null==e?void 0:e[null==l?void 0:l.id])||void 0===r?void 0:r.indexOf(null==n?void 0:n.id))+1}return-1},Le=(e,t)=>{if(g){return(null==e?void 0:e.indexOf(null==t?void 0:t.id))+1}return-1},Se=e.React.useCallback((e=>oe(this,void 0,void 0,(function*(){const t=(yield ie(o,e))||(yield ie(s,e));t.layer.visible=!t.layer.visible}))),[o,s]),Me=(null===(r=null==a?void 0:a[null==o?void 0:o.id])||void 0===r?void 0:r.length)>0,Ie=(null===(i=null==a?void 0:a[null==s?void 0:s.id])||void 0===i?void 0:i.length)>0,Ve=g&&y,Ce=g&&!y&&m,je=F(o.dataSourceId),Ae=F(null==s?void 0:s.dataSourceId),Ee=Ve?je+" "+T("currentDisplay"):je,Oe=Ce?Ae+" "+T("currentDisplay"):Ae;return(0,e.jsx)("div",{ref:P,css:pe},(0,e.jsx)(l.CollapsablePanel,{className:(0,e.classNames)("swipe-collapse "+(Ve?"scroll-now":"")),label:je,isOpen:L,"aria-label":Me?Ee:je+":"+T("noConfiguredLayerText"),onRequestOpen:ge,onRequestClose:ge},Me?(0,e.jsx)(x,{layerList:D,onChange:e=>{xe(D,z,H,q,e)},isAllowDeactivateLayers:d,toggleLayerVisibility:p,onToggleLayerVisibility:Se,highlightIndex:y?be(a,g,o,v):-1}):(0,e.jsx)(V,{swipeLayerMode:!0}),(null==J?void 0:J.length)>0&&(0,e.jsx)(l.CollapsablePanel,{className:"swipe-collapse runtime-layer-collapse",label:T("runtimeLayers"),isOpen:C,"aria-label":T("runtimeLayers"),onRequestOpen:we,onRequestClose:we,rightIcon:O(),rightActiveIcon:A()},(0,e.jsx)(x,{layerList:J,isAllowDeactivateLayers:!0,toggleLayerVisibility:!0,onToggleLayerVisibility:Se,onChange:e=>{xe(J,B,G,W,e)},highlightIndex:y?Le(h,v):-1}))),s&&_(s.dataSourceId)&&(0,e.jsx)(l.CollapsablePanel,{className:(0,e.classNames)("swipe-collapse "+(Ce?"scroll-now":"")),label:Ae,isOpen:M,"aria-label":Ie?Oe:Ae+":"+T("noConfiguredLayerText"),onRequestOpen:he,onRequestClose:he},Ie?(0,e.jsx)(x,{layerList:ee,onChange:e=>{xe(ee,te,re,le,e)},isAllowDeactivateLayers:d,toggleLayerVisibility:p,onToggleLayerVisibility:Se,highlightIndex:y?-1:be(a,g,s,m)}):(0,e.jsx)(V,{swipeLayerMode:!0}),(null==Y?void 0:Y.length)>0&&(0,e.jsx)(l.CollapsablePanel,{className:"swipe-collapse runtime-layer-collapse",label:T("runtimeLayers"),isOpen:E,"aria-label":T("runtimeLayers"),onRequestOpen:fe,onRequestClose:fe,rightIcon:O(),rightActiveIcon:A()},(0,e.jsx)(x,{layerList:Y,isAllowDeactivateLayers:!0,toggleLayerVisibility:!0,onToggleLayerVisibility:Se,onChange:e=>{xe(Y,X,Z,K,e)},highlightIndex:y?-1:Le(w,m)}))))}const pe=e.css`
  .swipe-collapse {
    margin-top: 16px;
    .title {
      font-weight: 600;
    }
    .layer-list {
      margin-top: 12px;
      margin-bottom: 16px;
    }
    .no-layer-placeholder {
      margin-top: 16px;
      margin-bottom: 16px;
    }
  }
  .runtime-layer-collapse {
    .title {
      font-size: 13px;
      font-weight: 500;
    }
  }
  .currentLegend {
    margin-top: 8px;
    .esri-legend__message, .esri-legend__service{
      padding-left: 0px;
    }
  }
  .scroll-now {
    .collapse-label {
      position: relative;
      &:after {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        content: "";
        display: block;
        position: absolute;
        right: -10px;
        background-color: var(--sys-color-primary-main);
      }
    }
  }
  .runtime-layer-collapse {
    .collapse-label {
      &:after {
        content: none
      }
    }
  }
`;var ve=u(28996),me=u.n(ve),ye=function(e,t){var l={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(l[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(l[n[r]]=e[n[r]])}return l};const ge=t=>{const l=window.SVG,{className:n}=t,r=ye(t,["className"]),i=(0,e.classNames)("jimu-icon jimu-icon-component",n);return l?e.React.createElement(l,Object.assign({className:i,src:me()},r)):e.React.createElement("svg",Object.assign({className:i},r))},he=e.css`
  &.warning-info {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    .warning-icon {
      color: var(--sys-color-warning-dark);
      width: ${e.polished.rem(22)};
      height: ${e.polished.rem(22)};
      margin-bottom: ${e.polished.rem(10)};
    }
    .warning-text {
      font-size: ${e.polished.rem(13)};
      line-height: ${e.polished.rem(18)};
    }
  }
`;function we(){const t=e.hooks.useTranslation(n);return(0,e.jsx)("div",{className:"w-100 d-flex flex-column align-items-center warning-info",css:he},(0,e.jsx)(ge,{className:"warning-icon"}),(0,e.jsx)("div",{className:"warning-text"},t("webSceneNotSupported")))}r.SimpleHorizontal;const fe={distance:35,unit:l.DistanceUnits.PERCENTAGE},xe=e.css`
  &{
    .widget-container {
      overflow: auto;
    }
    .swipe-panel {
      padding: ${e.polished.rem(16)};
    }
    .swipe-title {
      .swipe-label {
        font-size: ${e.polished.rem(14)};
        color: var(--ref-palette-black);
        span {
          margin-left: 0.5rem;
          margin-right: var(--sys-spacing-6);
        }
      }
    }
    .error-alert {
      position: absolute;
      bottom: 4px;
      left: 4px;
      z-index: 1;
    }
  }
`,{useState:be,useEffect:Le,useCallback:Se,useRef:Me}=e.React,Ie=a=>{var s,c,u,d,p,v,y;const{id:g,label:h,config:w}=a,{styleConfig:f,scrollMapViewList:x,swipeMapViewList:b,mapUseDataSourcesOrderList:L,swipeStyle:S,swipeMode:M}=w,{defaultActivation:I=!1,detailsVisibility:V=!0,isAllowDeactivateLayers:C=!0,toggleLayerVisibility:j=!1,sliderPosition:A=fe,dividerColor:E="var(--light)",handleColor:O="var(--light)"}=f||{},R=null===(s=a.useMapWidgetIds)||void 0===s?void 0:s[0],[P,k]=be(null),[N,D]=be(null),[z,q]=be(null),[_,H]=be(I),[J,B]=be(null),[W,Y]=be(null),[X,K]=be(!0),[Q,Z]=be((0,e.Immutable)([])),[ee,te]=be((0,e.Immutable)([])),[le,ne]=be((0,e.Immutable)([])),[re,ae]=be((0,e.Immutable)([])),[oe,se]=be((0,e.Immutable)([])),[ce,ue]=be((0,e.Immutable)([])),[pe,ve]=be((0,e.Immutable)([])),[me,ye]=be((0,e.Immutable)([])),[ge,he]=be((0,e.Immutable)([])),[Ie,Ve]=be((0,e.Immutable)([])),[Ce,je]=be((0,e.Immutable)([])),[Ae,Ee]=be(!1),[Oe,Re]=be(!0),[Pe,ke]=be(!0),[Ne,Te]=be(!0),[De,ze]=be(!0),[qe,$e]=be((0,e.Immutable)([])),[_e,Fe]=be((0,e.Immutable)([])),He=Me(null),Je=e.hooks.useTranslation(n,l.defaultMessages),Be=S===r.SimpleHorizontal||S===r.SimpleVertical,We=e.ReactRedux.useSelector((e=>{var t,l;return null===(l=(null!==(t=e.appStateInBuilder)&&void 0!==t?t:e).appConfig.widgets[R])||void 0===l?void 0:l.useDataSources})),Ue=e.ReactRedux.useSelector((t=>t.appRuntimeInfo.appMode===e.AppMode.Design));Le((()=>{Ae&&!He.current&&(He.current=setTimeout((()=>{Ee(!1),He.current=null}),3e3))}),[Ae]),Le((()=>{const e=null==We?void 0:We.map((e=>e.dataSourceId));je(e)}),[We]),Le((()=>{H(!1)}),[S,R]),Le((()=>{H(I)}),[I]);const Ge=e=>{var t,l,n;const r=[],i=null===(n=null===(l=null===(t=null==e?void 0:e.view)||void 0===t?void 0:t.map)||void 0===l?void 0:l.layers)||void 0===n?void 0:n.toArray();return null==i||i.forEach((t=>{const l=e.getJimuLayerViewByAPILayer(t);(null==l?void 0:l.fromRuntime)&&r.push(l.id)})),r};Le((()=>{ae(Q?Q.concat(le):le)}),[Q,le]),Le((()=>{ue(ee?null==ee?void 0:ee.concat(oe):oe)}),[ee,oe]),Le((()=>{var l;const n=null==We?void 0:We.filter((e=>e.dataSourceId!==(null==P?void 0:P.dataSourceId))),r=(i=R,a=null===(l=null==n?void 0:n[0])||void 0===l?void 0:l.dataSourceId,i+"-"+a);var i,a;const o=t.MapViewManager.getInstance().getJimuMapViewById(r);D(o);const s=Ge(P);$e((0,e.Immutable)(s)),Te(!0),ze(!0);const c=Ge(o);Fe((0,e.Immutable)(c));const u=()=>{const t=Ge(P);$e((0,e.Immutable)(t))},d=()=>{const t=Ge(P);$e((0,e.Immutable)(t)),Te(!0),ze(!0)};return P&&(null==P||P.addJimuLayerViewCreatedListener(u),null==P||P.addJimuLayerViewRemovedListener(d)),()=>{null==P||P.removeJimuLayerViewCreatedListener(u),null==P||P.removeJimuLayerViewRemovedListener(d)}}),[P,We,R]);const Ye=()=>{if(!_){const e=document.querySelector(`.jimu-widget-swipe .useMapWidgetId-${R} .swipe-title .checked:not(.${g})`);e&&(Ee(!0),e.getElementsByTagName("input")[0].click())}H(!_)},Xe=Se((e=>{B(e)}),[]),Ke=Se((e=>{Y(e)}),[]),Qe=Se((e=>{K(e)}),[]),Ze=Se((e=>{Z(e),ke(!0)}),[]),et=Se((e=>{te(e),ke(!0)}),[]),tt=Se((e=>{ne(e),ze(!0)}),[]),lt=Se((e=>{se(e),ze(!0)}),[]),nt=Se((e=>{ve(e),Re(!0)}),[]),rt=Se((e=>{ye(e),Re(!0)}),[]),it=Se((e=>{he(e),Te(!0)}),[]),at=Se((e=>{Ve(e),Te(!0)}),[]),ot=!Be&&!!P&&(null==Ce?void 0:Ce.length)>0&&"2d"===(null===(c=null==P?void 0:P.view)||void 0===c?void 0:c.type)&&(null==z?void 0:z.jimuMapViews)&&Object.keys(null==z?void 0:z.jimuMapViews).length>0,st=Be&&!!P&&"LOADED"===P.status&&"2d"===(null===(u=null==P?void 0:P.view)||void 0===u?void 0:u.type)&&M===i.SwipeBetweenLayers,ct=Be&&M===i.SwipeBetweenMaps&&(null==z?void 0:z.jimuMapViews)&&2===Object.keys(null==z?void 0:z.jimuMapViews).length&&2===Ce.length,ut=_&&S&&!Be&&"2d"===(null===(d=null==P?void 0:P.view)||void 0===d?void 0:d.type)&&(null==Ce?void 0:Ce.length)>0&&(null==z?void 0:z.jimuMapViews)&&Object.keys(null==z?void 0:z.jimuMapViews).length>0,dt="2d"===(null===(p=null==P?void 0:P.view)||void 0===p?void 0:p.type)&&((null===(v=null==pe?void 0:pe.concat(ge))||void 0===v?void 0:v.length)>0||(null===(y=null==me?void 0:me.concat(Ie))||void 0===y?void 0:y.length)>0),pt=(null==z?void 0:z.jimuMapViews)&&2===Object.keys(null==z?void 0:z.jimuMapViews).length&&(null==P?void 0:P.view)&&(null==N?void 0:N.view),vt=()=>{if(ct){const e=$(Ce,L)?L:Ce;return h+":"+F(e[0])+","+F(e[1])}return h};return(0,e.jsx)("div",{className:"jimu-widget jimu-widget-swipe",css:xe},R&&(0,e.jsx)(t.JimuMapViewComponent,{useMapWidgetId:R,onActiveViewChange:e=>{(null==e?void 0:e.view)?(k(e),Re(!1),ke(!1),Te(!1),ze(!1)):k(null)},onViewsCreate:e=>{const l=t.MapViewManager.getInstance().getJimuMapViewGroup(R);q(l),Object.keys(e).forEach((t=>{const l=e[t];l.isActive||D(l)}))}}),R&&S?(0,e.jsx)("div",{className:"widget-container surface-1 border-0 w-100 h-100"},(()=>{var t,n;return(0,e.jsx)("div",{className:(0,e.classNames)(`swipe-panel useMapWidgetId-${R}`)},(0,e.jsx)("div",{className:"swipe-title d-flex justify-content-between align-items-center"},(0,e.jsx)("div",{className:"swipe-label"},(0,e.jsx)(l.Icon,{icon:o()}),(0,e.jsx)("span",null,h)),(0,e.jsx)(l.Switch,{"aria-label":vt(),title:h,className:g,checked:_,onChange:Ye})),(0,e.jsx)("div",{className:(0,e.classNames)({"d-none":!V})},ot&&De&&(0,e.jsx)(de,{scrollMapViewList:x,activeMapView:P,inactiveMapView:N,handlePanelSelectedFirstScrollLayer:Ze,handlePanelSelectedSecondScrollLayer:et,isAllowDeactivateLayers:C,toggleLayerVisibility:j,scrollingLayerOfFirstMapView:J,scrollingLayerOfSecondMapView:W,scrollFirstMapView:X,showSwipeOnMap:_,runtimeActiveMapViewAddedLayers:qe,runtimeInactiveMapViewAddedLayers:_e,handleRuntimePanelSelectedFirstScrollLayer:tt,handleRuntimePanelSelectedSecondScrollLayer:lt}),!Be&&"3d"===(null===(t=null==P?void 0:P.view)||void 0===t?void 0:t.type)&&(0,e.jsx)(we,null),Be&&"3d"===(null===(n=null==P?void 0:P.view)||void 0===n?void 0:n.type)&&M===i.SwipeBetweenLayers&&(0,e.jsx)(we,null),st&&Ne&&(0,e.jsx)(T,{swipeMapViewList:b,activeMapView:P,isAllowDeactivateLayers:C,toggleLayerVisibility:j,handlePanelSelectedLeadingLayers:nt,handlePanelSelectedTrailingLayers:rt,runtimeAddedLayers:qe,handleRuntimePanelSelectedLeadingLayers:it,handleRuntimePanelSelectedTrailingLayers:at}),ct&&(0,e.jsx)(G,{mapUseDataSourcesOrderList:L,mapUseDataSources:Ce}),Ae&&(0,e.jsx)(l.Alert,{className:"w-100 error-alert",form:"basic",open:!0,withIcon:!0,type:"warning",text:Je("mapOccupiedMsg")})))})()):(0,e.jsx)(l.WidgetPlaceholder,{icon:o(),message:Je("_widgetLabel")}),_&&S&&Be&&(M===i.SwipeBetweenLayers?dt&&Oe&&(0,e.jsx)(m,{widgetId:g,activeMapView:P,leadingLayersId:pe.concat(ge),trailingLayersId:me.concat(Ie),swipeStyle:S,sliderPosition:A,dividerColor:E,handlerColor:O,isDesignMode:Ue}):pt&&(0,e.jsx)(U,{swipeMode:M,widgetId:g,activeMapView:P,inactiveMapView:N,jimuMapViewGroup:z,sliderPosition:A,swipeStyle:S,mapUseDataSourcesOrderList:L,mapUseDataSources:Ce,dividerColor:E,handlerColor:O,isDesignMode:Ue})),ut&&Pe&&(0,e.jsx)(ie,{widgetId:g,activeMapView:P,inactiveMapView:N,jimuMapViewGroup:z,firstTrailingLayersId:re,secondTrailingLayersId:ce,swipeStyle:S,handleScrollingLayerOfFirstMapView:Xe,handleScrollingLayerOfSecondMapView:Ke,handleScrollFirstMapView:Qe,dividerColor:E,isDesignMode:Ue}))};function Ve(e){u.p=e}})(),d})())}}}));