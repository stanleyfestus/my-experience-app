System.register(["jimu-core","jimu-for-builder","jimu-ui","jimu-ui/advanced/setting-components","jimu-ui/basic/list-tree","jimu-arcgis","jimu-core/react"],(function(e,t){var i={},a={},n={},s={},o={},l={},r={};return{setters:[function(e){i.Immutable=e.Immutable,i.React=e.React,i.classNames=e.classNames,i.css=e.css,i.defaultMessages=e.defaultMessages,i.hooks=e.hooks,i.jsx=e.jsx,i.moduleLoader=e.moduleLoader,i.polished=e.polished,i.urlUtils=e.urlUtils},function(e){a.builderAppSync=e.builderAppSync,a.getAppConfigAction=e.getAppConfigAction},function(e){n.Button=e.Button,n.Checkbox=e.Checkbox,n.Icon=e.Icon,n.Label=e.Label,n.Link=e.Link,n.Loading=e.Loading,n.LoadingType=e.LoadingType,n.NumericInput=e.NumericInput,n.Radio=e.Radio,n.Select=e.Select,n.Switch=e.Switch,n.TextInput=e.TextInput,n.Tooltip=e.Tooltip,n.defaultMessages=e.defaultMessages},function(e){s.MapWidgetSelector=e.MapWidgetSelector,s.SettingRow=e.SettingRow,s.SettingSection=e.SettingSection,s.SidePopper=e.SidePopper},function(e){o.List=e.List,o.TreeItemActionType=e.TreeItemActionType},function(e){l.JimuMapViewComponent=e.JimuMapViewComponent,l.loadArcGISJSAPIModules=e.loadArcGISJSAPIModules},function(e){r.Fragment=e.Fragment}],execute:function(){e((()=>{var e={31027:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M12 6.5c0 .527-.074 1.036-.212 1.518l.912.438a6.5 6.5 0 1 0-6.586 4.533l-.077-1.008A5.5 5.5 0 1 1 12 6.5m-9 0a3.5 3.5 0 0 0 2.88 3.445L5.8 8.901a2.501 2.501 0 1 1 3.194-2.224l.949.456A3.5 3.5 0 1 0 3 6.5M15.5 11l-5 1-3 4-1-9.5zm-5.57.094-1.702 2.269-.542-5.152 4.76 2.38z" clip-rule="evenodd"></path></svg>'},62838:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746z"></path></svg>'},45508:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5"></path><path fill="#000" fill-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14" clip-rule="evenodd"></path></svg>'},28996:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0" clip-rule="evenodd"></path></svg>'},51987:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTA4IiBoZWlnaHQ9IjcyIiB2aWV3Qm94PSIwIDAgMTA4IDcyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPHJlY3QgeD0iOCIgeT0iMjYiIHdpZHRoPSI5MiIgaGVpZ2h0PSIyMCIgZmlsbD0iIzI4MjgyOCIvPg0KPHJlY3QgeD0iMTIiIHk9IjMwIiB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIHJ4PSI2IiBmaWxsPSIjNkE2QTZBIi8+DQo8cmVjdCB4PSIzMyIgeT0iMzMiIHdpZHRoPSI0MiIgaGVpZ2h0PSI2IiBmaWxsPSIjNkE2QTZBIi8+DQo8cmVjdCB4PSI3OSIgeT0iMzAiIHdpZHRoPSIxIiBoZWlnaHQ9IjEyIiBmaWxsPSIjNDQ0NDQ0Ii8+DQo8cmVjdCB4PSIyOCIgeT0iMzAiIHdpZHRoPSIxIiBoZWlnaHQ9IjEyIiBmaWxsPSIjNDQ0NDQ0Ii8+DQo8cmVjdCB4PSI4NCIgeT0iMzAiIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgcng9IjYiIGZpbGw9IiM2QTZBNkEiLz4NCjwvc3ZnPg0K"},72872:e=>{e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTA4IiBoZWlnaHQ9IjcyIiB2aWV3Qm94PSIwIDAgMTA4IDcyIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KPHJlY3QgeD0iOCIgeT0iOCIgd2lkdGg9IjkyIiBoZWlnaHQ9IjU2IiBmaWxsPSIjMjgyODI4Ii8+DQo8cmVjdCB4PSIxMyIgeT0iNDIiIHdpZHRoPSI4MSIgaGVpZ2h0PSIxIiBmaWxsPSIjNDQ0NDQ0Ii8+DQo8cmVjdCB4PSIyOSIgeT0iNTIiIHdpZHRoPSIxOCIgaGVpZ2h0PSIzIiBmaWxsPSIjNkE2QTZBIi8+DQo8cmVjdCB4PSIxMyIgeT0iNDgiIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgcng9IjYiIGZpbGw9IiM2QTZBNkEiLz4NCjxyZWN0IHg9IjEzIiB5PSIxNiIgd2lkdGg9IjYxIiBoZWlnaHQ9IjQiIGZpbGw9IiM2QTZBNkEiLz4NCjxyZWN0IHg9IjEzIiB5PSIyOCIgd2lkdGg9IjQ1IiBoZWlnaHQ9IjQiIGZpbGw9IiM2QTZBNkEiLz4NCjxyZWN0IHg9IjgyIiB5PSI0OCIgd2lkdGg9IjEyIiBoZWlnaHQ9IjEyIiByeD0iNiIgZmlsbD0iIzZBNkE2QSIvPg0KPC9zdmc+DQo="},62686:e=>{"use strict";e.exports=l},79244:e=>{"use strict";e.exports=i},68972:e=>{"use strict";e.exports=r},4108:e=>{"use strict";e.exports=a},14321:e=>{"use strict";e.exports=n},79298:e=>{"use strict";e.exports=s},98640:e=>{"use strict";e.exports=o}},t={};function d(i){var a=t[i];if(void 0!==a)return a.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,d),n.exports}d.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return d.d(t,{a:t}),t},d.d=(e,t)=>{for(var i in t)d.o(t,i)&&!d.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.p="";var c={};return d.p=window.jimuConfig.baseUrl,(()=>{"use strict";d.r(c),d.d(c,{__set_webpack_public_path__:()=>B,default:()=>W});var e,t,i,a=d(79244),n=d(4108),s=d(14321),o=d(79298);!function(e){e.xy="XY",e.yx="YX"}(e||(e={})),function(e){e.classic="CLASSIC",e.modern="MODERN"}(t||(t={})),function(e){e.metric="METRIC",e.imperial="IMPERIAL"}(i||(i={}));const l={modern:"Modern",outputCoordinateSystem:"Output coordinate system",outputCoordinate:"Output coordinate system well-known ID ({wkid})",outputCoordinateHint:"Geographic coordinate systems and Projected coordinate systems are supported.",newCoordinate:"New coordinate system",configureCoordinate:"Configure coordinate system",displayOptions:"Display options",coordinateDecimal:"Number of decimal places for coordinates",altitudeDecimal:"Number of decimal places for altitude (3D)",showSeparators:"Show thousand separators",displayOrder:"Display order",loLaMode:"Longitude/Latitude (X, Y)",laLoMode:"Latitude/Longitude (Y, X)",datumTransformation:"Datum transformation ID ({wkid})",datumTransformationHint:"Geographic datum transformations are supported.",displayUnits:"Display units",elevationUnit:"Elevation unit (3D)",elevationHint:"Specify the unit for elevations for 3D scenes if available.",elevMeter:"Metric",elevMile:"Imperial",invalidWkidTips:"Please enter a valid coordinate system WKID.",invalidDatumWkidTips:"Please enter a valid datum transformation ID.",useTransformationForward:"Use transform forward"};var r=d(98640),m=d(62838),u=d.n(m),p=d(45508),g=d.n(p),I=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(i[a[n]]=e[a[n]])}return i};const x=e=>{const t=window.SVG,{className:i}=e,n=I(e,["className"]),s=(0,a.classNames)("jimu-icon jimu-icon-component",i);return t?a.React.createElement(t,Object.assign({className:s,src:g()},n)):a.React.createElement("svg",Object.assign({className:s},n))};var v=d(62686),y=d(28996),j=d.n(y),f=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(i[a[n]]=e[a[n]])}return i};const w=e=>{const t=window.SVG,{className:i}=e,n=f(e,["className"]),s=(0,a.classNames)("jimu-icon jimu-icon-component",i);return t?a.React.createElement(t,Object.assign({className:s,src:j()},n)):a.React.createElement("svg",Object.assign({className:s},n))};var S=d(68972);function b(e){return a.css`
    .system-config-panel {
      .wkid-link {
        cursor: pointer;
        color: ${a.polished.rgba(e.sys.color.primary.light,.8)};
        padding: 3px 2px;
        font-size: ${a.polished.rem(12)};
        text-decoration: none;
        &:hover {
          color: ${e.sys.color.primary.light};
        }
      }
      .system-name {
        font-style: italic;
        font-size: 12px;
        color: ${e.ref.palette.neutral[1e3]};
        margin-top: 5px;
        .invalid-tips {
          width: calc(100% - 20px);
          margin: 0 4px;
          color: ${e.sys.color.error.main}
        }
      }
    }
  `}function h(e){return a.css`
    .empty-placeholder {
      display: flex;
      flex-flow: column;
      justify-content: center;
      height: calc(100% - 255px);
      overflow: hidden;
      .empty-placeholder-inner {
        padding: 0px 20px;
        flex-direction: column;
        align-items: center;
        display: flex;
        .empty-placeholder-text {
          color: ${e.ref.palette.neutral[1e3]};
          font-size: ${a.polished.rem(14)};
          margin-top: 16px;
          text-align: center;
        }
        .empty-placeholder-icon {
          color: ${e.ref.palette.neutral[800]};
        }
      }
    }
    .arrange-style-container {
      .arrange_container {
        margin-top: 10px;
        display: flex;
        .jimu-btn {
          padding: 0;
          background: ${e.ref.palette.neutral[300]};
          &.active {
            border: 2px solid ${e.sys.color.primary.light};
          }
        }
      }
    }
    .setting-ui-unit-list-new {
      padding-top: ${a.polished.rem(8)};
    }
  `}const{useState:N,useEffect:k,useRef:M}=a.React,T=e=>{const{id:t,name:n,wkid:r,crs:d,displayUnit:c,elevationUnit:m,datumWkid:u,datumName:p,transformForward:g,datumWkid2:I,datumName2:y,transformForward2:j,mapInfo:f,mapInfo2:h,mapView:T,theme:C,wkidUtils:D,allDataLoaded:E,multiOptionsChange:O,onWkidChangeSave:R}=e,[P,L]=N(!1),[A,W]=N(!1),[B,H]=N(!1),[Z,U]=N(r),[G,z]=N(u),[Q,V]=N(I),[_,F]=N(!1),[K,J]=N(!1),[Y,$]=N(!1),[X,q]=N(n),[ee,te]=N(null==d?void 0:d.name),ie=a.hooks.useTranslation(l,s.defaultMessages),ae=ie("outputCoordinateHint"),ne=ie("datumTransformationHint"),se=ie("displayUnits"),oe=ie("elevationUnit"),le=ie("elevationHint"),re=ie("invalidWkidTips"),de=ie("invalidDatumWkidTips"),ce=ie("elevMeter"),me=ie("elevMile"),ue=ie("default"),pe=ie("unitsInches"),ge=ie("unitsLabelFeet"),Ie=ie("unitsFoot_US"),xe=ie("unitsLabelYards"),ve=ie("unitsLabelMiles"),ye=ie("unitsLabelNauticalMiles"),je=ie("unitsMillimeters"),fe=ie("unitsCentimeters"),we=ie("unitsLabelMeters"),Se=ie("unitsLabelKilometers"),be=ie("unitsDecimeters"),he=ie("unitsDecimalDegrees"),Ne=ie("unitsDegreesDecimalMinutes"),ke=ie("unitsDegreeMinutesSeconds"),Me=ie("unitsMgrs"),Te=ie("unitsUsng"),Ce=M(null);k((()=>{P||(0,v.loadArcGISJSAPIModules)(["esri/geometry/SpatialReference"]).then((e=>{[Ce.current]=e,L(!0)}))}),[]),k((()=>{U(r),q(n),te(null==d?void 0:d.name),z(u),V(I),P&&De(r)}),[P,r,n,d,u,f,h,D]),k((()=>{F(!1)}),[t]);const De=e=>{const t=null==f?void 0:f.wkid,i=null==h?void 0:h.wkid,a=Ce.current;if(!D)return;const{isSameSpheroid:n}=D;if(e){const s=new a({wkid:e});if(t&&!i){n(s,new a({wkid:t}))?W(!1):W(!0)}else if(t&&i){const e=new a({wkid:t}),o=new a({wkid:i}),l=n(e,o),r=n(e,s),d=n(o,s);l?r?(W(!1),H(!1)):(W(!0),H(!1)):!r&&d?(W(!0),H(!1)):!d&&r?(W(!1),H(!0)):(W(!0),H(!0))}}},Ee=(0,a.jsx)(s.Link,{className:"wkid-link jimu-outline-inside",icon:!0,to:"https://developers.arcgis.com/rest/services-reference/enterprise/using-spatial-references.htm",target:"_blank",title:"WKID","aria-label":"WKID"},"WKID"),Oe=(0,a.jsx)("div",{className:"w-100"},(0,a.jsx)("div",{className:"p-1 d-flex justify-content-between"},(0,a.jsx)("div",{className:"tip-text"},ie("outputCoordinate",{wkid:Ee})),(0,a.jsx)(s.Tooltip,{title:ae,showArrow:!0,placement:"left"},(0,a.jsx)(s.Button,{icon:!0,type:"tertiary",className:"d-inline jimu-outline-inside",disableHoverEffect:!0,disableRipple:!0},(0,a.jsx)(x,null))))),Re=(0,a.jsx)("div",{className:"w-100"},(0,a.jsx)("div",{className:"p-1 d-flex justify-content-between"},(0,a.jsx)("div",{className:"tip-text"},oe),(0,a.jsx)(s.Tooltip,{title:le,showArrow:!0,placement:"left"},(0,a.jsx)(s.Button,{icon:!0,type:"tertiary",className:"d-inline jimu-outline-inside",disableHoverEffect:!0,disableRipple:!0},(0,a.jsx)(x,null))))),Pe=(0,a.jsx)("div",{className:"w-100"},(0,a.jsx)("div",{className:"p-1 d-flex justify-content-between"},(0,a.jsx)("div",{className:"tip-text"},ie("datumTransformation",{wkid:Ee})),(0,a.jsx)(s.Tooltip,{title:ne,showArrow:!0,placement:"left"},(0,a.jsx)(s.Button,{icon:!0,type:"tertiary",className:"d-inline jimu-outline-inside",disableHoverEffect:!0,disableRipple:!0},(0,a.jsx)(x,null)))));return(0,a.jsx)("div",{className:"w-100 h-100",css:b(C)},(0,a.jsx)("div",{className:"w-100 h-100 system-config-panel"},E?(0,a.jsx)(S.Fragment,null,(0,a.jsx)(o.SettingSection,{className:"pt-0"},(0,a.jsx)(o.SettingRow,{flow:"wrap",label:Oe,truncateLabel:!1,className:"mt-0"},(0,a.jsx)(s.NumericInput,{size:"sm",className:"w-100",value:Z,precision:0,min:0,onChange:e=>{U(e)},onAcceptValue:e=>{if(!_&&r===e)return;if(!D)return;const{wkidLookup:i,isValidWkid:a}=D,n=""===e?r:e,s=a(n),o=i(n),l=null==o?void 0:o.name;t?s?(F(!1),De(n),U(n),q(l),te(l),O({wkid:n,name:l,crs:o,displayUnit:"",datumWkid:"",datumName:"",datumWkid2:"",datumName2:""})):F(!0):s?(F(!1),q(l),te(l),R(n,o)):F(!0)},showHandlers:!1,"aria-describedby":"output-system-name","aria-label":ie("outputCoordinate",{wkid:"WKID"})})),(0,a.jsx)("div",{id:"output-system-name",className:"text-break system-name d-flex align-items-center"},_?(0,a.jsx)(S.Fragment,null,(0,a.jsx)(w,{color:C.sys.color.error.main}),(0,a.jsx)("div",{className:"invalid-tips"},re)):ee)),(0,a.jsx)(o.SettingSection,{title:ie("label")},(0,a.jsx)(o.SettingRow,null,(0,a.jsx)(s.TextInput,{size:"sm",type:"text",className:"w-100",value:X,onChange:e=>{const t=e.target.value;q(t)},onAcceptValue:e=>{(e=""===(e=null==e?void 0:e.trim())?n:e)!==X&&q(e),O({name:e})},"aria-label":ie("label")}))),(0,a.jsx)(o.SettingSection,null,(0,a.jsx)(o.SettingRow,{flow:"wrap",label:se},(0,a.jsx)(s.Select,{size:"sm",value:c,onChange:e=>{const t=e.target.value;c!==t&&O({displayUnit:t})},"aria-label":se,disabled:!Z||_},(()=>{var e,t;const i=[(0,a.jsx)("option",{key:"Default",value:""},ue),(0,a.jsx)("option",{key:"INCHES",value:"INCHES"},pe),(0,a.jsx)("option",{key:"FOOT",value:"FOOT"},ge),(0,a.jsx)("option",{key:"FOOT_US",value:"FOOT_US"},Ie),(0,a.jsx)("option",{key:"YARDS",value:"YARDS"},xe),(0,a.jsx)("option",{key:"MILES",value:"MILES"},ve),(0,a.jsx)("option",{key:"NAUTICAL_MILES",value:"NAUTICAL_MILES"},ye),(0,a.jsx)("option",{key:"MILLIMETERS",value:"MILLIMETERS"},je),(0,a.jsx)("option",{key:"CENTIMETERS",value:"CENTIMETERS"},fe),(0,a.jsx)("option",{key:"METER",value:"METER"},we),(0,a.jsx)("option",{key:"KILOMETERS",value:"KILOMETERS"},Se),(0,a.jsx)("option",{key:"DECIMETERS",value:"DECIMETERS"},be),(0,a.jsx)("option",{key:"DECIMAL_DEGREES",value:"DECIMAL_DEGREES"},he),(0,a.jsx)("option",{key:"DEGREES_DECIMAL_MINUTES",value:"DEGREES_DECIMAL_MINUTES"},Ne),(0,a.jsx)("option",{key:"DEGREE_MINUTE_SECONDS",value:"DEGREE_MINUTE_SECONDS"},ke),(0,a.jsx)("option",{key:"MGRS",value:"MGRS"},Me),(0,a.jsx)("option",{key:"USNG",value:"USNG"},Te)],n=[(0,a.jsx)("option",{key:"Default",value:""},ue)].concat(i.slice(12)),s=i.slice(0,12),o=parseInt(Z),l=Ce.current;if(!l)return i;const r=new l({wkid:o});if(o===(null===(t=null===(e=null==T?void 0:T.view)||void 0===e?void 0:e.spatialReference)||void 0===t?void 0:t.wkid)){return r.isWebMercator?i:4326===o||r.isGeographic?n:s}return r.isGeographic?n:i})())),(0,a.jsx)(o.SettingRow,{flow:"wrap",label:Re,truncateLabel:!1},(0,a.jsx)("div",{role:"radiogroup",className:"mb-4","aria-label":oe},(0,a.jsx)(s.Label,{className:"d-flex align-items-center"},(0,a.jsx)(s.Radio,{style:{cursor:"pointer"},name:"elevationUnitType",className:"mr-2",checked:m===i.metric,onChange:()=>{O({elevationUnit:i.metric})},disabled:!Z||_}),ce),(0,a.jsx)(s.Label,{className:"d-flex align-items-center"},(0,a.jsx)(s.Radio,{style:{cursor:"pointer"},name:"elevationUnitType",className:"mr-2",checked:m===i.imperial,onChange:()=>{O({elevationUnit:i.imperial})},disabled:!Z||_}),me)))),(A||B)&&(0,a.jsx)(o.SettingSection,null,(0,a.jsx)(o.SettingRow,{flow:"wrap",label:Pe,truncateLabel:!1}),A&&(0,a.jsx)(S.Fragment,null,(0,a.jsx)(o.SettingRow,{flow:"wrap",className:"mt-0"},A&&B&&(0,a.jsx)("div",null,null==f?void 0:f.title),(0,a.jsx)(s.NumericInput,{size:"sm",className:"w-100",value:G,precision:0,min:0,onChange:e=>{z(e)},onAcceptValue:e=>{if(u===e)return;const t=e,{isValidDatumWkid:i,getDatumSRLabel:a}=D;if(i(t)){J(!1);const e=a(t);O({datumWkid:t,datumName:e})}else J(!0),O({datumWkid:"",datumName:""})},showHandlers:!1,"aria-describedby":"datum-transformation-1","aria-label":ie("datumTransformation",{wkid:"WKID"}),disabled:!Z||_})),K?(0,a.jsx)("div",{id:"datum-transformation-1",className:"text-break system-name d-flex align-items-center"},(0,a.jsx)(w,{color:C.sys.color.error.main}),(0,a.jsx)("div",{className:"invalid-tips"},de)):(0,a.jsx)(S.Fragment,null,(0,a.jsx)("div",{id:"datum-transformation-1",className:"text-break system-name d-flex align-items-center"},(0,a.jsx)("div",{className:"w-100"},p)),p&&(0,a.jsx)(s.Label,{className:"d-flex align-items-center mt-2"},(0,a.jsx)(s.Checkbox,{checked:g,className:"mr-1",onChange:e=>{O({transformForward:e.target.checked})}}),ie("useTransformationForward")))),B&&(0,a.jsx)(S.Fragment,null,(0,a.jsx)(o.SettingRow,{flow:"wrap",className:"mt-0"},A&&B&&(0,a.jsx)("div",null,null==h?void 0:h.title),(0,a.jsx)(s.NumericInput,{size:"sm",className:"w-100",value:Q,precision:0,min:0,onChange:e=>{V(e)},onAcceptValue:e=>{if(u===e)return;const t=e,{isValidDatumWkid:i,getDatumSRLabel:a}=D;if(i(t)){$(!1);const e=a(t);O({datumWkid2:t,datumName2:e})}else $(!0),O({datumWkid2:"",datumName2:""})},showHandlers:!1,"aria-describedby":"datum-transformation-2","aria-label":ie("datumTransformation",{wkid:"WKID"}),disabled:!Z||_})),Y?(0,a.jsx)("div",{id:"datum-transformation-2",className:"text-break system-name d-flex align-items-center"},(0,a.jsx)(w,{color:C.sys.color.error.main}),(0,a.jsx)("div",{className:"invalid-tips"},de)):(0,a.jsx)(S.Fragment,null,(0,a.jsx)("div",{id:"datum-transformation-2",className:"text-break system-name d-flex align-items-center"},(0,a.jsx)("div",{className:"w-100"},y)),y&&(0,a.jsx)(s.Label,{className:"d-flex align-items-center mt-2"},(0,a.jsx)(s.Checkbox,{checked:j,className:"mr-1",onChange:e=>{O({transformForward2:e.target.checked})}}),ie("useTransformationForward")))))):(0,a.jsx)(s.Loading,{type:s.LoadingType.Secondary})))};var C=d(31027),D=d.n(C),E=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)t.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(i[a[n]]=e[a[n]])}return i};const O=e=>{const t=window.SVG,{className:i}=e,n=E(e,["className"]),s=(0,a.classNames)("jimu-icon jimu-icon-component",i);return t?a.React.createElement(t,Object.assign({className:s,src:D()},n)):a.React.createElement("svg",Object.assign({className:s},n))},{useState:R,useEffect:P,useRef:L}=a.React,A={id:"",name:"",wkid:"",displayUnit:"",elevationUnit:i.metric,datumWkid:"",datumName:""},W=c=>{var m;const{id:p,theme:g,onSettingChange:I,config:x,useMapWidgetIds:y}=c,{coordinateSystem:j,showSeparators:f,coordinateDecimal:w,altitudeDecimal:b,displayOrder:N,widgetStyle:k,mapInfo:M,mapInfo2:C}=x,D=L(null),[E,W]=R(!1),[B,H]=R(null),[Z,U]=R(void 0),[G,z]=R(void 0),[Q,V]=R(!1),[_,F]=R(!1),K=a.hooks.useTranslation(l,s.defaultMessages,a.defaultMessages),J=K("selectMapWidget"),Y=K("classic"),$=K("modern"),X=K("outputCoordinateSystem"),q=K("newCoordinate"),ee=K("remove"),te=K("configureCoordinate"),ie=K("displayOptions"),ae=K("coordinateDecimal"),ne=K("altitudeDecimal"),se=K("showSeparators"),oe=K("displayOrder"),le=K("loLaMode"),re=K("laLoMode"),de=K("selectMapHint"),ce=K("style"),me=L(void 0),ue=L(null),pe=window.isExpressBuilder;P((()=>{(null==y?void 0:y.length)>0&&!Q&&a.moduleLoader.loadModule("jimu-core/wkid").then((e=>{ue.current=e,V(!0)}))}),[y]),P((()=>{y&&Q&&ge(G)}),[Q,G,y]);const ge=e=>{var t,i,a,n,s,o,l,r,d,c,m,u;if(!e)return;const p=Object.keys(e);if(p.length>0){F(!0);const{getSRLabel:g,getCSUnit:I}=ue.current,x=null===(t=null==e?void 0:e[p[0]])||void 0===t?void 0:t.view,v=null===(i=null==e?void 0:e[p[1]])||void 0===i?void 0:i.view,y=null===(a=null==x?void 0:x.spatialReference)||void 0===a?void 0:a.wkid,j=null===(n=null==v?void 0:v.spatialReference)||void 0===n?void 0:n.wkid,f=null===(o=null===(s=null==x?void 0:x.map)||void 0===s?void 0:s.portalItem)||void 0===o?void 0:o.id,w=null===(r=null===(l=null==v?void 0:v.map)||void 0===l?void 0:l.portalItem)||void 0===r?void 0:r.id;if(f===(null==M?void 0:M.id)&&w===(null==C?void 0:C.id))return;const S=null===(c=null===(d=null==x?void 0:x.map)||void 0===d?void 0:d.portalItem)||void 0===c?void 0:c.title,b=null===(u=null===(m=null==v?void 0:v.map)||void 0===m?void 0:m.portalItem)||void 0===u?void 0:u.title;Ie({mapInfo:{id:f,title:S,wkid:y,label:g(y),csUnit:I(y)},mapInfo2:{id:w,title:b,wkid:j,label:g(j),csUnit:I(j)}})}},Ie=e=>{const t=x.set("mapInfo",e.mapInfo).set("mapInfo2",e.mapInfo2);I({id:p,config:t})},xe=()=>{W(!1),me.current=void 0},ve=(e,t=!1)=>{((e,t=!1)=>{let i;i=t?D.current.getElementsByClassName("add-table-btn")[0]:D.current.getElementsByClassName("jimu-tree-item__body")[e],H(i)})(e,t),e===me.current?(W(!E),me.current=void 0):(W(!0),me.current=e)},ye=()=>{const e=j.length>0?(()=>{const e=j.map((e=>{var t;return null===(t=e.id)||void 0===t?void 0:t.split("-").reverse()[0]}));return e.length>0?Math.max.apply(null,e):0})():0;return`system-${e+1}`},je=(e,t,n)=>{var s;const o=ye(),l={id:o,name:null!==(s=null==t?void 0:t.name)&&void 0!==s?s:o,wkid:e,crs:t,displayUnit:"",elevationUnit:i.metric,datumWkid:"",datumName:""};let r;if(j[me.current]){const e=j.asMutable({deep:!0});e.splice(me.current,1,l),r=(0,a.Immutable)(e)}else r=j.concat([(0,a.Immutable)(l)]);fe("coordinateSystem",r)},fe=(e,t)=>{if(t===x[e])return;const i=x.set(e,t);I({id:p,config:i})},we=e=>{e!==k&&fe("widgetStyle",e),e===t.classic?(0,n.getAppConfigAction)().editWidgetProperty(c.id,"offPanel",!0).exec():(0,n.getAppConfigAction)().editWidgetProperty(c.id,"offPanel",!1).exec()},Se=j.length,be=(null==y?void 0:y.length)>0,he={overrideItemBlockInfo:({itemBlockInfo:e},t)=>({name:r.TreeItemActionType.RenderOverrideItem,children:[{name:r.TreeItemActionType.RenderOverrideItemDroppableContainer,children:[{name:r.TreeItemActionType.RenderOverrideItemDraggableContainer,children:[{name:r.TreeItemActionType.RenderOverrideItemBody,children:[{name:r.TreeItemActionType.RenderOverrideItemMainLine,children:[{name:r.TreeItemActionType.RenderOverrideItemDragHandle},{name:r.TreeItemActionType.RenderOverrideItemIcon,autoCollapsed:!0},{name:r.TreeItemActionType.RenderOverrideItemTitle},{name:r.TreeItemActionType.RenderOverrideItemCommands}]}]}]}]}]})};return(0,a.jsx)("div",{className:"widget-setting-coordinates jimu-widget-setting",css:h(g)},(0,a.jsx)(o.SettingSection,{title:J},(0,a.jsx)(o.SettingRow,null,(0,a.jsx)(o.MapWidgetSelector,{onSelect:e=>{I({id:p,useMapWidgetIds:e})},useMapWidgetIds:y,"aria-describedby":"coordinates-blank-msg"}))),!be&&!pe&&(0,a.jsx)("div",{className:"empty-placeholder w-100"},(0,a.jsx)("div",{className:"empty-placeholder-inner"},(0,a.jsx)("div",{className:"empty-placeholder-icon"},(0,a.jsx)(O,{size:48})),(0,a.jsx)("div",{className:"empty-placeholder-text",id:"coordinates-blank-msg"},de))),be&&(0,a.jsx)(S.Fragment,null,(0,a.jsx)(o.SettingSection,{className:"arrange-style-container",title:ce,role:"group","aria-label":ce},(0,a.jsx)(o.SettingRow,{className:"arrange_container"},(0,a.jsx)(s.Tooltip,{title:Y,placement:"bottom"},(0,a.jsx)(s.Button,{onClick:()=>{we(t.classic)},icon:!0,size:"sm",type:"tertiary",active:k===t.classic,"aria-pressed":k===t.classic},(0,a.jsx)(s.Icon,{autoFlip:!0,width:109,height:70,icon:d(51987)}))),(0,a.jsx)(s.Tooltip,{title:$,placement:"bottom"},(0,a.jsx)(s.Button,{onClick:()=>{we(t.modern)},className:"ml-2",icon:!0,size:"sm",type:"tertiary",active:k===t.modern,"aria-pressed":k===t.modern},(0,a.jsx)(s.Icon,{autoFlip:!0,width:109,height:70,icon:d(72872)}))))),(0,a.jsx)(o.SettingSection,{title:X,role:"group","aria-label":X},(0,a.jsx)("div",{ref:D},(0,a.jsx)(o.SettingRow,null,(0,a.jsx)(s.Button,{className:"w-100 text-default add-table-btn",type:"primary",onClick:()=>{ve(Se,!0)},title:q},(0,a.jsx)("div",{className:"w-100 px-2 text-truncate"},q))),(0,a.jsx)(o.SettingRow,null,(0,a.jsx)("div",{className:"setting-ui-unit-list w-100"},!!Se&&(0,a.jsx)(r.List,Object.assign({className:"setting-ui-unit-list-existing",itemsJson:Array.from(j).map(((e,t)=>({itemStateDetailContent:e,itemKey:`${t}`,itemStateTitle:e.name,itemStateChecked:t===me.current,itemStateCommands:[{label:ee,iconProps:()=>({icon:u(),size:12}),action:()=>{(e=>{me.current===e&&xe();const t=x.coordinateSystem.asMutable({deep:!0});t.splice(e,1),fe("coordinateSystem",t),me.current>e&&me.current--,n.builderAppSync.publishChangeWidgetStatePropToApp({widgetId:p,propKey:"removeLayerFlag",value:!0})})(t)}}]}))),dndEnabled:!0,onUpdateItem:(e,t)=>{const{itemJsons:i}=t.props,[a,n]=i;(e=>{const t=e.map((e=>e.itemStateDetailContent));fe("coordinateSystem",t)})(n,a.itemKey)},onClickItemBody:(e,t)=>{const{itemJsons:[i]}=t.props;ve(+i.itemKey)}},he)),Se===me.current&&E&&(0,a.jsx)(r.List,Object.assign({className:"setting-ui-unit-list-new",itemsJson:[{name:"......"}].map(((e,t)=>({itemStateDetailContent:e,itemKey:`${me.current}`,itemStateChecked:!0,itemStateTitle:e.name,itemStateCommands:[]}))),dndEnabled:!1,renderOverrideItemDetailToggle:()=>""},he)))))),(0,a.jsx)(o.SettingSection,{title:ie,role:"group","aria-label":ie},(0,a.jsx)(o.SettingRow,{flow:"wrap",label:ae},(0,a.jsx)(s.NumericInput,{size:"sm",value:w,precision:0,min:0,max:10,onChange:e=>{fe("coordinateDecimal",e)},"aria-label":ae,className:"w-100"})),(0,a.jsx)(o.SettingRow,{flow:"wrap",label:ne},(0,a.jsx)(s.NumericInput,{size:"sm",value:b,precision:0,min:0,max:10,onChange:e=>{fe("altitudeDecimal",e)},"aria-label":ne,className:"w-100"})),(0,a.jsx)(o.SettingRow,{label:se},(0,a.jsx)(s.Switch,{className:"can-x-switch",checked:f,"data-key":"showSeparators",onChange:e=>{fe("showSeparators",e.target.checked)},"aria-label":se})),(0,a.jsx)(o.SettingRow,{flow:"wrap",label:oe},(0,a.jsx)("div",{role:"radiogroup",className:"mb-4","aria-label":oe},(0,a.jsx)(s.Label,{className:"d-flex align-items-center"},(0,a.jsx)(s.Radio,{style:{cursor:"pointer"},name:"displayOrderType",className:"mr-2",checked:N===e.xy,onChange:()=>{fe("displayOrder",e.xy)}}),le),(0,a.jsx)(s.Label,{className:"d-flex align-items-center"},(0,a.jsx)(s.Radio,{style:{cursor:"pointer"},name:"displayOrderType",className:"mr-2",checked:N===e.yx,onChange:()=>{fe("displayOrder",e.yx)}}),re))))),(0,a.jsx)(v.JimuMapViewComponent,{useMapWidgetId:null==y?void 0:y[0],onActiveViewChange:e=>{U(e)},onViewsCreate:e=>{z(e)}}),(0,a.jsx)(o.SidePopper,{position:"right",title:te,isOpen:E&&!a.urlUtils.getAppIdPageIdFromUrl().pageId,toggle:xe,trigger:null==D?void 0:D.current,backToFocusNode:B},(0,a.jsx)(T,Object.assign({},null!==(m=j.asMutable({deep:!0})[me.current])&&void 0!==m?m:A,{allDataLoaded:_,useMapWidgetIds:y,theme:g,multiOptionsChange:e=>{const t=j[me.current];if(t){const i=x.setIn(["coordinateSystem",me.current.toString()],Object.assign(Object.assign({},t),e));I({id:p,config:i})}},onWkidChangeSave:(e,t)=>{j.length===me.current&&je(e,t)},onClose:xe,mapView:Z,wkidUtils:ue.current,mapInfo:M,mapInfo2:C}))))};function B(e){d.p=e}})(),c})())}}}));