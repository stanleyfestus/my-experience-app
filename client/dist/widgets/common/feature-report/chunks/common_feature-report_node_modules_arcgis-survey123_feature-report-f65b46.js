"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["vendors-extensions_widgets_common_feature-report_node_modules_arcgis-survey123_feature-report-f65b46"],{129:(e,t,r)=>{function s(e){return"function"==typeof e}function n(e){const t=e((e=>{Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}r.d(t,{S:()=>A});const o=n((e=>function(t){e(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map(((e,t)=>`${t+1}) ${e.toString()}`)).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t}));function i(e,t){if(e){const r=e.indexOf(t);0<=r&&e.splice(r,1)}}class c{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const e of t)e.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(s(r))try{r()}catch(t){e=t instanceof o?t.errors:[t]}const{_finalizers:n}=this;if(n){this._finalizers=null;for(const t of n)try{u(t)}catch(t){e=null!=e?e:[],t instanceof o?e=[...e,...t.errors]:e.push(t)}}if(e)throw new o(e)}}add(e){var t;if(e&&e!==this)if(this.closed)u(e);else{if(e instanceof c){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&i(t,e)}remove(e){const{_finalizers:t}=this;t&&i(t,e),e instanceof c&&e._removeParent(this)}}c.EMPTY=(()=>{const e=new c;return e.closed=!0,e})();const a=c.EMPTY;function l(e){return e instanceof c||e&&"closed"in e&&s(e.remove)&&s(e.add)&&s(e.unsubscribe)}function u(e){s(e)?e():e.unsubscribe()}const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},p={setTimeout(e,t,...r){const{delegate:s}=p;return(null==s?void 0:s.setTimeout)?s.setTimeout(e,t,...r):setTimeout(e,t,...r)},clearTimeout(e){const{delegate:t}=p;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function d(){}const b=f("C",void 0,void 0);function f(e,t,r){return{kind:e,value:t,error:r}}let v=null;function m(e){if(h.useDeprecatedSynchronousErrorHandling){const t=!v;if(t&&(v={errorThrown:!1,error:null}),e(),t){const{errorThrown:e,error:t}=v;if(v=null,e)throw t}}else e()}class g extends c{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,l(e)&&e.add(this)):this.destination=O}static create(e,t,r){return new y(e,t,r)}next(e){this.isStopped?T(function(e){return f("N",e,void 0)}(e),this):this._next(e)}error(e){this.isStopped?T(f("E",void 0,e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?T(b,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const _=Function.prototype.bind;function w(e,t){return _.call(e,t)}class S{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(e){x(e)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(e){x(e)}else x(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(e){x(e)}}}class y extends g{constructor(e,t,r){let n;if(super(),s(e)||!e)n={next:null!=e?e:void 0,error:null!=t?t:void 0,complete:null!=r?r:void 0};else{let t;this&&h.useDeprecatedNextContext?(t=Object.create(e),t.unsubscribe=()=>this.unsubscribe(),n={next:e.next&&w(e.next,t),error:e.error&&w(e.error,t),complete:e.complete&&w(e.complete,t)}):n=e}this.destination=new S(n)}}function x(e){var t;t=e,p.setTimeout((()=>{const{onUnhandledError:e}=h;if(!e)throw t;e(t)}))}function T(e,t){const{onStoppedNotification:r}=h;r&&p.setTimeout((()=>r(e,t)))}const O={closed:!0,next:d,error:function(e){throw e},complete:d},E="function"==typeof Symbol&&Symbol.observable||"@@observable";function C(e){return e}class k{constructor(e){e&&(this._subscribe=e)}lift(e){const t=new k;return t.source=this,t.operator=e,t}subscribe(e,t,r){const n=(o=e)&&o instanceof g||function(e){return e&&s(e.next)&&s(e.error)&&s(e.complete)}(o)&&l(o)?e:new y(e,t,r);var o;return m((()=>{const{operator:e,source:t}=this;n.add(e?e.call(n,t):t?this._subscribe(n):this._trySubscribe(n))})),n}_trySubscribe(e){try{return this._subscribe(e)}catch(t){e.error(t)}}forEach(e,t){return new(t=L(t))(((t,r)=>{const s=new y({next:t=>{try{e(t)}catch(e){r(e),s.unsubscribe()}},error:r,complete:t});this.subscribe(s)}))}_subscribe(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)}[E](){return this}pipe(...e){return(0===(t=e).length?C:1===t.length?t[0]:function(e){return t.reduce(((e,t)=>t(e)),e)})(this);var t}toPromise(e){return new(e=L(e))(((e,t)=>{let r;this.subscribe((e=>r=e),(e=>t(e)),(()=>e(r)))}))}}function L(e){var t;return null!==(t=null!=e?e:h.Promise)&&void 0!==t?t:Promise}k.create=e=>new k(e);const P=n((e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}));class I extends k{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){const t=new j(this,this);return t.operator=e,t}_throwIfClosed(){if(this.closed)throw new P}next(e){m((()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const t of this.currentObservers)t.next(e)}}))}error(e){m((()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;const{observers:t}=this;for(;t.length;)t.shift().error(e)}}))}complete(){m((()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:e}=this;for(;e.length;)e.shift().complete()}}))}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){const{hasError:t,isStopped:r,observers:s}=this;return t||r?a:(this.currentObservers=null,s.push(e),new c((()=>{this.currentObservers=null,i(s,e)})))}_checkFinalizedStatuses(e){const{hasError:t,thrownError:r,isStopped:s}=this;t?e.error(r):s&&e.complete()}asObservable(){const e=new k;return e.source=this,e}}I.create=(e,t)=>new j(e,t);class j extends I{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:a}}class A{static getService(){return A.instance||(A.instance=new A),A.instance}constructor(){this._data=new I,this._dataStream$=this._data.asObservable(),this._subscriptions=new Map,this._dataStream$.subscribe((e=>this._onEvent(e)))}notifyDataChanged(e,t){t=Object.assign({value:null,ignoreSameValueEvent:!1},t||{});const r=this._data[e];t.ignoreSameValueEvent&&r!==t.value||(this._data[e]=t.value,this._data.next({event:e,data:this._data[e]}))}notifyDataChangedByName(e,t){if(this._subscriptions.size>0){const r=this._subscriptions.keys();let s=r.next();for(;!s.done;)-1!==s.value.indexOf(e)&&this.notifyDataChanged(s.value,t),s=r.next()}}subscribe(e,t){const r=this._subscriptions.get(e)||[];r.push(t),this._subscriptions.set(e,r);const s={};return e&&(s[e]=t),s}unSubscribe(e){if(e)for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){if(t&&t.length){const r=this._subscriptions.get(t)||[],s=e[t];for(let e=0;e<r.length;e++)s===r[e]&&r.splice(e,1);this._subscriptions.set(t,r),0===r.length&&this._subscriptions.delete(t)}return}}_onEvent(e){(this._subscriptions.get(e.event)||[]).forEach((t=>{t.call(null,e.data)}))}}},312:(e,t,r)=>{r.d(t,{P:()=>n,T:()=>c});var s=r(183);class n{static setProps(e){const t=n.paramesWhitelist;let r="";const s=window.location.hostname.match(/survey123(.*?).arcgis.com/);s&&s[1]&&["dev","qa","beta"].includes(s[1])&&(r=s[1]);const o={apiUrl:`https://survey123${r}.arcgis.com/api/featureReport`,itemId:null,token:null,outputFormat:"docx",portalUrl:"https://www.arcgis.com",locale:this.getLocale(),f:"json"};if("object"==typeof e)for(let r in e)t.indexOf(r)>=0&&(n[r]=e[r]||o[r]||e[r],"locale"===r&&e[r]&&(n[r]=this.convertToSupportedLang(e[r])));"docx"!==n.outputFormat&&"pdf"!==n.outputFormat&&(n.outputFormat="docx")}static getLocale(e){let t=(e=Object.assign({},e||{})).userInfo||{},r=e.portalInfo||{};const s=navigator.language||navigator.userLanguage;return this.convertToSupportedLang(e.userDefinedLocale)||this.convertToSupportedLang(t.culture)||this.convertToSupportedLang(r.culture)||this.convertToSupportedLang(s)||"en"}static convertToSupportedLang(e){e=((e=e||"")+"").toLowerCase();const t=["ar","bg","bs","ca","cs","da","de","el","en","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw"].find((t=>t.toLowerCase()===e||t.toLowerCase()===e.split("-")[0]||t.toLowerCase().split("-")[0]===e));return["en-US","en-GB","en-AU","en-CA","es-ES","es-MX","it-CH","de-CH","de-AT","fr-CH"].find((t=>t.toLowerCase()===e))||t}}n.paramesWhitelist=["token","portalUrl","apiUrl","featureLayerUrl","surveyItemId","templateItemId","queryParameters","mergeFiles","outputFormat","outputReportName","outputPackageName","packageFiles","uploadInfo","webmapItemId","mapScale","locale","utcOffset","where","username","show","hide","inputFeatureTemplate","label","reportTemplateIds","clientId","requestSource"];const o="en",i=["ar","bg","bs","ca","cs","da","de","el",o,"es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","no","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw"];class c{static getService(){return this.service||(this.service=new c),this.service}getTranslate(){const e=this.getSupportedLocale(n.locale||"en");return Promise.resolve(!0).then((()=>{if(this.cache&&this.cache[e])try{return JSON.parse(this.cache[e])}catch(e){return null}})).then((t=>t||fetch((0,s.g)(`./assets/i18n/${e}.json`)).then((e=>{if(!e.ok)throw new Error("could not fetch the translate json file");return e.json()})))).then((t=>{if(t){if(this.cache=this.cache||{},!this.cache[e])try{this.cache[e]=JSON.stringify(t)}catch(e){}if(n.label){const e={inputFeatures:"inputFeatures",selectTemplate:"chooseTemplateLabel1",reportSetting:"resultSettingsLabel1",fileOptions:"outputMode",reportName:"saveToAGOItemName",saveToAGSAccount:"saveToAGOFolder",outputFormat:"outputFormat",showCredits:"creditsEstimate",generateReport:"generate",previewMode:"previewReport"},r=JSON.parse(n.label);Object.keys(r).forEach((s=>{const n=r[s];"recentReports"===s&&(t.customPrint.recentTasks.label=n);const o=e[s];["inputFeatures","selectTemplate","reportSetting","fileOptions","reportName","saveToAGSAccount","outputFormat","showCredits","generateReport","previewReport"].indexOf(s)>=0&&(t.customPrint[o]=n)}))}c.currentLangObj=t}return t})).catch((e=>{throw new Error(e)}))}getTranslateSync(){return c.currentLangObj}getSupportedLocale(e){const t=i;return e?t.includes(e)?e:"nb"===(e=e.toLowerCase())?"no":"pt"===e?"pt-br":(e.includes("-")&&(e=e.replace(/(\w+)-(\w+)/,((e,t,r)=>`${t}-${r.toUpperCase()}`)),t.includes(e)||(e=e.split("-")[0])),"zh"===e?"zh-cn":t.includes(e)?e:(console.warn(`Translations for the "${e}" locale are not available and will fall back to the default, English (en).`),o)):o}}}}]);