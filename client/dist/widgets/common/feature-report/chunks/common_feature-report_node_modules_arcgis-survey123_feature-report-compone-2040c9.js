"use strict";(self.webpackChunkexb_client=self.webpackChunkexb_client||[]).push([["extensions_widgets_common_feature-report_node_modules_arcgis-survey123_feature-report-compone-2040c9"],{833:(e,t,o)=>{o.r(t),o.d(t,{error_detail_modal:()=>d,success_detail_modal:()=>l});var a=o(183),r=o(312),s=o(543);const d=class{constructor(e){(0,a.r)(this,e),this.job=void 0,this.open=void 0,this.maxFailedOIDLength=void 0}componentWillLoad(){return this.utilService=s.U.getService(),Promise.resolve(!0).then((()=>r.T.getService().getTranslate())).then((e=>{const t=e.customPrint.recentTasks;this.langTasks=t,this.langCommon=e.common}))}componentDidRender(){this.updateFailedOIDlength(this.job)}updateFailedOIDlength(e){if(this.maxFailedOIDLength>0)return;let t=120;const o=this.modal.shadowRoot.querySelector(".helperSpan");return e.failedInfo&&e.failedInfo.length&&o&&e.failedInfo.forEach((e=>{o.innerHTML=e.objectIds,o.offsetWidth>t&&(t=o.offsetWidth)})),this.maxFailedOIDLength=t,t}render(){return(0,a.h)(a.H,{key:"81b21c37ba79081bd7ea428728ba5282a28370d1"},(0,a.h)("div",{key:"7466c40d62a608ab8b78f41fb2aa47c766c8be55",class:"helper"},(0,a.h)("div",{key:"e603e24f3ab2b099cf05221868c29bd4ad55edd6"},(0,a.h)("span",{key:"1538f25833d40d862430b0067a877c6856f1ec4d",class:"helperSpan"}))),(0,a.h)("calcite-modal",{key:"4f9f0e140f7f2aa8987dc2597148d8285f85baad",open:this.open,"aria-labelledby":"modal-title",onCalciteModalClose:()=>{this.open=!1},id:"example-modal"},(0,a.h)("div",{key:"de54acb19422540bda3d1ac22765d9844afea002",slot:"header",id:"modal-title"},this.langTasks.detailFailedOIDs,this.job.resultInfo&&this.job.resultInfo.failedObjectIds&&this.job.resultInfo.failedObjectIds.length?" ("+this.job.resultInfo.failedObjectIds.length+") ":""),(0,a.h)("div",{key:"9469ea945350c608d1dbea86b82fa3afe26ddac7",slot:"content"},(0,a.h)("div",{key:"2f739d25309cc144f1a85c2031fd6facd50485b3",class:"error-table-outter",style:{maxHeight:`${this.errorModalMaxHeight}`,overflow:"auto"}},this.job&&this.job.failedInfo&&this.job.failedInfo.length?(0,a.h)("table",{class:"table table-striped table-bordered error-table"},(0,a.h)("thead",null,(0,a.h)("tr",null,(0,a.h)("th",{class:"objectId-td",style:{width:`${this.maxFailedOIDLength+16}px`}},this.langTasks.detailFailedOIDs),(0,a.h)("th",null,this.langTasks.detailStatusMsg))),(0,a.h)("tbody",null,this.job.failedInfo.map((e=>(0,a.h)("tr",null,(0,a.h)("td",null,(0,a.h)("div",{class:"objectId-td",style:{width:`${this.maxFailedOIDLength}px`}},e.objectIds)),(0,a.h)("td",null,(0,a.h)("div",{class:"message",innerHTML:this.utilService.parseMarkdown(e.messages)}))))))):""))),(0,a.h)("slot",{key:"67699058b0493e01f0d020a75264ace240666df8"}))}get modal(){return(0,a.a)(this)}};d.style=":host{display:block}:host .helper{width:0;height:0;overflow:hidden;visibility:hidden}:host .helper div{width:9999px}:host .helper span{padding:8px}:host .error-table-outter{width:100%;overflow:auto}:host .table{width:100%;max-width:100%;margin-bottom:20px;border-spacing:0;border-collapse:collapse}:host .table>thead>tr>th,:host .table>tbody>tr>th,:host .table>tfoot>tr>th,:host .table>thead>tr>td,:host .table>tbody>tr>td,:host .table>tfoot>tr>td{padding:8px;line-height:1.42857143;vertical-align:top;border-top:1px solid #dddddd}:host .table-bordered>thead>tr>th,:host .table-bordered>tbody>tr>th,:host .table-bordered>tfoot>tr>th,:host .table-bordered>thead>tr>td,:host .table-bordered>tbody>tr>td,:host .table-bordered>tfoot>tr>td{border:1px solid #dddddd}:host .table>thead>tr>th{vertical-align:bottom;border-bottom:2px solid #dddddd}:host .table-bordered{border:1px solid #ddd}:host .error-table{margin-bottom:0;table-layout:fixed}:host .error-table .objectId-td{width:120px;max-width:254px;overflow:hidden;word-wrap:break-word}:host .error-table .message{max-width:560px;overflow:auto;word-wrap:break-word}";const l=class{constructor(e){(0,a.r)(this,e),this.job=void 0,this.open=void 0}componentWillLoad(){return Promise.resolve(!0).then((()=>{const e=r.T.getService().getTranslateSync(),t=e.customPrint.recentTasks;this.langTasks=t,this.langCommon=e.common}))}render(){return(0,a.h)(a.H,{key:"ae3fe28b2e65fa5c1cecb4c67012ae40461c54d6"},(0,a.h)("calcite-modal",{key:"01ba839a077cd65e65bcb428b07f52ef0a5a9d19",open:this.open,onCalciteModalClose:()=>{this.open=!1},"aria-labelledby":"modal-title",id:"example-modal"},(0,a.h)("div",{key:"d4707e7fd8bcb766ecd11dbc528911be2b3efa2a",slot:"header",id:"modal-title"},this.langTasks.detailSucceededOIDs,this.job.resultInfo&&this.job.resultInfo.succeededObjectIds&&this.job.resultInfo.succeededObjectIds.length?" ("+this.job.resultInfo.succeededObjectIds.length+") ":""),(0,a.h)("div",{key:"15db7a7c34fec0cc4b6dd05348a8fa3227e23e18",slot:"content"},(0,a.h)("div",{key:"473645a8391ac27ac19569361263c9dd98eeacd0",class:"error-table-outter",style:{maxHeight:`${this.errorModalMaxHeight}`}},this.job&&this.job.resultInfo&&this.job.resultInfo.succeededObjectIds&&this.job.resultInfo.succeededObjectIds.length?(0,a.h)("table",{class:"table table-striped table-bordered error-table"},(0,a.h)("tbody",null,(0,a.h)("tr",null,(0,a.h)("td",null,(0,a.h)("div",{class:"message",style:{maxWidth:"720px"}},this.job.resultInfo.succeededObjectIds))))):""))),(0,a.h)("slot",{key:"4f706644c22334fb432ac77dc7944f8d9606f56b"}))}get modal(){return(0,a.a)(this)}};l.style=":host{display:block}:host .error-table-outter{width:100%;overflow:auto}:host .table{width:100%;max-width:100%;margin-bottom:20px;border-spacing:0;border-collapse:collapse}:host .table>thead>tr>th,:host .table>tbody>tr>th,:host .table>tfoot>tr>th,:host .table>thead>tr>td,:host .table>tbody>tr>td,:host .table>tfoot>tr>td{padding:8px;line-height:1.42857143;vertical-align:top;border-top:1px solid #dddddd}:host .table-bordered>thead>tr>th,:host .table-bordered>tbody>tr>th,:host .table-bordered>tfoot>tr>th,:host .table-bordered>thead>tr>td,:host .table-bordered>tbody>tr>td,:host .table-bordered>tfoot>tr>td{border:1px solid #dddddd}:host .table>thead>tr>th{vertical-align:bottom;border-bottom:2px solid #dddddd}:host .table-bordered{border:1px solid #ddd}:host .error-table{margin-bottom:0;table-layout:fixed}:host .error-table .objectId-td{width:120px;max-width:254px;overflow:hidden;word-wrap:break-word}:host .error-table .message{max-width:560px;overflow:auto;word-wrap:break-word}"},312:(e,t,o)=>{o.d(t,{P:()=>r,T:()=>l});var a=o(183);class r{static setProps(e){const t=r.paramesWhitelist;let o="";const a=window.location.hostname.match(/survey123(.*?).arcgis.com/);a&&a[1]&&["dev","qa","beta"].includes(a[1])&&(o=a[1]);const s={apiUrl:`https://survey123${o}.arcgis.com/api/featureReport`,itemId:null,token:null,outputFormat:"docx",portalUrl:"https://www.arcgis.com",locale:this.getLocale(),f:"json"};if("object"==typeof e)for(let o in e)t.indexOf(o)>=0&&(r[o]=e[o]||s[o]||e[o],"locale"===o&&e[o]&&(r[o]=this.convertToSupportedLang(e[o])));"docx"!==r.outputFormat&&"pdf"!==r.outputFormat&&(r.outputFormat="docx")}static getLocale(e){let t=(e=Object.assign({},e||{})).userInfo||{},o=e.portalInfo||{};const a=navigator.language||navigator.userLanguage;return this.convertToSupportedLang(e.userDefinedLocale)||this.convertToSupportedLang(t.culture)||this.convertToSupportedLang(o.culture)||this.convertToSupportedLang(a)||"en"}static convertToSupportedLang(e){e=((e=e||"")+"").toLowerCase();const t=["ar","bg","bs","ca","cs","da","de","el","en","es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw"].find((t=>t.toLowerCase()===e||t.toLowerCase()===e.split("-")[0]||t.toLowerCase().split("-")[0]===e));return["en-US","en-GB","en-AU","en-CA","es-ES","es-MX","it-CH","de-CH","de-AT","fr-CH"].find((t=>t.toLowerCase()===e))||t}}r.paramesWhitelist=["token","portalUrl","apiUrl","featureLayerUrl","surveyItemId","templateItemId","queryParameters","mergeFiles","outputFormat","outputReportName","outputPackageName","packageFiles","uploadInfo","webmapItemId","mapScale","locale","utcOffset","where","username","show","hide","inputFeatureTemplate","label","reportTemplateIds","clientId","requestSource"];const s="en",d=["ar","bg","bs","ca","cs","da","de","el",s,"es","et","fi","fr","he","hr","hu","id","it","ja","ko","lt","lv","no","nl","pl","pt-br","pt-pt","ro","ru","sk","sl","sr","sv","th","tr","uk","vi","zh-cn","zh-hk","zh-tw"];class l{static getService(){return this.service||(this.service=new l),this.service}getTranslate(){const e=this.getSupportedLocale(r.locale||"en");return Promise.resolve(!0).then((()=>{if(this.cache&&this.cache[e])try{return JSON.parse(this.cache[e])}catch(e){return null}})).then((t=>t||fetch((0,a.g)(`./assets/i18n/${e}.json`)).then((e=>{if(!e.ok)throw new Error("could not fetch the translate json file");return e.json()})))).then((t=>{if(t){if(this.cache=this.cache||{},!this.cache[e])try{this.cache[e]=JSON.stringify(t)}catch(e){}if(r.label){const e={inputFeatures:"inputFeatures",selectTemplate:"chooseTemplateLabel1",reportSetting:"resultSettingsLabel1",fileOptions:"outputMode",reportName:"saveToAGOItemName",saveToAGSAccount:"saveToAGOFolder",outputFormat:"outputFormat",showCredits:"creditsEstimate",generateReport:"generate",previewMode:"previewReport"},o=JSON.parse(r.label);Object.keys(o).forEach((a=>{const r=o[a];"recentReports"===a&&(t.customPrint.recentTasks.label=r);const s=e[a];["inputFeatures","selectTemplate","reportSetting","fileOptions","reportName","saveToAGSAccount","outputFormat","showCredits","generateReport","previewReport"].indexOf(a)>=0&&(t.customPrint[s]=r)}))}l.currentLangObj=t}return t})).catch((e=>{throw new Error(e)}))}getTranslateSync(){return l.currentLangObj}getSupportedLocale(e){const t=d;return e?t.includes(e)?e:"nb"===(e=e.toLowerCase())?"no":"pt"===e?"pt-br":(e.includes("-")&&(e=e.replace(/(\w+)-(\w+)/,((e,t,o)=>`${t}-${o.toUpperCase()}`)),t.includes(e)||(e=e.split("-")[0])),"zh"===e?"zh-cn":t.includes(e)?e:(console.warn(`Translations for the "${e}" locale are not available and will fall back to the default, English (en).`),s)):s}}}}]);