System.register(["jimu-core"],(function(t,e){var o={};return{setters:[function(t){o.AbstractDataAction=t.AbstractDataAction,o.DataLevel=t.DataLevel,o.DataSourceStatus=t.DataSourceStatus,o.appActions=t.appActions,o.getAppStore=t.getAppStore}],execute:function(){t((()=>{"use strict";var t={79244:t=>{t.exports=o}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,n),i.exports}n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};n.r(r),n.d(r,{default:()=>p});var i,a,u,d,c,s=n(79244);!function(t){t.Attribute="ATTRIBUTE",t.Geometry="GEOMETRY"}(i||(i={})),function(t){t.Webmap="WEBMAP",t.Custom="CUSTOM"}(a||(a={})),function(t){t.Added="Added",t.Updated="Updated",t.Deleted="Deleted"}(u||(u={})),function(t){t.NoMap="NOMAP",t.NoLayer="NOEDITABLE"}(d||(d={})),function(t){t.Prescriptive="PRESCRIPTIVE",t.Flexible="FLEXIBLE"}(c||(c={}));var l=function(t,e,o,n){return new(o||(o=Promise))((function(r,i){function a(t){try{d(n.next(t))}catch(t){i(t)}}function u(t){try{d(n.throw(t))}catch(t){i(t)}}function d(t){var e;t.done?r(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(a,u)}d((n=n.apply(t,e||[])).next())}))};class p extends s.AbstractDataAction{isSupported(t,e,o){return l(this,void 0,void 0,(function*(){var o;let n=!1,r=!1;const a=t[0],{dataSource:u,records:d}=a,c=(0,s.getAppStore)().getState(),l=null==c?void 0:c.appConfig,p=null===(o=null==c?void 0:c.widgetsRuntimeInfo[this.widgetId])||void 0===o?void 0:o.controllerWidgetId,f=null==l?void 0:l.widgets[this.widgetId];if(!f)return;const{layersConfig:v,mapViewsConfig:g,editMode:S}=f.config;if(S===i.Geometry)if(g)for(const t in g){g[t].customJimuLayerViewIds.forEach((t=>{t.includes(u.id)&&(r=!0)}))}else r=!0;else r=v.find((t=>t.useDataSource.dataSourceId===u.id));return r&&e===s.DataLevel.Records&&(null==d?void 0:d.length)>0&&p&&(n=!0),n&&u.getStatus()!==s.DataSourceStatus.NotReady}))}onExecute(t,e,o){return l(this,void 0,void 0,(function*(){return(0,s.getAppStore)().dispatch(s.appActions.openWidgets([this.widgetId])),!0}))}}return r})())}}}));