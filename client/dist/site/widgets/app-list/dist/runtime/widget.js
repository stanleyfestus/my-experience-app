System.register(["jimu-core","jimu-for-builder","jimu-for-builder/service","jimu-theme","jimu-ui","jimu-ui/basic/item-selector"],(function(e,t){var i={},s={},a={},o={},l={},r={};return{setters:[function(e){i.FormattedDate=e.FormattedDate,i.Immutable=e.Immutable,i.React=e.React,i.SessionManager=e.SessionManager,i.classNames=e.classNames,i.css=e.css,i.defaultMessages=e.defaultMessages,i.getAppStore=e.getAppStore,i.hooks=e.hooks,i.isKeyboardMode=e.isKeyboardMode,i.jsx=e.jsx,i.lodash=e.lodash,i.moduleLoader=e.moduleLoader,i.polished=e.polished,i.privilegeUtils=e.privilegeUtils,i.queryString=e.queryString,i.urlUtils=e.urlUtils,i.utils=e.utils,i.version=e.version},function(e){s.DownloadAppModal=e.DownloadAppModal,s.utils=e.utils},function(e){a.AppType=e.AppType,a.SearchType=e.SearchType,a.appServices=e.appServices},function(e){o.useTheme=e.useTheme,o.withTheme=e.withTheme},function(e){l.AlertPopup=e.AlertPopup,l.Button=e.Button,l.ButtonGroup=e.ButtonGroup,l.Card=e.Card,l.CardBody=e.CardBody,l.Container=e.Container,l.Dropdown=e.Dropdown,l.DropdownButton=e.DropdownButton,l.DropdownItem=e.DropdownItem,l.DropdownMenu=e.DropdownMenu,l.Modal=e.Modal,l.ModalBody=e.ModalBody,l.ModalFooter=e.ModalFooter,l.ModalHeader=e.ModalHeader,l.Nav=e.Nav,l.NavItem=e.NavItem,l.NavLink=e.NavLink,l.Navbar=e.Navbar,l.Option=e.Option,l.Select=e.Select,l.TagInput=e.TagInput,l.TextArea=e.TextArea,l.TextInput=e.TextInput,l.Tooltip=e.Tooltip,l.defaultMessages=e.defaultMessages},function(e){r.SortOrder=e.SortOrder}],execute:function(){e((()=>{var e={664:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="#00C9DD" d="m0 9 4 2v5l-4-2zm4-7 4 2v5L4 7zm4 7 4 2v5l-4-2z"></path><path fill="#70F2FF" d="m0 9 4-2 4 2-4 2zm4-7 4-2 4 2-4 2zm4 7 4-2 4 2-4 2z"></path><path fill="#008197" d="m4 11 4-2v5l-4 2zm4-7 4-2v5L8 9zm4 7 4-2v4.667L12 16z"></path></g><defs><clipPath id="a"><path fill="#fff" d="M0 0h16v16H0z"></path></clipPath></defs></svg>'},547:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m8 .5 2.373 5.07L16 6.23l-4.16 3.792 1.104 5.478L8 12.773 3.056 15.5l1.102-5.478L0 6.229l5.625-.66z"></path></svg>'},651:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2 7a1 1 0 1 0 0 2 1 1 0 0 0 0-2m5 1a1 1 0 1 1 2 0 1 1 0 0 1-2 0m6 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0" clip-rule="evenodd"></path></svg>'},56:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 2a2 2 0 1 0-2 2H4a2 2 0 0 0-2 2v4a1 1 0 0 0 1 1h1a1 1 0 0 0 1 1V7H4v3H3V6a1 1 0 0 1 1-1h3.184a3 3 0 0 1 .596-1H6a2 2 0 0 0 2-2M6 3a1 1 0 1 1 0-2 1 1 0 0 1 0 2m6 3a2 2 0 1 0-2 2H8a2 2 0 0 0-2 2v4a1 1 0 0 0 1 1h1a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1h1a1 1 0 0 0 1-1v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0 2-2M9 6a1 1 0 1 0 2 0 1 1 0 0 0-2 0m4 8v-4a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v4h1v-3h1v4h2v-4h1v3z" clip-rule="evenodd"></path></svg>'},674:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 0a4 4 0 0 1 4 4v3a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2V4a4 4 0 0 1 4-4M5 7h1V4a2 2 0 1 1 4 0v3h1V4a3 3 0 0 0-6 0zm4 0V4a1 1 0 0 0-2 0v3zm3 1H4a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V9a1 1 0 0 0-1-1M7 9h1v1h1v1H8v1h1v1H8v1H7z" clip-rule="evenodd"></path></svg>'},266:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M9 2v1h5a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H9v-4H8v4H3a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2V2a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1m1 10v3h4a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1H8V2H4v2H3a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h4v-3a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1M7 9h3V6H7zm2-2H8v1h1zm2-1v3h3V6zm1 2h1V7h-1zM3 9h3V6H3zm2-2H4v1h1z" clip-rule="evenodd"></path></svg>'},140:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 0a8 8 0 1 0 0 16A8 8 0 0 0 8 0m3.83 3.162c.067.24.01.47-.273.47a.67.67 0 0 0 .16-.55l.012.009q.055.037.1.071zm-.371-.95zm0 0 .206.072a.8.8 0 0 0-.428.158.4.4 0 0 1 .222-.23M7.792 1.01q.319-.029.638.012l-.054.083-.1-.004c-.173-.007-.462-.02-.553-.006.04-.04.04-.043.042-.047.001-.004.003-.009.028-.038zM2.113 11.777q.192.3.414.58a1 1 0 0 1 .166-.175 7 7 0 0 0-.58-.405m8.02 2.89a6.99 6.99 0 0 1-7.058-1.695c-.003-.07 0-.08.059-.122 1-.692.512-1.033-1.055-2.047-.123-.084-.179-.132-.19-.165-.049-1.08-.069-1.115-.236-1.41-.09-.157-.223-.39-.426-.903a2 2 0 0 0-.222-.427 6.97 6.97 0 0 1 1.911-4.701q.15.003.276.01c.44.023.697.036.9-.483.015-.04.06-.16.073-.121.156.009.273.038.369.061.335.083.43.107 1.149-.961q.11-.167.157-.36.3-.097.613-.166c-.465.623-.137 1.095.319 1.095.064 0 .22-.067.402-.146.22-.096.482-.21.668-.241l.22.013c.454.03.678.046.981-.35q.125-.226.3-.416a7 7 0 0 1 1.548.498c-.294.224-.322.322-.359.45a1 1 0 0 1-.201.388c-.334.444-.017.803.425 1.138a2 2 0 0 0-.28.242.6.6 0 0 0-.223-.321.67.67 0 0 0-.735-.596.599.599 0 0 0-.147 1.122c.01.197.12.376.292.473-.145.214-.097.373-.035.58l.025.083c-.023 0-.082-.013-.148-.028a1.4 1.4 0 0 0-.226-.041c-.72 0-.785 1.215-.46 1.543-.734.632-.802.776-.895.971l-.022.046a1.92 1.92 0 0 0-1.248 1.686.5.5 0 0 1-.16.403.53.53 0 0 0-.157.279c-.102.485.146.728.435 1.006.14.137.187.267.235.403.062.172.127.354.393.57.518.432.805.388 1.404.298l.199-.03a2.34 2.34 0 0 1 1.257.134c.09.021.181.057.1.298a.596.596 0 0 0 .133.739.28.28 0 0 1 .11.19c.031.397-.053.484-.186.621-.081.084-.18.186-.284.389zm.583-8.812-.2-.098.113.209a.84.84 0 0 1-.315.284.7.7 0 0 1-.094.14c.019.025-.069.16-.089.185.682-.151 1.73-.077 1.63.616.186.205.43.35.698.416a.533.533 0 0 1 .656-.356c.072 0 .143.034.212.068.047.023.093.045.138.057q.272-.02.52-.136a1.3 1.3 0 0 0-.088-.284 1.6 1.6 0 0 0-.27-.038c-.184-.015-.34-.027-.487-.217a.593.593 0 0 1-.914-.493 2 2 0 0 0-.325-.339c-.326.324-.52.198-.83-.002l-.1-.064a.31.31 0 0 0-.255.052m-1.196.124L9.46 5.97a2 2 0 0 0-.005.147.7.7 0 0 1 .063-.137h.001zm1.844 8.159zm-.241-1.172c.275.324.366.766.241 1.172a6.994 6.994 0 0 0 .786-11.766l-.022.005q-.012.005-.024.006c1.222.672.219 2.643-.96 1.935a.87.87 0 0 1-.691.33.8.8 0 0 1-.065.216l.033.098a.8.8 0 0 1 .36.04.95.95 0 0 1 .705.183c.585-.355 1.233.179 1.488.733a.8.8 0 0 1 .72.205.945.945 0 0 1 .935.511 1.3 1.3 0 0 1 .112.342v-.001c.314.902-.943 1.41-1.646 1.118-.571.749-1.988.007-2.121-.763a3.4 3.4 0 0 0-.521.017c-.372.033-.68.06-.944-.26-.085.127-.362.382-.56.564a2 2 0 0 0-.208.201c-.18.476-.408.548-.63.618-.244.077-.482.153-.646.758a2 2 0 0 0-.043.332c-.014.223-.025.41-.29.703.24.224.435.492.573.79.172.585.576.531 1.1.462.347-.046.746-.098 1.165.022.075.026.332.082.432.104l.041.009a.954.954 0 0 1 .68 1.316" clip-rule="evenodd"></path></svg>'},961:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M10.373 5.57 8 .5 5.625 5.57 0 6.23l4.158 3.792L3.056 15.5 8 12.773l4.944 2.727-1.103-5.478L16 6.229zM8 2.857l1.705 3.641 4.002.469-2.957 2.697.788 3.918L8 11.631l-3.539 1.951.79-3.918-2.959-2.697 4.002-.469z" clip-rule="evenodd"></path></svg>'},357:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M1 1h5v5H1zM0 1a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v6H1a1 1 0 0 1-1-1zm1 9h5v5H1zm-1 0a1 1 0 0 1 1-1h6v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1zm15 0h-5v5h5zM9 9v6a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1v-5a1 1 0 0 0-1-1zm1-8h5v5h-5zM9 1a1 1 0 0 1 1-1h5a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H9z" clip-rule="evenodd"></path></svg>'},131:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M3 2.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0M5.5 2a.5.5 0 0 0 0 1h10a.5.5 0 0 0 0-1zM5 8.5a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1h-10a.5.5 0 0 1-.5-.5m.5 5.5a.5.5 0 0 0 0 1h10a.5.5 0 0 0 0-1zm-4-4a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3M3 14.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0" clip-rule="evenodd"></path></svg>'},529:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 12c-2.667 0-5.667-1.333-7-4 1.333-2.667 4.333-4 7-4s5.667 1.333 7 4c-1.333 2.667-4.333 4-7 4m0-7c-2.618 0-4.578.967-6 3 1.422 2.033 3.382 3 6 3s4.578-.967 6-3c-1.422-2.033-3.382-3-6-3m0 5.5a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5m0-1a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3" clip-rule="evenodd"></path></svg>'},655:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M2.146 4.653a.485.485 0 0 1 .708 0L8 10.24l5.146-5.587a.485.485 0 0 1 .708 0 .54.54 0 0 1 0 .738l-5.5 5.956a.485.485 0 0 1-.708 0l-5.5-5.956a.54.54 0 0 1 0-.738" clip-rule="evenodd"></path></svg>'},962:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M1.5 3a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1zM1 6.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5M1.5 9a.5.5 0 0 0 0 1h10a.5.5 0 0 0 0-1zM1.5 12a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1z"></path></svg>'},578:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M1.5 13a.5.5 0 0 1 0-1h4a.5.5 0 0 1 0 1zM1 9.5a.5.5 0 0 0 .5.5h7a.5.5 0 0 0 0-1h-7a.5.5 0 0 0-.5.5M1.5 7a.5.5 0 0 1 0-1h10a.5.5 0 0 1 0 1zM1.5 4a.5.5 0 0 1 0-1h13a.5.5 0 0 1 0 1z"></path></svg>'},838:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="m8.745 8 6.1 6.1a.527.527 0 1 1-.745.746L8 8.746l-6.1 6.1a.527.527 0 1 1-.746-.746l6.1-6.1-6.1-6.1a.527.527 0 0 1 .746-.746l6.1 6.1 6.1-6.1a.527.527 0 0 1 .746.746z"></path></svg>'},46:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M11.227 1.312c-.404-.404-1.045-.417-1.432-.03L2.49 8.587l-.48 2.674a.637.637 0 0 0 .73.73l2.673-.48 7.305-7.306c.387-.387.374-1.028-.03-1.431zm-8.114 9.575.32-1.781 4.991-4.992 1.462 1.462-4.992 4.991zm7.473-6.012 1.402-1.4-1.462-1.463-1.401 1.402z" clip-rule="evenodd"></path><path fill="#000" d="M1.5 14a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1z"></path></svg>'},921:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8.027.516A.52.52 0 0 0 7.5 0a.52.52 0 0 0-.527.516v9.508L4.4 7.527a.535.535 0 0 0-.746 0 .51.51 0 0 0 0 .73L7.5 12l3.846-3.743a.51.51 0 0 0 0-.73.535.535 0 0 0-.746 0l-2.573 2.497zM1 8v7h13V8h1v8H0V8z" clip-rule="evenodd"></path></svg>'},443:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M6 1H1v14h14v-5h-1v4H2V2h4zm4 1h3.242L7.257 7.985l.707.707L14 2.657V6h1V1h-5z" clip-rule="evenodd"></path></svg>'},662:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M7.5 0a.5.5 0 0 0-.5.5V7H.5a.5.5 0 0 0 0 1H7v6.5a.5.5 0 0 0 1 0V8h6.5a.5.5 0 0 0 0-1H8V.5a.5.5 0 0 0-.5-.5"></path></svg>'},170:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0m-1.27 4.936a6.5 6.5 0 1 1 .707-.707l4.136 4.137a.5.5 0 1 1-.707.707z" clip-rule="evenodd"></path></svg>'},508:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" d="M8 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2M6.5 7.5A.5.5 0 0 1 7 7h1.5v4.5h1a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1h1V8H7a.5.5 0 0 1-.5-.5"></path><path fill="#000" fill-rule="evenodd" d="M8 16A8 8 0 1 1 8 0a8 8 0 0 1 0 16m0-1A7 7 0 1 0 8 1a7 7 0 0 0 0 14" clip-rule="evenodd"></path></svg>'},996:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 16"><path fill="#000" fill-rule="evenodd" d="M8 2.125 14.334 14H1.667zm-.882-.47a1 1 0 0 1 1.765 0l6.333 11.874A1 1 0 0 1 14.334 15H1.667a1 1 0 0 1-.882-1.47zM8 4.874a.905.905 0 0 0-.9.995l.35 3.507a.552.552 0 0 0 1.1 0L8.9 5.87a.905.905 0 0 0-.9-.995m1 7a1 1 0 1 1-2 0 1 1 0 0 1 2 0" clip-rule="evenodd"></path></svg>'},244:e=>{"use strict";e.exports=i},108:e=>{"use strict";e.exports=s},860:e=>{"use strict";e.exports=a},888:e=>{"use strict";e.exports=o},321:e=>{"use strict";e.exports=l},340:e=>{"use strict";e.exports=r}},t={};function n(i){var s=t[i];if(void 0!==s)return s.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="";var p={};return n.p=window.jimuConfig.baseUrl,(()=>{"use strict";n.r(p),n.d(p,{__set_webpack_public_path__:()=>qt,default:()=>Ht});var e=n(244);var t,i,s,a,o,l,r,d,c;!function(e){e.Me="me",e.NotMe="notme",e.Anyone="anyone",e.MyFavorites="MyFavorites",e.Public="Public",e.Default="Default"}(t||(t={})),function(e){e.AllFolder="AllFolder",e.OtherFolder="OtherFolder"}(i||(i={})),function(e){e.AllGroup="AllGroup",e.Org="Org",e.OtherGroup="OtherGroup"}(s||(s={})),function(e){e.Default="Default",e.My="My",e.Shared="Shared"}(a||(a={})),function(e){e.Modified="modified",e.Title="title",e.NumViews="numViews",e.Created="created"}(o||(o={})),function(e){e.Public="public",e.Private="private",e.Org="org",e.Shared="shared"}(l||(l={})),function(e){e.Org="Org",e.Group="Group",e.OrgAndGroupNotMe="OrgAndGroupNotMe",e.ExbAdmin="ExbAdmin",e.My="My",e.Folder="Folder",e.All="All",e.Favorites="Favorites",e.AllFavorites="AllFavorites",e.PubLic="Public"}(r||(r={})),function(e){e.OrgAdmin="org_admin",e.OrgPublisher="org_publisher",e.OrgUser="org_user",e.CustomRoles="custom_roles"}(d||(d={})),function(e){e.Published="Published",e.Draft="Draft",e.Changed="Changed"}(c||(c={}));var m=n(321),h=function(e,t,i,s){return new(i||(i=Promise))((function(a,o){function l(e){try{n(s.next(e))}catch(e){o(e)}}function r(e){try{n(s.throw(e))}catch(e){o(e)}}function n(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(l,r)}n((s=s.apply(e,t||[])).next())}))};const u=e.React.createContext({deleteApp:e=>{},refreshList:()=>{},duplicateAppItem:e=>{},createApp:e=>{},favoriteToggle:(e,t)=>h(void 0,void 0,void 0,(function*(){return yield Promise.resolve(!0)})),getFolderList:()=>{},checkAndShowReadOnlyRemind:()=>{},isLoadSkeleton:!1,theme:null,skeletonNum:null});var g=n(888);const v={homePageSearch:"Search",newApp:"Create new",labelByModified:"Recent experiences",labelByTitle:"Experiences sorted by title",labelByView:"Experiences sorted by view count",labelByCreateTime:"Experiences sorted by creation time",labelByLastCreated:"Experiences sorted by last created",templateLabelByModified:"Recent templates",templateLabelByTitle:"Templates sorted by title",templateLabelByView:"Templates sorted by view count",templateLabelByCreateTime:"Templates sorted by creation time",templateLabelByLastCreated:"Templates sorted by last created",ownByMe:"Owned by me",ownByAnyone:"Owned by anyone",sharedWithMe:"Shared with me",orderByModified:"Last modified",orderByTitle:"Title",orderByView:"Most views",applistViews:"View count",applistItemViews:"Views",applistView:"view",editInfo:"Edit info",viewDetail:"View details",appListDelete:"Delete",canNotDelete:"Cannot delete: {title}",canNotDeleteMessage:"Items that are delete protected, part of a distributed collaboration group or have dependent items cannot be deleted.",deleteItem:"Delete item",appListName:"Name",appListDescription:"Description",launchApp:"Launch",appListMore:"More",popUpOk:"OK",popUpCancel:"Cancel",popUpTitle:"Warning",popUpDiscription1:"You don't have permission to edit this web experience. Currently, you can only edit your own items.",popUpDiscription2:"You can view or duplicate it.",descriptionRemind:"Here is the description of the item.",untitledExperience:"Untitled experience",webExperience:"Web Experience",webExperienceTemplate:"Web Experience Template",createExperience:"Create your first experience",toCreate:"Click {createNewElement} to start a new experience",click:"Click",appListEdit:"Edit",everyone:"Shared: Everyone",noOne:"Shared: No One",sharedOrganization:"Shared: Organization",group:"Shared: Group",appListPublished:"Published",appListDraft:"Draft",unpublishedChanges:"Unpublished changes",appTypeTemplate:"Experience Template",appTypeExperience:"Experience",publishedTitle:"This item can be viewed by users you've shared with.",publishedUnsaveTitle:"There are unpublished changes since last publishing.",itemStatusDraft:"Draft",draftStatusTitle:"This item is not published. It can only be viewed by you.",cardView:"Card view",listView:"List view",createNewTitle:"Create a new experience from this template",itemDescribtion:"Here is the description of the item.",favorites:"Favorites",myFavorites:"My favorites",itemInFavorites:"Item in Favorites",addFavorites:"Add to favorites",removeFromFavorites:"Remove from Favorites",noItemsYet:"No items yet.",templateEmptyText:"You can generate a template from an experience in the builder.",sharedEmptyText:"No items are shared with you. ",favoritesEmptyText:"When you find an item you like, click Add to Favorites to see it here.",noPublicItems:"No public items.",publicTemplate:"Public",allApp:"All",myOrg:"Organization",defaultTemplate:"Default",createError:"There was a problem when create new application.",duplicateError:"There was a problem when duplicate application.",noResource:"Resource does not exist or is inaccessible",noSearchResult:"No experiences found. Please try other search criteria.",noTemplates:"No templates found. Please try other search criteria.",actionsLabel:"Import",importAction:"Import from my account",uploadAction:"Import from my computer",importTips:"Import an app from your ArcGIS portal",importApp:"Import App",upgradeApp:"Upgrade App",upgradeBtn:"Upgrade",fileTypeError:"This file type is not supported.",checkVersionError:"Failed to import the app ${APP_NAME} !",importing:"Importing",upgrading:"Upgrading",uploading:"Uploading",upgradeContent:"The apps you select include items built with a higher version of ArcGIS Experience Builder.",upgradeContentFooter:"Click Upgrade to upgrade and import it. Click Cancel to quit.",importUpperVersion:"Failed to import the app {APP_NAME} . This app is created by a newer version {VERSION_NUMBER} of ArcGIS Experience Builder.",importSuccess:"Upgrade and import the app {APP_NAME} successfully!",upgradeFailure:"Failed to upgrade the app {APP_NAME}!",importFailure:"Failed to import the app {APP_NAME}!",exportFailure:"Failed to export the app {APP_NAME}!",appExport:"Export",exportAppSuccess:"Export success!",moreDetails:"More details",importExperienceVersionErr:"Failed to import the experience {TITLE}. This experience is created by a newer version {APP_VERSION} of ArcGIS Experience Builder.",importTemplateVersionErr:"Failed to import the template {TITLE}. This template is created by a newer version {APP_VERSION} of ArcGIS Experience Builder.",importTemplatePortalUrlErr:"Failed to import the template. This template can only be imported by users of portal: {PORTAL_URL}",importExperiencePortalUrlErr:"Failed to import the experience. This experience can only be imported by users of portal: {PORTAL_URL}",importTemplateTypeErr:"This is a template. Please switch to the Templates tab and try again.",importExperienceTypeErr:"This is an experience. Please switch to the Experiences tab and try again.",importFullModeExperienceErr:"Failed to import the experience {TITLE}. Express experiences cannot be imported into the full-feature experience list.",importExpressModeExperienceErr:"Failed to import the experience {TITLE}. Full-feature experiences cannot be imported into the express experience list.",importFullModeTemplateErr:"Failed to import the template {TITLE}. Express templates cannot be imported into the full-feature template list.",importExpressModeTemplateErr:"Failed to import the template {TITLE}. Full-feature templates cannot be imported into the express template list.",importExperienceWidgetVersionErr:"Some widgets in the experience are in newer version. Experience name:[{TITLE}], widget: {ERR_MESSAGE}",importTemplateWidgetVersionErr:"Some widgets in the template are in newer version. Template name:[{TITLE}], widget: {ERR_MESSAGE}",higherVersionMessage:"This experience is in higher version. Incompatible contents may not work.",higherTemplateVersionMessage:"This template is in higher version. Incompatible contents may not work."};var f=n(860),w=n(838),x=n.n(w),b=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};const y=t=>{const i=window.SVG,{className:s}=t,a=b(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:o,src:x()},a)):e.React.createElement("svg",Object.assign({className:o},a))};var j=n(996),N=n.n(j),S=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};const I=t=>{const i=window.SVG,{className:s}=t,a=S(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:o,src:N()},a)):e.React.createElement("svg",Object.assign({className:o},a))};var $=function(e,t,i,s){return new(i||(i=Promise))((function(a,o){function l(e){try{n(s.next(e))}catch(e){o(e)}}function r(e){try{n(s.throw(e))}catch(e){o(e)}}function n(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(l,r)}n((s=s.apply(e,t||[])).next())}))};const O=Object.assign({},v,m.defaultMessages,e.defaultMessages);class T extends e.React.PureComponent{constructor(t){var i,s,a,o;super(t),this.autoFocusTimeout=null,this.__unmount=!1,this.supportedResourceSuffix={IMAGE:[".png",".jpg",".gif",".jpeg"]},this.getItemData=()=>{const{appItem:e}=this.props;f.appServices.getAppInfo(e).then((e=>{this.updateAppItem(e)}),(e=>{console.error(e)}))},this.updateAppItem=t=>{var i;const{appItem:s,appIndex:a}=this.props;for(const e in t)s[e]=t[e];this.setState({localAppItem:(0,e.Immutable)(s)},(()=>{this.updateState()})),null===(i=null==this?void 0:this.props)||void 0===i||i.updateAppList(s,a)},this.updateState=()=>{const{localAppItem:e}=this.state,t=((null==e?void 0:e.tags)?null==e?void 0:e.tags.asMutable():[]).filter((e=>e||!1));this.setState({currentTitleInput:e.title,currentDescribeInput:e.description?e.description:"",summary:(null==e?void 0:e.snippet)||"",tags:t,ownerFolder:e.ownerFolder||"/"})},this.uploadThumbnail=()=>$(this,void 0,void 0,(function*(){const t=this.thumbnailField;if(!t)return yield Promise.resolve(!0);const i=e.SessionManager.getInstance().getSessionByUrl(this.props.portalUrl),s={id:this.props.appItem.id,f:"json",token:null==i?void 0:i.token,thumbnail:t};return yield f.appServices.updateAppThumbnail(s,this.props.appItem.owner).then((()=>$(this,void 0,void 0,(function*(){return this.isUpdateThumbnail=!0,yield Promise.resolve(!0)}))),(e=>$(this,void 0,void 0,(function*(){return this.setState({loading:!1}),yield Promise.reject(e)}))))})),this.handleFilesChange=()=>{const e=this.fileInput.current.files;if(!e||!e[0])return!1;if(e[0].size>10485760)return this.setState({errorTipsText:this.nls("fileSizeTips",{maxSize:"10M"}),isShowAlertPopup:!0}),this.fileInput.current.value=null,!1;const t=".png";if(!this.supportedResourceSuffix.IMAGE.includes(t.toLowerCase()))return this.setState({errorTipsText:this.nls("editAppErrorMessage")}),this.handleToggle(),!1;const i=new File([e[0]],`thumbnail${(new Date).getTime()}${t}`,{type:"image/png"}),s=window.URL.createObjectURL(i);this.setState({files:s}),this.thumbnailField=i},this.titleInputChange=(t,i=!1)=>{let s=t.target.value;s=s.length>250?s.slice(0,250):s;let a=(0,e.Immutable)(this.state.localAppItem);window.jimuConfig.isDevEdition&&(a=a.set("text",""));i&&(s=/^[ ]*$/.test(s)?this.props.appItem.title:s,s=s.replace(/(^\s*)|(\s*$)/g,"")),a=a.set("title",s),this.setState({localAppItem:a,currentTitleInput:s})},this.describeInputChange=t=>{let i=(0,e.Immutable)(this.state.localAppItem);window.jimuConfig.isDevEdition&&(i=i.set("text","")),i=i.set("description",t),this.setState({currentDescribeInput:t,localAppItem:i})},this.nls=(e,t)=>this.props.intl?this.props.intl.formatMessage({id:e,defaultMessage:O[e]},t):e,this.onConfirm=()=>{this.setState({loading:!0}),this.uploadThumbnail().then((()=>{this.changeItemsFolder().then((()=>{this.updateAppInfo()}),(e=>{this.setState({loading:!1}),console.error(e)}))}),(e=>{this.setState({loading:!1}),console.error(e)}))},this.updateAppInfo=()=>{const{appIndex:e,checkAndShowReadOnlyRemind:t}=this.props;if(t())return void this.props.onEditInfoOk();const i=this.state.localAppItem.asMutable({deep:!0});i.clearEmptyFields=!0,(null==i?void 0:i.portalUrl)&&delete i.portalUrl,delete i.thumbnail,f.appServices.updateAppInfo(i).then((()=>{var t;this.isUpdateThumbnail?this.getItemData():null===(t=null==this?void 0:this.props)||void 0===t||t.updateAppList(i,e),this.setState({loading:!1}),this.props.onEditInfoOk()}),(e=>{this.setState({loading:!1}),console.error(e)}))},this.changeItemsFolder=()=>$(this,void 0,void 0,(function*(){const{id:t}=this.props.appItem,i=this.props.appItem.ownerFolder||"/",{ownerFolder:s}=this.state,a={itemId:t,folderId:this.state.ownerFolder,authentication:null};return i!==s&&s?yield f.appServices.changeAppFolder(a).then((()=>$(this,void 0,void 0,(function*(){const t=(0,e.Immutable)(this.state.localAppItem);return t.set("ownerFolder",s),this.setState({localAppItem:t}),yield Promise.resolve(!0)}))),(e=>$(this,void 0,void 0,(function*(){return yield Promise.reject(!1)})))):yield Promise.resolve(!0)})),this.nameOnChange=e=>{let t=e.target.value;t.length>250&&(t=t.slice(0,250)),this.setState({currentTitleInput:t})},this.getUserTags=()=>{if(window.jimuConfig.isDevEdition)return!1;const t=(0,e.getAppStore)().getState().user.username;f.appServices.getUserTags(t).then((e=>{var t;const i=null===(t=null==e?void 0:e.tags)||void 0===t?void 0:t.map((e=>e.tag));this.setState({userTags:(null==i?void 0:i.filter((e=>e)))||[]})}))},this.getThumbnailUrl=()=>{const t=this.props.appItem.thumbnail;let i=t;const s=e.SessionManager.getInstance().getSessionByUrl(this.props.portalUrl);return i=i?this.props.portalUrl+"/sharing/rest/content/items/"+this.props.appItem.id+"/info/"+i+"?token="+(null==s?void 0:s.token):this.props.folderUrl+"./dist/runtime/assets/defaultthumb.png",t&&window.jimuConfig.isDevEdition&&(i=`${window.location.origin}${window.jimuConfig.mountPath}apps/${this.props.appItem.id}/${t}`),i},this.alignButtonWidth=(e,t)=>{this[e]=t},this.handleToggle=()=>{const{isShowAlertPopup:e}=this.state;this.setState({isShowAlertPopup:!e})},this.descriptionEditorFocus=e=>{e.stopPropagation(),this.props.setDescriptionFocusStatus(!0),this.setState({isDescriptionEditorEnabled:!0})},this.editInfoContentClick=e=>{var t;const i=e.target||e.srcElement;e.stopPropagation(),i&&(null===(t=null==i?void 0:i.className)||void 0===t?void 0:t.indexOf("info-content-textarea"))<0&&(this.props.setDescriptionFocusStatus(!1),this.setState({isDescriptionEditorEnabled:!1}))},this.onTagInputChange=t=>{const i=Object.assign({},this.state.localAppItem);i.tags=(0,e.Immutable)(t),this.setState({tags:t,localAppItem:(0,e.Immutable)(i)})},this.onSummaryChange=(t,i=!1)=>{t.stopPropagation();let s=t.target.value;window.jimuConfig.isDevEdition||(s=s.length>250?s.slice(0,250):s);let a=(0,e.Immutable)(this.state.localAppItem);i&&(s=s&&s.replace(/(^\s*)|(\s*$)/g,"")),a=a.set("snippet",s),this.setState({localAppItem:a,summary:s})},this.onFolderChange=e=>{const t=e.target.value;this.setState({ownerFolder:t})},this.getAlertPopupStyle=()=>e.css`
      & {
        font-size: ${e.polished.rem(16)};
      }
      &>div {
        width: ${e.polished.rem(20)};
        margin-right: ${e.polished.rem(12)};
      }
    `,this.state={localAppItem:(0,e.Immutable)(this.props.appItem),currentTitleInput:this.props.appItem.title,currentDescribeInput:this.props.appItem.description?this.props.appItem.description:"",summary:(null===(s=null===(i=null==this?void 0:this.props)||void 0===i?void 0:i.appItem)||void 0===s?void 0:s.snippet)||"",loading:!1,files:"",buttonWidth:"",isShowAlertPopup:!1,isDescriptionEditorEnabled:!1,RichTextEditor:null,tags:(null===(o=null===(a=null==this?void 0:this.props)||void 0===a?void 0:a.appItem)||void 0===o?void 0:o.tags)||[],userTags:[],ownerFolder:this.props.appItem.ownerFolder||"/",errorTipsText:null},this.fileInput=e.React.createRef(),this.isUpdateThumbnail=!1}componentDidMount(){var e;this.getUserTags(),this.getItemData(),null===(e=null==this?void 0:this.context)||void 0===e||e.getFolderList(),clearTimeout(this.autoFocusTimeout),this.autoFocusTimeout=setTimeout((()=>{this.closeButton.focus()}),200)}getStyle(){var t,i,s,a,o,l,r,n,p,d;const c=this.props.theme,{buttonWidth:m}=this.state,h=null!==(i=null===(t=null==c?void 0:c.ref.palette)||void 0===t?void 0:t.neutral[900])&&void 0!==i?i:"#9fa4a7",u=null!==(a=null===(s=null==c?void 0:c.ref.palette)||void 0===s?void 0:s.neutral[400])&&void 0!==a?a:"#282828",g=null!==(l=null===(o=null==c?void 0:c.ref.palette)||void 0===o?void 0:o.neutral[700])&&void 0!==l?l:"#6a6a6a",v=null!==(n=null===(r=null==c?void 0:c.ref.palette)||void 0===r?void 0:r.neutral[900])&&void 0!==n?n:"#a8a8a8",f=null!==(d=null===(p=null==c?void 0:c.sys.color)||void 0===p?void 0:p.primary.dark)&&void 0!==d?d:"#00D8ED";return e.css`
      .app-editinfo {
        width: ${e.polished.rem(640)};
        height: auto;
        left: 50%;
        top: 50%;
        margin-left: ${e.polished.rem(-350)};
        transform: translateY(-50%);
        background: ${u};
        border: 1px solid ${g};
        padding-bottom: ${e.polished.rem(30)};
        .info-title {
          height: ${e.polished.rem(54)};
          border-bottom: 1px solid ${g};
          font-weight: 500;
        }

        .info-title-text {
          padding-left: ${e.polished.rem(30)};
          font-size: ${e.polished.rem(16)};
          color: ${v};
          overflow: hidden;
          max-width: 85%;
          text-overflow: ellipsis;
          white-space: nowrap;
        }

        .info-title-close {
          margin-right: ${e.polished.rem(30)};
          cursor: pointer;
        }
        .input-wrapper {
          border: none;
        }
        .tag-text-input-container {
          -webkit-appearance: none;
        }
        .info-content {
          padding: ${e.polished.rem(40)} ${e.polished.rem(30)} 0;
          height: calc(100% - ${e.polished.rem(55)});

          .info-content-pic {
            width: ${e.polished.rem(240)};
            aspect-ratio: 200/133;
            background-size: 100% 100%;
            background-position: top center;
            margin-right: ${e.polished.rem(20)};
          }
          .edit-thumbnail-btn {
            width: ${e.polished.rem(240)};
            margin-top: ${e.polished.rem(11)};
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            box-sizing: border-box;
            display: block;
          }
          .edit-thumbnail-btn-con:hover .edit-thumbnail-btn {
            background: ${g};
          }
          .edit-thumbnail-inp {
            bottom: 0;
            left: 0;
            width: ${e.polished.rem(240)};
            height: ${e.polished.rem(34)};
            opacity: 0;
            cursor: pointer;
          }
          .info-content-btn-group {
            padding-top: ${e.polished.rem(36)};
          }

          .info-content-otherinfo {
            width: ${e.polished.rem(350)};

            .info-content-label {
              font-size: ${e.polished.rem(14)};
              line-height: ${e.polished.rem(18)};
              color: ${h};
              font-weight: 600;
              margin-bottom: ${e.polished.rem(10)} !important;
              overflow: hidden;
              text-overflow: ellipsis;
              box-sizing: border-box;
              max-width: ${e.polished.rem(380)};
            }

            .info-title-input {
              margin-bottom: ${e.polished.rem(16)};
            }

            .info-content-text {
            }
            .info-content-textarea-con {
              height: ${e.polished.rem(80)};
              margin-bottom: ${e.polished.rem(16)};
            }
            .info-content-textarea {
              width: ${e.polished.rem(350)};
              height: ${e.polished.rem(80)};
              resize: none;
              padding: ${e.polished.rem(4)} ${e.polished.rem(6)};
              box-sizing: border-box;
              font-size: ${e.polished.rem(14)};
              textarea {
                max-height: ${e.polished.rem(87)};
              }
            }
            .focus {
              border-color: ${f};
            }
            .info-content-btn {
              min-width: ${m||e.polished.rem(100)};
            }
            .select-choices-con {
              margin-bottom: ${e.polished.rem(16)};
            }
          }
        }
      }
    `}render(){var t,i,s;const a=this.getThumbnailUrl(),o=null!==(s=null===(i=null===(t=this.props.theme)||void 0===t?void 0:t.ref.palette)||void 0===i?void 0:i.neutral[900])&&void 0!==s?s:"#a8a8a8",{isShowAlertPopup:l,tags:r,userTags:n,summary:p,ownerFolder:d,errorTipsText:c}=this.state,{folderListData:h}=this.props;return(0,e.jsx)("div",{css:this.getStyle(),className:"edit-info-con",onClick:e=>{this.editInfoContentClick(e)},"data-testid":"editInfo"},(0,e.jsx)("div",{className:"app-editinfo position-fixed"},(0,e.jsx)("div",{className:"bg-default info-title align-items-center d-flex justify-content-between"},(0,e.jsx)("div",{className:"info-title-text",title:this.nls("editExperienceInfo")},this.props.isTemplateList?this.nls("editExperienceTemplateInfo"):this.nls("editExperienceInfo")),(0,e.jsx)(m.Button,{icon:!0,type:"tertiary",className:"info-title-close",onClick:e=>{e.stopPropagation(),e.preventDefault(),this.props.onEditInfoCancel()},ref:e=>{this.closeButton=e},title:this.nls("closeTour")},(0,e.jsx)(y,{color:o,"aria-hidden":"true"}))),(0,e.jsx)("div",{className:"bg-default info-content"},(0,e.jsx)("div",{className:"d-flex justify-content-center"},(0,e.jsx)("div",null,(0,e.jsx)("div",{"data-testid":"thumbnailCon",className:"info-content-pic",style:{backgroundImage:"url("+(this.state.files||a)+")"}}),(0,e.jsx)("div",{className:"position-relative edit-thumbnail-btn-con"},(0,e.jsx)(m.Button,{className:"edit-thumbnail-btn",title:this.nls("editThumbnail"),onClick:this.updateAppInfo},this.nls("editThumbnail")),(0,e.jsx)("input",{"data-testid":"thumbnailInput",title:this.nls("editThumbnail"),"aria-label":this.nls("editThumbnail"),ref:this.fileInput,className:"position-absolute edit-thumbnail-inp",type:"file",accept:".png, .jpeg, .jpg, .gif, .bmp",onChange:this.handleFilesChange}))),(0,e.jsx)("div",{className:"info-content-otherinfo"},(0,e.jsx)("div",{className:"info-content-label",title:this.nls("appListName")},this.nls("appListName")),(0,e.jsx)(m.TextInput,{value:this.state.currentTitleInput,"aria-label":this.nls("appListName"),className:"info-title-input",onChange:this.nameOnChange,onBlur:e=>{this.titleInputChange(e,!0)},onKeyUp:e=>{this.titleInputChange(e)}}),(0,e.jsx)("div",{className:"info-content-label",title:this.nls("summaryField")},this.nls("summaryField")),(0,e.jsx)(m.TextArea,{placeholder:this.nls("summaryPlaceholder"),value:p,className:"info-content-textarea form-control mb-4","aria-label":this.nls("summaryField"),onBlur:e=>{this.onSummaryChange(e,!0)},onKeyDown:e=>{this.onSummaryChange(e)},onChange:e=>{this.setState({summary:e.target.value})}}),!window.jimuConfig.isDevEdition&&(0,e.jsx)("div",{className:"select-choices-con"},(0,e.jsx)("div",{className:"info-content-label",title:this.nls("tags")},this.nls("tags")),(0,e.jsx)(m.TagInput,{data:r,selectListData:n,onChange:this.onTagInputChange,name:this.nls("tagsLowerCase"),menuProps:{maxHeight:80}})),!window.jimuConfig.isDevEdition&&(0,e.jsx)("div",null,(0,e.jsx)("div",{className:"info-content-label",title:this.nls("saveInFolder")},this.nls("saveInFolder")),(0,e.jsx)(m.Select,{value:d,onChange:this.onFolderChange},h.map((t=>(0,e.jsx)(m.Option,{value:t.value,key:t.value},t.text))))),(0,e.jsx)("div",{className:"d-flex justify-content-end info-content-btn-group"},(0,e.jsx)(m.Button,{type:"primary",className:"info-content-btn mr-2",ref:e=>{this.alignButtonWidth("okButton",e)},onClick:this.onConfirm,title:this.nls("ok")},this.nls("ok")),(0,e.jsx)(m.Button,{className:"info-content-btn",onClick:()=>{this.props.onEditInfoCancel()},ref:e=>{this.alignButtonWidth("cancelButton",e)},title:this.nls("cancel")},this.nls("cancel"))))))),this.state.loading&&(0,e.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%"},className:"jimu-primary-loading"}),(0,e.jsx)(m.AlertPopup,{isOpen:l,hideCancel:!0,toggle:this.handleToggle,hideHeader:!0},(0,e.jsx)("div",{className:"align-middle pt-2 alert-popup-con d-flex ",css:this.getAlertPopupStyle()},(0,e.jsx)("div",null,(0,e.jsx)(I,{className:"align-middle",size:"l",color:"var(--warning-600)","aria-hidden":"true"})),(0,e.jsx)("span",{className:"align-middle flex-grow-1"},c))))}}T.contextType=u;const k=(0,g.withTheme)(T);var E=n(664),M=n.n(E),A=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};const P=t=>{const i=window.SVG,{className:s}=t,a=A(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:o,src:M()},a)):e.React.createElement("svg",Object.assign({className:o},a))},D=Object.assign({},v,m.defaultMessages);class C extends e.React.PureComponent{constructor(){super(...arguments),this.focusTimeout=null,this.getStyle=()=>e.css`
      svg {
        color: #fff;
      }
      /* &.modal-header button.close {
        padding: 0;
        margin: 0;
      } */
    `,this.stopPropagation=e=>{e.stopPropagation()},this.handleCancelClick=e=>{this.stopPropagation(e),this.props.deleteToggle()},this.nls=(e,t)=>{const{intl:i}=this.props;return i?i.formatMessage({id:e,defaultMessage:D[e]},t):e},this.getModalStyle=()=>e.css`
      .icon-con {
        margin-right: ${e.polished.rem(12)};
        svg {
          color: var(--sys-color-error-main);
        }
      }
      .modal-title {
        color: var(--ref-palette-neutral-1000);
      }
      .can-not-delete-con {
        margin-bottom: ${e.polished.rem(16)};
        font-size: ${e.polished.rem(16)};
        font-weight: 500;
        line-height: ${e.polished.rem(24)};
        svg {
          margin: 0 ${e.polished.rem(6)} 0 ${e.polished.rem(6)};
        }
        &>div, div a {
          line-height: ${e.polished.rem(24)};
          display: inline-block;
          color: var(--ref-palette-neutral-1000);
        }
        div a {
          font-size: ${e.polished.rem(14)};
          text-decoration: underline;
          font-weight: 400;
        }
      }
      .delete-remind {
        font-size: ${e.polished.rem(13)};
        color: var(--ref-palette-neutral-1100);
      }
      .cancel-button {
        background: var(--ref-palette-neutral-500);
        color: var(--ref-palette-white);
        border: none;
        color: #fff;
      }
    `,this.getDeleteMsg=()=>{const{itemProtected:t,itemTitle:i,detailUrl:s}=this.props,a=t?this.nls("cannotDeleteItemMessage"):this.nls("itemDeleteRemind");return(0,e.jsx)("div",{className:"w-100 h-100 d-flex"},t&&(0,e.jsx)("div",{className:"icon-con"},(0,e.jsx)(I,{size:24})),(0,e.jsx)("div",{className:"flex-grow-1"},t&&(0,e.jsx)("div",{className:"can-not-delete-con"},this.nls("canNotDelete",{title:""}),(0,e.jsx)("div",null,(0,e.jsx)(P,{size:16}),(0,e.jsx)("a",{href:s,target:"view_window"},i))),(0,e.jsx)("div",{className:"delete-remind"},a)))}}componentDidUpdate(e,t,i){this.props.isOpen&&!e.isOpen&&(clearTimeout(this.focusTimeout),this.focusTimeout=setTimeout((()=>{const e=document.querySelector(".item-delete-header button");null==e||e.focus()}),200))}render(){const{isOpen:t,itemProtected:i}=this.props;return(0,e.jsx)(u.Consumer,null,(({deleteApp:s})=>(0,e.jsx)(m.Modal,{className:(0,e.classNames)("d-flex justify-content-center"),isOpen:t,centered:!0,returnFocusAfterClose:!0,autoFocus:!0,backdrop:"static",toggle:this.props.deleteToggle,onClick:e=>{this.stopPropagation(e)},css:this.getModalStyle()},(0,e.jsx)(m.ModalHeader,{tag:"h4",toggle:this.props.deleteToggle,className:"item-delete-header",css:this.getStyle()},this.nls("deleteItem")),(0,e.jsx)(m.ModalBody,null,this.getDeleteMsg()),(0,e.jsx)(m.ModalFooter,null,!i&&(0,e.jsx)(m.Button,{type:"danger",onClick:e=>{this.stopPropagation(e),s(this.props.itemId),this.props.deleteToggle()}},this.nls("appListDelete")),(0,e.jsx)(m.Button,{className:"cancel-button",onClick:this.handleCancelClick},this.nls("popUpCancel"))))))}}var L=n(651),R=n.n(L),F=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};const U=t=>{const i=window.SVG,{className:s}=t,a=F(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:o,src:R()},a)):e.React.createElement("svg",Object.assign({className:o},a))};var B=n(108);class V extends e.React.PureComponent{constructor(t){super(t),this.moreButtonRef=null,this.editInfoStyle={width:"100%",height:"100%",maxWidth:"5000px",margin:0},this.getStyle=()=>e.css`
      .modal-content {
        background: none;
      }
    `,this.appLaunch=()=>{const e=this.props.isTemplateList?"template":"experience",t=window.jimuConfig.useStructuralUrl?`${window.jimuConfig.mountPath}${e}/${this.props.appItem.id}/`:`${window.jimuConfig.mountPath}${e}/?id=${this.props.appItem.id}`;window.open(t)},this.viewDetails=()=>{const e=this.getUrlOfItemDetails();window.open(e)},this.showEditInfo=()=>{setTimeout((()=>{this.setState({isShownEditInfo:!0})}),(0,e.isKeyboardMode)()?250:0)},this.getUrlOfItemDetails=()=>`${this.props.portalUrl}/home/item.html?id=${this.props.appItem.id}`,this.onEditInfoCancel=()=>{this.moreButtonRef.focus(),this.setState({isShownEditInfo:!1})},this.onEditInfoOk=()=>{this.moreButtonRef.focus(),this.setState({isShownEditInfo:!1})},this.deleteToggle=()=>{this.state.isShowDeleteAlertPopup&&this.moreButtonRef.focus(),this.setState({isShowDeleteAlertPopup:!this.state.isShowDeleteAlertPopup})},this.setDescriptionFocusStatus=(e=!1)=>{this.setState({isDescriptionEditorFocus:e})},this.editInfoModalClick=e=>{e.stopPropagation(),this.setDescriptionFocusStatus(!1)},this.onDownloadAppModalOpen=()=>{this.setState({isOpenDownloadAppModal:!0})},this.onDownloadAppModalClose=()=>{this.setState({isOpenDownloadAppModal:!1})},this.state={isOpen:!1,isShownEditInfo:!1,isShowDeleteAlertPopup:!1,isDescriptionEditorFocus:!1,isOpenDownloadAppModal:!1}}render(){const t=window.jimuConfig.isDevEdition,i=this.state.isShownEditInfo,{editPrivileges:s,isTemplateList:a,updateAppList:o,appIndex:l,isPublish:r,appItem:n}=this.props,{isShowDeleteAlertPopup:p,isDescriptionEditorFocus:d}=this.state,c=t&&r&&this.state.isOpenDownloadAppModal;return(0,e.jsx)(u.Consumer,null,(({deleteApp:h,refreshList:u,duplicateAppItem:g,checkAndShowReadOnlyRemind:f})=>(0,e.jsx)("div",{css:this.getStyle(),className:this.props.className},(0,e.jsx)(m.Dropdown,{direction:"right",size:"sm",isOpen:this.state.isOpen,className:"app-list-dropdown",style:{marginRight:"3px"},onClick:e=>{e.stopPropagation(),e.preventDefault()},toggle:()=>{this.setState({isOpen:!this.state.isOpen})}},(0,e.jsx)(m.DropdownButton,{size:"sm",icon:!0,type:"tertiary",arrow:!1,ref:e=>{this.moreButtonRef=e},title:this.props.intl?this.props.intl.formatMessage({id:"appListMore",defaultMessage:v.appListMore}):v.appListMore},(0,e.jsx)(U,{className:"app-list-iconfill app-list-icon-margin dropdown-icon"})),(0,e.jsx)(m.DropdownMenu,{className:"app-list-dropdown"},s.canDuplicate&&(0,e.jsx)(m.DropdownItem,{className:"pb-1",onClick:()=>{g(n)},title:this.props.intl.formatMessage({id:"duplicate",defaultMessage:m.defaultMessages.duplicate})},this.props.intl.formatMessage({id:"duplicate",defaultMessage:m.defaultMessages.duplicate})),s.canEdit&&(0,e.jsx)(m.DropdownItem,{className:"pb-1",onClick:this.showEditInfo,title:this.props.intl.formatMessage({id:"editInfo",defaultMessage:v.editInfo})},this.props.intl.formatMessage({id:"editInfo",defaultMessage:v.editInfo})),!t&&(0,e.jsx)(m.DropdownItem,{className:"pb-1",onClick:this.viewDetails,title:this.props.intl.formatMessage({id:"viewDetail",defaultMessage:v.viewDetail})},this.props.intl.formatMessage({id:"viewDetail",defaultMessage:v.viewDetail})),s.canDelete&&(0,e.jsx)(m.DropdownItem,{className:"pb-1",onClick:()=>{this.deleteToggle()},title:this.props.intl.formatMessage({id:"appListDelete",defaultMessage:v.appListDelete})},this.props.intl.formatMessage({id:"appListDelete",defaultMessage:v.appListDelete})),t&&r&&(0,e.jsx)(m.DropdownItem,{onClick:this.onDownloadAppModalOpen},this.props.intl.formatMessage({id:"download",defaultMessage:m.defaultMessages.download})))),i&&(0,e.jsx)(m.Modal,{onClick:e=>{this.editInfoModalClick(e)},disableActivateOverlay:!0,css:this.getStyle(),isOpen:i,style:this.editInfoStyle,contentClassName:"h-100 w-100"},(0,e.jsx)(k,{appIndex:l,updateAppList:o,appItem:this.props.appItem,portalUrl:this.props.portalUrl,folderUrl:this.props.folderUrl,onEditInfoCancel:this.onEditInfoCancel,intl:this.props.intl,isDescriptionEditorFocus:d,isTemplateList:a,setDescriptionFocusStatus:this.setDescriptionFocusStatus,folderListData:this.props.folderListData,onEditInfoOk:this.onEditInfoOk,checkAndShowReadOnlyRemind:f})),c&&this.state.isOpenDownloadAppModal&&(0,e.jsx)(B.DownloadAppModal,{appId:this.props.appItem.id,isOpen:this.state.isOpenDownloadAppModal,onClose:this.onDownloadAppModalClose}),(0,e.jsx)(C,{detailUrl:this.getUrlOfItemDetails(),itemTitle:this.props.appItem.title,isOpen:p,deleteToggle:this.deleteToggle,itemId:this.props.appItem.id,intl:this.props.intl,itemProtected:this.props.appItem.protected}))))}}var z=n(674),G=n.n(z),_=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};const H=t=>{const i=window.SVG,{className:s}=t,a=_(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:o,src:G()},a)):e.React.createElement("svg",Object.assign({className:o},a))};var q=n(266),W=n.n(q),Q=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};const K=t=>{const i=window.SVG,{className:s}=t,a=Q(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:o,src:W()},a)):e.React.createElement("svg",Object.assign({className:o},a))};var Y=n(140),Z=n.n(Y),J=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};const X=t=>{const i=window.SVG,{className:s}=t,a=J(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:o,src:Z()},a)):e.React.createElement("svg",Object.assign({className:o},a))};var ee=n(56),te=n.n(ee),ie=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};const se=t=>{const i=window.SVG,{className:s}=t,a=ie(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:o,src:te()},a)):e.React.createElement("svg",Object.assign({className:o},a))},{AppHigherVersionStateType:ae,checkAppHigherVersionState:oe}=e.utils,le=Object.assign({},v,m.defaultMessages,e.defaultMessages);class re extends e.React.PureComponent{constructor(t){super(t),this.toggle=()=>{this.setState({tooltipOpen:!this.state.tooltipOpen})},this.handleItemClick=()=>{const e=this.judgeUserEditPrivileges(this.props.updateGroupItemId);if(this.props.isTemplateList||!this.props.isPrivilegeCheckEnd||e.canEdit)return!1;this.setState({isShowAlertPopup:!0})},this.getCardLinkUrl=()=>{var t,i;const s=null===(i=null===(t=(0,e.getAppStore)().getState().widgetsState)||void 0===t?void 0:t.header)||void 0===i?void 0:i.isExpressMode,a=this.judgeUserEditPrivileges(this.props.updateGroupItemId);if(this.props.isTemplateList||!this.props.isPrivilegeCheckEnd||!a.canEdit)return null;return B.utils.getBuilderUrl(this.props.appItem.id,s)},this.handleItemKeydown=e=>{"Enter"!==e.key&&" "!==e.key||this.handleItemClick()},this.editTemplateClick=()=>{var t,i;const s=null===(i=null===(t=(0,e.getAppStore)().getState().widgetsState)||void 0===t?void 0:t.header)||void 0===i?void 0:i.isExpressMode;if(!this.judgeUserEditPrivileges(this.props.updateGroupItemId).canEdit||!this.props.isPrivilegeCheckEnd)return!1;const a=B.utils.getBuilderUrl(this.props.appItem.id,s);window.location.href=a},this.appLaunch=e=>{e.stopPropagation(),e.preventDefault()},this.checkIsOwner=()=>{const t=(0,e.getAppStore)().getState().user;return!(!t||!this.props.appItem.owner||(null==t?void 0:t.username)!==this.props.appItem.owner)},this.viewDetails=e=>{this.appLaunch(e);const t=`${this.props.portalUrl}/home/item.html?id=${this.props.appItem.id}`;window.open(t)},this.handleToggle=()=>{this.setState({isShowAlertPopup:!this.state.isShowAlertPopup})},this.initExtraState=()=>{const e=`${this.props.portalUrl}/home/item.html?id=${this.props.appItem.id}`;this.setState({detailUrl:e})},this.getThumbnail=()=>{const t=this.props.appItem.thumbnail,{isExbTeamCommonTemplate:i,id:s,isDefaultTemplate:a}=this.props.appItem,{portalUrl:o,folderUrl:l,isTemplateList:r}=this.props;let n=t;const p=r?"templateDefaultthumb.png":"defaultthumb.png",d=e.SessionManager.getInstance().getSessionByUrl(o),c=d&&(null==d?void 0:d.token)?"?token="+d.token:"";return n=n?o+"/sharing/rest/content/items/"+s+"/info/"+t+c:l+`./dist/runtime/assets/${p}`,t&&this.state.isDevEdition&&(n=`${window.location.origin}${window.jimuConfig.mountPath}apps/${s}/${t}`),a&&(n=t),i&&t&&(n=o+"/sharing/rest/content/items/"+s+"/info/"+t+c),n},this.getPreviewUrl=()=>{const{isTemplateList:t}=this.props,{id:i,isExbTeamCommonTemplate:s}=this.props.appItem;return e.urlUtils.getAppUrl({appId:i,isTemplate:t,isArcGisOnlineTemplate:s})},this.getPreviewTemplateAppUrl=()=>{let t=this.getPreviewUrl();return this.getQueryString("locale")&&(t=e.urlUtils.appendQueryParam(t,"locale",this.getQueryString("locale"))),this.getQueryString("__env__")&&(t=e.urlUtils.appendQueryParam(t,"__env__",this.getQueryString("__env__"))),t},this.getPreviewAppUrl=()=>{const t=this.props.isTemplateList?"template":"experience";let i=window.jimuConfig.useStructuralUrl?`${window.jimuConfig.mountPath}${t}/${this.props.appItem.id}/`:`${window.jimuConfig.mountPath}${t}/?id=${this.props.appItem.id}`;return this.getQueryString("locale")&&(i=e.urlUtils.appendQueryParam(i,"locale",this.getQueryString("locale"))),this.getQueryString("__env__")&&(i=e.urlUtils.appendQueryParam(i,"__env__",this.getQueryString("__env__"))),i},this.getShareState=e=>{const t={shareType:null,tips:this.nls("everyone")};if(!e)return null;switch(e){case"public":t.tips=this.nls("everyone"),t.shareType=l.Public;break;case"private":t.tips=this.nls("noOne"),t.shareType=l.Private;break;case"org":t.tips=this.nls("sharedOrganization"),t.shareType=l.Org;break;case"shared":t.tips=this.nls("group"),t.shareType=l.Shared}return t},this.getIconByShareType=t=>{switch(t){case l.Public:return e.React.createElement(X,{className:"app-list-iconfill mr-0"});case l.Private:return e.React.createElement(H,{className:"app-list-iconfill mr-0"});case l.Org:return e.React.createElement(K,{className:"app-list-iconfill mr-0"});case l.Shared:return e.React.createElement(se,{className:"app-list-iconfill mr-0"})}},this.getPublishStatus=e=>{const t=e.typeKeywords||[];let{publishStatus:i,publishStatusText:s}=this.state;t.forEach((e=>{if(e.includes("status:")){switch(e.split(": ")[1]){case c.Published:i=c.Published,s=this.nls("appListPublished");break;case c.Draft:i=c.Draft,s=this.nls("appListDraft");break;case c.Changed:i=c.Changed,s=this.nls("unpublishedChanges")}}})),this.setState({publishStatus:i,publishStatusText:s})},this.isHideEditDropBtn=()=>!!this.state.isDevEdition||!this.props.appItem.isDefaultTemplate&&void 0,this.nls=(e,t)=>this.props.intl.formatMessage({id:e,defaultMessage:le[e]},t),this.getFavoriteStatus=e=>{const{appItem:t}=this.props;let i=!1;return i=e.includes(t.id),i},this.judgeUserEditPrivileges=(t=(0,e.Immutable)([]))=>{const{appItem:i,capabilities:s}=this.props,a=null==i?void 0:i.userRole,{canUpdateExperience:o,canDeleteExperience:l,canViewExperience:r,canCreateExperience:n}=s;if(null==i?void 0:i.origin)return(0,e.Immutable)({canDelete:!1,canEdit:!1,canCreate:!1,canView:r||!1,canDuplicate:!1});const p={canDelete:l||!1,canEdit:o||!1,canCreate:n||!1,canView:r||!1,canDuplicate:!1},c=this.checkIsOwner()||a===d.OrgAdmin&&((null==i?void 0:i.isOrgItem)||window.jimuConfig.isDevEdition),m=t.asMutable().includes(i.id);return c?p.canDuplicate=!0:m||(p.canDelete=!1,p.canEdit=!1),(0,e.Immutable)(p)},this.getAppVersionRemindString=()=>{const{isTemplateList:e,appItem:t}=this.props;switch(oe(t)){case ae.Both:return e?this.nls("templateVersionRemind"):this.nls("experienceVersionRemind");case ae.Draft:return e?this.nls("draftTemplateVersionRemind"):this.nls("draftExperienceVersionRemind");case ae.Published:return e?this.nls("publishedTemplateVersionRemind"):this.nls("publishedExperienceVersionRemind")}},this.state={tooltipOpen:!1,itemSelected:!1,isShowAlertPopup:!1,isDevEdition:window.jimuConfig.isDevEdition,thumbnail:"",detailUrl:"",limitsTips:"",publishStatus:"",publishStatusText:""}}componentDidMount(){this.initExtraState(),this.getPublishStatus(this.props.appItem)}getQueryString(t){return e.queryString.parse(window.location.search)[t]||""}}var ne=n(443),pe=n.n(ne),de=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};const ce=t=>{const i=window.SVG,{className:s}=t,a=de(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:o,src:pe()},a)):e.React.createElement("svg",Object.assign({className:o},a))};var me=n(662),he=n.n(me),ue=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};const ge=t=>{const i=window.SVG,{className:s}=t,a=ue(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:o,src:he()},a)):e.React.createElement("svg",Object.assign({className:o},a))};var ve=n(529),fe=n.n(ve),we=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};const xe=t=>{const i=window.SVG,{className:s}=t,a=we(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:o,src:fe()},a)):e.React.createElement("svg",Object.assign({className:o},a))},be=t=>{const i=e.css`
    .app-link {
      display: block;
      padding: 0;
      text-align: left;
    }
    .app-item-button {
      &:hover {
        background: transparent;
      }
    }
  `;return(0,e.jsx)("div",{className:(0,e.classNames)(null==t?void 0:t.className),css:i},(()=>{const i=(0,e.jsx)(m.Button,{"data-testid":"card-item",className:"app-item-link app-link d-block p-0",href:null==t?void 0:t.href,role:"listitem","aria-label":null==t?void 0:t.title,type:"tertiary",disableHoverEffect:!0,disableRipple:!0,"aria-describedby":`${t.a11yMessageId}`},null==t?void 0:t.children),s=(0,e.jsx)(m.Button,{className:"app-link app-item-link w-100 app-item-button d-block p-0",role:"button",type:"tertiary","aria-label":null==t?void 0:t.title,"aria-describedby":`${t.a11yMessageId}`,onClick:t.onClick,onKeyDown:t.onKeyDown,disableHoverEffect:!0,disableRipple:!0,"data-testid":"card-item"},null==t?void 0:t.children);return(null==t?void 0:t.href)?i:s})())};var ye=n(46),je=n.n(ye),Ne=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};const Se=t=>{const i=window.SVG,{className:s}=t,a=Ne(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:o,src:je()},a)):e.React.createElement("svg",Object.assign({className:o},a))};var Ie=n(547),$e=n.n(Ie),Oe=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};const Te=t=>{const i=window.SVG,{className:s}=t,a=Oe(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:o,src:$e()},a)):e.React.createElement("svg",Object.assign({className:o},a))};var ke=n(961),Ee=n.n(ke),Me=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};const Ae=t=>{const i=window.SVG,{className:s}=t,a=Me(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:o,src:Ee()},a)):e.React.createElement("svg",Object.assign({className:o},a))},{AppHigherVersionStateType:Pe,checkAppHigherVersionState:De}=e.utils;class Ce extends re{constructor(){super(...arguments),this.getStyle=()=>e.css`
      & .item-title {
        word-break: break-all;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 2;
        overflow: hidden;
      }
    `}render(){const{isDevEdition:t,isShowAlertPopup:i,publishStatus:s,publishStatusText:a}=this.state,{appItem:o}=this.props,{id:l,type:r}=o,{updateAppList:n,appIndex:p}=this.props,d=this.getShareState(this.props.appItem.access),h=this.getFavoriteStatus(this.props.allFavoritesIdData),g=this.judgeUserEditPrivileges(this.props.updateGroupItemId),v=`${l}-message`;return(0,e.jsx)(u.Consumer,null,(({createApp:u,favoriteToggle:w})=>{var x;return(0,e.jsx)(m.Card,{className:"detailview-item",style:{position:"relative",cursor:this.props.isTemplateList?"auto":"pointer"}},(0,e.jsx)(be,{className:"flex-grow-1 w-100 position-relative card-item-link-con",href:this.getCardLinkUrl(),onClick:this.handleItemClick,onKeyDown:this.handleItemKeydown,a11yMessageId:this.props.isTemplateList?`${v}`:null,title:this.props.appItem.title},(0,e.jsx)("div",{className:"sr-only",id:v},(0,e.jsx)("div",null,`${a}`),(0,e.jsx)("div",null,`${this.nls("owner")}: ${this.props.appItem.owner}`),(0,e.jsx)("div",null,this.nls("updated"),":",(0,e.jsx)(e.FormattedDate,{value:new Date(this.props.appItem.modified),year:"numeric",month:"2-digit",day:"2-digit"})),(0,e.jsx)("div",null,`${this.nls("applistItemViews")}: ${this.props.appItem.numViews}`)),(0,e.jsx)("div",{className:"w-100 app-list-detailview-pic position-relative",style:{backgroundImage:"url("+this.getThumbnail()+")"}},s&&(0,e.jsx)("div",{className:(0,e.classNames)("publish-status position-absolute text-truncate",s),title:a,"data-testid":"publishStatus"},a)),(0,e.jsx)(m.CardBody,{className:"w-100 flex-grow-1  justify-content-between flex-column item-message-con",css:this.getStyle()},(0,e.jsx)("h5",{className:"app-list-h2 item-card-title d-flex align-items-start",title:this.props.appItem.title},(0,e.jsx)("div",{className:"flex-grow-1 w-100 item-title"},this.props.appItem.title),De(null===(x=null==this?void 0:this.props)||void 0===x?void 0:x.appItem)!==Pe.None&&(0,e.jsx)("div",{className:"ml-2 app-version-remind",title:this.getAppVersionRemindString()},(0,e.jsx)(I,null))),(0,e.jsx)("div",{className:"app-list-h3 app-list-detailview-name",title:this.props.appItem.owner},this.props.appItem.owner),(0,e.jsx)("div",{className:"app-list-h3 app-list-detailview-time"},this.props.appItem.modified&&(0,e.jsx)(e.FormattedDate,{value:new Date(this.props.appItem.modified),year:"numeric",month:"2-digit",day:"2-digit"})))),!this.props.isTemplateList&&(0,e.jsx)("div",{className:"d-flex justify-content-between align-items-center edit-item-con"},t?(0,e.jsx)("div",{className:"app-list-h3"}):(0,e.jsx)("div",{className:"app-list-h3 item-views-number pl-1 pt-1 pb-1",title:`${this.nls("applistItemViews")}: ${this.props.appItem.numViews}`},(0,e.jsx)(m.Button,{rel:"noreferrer",title:`${this.nls("applistItemViews")}: ${this.props.appItem.numViews}`,target:"_blank",href:`${this.props.portalUrl}/home/item.html?id=${this.props.appItem.id}`,type:"tertiary",className:"border-0 mr-1 pr-1"},(0,e.jsx)(xe,{className:"app-list-iconfill mr-1"}),(0,e.jsx)("span",null,this.props.appItem.numViews))),(0,e.jsx)("div",{className:"d-flex align-items-center item-btn-box"},!t&&(0,e.jsx)(m.Button,{rel:"noreferrer",title:d.tips,type:"tertiary",className:"pl-1 pr-1 app-item-launch border-0 mr-2",target:"_blank",href:`${this.props.portalUrl}/home/item.html?id=${this.props.appItem.id}`},this.getIconByShareType(d.shareType)),!t&&g.canView&&(0,e.jsx)(m.Button,{rel:"noreferrer",title:h?this.nls("removeFromFavorites"):this.nls("addFavorites"),type:"tertiary",className:(0,e.classNames)("pl-1 pr-1 app-item-launch border-0 mr-2",{favorite:h}),onClick:e=>{this.appLaunch(e),w(h,l)}},h?(0,e.jsx)(Te,{className:"app-list-iconfill mr-0"}):(0,e.jsx)(Ae,{className:"app-list-iconfill mr-0"})),g.canView&&(0,e.jsx)(m.Button,{type:"tertiary",rel:"noreferrer",title:this.nls("launchApp"),className:" pl-1 pr-1 app-item-launch border-0 margin-4",target:"_blank",href:this.getPreviewAppUrl()},(0,e.jsx)(ce,{className:"app-list-iconfill mr-0"})),(0,e.jsx)(V,{appIndex:p,updateAppList:n,className:"app-item-more",portalUrl:this.props.portalUrl,intl:this.props.intl,appItem:this.props.appItem,folderUrl:this.props.folderUrl,isOwner:this.checkIsOwner(),isPublish:s!==c.Draft,isTemplateList:this.props.isTemplateList,folderListData:this.props.folderListData,editPrivileges:g}))),this.props.isTemplateList&&(0,e.jsx)("div",{className:"d-flex justify-content-between align-items-center edit-item-con edit-item-con-template"},(0,e.jsx)("div",{className:"item-btn-box template-item-btn-box"},g.canView&&(0,e.jsx)(m.Button,{type:"tertiary",rel:"noreferrer",title:this.nls("launchApp"),className:"float-left pl-1 pr-1 app-item-launch border-0 mr-2",target:"_blank",href:this.getPreviewTemplateAppUrl()},(0,e.jsx)(ce,{className:"app-list-iconfill mr-0"})),!t&&r!==f.AppType.ExperienceType&&g.canView&&(0,e.jsx)(m.Button,{rel:"noreferrer",title:h?this.nls("removeFromFavorites"):this.nls("addFavorites"),type:"tertiary",className:(0,e.classNames)("pl-1 pr-1 app-item-launch border-0 mr-2 float-left",{favorite:h}),onClick:e=>{this.appLaunch(e),w(h,l)}},h?(0,e.jsx)(Te,{className:"app-list-iconfill mr-0"}):(0,e.jsx)(Ae,{className:"app-list-iconfill mr-0"})),g.canEdit&&(0,e.jsx)(m.Button,{rel:"noreferrer",type:"tertiary",className:"float-left pl-1 pr-1 app-item-launch border-0 mr-2",title:this.nls("appListEdit"),onClick:this.editTemplateClick},(0,e.jsx)(Se,{className:"app-list-iconfill mr-0"})),g.canCreate&&s!==c.Draft&&(0,e.jsx)(m.Button,{rel:"noreferrer",type:"tertiary",className:"float-left pl-1 pr-1 app-item-launch border-0 mr-2",onClick:e=>{this.appLaunch(e),u(o)},title:this.nls("createNewTitle")},(0,e.jsx)(ge,{className:"app-list-iconfill mr-0"}))),(0,e.jsx)("div",{className:"d-flex align-items-center item-btn-box"},(0,e.jsx)(V,{className:"float-right app-item-more",appIndex:p,updateAppList:n,portalUrl:this.props.portalUrl,intl:this.props.intl,appItem:this.props.appItem,folderUrl:this.props.folderUrl,isOwner:this.checkIsOwner(),isPublish:s!==c.Draft,isTemplateList:this.props.isTemplateList,folderListData:this.props.folderListData,editPrivileges:g}))),(0,e.jsx)(m.AlertPopup,{isOpen:i,title:this.nls("popUpTitle"),hideCancel:!0,toggle:this.handleToggle},(0,e.jsx)("div",{style:{fontSize:"1rem"}},this.nls("noEditContentPrivilegesError"))))}))}}class Le extends e.React.PureComponent{constructor(){super(...arguments),this.renderCardSkeleton=()=>(0,e.jsx)(m.Card,{button:!0,className:"detailview-item",css:this.getStyle()},(0,e.jsx)("div",{className:"h-100 w-100"},(0,e.jsx)("div",{className:"w-100 app-list-detailview-pic position-relative skeleton-pic"}),(0,e.jsx)(m.CardBody,{className:"w-100  justify-content-between flex-column item-message-con",style:{height:"48%"}},(0,e.jsx)("h5",{className:"app-list-h2 item-card-title skeleton-title"}),(0,e.jsx)("div",{className:"app-list-h3 app-list-detailview-name skeleton-name"}),(0,e.jsx)("div",{className:"app-list-h3 app-list-detailview-time skeleton-time"}),(0,e.jsx)("div",{className:"d-flex align-items-center item-btn-box skeleton-btn-box position-relative"},(0,e.jsx)("div",null,(0,e.jsx)("span",{className:"skeleton-btn"}),(0,e.jsx)("span",{className:"skeleton-btn skeleton-lg-btn"})),(0,e.jsx)("div",{className:"text-right flex-grow-1 right-btn-con"},(0,e.jsx)("span",{className:"skeleton-btn"}),(0,e.jsx)("span",{className:"skeleton-btn"}),(0,e.jsx)("span",{className:"skeleton-btn"}),(0,e.jsx)("span",{className:"skeleton-btn"})))))),this.renderListSkeleton=()=>{const t=window.jimuConfig.isDevEdition;return(0,e.jsx)("div",{className:"mb-4 ml-0 mr-0 position-relative app-item-backcolor listview-item item-list-con d-flex",css:this.getStyle()},(0,e.jsx)("div",{className:"p-0 position-absolute app-list-listview-pic-con"},(0,e.jsx)("div",{className:"app-list-listview-pic skeleton-list-pic"})),(0,e.jsx)("div",{className:(0,e.classNames)("d-flex align-items-center item-list-name-con",{"item-list-name-con-dev":t})},(0,e.jsx)("div",{className:"app-list-h2 d-flex align-items-center"},(0,e.jsx)("div",{className:"flex-grow-1 text-truncate skeleton-list-title"}))),(0,e.jsx)("div",{className:"d-flex align-items-center item-list-owner "},(0,e.jsx)("div",{className:"app-list-h3 app-list-listview-name item-list-border-l"},(0,e.jsx)("span",{className:"skeleton-list-name"}))),(0,e.jsx)("div",{className:"d-flex align-items-center item-list-border-l item-list-time"},(0,e.jsx)("div",{className:"app-list-h3 skeleton-list-time"})),!t&&(0,e.jsx)("div",{className:"d-flex align-items-center item-list-border-l app-list-views-con app-list-views"},!this.props.isTemplateList&&(0,e.jsx)("div",{className:"app-list-h3 app-list-listview-view"},(0,e.jsx)("span",{className:"skeleton-btn cir-btn"}),(0,e.jsx)("span",{className:"skeleton-btn skeleton-view-num"}))),(0,e.jsx)("div",{className:(0,e.classNames)("align-items-center d-flex item-list-icon-con justify-content-end skeleton-list-icon-con")},(0,e.jsx)("span",{className:"skeleton-btn cir-btn mr-16"}),(0,e.jsx)("span",{className:"skeleton-btn cir-btn mr-16"}),(0,e.jsx)("span",{className:"skeleton-btn cir-btn mr-16"}),(0,e.jsx)("span",{className:"skeleton-btn cir-btn mr-16"})))}}getStyle(){var t,i,s,a,o,l;const r=this.props.theme;return e.css`
      .skeleton-pic,
      .skeleton-time,
      .skeleton-name,
      .skeleton-title,
      .skeleton-btn,
      .skeleton-list-pic,
      .skeleton-list-title,
      .skeleton-list-name,
      .skeleton-list-time {
        background: ${null===(i=null===(t=null==r?void 0:r.sys.color)||void 0===t?void 0:t.secondary)||void 0===i?void 0:i.main};
      }
      .item-message-con {
        .skeleton-title {
          height: ${e.polished.rem(32)};
        }
        .skeleton-name {
          height: ${e.polished.rem(18)};
          width: ${e.polished.rem(173)};
          margin-bottom: ${e.polished.rem(12)};
        }
        .skeleton-time {
          height: ${e.polished.rem(18)};
          width: ${e.polished.rem(120)};
          margin-bottom: ${e.polished.rem(12)};
        }
        .skeleton-btn-box {
          border-top: 1px solid ${null===(a=null===(s=null==r?void 0:r.sys.color)||void 0===s?void 0:s.secondary)||void 0===a?void 0:a.main};
          box-sizing: border-box;
          padding-top: ${e.polished.rem(10)};
        }
        .skeleton-btn {
          display: inline-block;
          width: ${e.polished.rem(16)};
          height: ${e.polished.rem(16)};
          border-radius: 50%;
          margin-right: ${e.polished.rem(4)};
        }
        .skeleton-lg-btn {
          border-radius: 0;
          width: ${e.polished.rem(32)};
        }
        .right-btn-con .skeleton-btn {
          margin-right: 0;
          margin-left: ${e.polished.rem(16)};
        }
      }
      &.listview-item {
        .item-list-owner .app-list-listview-name {
          margin-top: 0;
        }
        .app-list-listview-pic-con .skeleton-list-pic {
          background: ${null===(l=null===(o=null==r?void 0:r.sys.color)||void 0===o?void 0:o.secondary)||void 0===l?void 0:l.main};
        }
        .skeleton-list-title {
          width: ${e.polished.rem(200)};
          height: ${e.polished.rem(22)};
        }
        .skeleton-list-name {
          display: inline-block;
          width: ${e.polished.rem(120)};
          height: ${e.polished.rem(22)};
        }
        .skeleton-list-time {
          width: ${e.polished.rem(74)};
          height: ${e.polished.rem(22)};
        }
        .cir-btn {
          display: inline-block;
          width: ${e.polished.rem(16)};
          height: ${e.polished.rem(16)};
          border-radius: 50%;
        }
        .skeleton-view-num {
          width: ${e.polished.rem(32)};
          height: ${e.polished.rem(18)};
          margin-left: ${e.polished.rem(4)};
        }
        .mr-16 {
          margin-right: ${e.polished.rem(16)};
        }
      }
    `}render(){return this.props.isCardSkeleton?this.renderCardSkeleton():this.renderListSkeleton()}}class Re extends e.React.PureComponent{constructor(){super(...arguments),this.renderSkeleton=()=>{var t;const i=[],s=this.context.skeletonNum||6;for(let a=0;a<s;a++)i.push(e.React.createElement(Le,{key:a,theme:null===(t=null==this?void 0:this.context)||void 0===t?void 0:t.theme,isTemplateList:this.props.isTemplateList,isCardSkeleton:!0}));return i}}getViewContent(){var t;const i=this.props.apps.length,{isPrivilegeCheckEnd:s,updateAppList:a}=this.props;return e.React.createElement("div",{className:"app-list-detailview-content","data-testid":"app-item-list-card",role:"list"},i>0&&this.props.apps.map(((t,i)=>e.React.createElement(Ce,{appIndex:i,updateAppList:a,allFavoritesIdData:this.props.allFavoritesIdData,updateGroupItemId:this.props.updateGroupItemId,portalUrl:this.props.portalUrl,intl:this.props.intl,key:t.id,folderUrl:this.props.folderUrl,appItem:t.asMutable({deep:!0}),itemIdx:i,capabilities:this.props.capabilities,folderListData:this.props.folderListData,isPrivilegeCheckEnd:s,isTemplateList:this.props.isTemplateList}))),(null===(t=null==this?void 0:this.context)||void 0===t?void 0:t.isLoadSkeleton)&&this.renderSkeleton())}render(){const t=this.getViewContent();return e.React.createElement("div",{className:"app-list-detailview"},t)}}Re.contextType=u;const Fe=Re;class Ue extends re{render(){const{isDevEdition:t,publishStatus:i,publishStatusText:s}=this.state,{isTemplateList:a,appIndex:o,appItem:l,updateAppList:r}=this.props,{id:n,modified:p,type:d}=l,h=this.getShareState(this.props.appItem.access),g=this.getFavoriteStatus(this.props.allFavoritesIdData),v=this.judgeUserEditPrivileges(this.props.updateGroupItemId),w=`${n}-message`,x=e.css`
      &>.app-item-link {
        cursor: ${a?"auto":"pointer"}
      }
      .app-link {
        display: flex;
        flex: 1;
        width: 100%;
        align-items: center;
      }
    `;return(0,e.jsx)(u.Consumer,null,(({createApp:u,favoriteToggle:b})=>(0,e.jsx)("div",null,(0,e.jsx)("div",{className:(0,e.classNames)("mb-4 ml-0 mr-0 position-relative app-item-backcolor  listview-item item-list-con d-flex d-block app-item-link"),onMouseEnter:()=>{this.setState({itemSelected:!0})},onMouseLeave:()=>{this.setState({itemSelected:!1})},"data-testid":"list-item",css:x},(0,e.jsx)(be,{className:"d-flex flex-grow-1 list-view-link-con",title:this.props.appItem.title,href:this.getCardLinkUrl(),onClick:this.handleItemClick,onKeyDown:this.handleItemKeydown,a11yMessageId:`${w}`},(0,e.jsx)("div",{className:"d-flex align-items-center h-100"},(0,e.jsx)("div",{className:"sr-only",id:w},(0,e.jsx)("div",null,`${s}`),(0,e.jsx)("div",null,`${this.nls("owner")}: ${this.props.appItem.owner}`),(0,e.jsx)("div",null,this.nls("updated"),":",(0,e.jsx)(e.FormattedDate,{value:new Date(this.props.appItem.modified),year:"numeric",month:"2-digit",day:"2-digit"})),(0,e.jsx)("div",null,`${this.nls("applistItemViews")}: ${this.props.appItem.numViews}`)),(0,e.jsx)("div",{className:"p-0 position-absolute h-100 app-list-listview-pic-con"},(0,e.jsx)("div",{className:"app-list-listview-pic",style:{backgroundImage:"url("+this.getThumbnail()+")"}})),(0,e.jsx)("div",{className:(0,e.classNames)("d-flex align-items-center item-list-name-con",{"item-list-name-con-dev":t})},(0,e.jsx)("div",{className:"app-list-h2 d-flex align-items-center",style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:this.props.appItem.title},(0,e.jsx)("div",{className:"flex-grow-1 text-truncate"},this.props.appItem.title),i&&(0,e.jsx)("div",{className:(0,e.classNames)("publish-status text-truncate list-publish-status ",i),title:s,"data-testid":"publishStatus"},s))),(0,e.jsx)("div",{className:"d-flex align-items-center item-list-owner "},(0,e.jsx)("div",{className:"app-list-h3 app-list-listview-name item-list-border-l",title:this.props.appItem.owner},this.props.appItem.owner)),(0,e.jsx)("div",{className:"d-flex align-items-center item-list-border-l item-list-time"},(0,e.jsx)("div",{className:"app-list-h3"},p&&(0,e.jsx)(e.FormattedDate,{value:new Date(this.props.appItem.modified),year:"numeric",month:"2-digit",day:"2-digit"}))))),(0,e.jsx)("div",{className:"d-flex"},!t&&!a&&(0,e.jsx)("div",{title:`${this.nls("applistItemViews")}: ${this.props.appItem.numViews}`,className:"d-flex align-items-center item-list-border-l app-list-views-con app-list-views"},(0,e.jsx)("div",{className:"app-list-h3 app-list-listview-view pl-1 pt-1 pb-1"},(0,e.jsx)(m.Button,{rel:"noreferrer",title:`${this.nls("applistItemViews")}: ${this.props.appItem.numViews}`,type:"tertiary",className:"pr-1 border-0 mr-1",target:"_blank",href:`${this.props.portalUrl}/home/item.html?id=${this.props.appItem.id}`},(0,e.jsx)(xe,{className:"app-list-iconfill mr-1"}),(0,e.jsx)("span",null,this.props.appItem.numViews)))),(0,e.jsx)("div",{className:(0,e.classNames)("align-items-center d-flex item-list-icon-con justify-content-end",{templateIconCon:a,decIconCon:t})},!a&&(0,e.jsx)("div",{className:"d-flex align-items-center"},!t&&(0,e.jsx)(m.Button,{rel:"noreferrer",type:"tertiary",title:h.tips,className:"float-right pl-1 pr-1 app-item-launch border-0 mr-2",target:"_blank",href:`${this.props.portalUrl}/home/item.html?id=${this.props.appItem.id}`},this.getIconByShareType(h.shareType)),!t&&v.canView&&(0,e.jsx)(m.Button,{rel:"noreferrer",title:g?this.nls("removeFromFavorites"):this.nls("addFavorites"),type:"tertiary",className:(0,e.classNames)("pl-1 pr-1 app-item-launch border-0 mr-2",{favorite:g}),onClick:e=>{this.appLaunch(e),b(g,n)}},g?(0,e.jsx)(Te,{className:"app-list-iconfill mr-0"}):(0,e.jsx)(Ae,{className:"app-list-iconfill mr-0"})),v.canView&&(0,e.jsx)(m.Button,{"data-testid":"launchApp",rel:"noreferrer",title:this.nls("launchApp"),className:"float-right pl-1 pr-1 btn app-item-launch border-0 margin-4",type:"tertiary",target:"_blank",href:this.getPreviewAppUrl()},(0,e.jsx)(ce,{className:"app-list-iconfill mr-0"})),(0,e.jsx)(V,{updateAppList:r,appIndex:o,className:"float-right mr-2",portalUrl:this.props.portalUrl,intl:this.props.intl,appItem:this.props.appItem,folderUrl:this.props.folderUrl,isOwner:this.checkIsOwner(),isPublish:i!==c.Draft,isTemplateList:a,folderListData:this.props.folderListData,editPrivileges:v})),a&&(0,e.jsx)("div",{className:(0,e.classNames)("d-flex align-items-center justify-content-end",!this.checkIsOwner()&&"icon-con-padding-r")},v.canView&&(0,e.jsx)(m.Button,{type:"tertiary",rel:"noreferrer",title:this.nls("launchApp"),className:"float-right pl-1 pr-1 app-item-launch border-0 mr-2",target:"_blank",href:this.getPreviewTemplateAppUrl()},(0,e.jsx)(ce,{className:"app-list-iconfill mr-0"})),!t&&d!==f.AppType.ExperienceType&&v.canView&&(0,e.jsx)(m.Button,{rel:"noreferrer",title:g?this.nls("removeFromFavorites"):this.nls("addFavorites"),type:"tertiary",className:(0,e.classNames)("pl-1 pr-1 app-item-launch border-0 mr-2 float-right",{favorite:g}),onClick:e=>{this.appLaunch(e),b(g,n)}},g?(0,e.jsx)(Te,{className:"app-list-iconfill mr-0"}):(0,e.jsx)(Ae,{className:"app-list-iconfill mr-0"})),v.canEdit&&(0,e.jsx)(m.Button,{rel:"noreferrer",type:"tertiary",className:"float-right pl-1 pr-1 app-item-launch border-0 mr-2",title:this.nls("appListEdit"),onClick:this.editTemplateClick},(0,e.jsx)(Se,{className:"app-list-iconfill mr-0"})),v.canCreate&&i!==c.Draft&&(0,e.jsx)(m.Button,{rel:"noreferrer",type:"tertiary",className:"float-right pl-1 pr-1 app-item-launch border-0 margin-4",title:this.nls("createNewTitle"),onClick:e=>{this.appLaunch(e),u(l)}},(0,e.jsx)(ge,{className:"app-list-iconfill mr-0"})),(0,e.jsx)(V,{className:"float-right mr-2",updateAppList:r,appIndex:o,portalUrl:this.props.portalUrl,intl:this.props.intl,appItem:this.props.appItem,folderUrl:this.props.folderUrl,isOwner:this.checkIsOwner(),isTemplateList:a,isPublish:i!==c.Draft,folderListData:this.props.folderListData,editPrivileges:v})))),(0,e.jsx)(m.AlertPopup,{isOpen:this.state.isShowAlertPopup,title:this.nls("popUpTitle"),hideCancel:!0,toggle:this.handleToggle},(0,e.jsx)("div",{style:{fontSize:"1rem"}},this.nls("noEditContentPrivilegesError")))))))}}class Be extends e.React.PureComponent{constructor(t){super(t),this.renderSkeleton=()=>{var t;const i=this.context.skeletonNum||6,s=[];for(let a=0;a<i;a++)s.push(e.React.createElement(Le,{key:a,theme:null===(t=null==this?void 0:this.context)||void 0===t?void 0:t.theme,isCardSkeleton:!1,isTemplateList:this.props.isTemplateList}));return s},this.toggle=()=>{this.setState({tooltipOpen:!this.state.tooltipOpen})},this.state={tooltipOpen:!1}}getViewContent(){const t=this.props.apps.length,{isPrivilegeCheckEnd:i,updateAppList:s}=this.props;if(t<1)return null;{let t=null,a=null;return t=this.props.apps.map(((t,a)=>e.React.createElement(Ue,{appIndex:a,updateAppList:s,allFavoritesIdData:this.props.allFavoritesIdData,updateGroupItemId:this.props.updateGroupItemId,portalUrl:this.props.portalUrl,folderUrl:this.props.folderUrl,key:t.id,itemIdx:a,appItem:t.asMutable({deep:!0}),intl:this.props.intl,capabilities:this.props.capabilities,folderListData:this.props.folderListData,isPrivilegeCheckEnd:i,isTemplateList:this.props.isTemplateList}))),a=e.React.createElement(m.Container,{className:"app-list-listview-container",role:"list",style:{maxWidth:"100%"}},t),a}}render(){var t;const i=this.getViewContent();return e.React.createElement("div",{className:"app-list-listview w-100","data-testid":"app-item-list-list"},i,e.React.createElement(m.Container,{className:"app-list-listview-container",style:{maxWidth:"100%"}},(null===(t=null==this?void 0:this.context)||void 0===t?void 0:t.isLoadSkeleton)&&this.renderSkeleton()))}}Be.contextType=u;const Ve=Be;class ze extends e.React.PureComponent{render(){const{apps:t,isDetailContent:i,portalUrl:s,intl:a,folderUrl:o,switchListView:l,isTemplateList:r,allFavoritesIdData:n,capabilities:p,updateGroupItemId:d,folderListData:c,isPrivilegeCheckEnd:m,updateAppList:h}=this.props;return e.React.createElement("div",{className:"app-list-view"},i&&e.React.createElement(Fe,{updateAppList:h,allFavoritesIdData:n,updateGroupItemId:d,portalUrl:s,intl:a,folderUrl:o,apps:t,capabilities:p,switchListView:l,folderListData:c,isPrivilegeCheckEnd:m,isTemplateList:r}),!i&&e.React.createElement(Ve,{updateAppList:h,allFavoritesIdData:n,updateGroupItemId:d,portalUrl:this.props.portalUrl,intl:this.props.intl,folderUrl:o,apps:t,capabilities:p,switchListView:l,folderListData:c,isPrivilegeCheckEnd:m,isTemplateList:r}))}}function Ge(t){return e.css`
    &.invalid-message {
      text-align: center;
      top: 50%;
      font-size: ${e.polished.rem(16)};
      color: ${t.ref.palette.neutral[1e3]};
      min-width: ${e.polished.rem(800)};
      width: 100%;
      box-sizing: border-box;
      padding:0 ${e.polished.rem(50)};
    }
    .loading-con {
      position: fixed;
      left: 0;
      top: 0;
      right: 0;
      bottom: 0;
      background: ${e.polished.rgba(t.ref.palette.white,.2)};
    }
    a.jimu-btn:hover {
      color: var(--ref-palette-black);
    }
    .app-version-remind {
      color: var(--sys-color-warning-main);
      .jimu-icon {
        margin-right: 0;
      }
    }
    .widget-builder-app-list {
      overflow-y: auto;

      .widget-builder-app-list-screen {
        width:${e.polished.rem(824)};
        margin: auto;
      }

      button.app-list-newapp:hover{
        color: ${t.ref.palette.black} !important;
      }

      .modal-content {
        background:none;
      }

      .app-list-newapp {
        padding-left: ${e.polished.rem(16)};
        padding-right: ${e.polished.rem(16)};
        font-size: ${e.polished.rem(16)};
        margin-left: ${e.polished.rem(20)};
        height:${e.polished.rem(40)};
        white-space: nowrap;
        .app-list-newapp-icon {
          margin-right: ${e.polished.rem(8)};
        }
      }

      .app-list-search-container {
        padding-left: ${e.polished.rem(16)};
      }

      .app-list-h1 {
        font-size: ${e.polished.rem(24)};
      }

      .app-list-h2 {
        font-size: ${e.polished.rem(16)};
      }

      .app-list-h3 {
        font-size: ${e.polished.rem(13)};
      }

      .app-list-maxwidth {
        max-width: ${75}rem;
        top:40px;
      }

      .app-list-banner {
        overflow: hidden;
        width: 100%;
        height: ${5}rem;
        align-items: center;
        .list-title {
          color: ${t.ref.palette.neutral[1e3]};
          margin-bottom: 0;
        }
      }

      .app-list-filterbar {
        margin-left: auto;
        margin-right: auto;
        width: 100%;
        padding-top: ${1.875}rem;
        padding-bottom: ${1.875}rem;
        border-top: 1px solid ${t.sys.color.divider.secondary};
        .search-con {
          position:relative;
          align-items:center;
          border-radius:2px;
          background:${t.ref.palette.neutral[300]};
          /* width:${e.polished.rem(257)}; */
          width:${e.polished.rem(228)};
        }
        .app-list-switchview-con {
          border-radius: 2px;
          overflow:hidden;
          display: inline-block;
          vertical-align: middle;
          .default-active-switch-button {
            background: var(--sys-color-secondary-main);
            color: var(--sys-color-secondary-text);
          }
        }
        .app-list-switchview {
          border-radius: 0;
        }
        .app-list-switchview-right {
          border-radius: 0;
        }
        .app-list-searchIconFill {
          color: ${t.ref.palette.neutral[1e3]};
        }
        .app-list-searchbox:focus + .clear-con{
          display: block;
        }
        .clear-con {
          right: ${e.polished.rem(6)};
          cursor: pointer;
          color: ${t.ref.palette.neutral[1e3]};
          transition: all ease .5s;
          /* display: none; */
        }
        .clear-con:hover {
          color: ${t.ref.palette.black};
        }
        .app-list-searchbox {
          color: ${t.ref.palette.black};
          width: 100%;
          height: ${2}rem;
          font-size:${.875}rem;
          box-sizing: border-box;
        }
        .app-list-searchbox::-ms-clear{
          display: none;
        }
        .app-list-clear {
          cursor: pointer;
        }
        .app-list-searchbox::-webkit-input-placeholder {
          color: ${t.ref.palette.neutral[900]};
        }
        .app-list-searchbox:-moz-placeholder {
          color: ${t.ref.palette.neutral[900]};
        }
        .app-list-searchbox:-ms-input-placeholder {
          color: ${t.ref.palette.neutral[900]};
        }
        .filterbar-input {
          width: ${8.75}rem;
          margin-right:${e.polished.rem(10)};
          height:${e.polished.rem(32)};
          line-height:${e.polished.rem(32)};
          cursor: pointer;
          display: inline-block;
          vertical-align: middle;
        }

        .app-list-filterbar-title {
          padding-left: ${e.polished.rem(16)};
          padding-right: ${e.polished.rem(21)};
        }
      }
      .favorite {
        color: ${t.sys.color.warning.main};
      }
      .margin-4 {
        margin-right: ${e.polished.rem(4)};
      }
      .app-list-item-scroll-con {
        height: calc(100% - ${e.polished.rem(200)});
        overflow-y: auto;
        overflow-y: overlay;
        min-width: ${e.polished.rem(824)};
        outline: none;
      }
      .app-list-content {
        width: 100%;
        padding-bottom: ${3.125}rem;
        padding-top: ${.25}rem;
      }
      .top-space {
        height: ${11.625}rem;
      }
      .app-list-detailview {
        width: 100%;

        .app-list-detailview-name {
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
          /* max-width: ${e.polished.rem(120)}; */
        }

        .app-list-detailview-content {
          width: 100%;

          display: flex;
          flex-wrap: wrap;

          .app-list-detailview-pic {
            aspect-ratio: 200 / 133;
            background-size: 100% 100%;
            background-position: center center;
            background-repeat: no-repeat;
            height: ${e.polished.rem(160)};
          }
          .app-list-detailview-pic-cursor {
            cursor: pointer;
          }
        }

        .dropdown-toggle::after {
          display: none !important;
        }
      }

      .app-list-listview {

        .app-list-listview-name {
          overflow: hidden;
          text-overflow: ellipsis;
          white-space: nowrap;
        }

        .app-list-listview-view {
          &{
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
          }
          button {
            vertical-align: middle;
          }
          button:hover {
            color:${t.ref.palette.neutral[1e3]};
          }
          span {
            display: inline-block;
            vertical-align: middle;
            margin-bottom: ${e.polished.rem(-2)};
            color:${t.ref.palette.neutral[1e3]};
          }
        }
        .app-list-views-con {
          padding-right: 5px;
        }
        .app-list-listview-container {
          position: relative;
          padding-left: ${e.polished.rem(16)};
          padding-right: ${e.polished.rem(16)};
        }

        .app-list-listview-pic {
          width:${e.polished.rem(60)};
          height:${e.polished.rem(40)};
          left:0;
          top:0;
          background-size: cover;
          background-position: center center;
          background-color: ${t.ref.palette.neutral[1e3]};
          position: inherit;
        }
        .app-list-detailview-pic-cursor {
          cursor: pointer;
        }
        .app-list-listview-pic-con {
          left: 0;
          top: 0;
          z-index: 10;
        }
      }

      .detailview-item {
        width: ${e.polished.rem(244)};
        height: ${e.polished.rem(330)};
        margin: 0 ${e.polished.rem(15)} ${e.polished.rem(30)} ${e.polished.rem(15)};
        border: 1px solid ${t.ref.palette.neutral[400]};
        background: ${t.ref.palette.neutral[500]};
      }
      .app-item-link {
        text-decoration: none;
      }

      .app-item-more {
        margin-right: -0.625rem;
      }

      .app-item-backcolor {
        background-color: ${t.ref.palette.neutral[500]};
      }

      .app-item-launch:focus {
        box-shadow: none !important;
      }
      .icon-con-padding-r {
        padding-right:${e.polished.rem(5)};
      }
      .app-list-icon-margin {
        fill: #BCC4CD !important;
        margin-right: 0;
        margin-left: 0;
      }

      .app-list-dropdown {
        padding: 0;
        margin: 0;
        min-width: 0;
      }

      .dropdown-toggle::after {
        display: none !important;
      }

      .app-list-searchIconFill {
        fill: ${t.ref.palette.neutral[1e3]} !important;
        color: ${t.ref.palette.neutral[1e3]} !important;
      }

      .item-message-con {
        padding:${e.polished.rem(12)};
        padding-bottom:0;
      }
      .item-card-title {
        display: -webkit-box;
        -webkit-box-orient: vertical;
        -webkit-line-clamp: 2;
        overflow: hidden;
        height:${e.polished.rem(46)};
        color:${t.ref.palette.neutral[1100]};
        margin-bottom:${e.polished.rem(16)};
      }
      .app-list-detailview-name, .app-list-detailview-time {
        color:${t.ref.palette.neutral[1e3]};
        font-size:${.8125}rem;
        line-height:${1.25}rem;
        min-height:${1.25}rem;
        padding-bottom:${e.polished.rem(5)};
      }
      .card-item-link-con {
        & {
          height: 0;
        }
        .app-link {
          height: 100%;
          display: flex;
          flex-direction: column;
        }
      }
      .edit-item-con-template {
        height: ${2.5}rem;
      }
      .edit-item-con {
        & {
          height: ${2.5}rem;
          margin-left:${e.polished.rem(12)};
          margin-right:${e.polished.rem(12)};
          border-top:1px solid ${t.ref.palette.neutral[700]};
          margin-bottom:${e.polished.rem(3)};
        }
        .item-views-number {
          color:${t.ref.palette.neutral[1e3]};
          max-width: ${e.polished.rem(118)};
          overflow: hidden;
          white-space: nowrap;
          text-overflow: ellipsis;
        }
        .item-views-number button {
          vertical-align: middle;
        }
        .item-views-number button:hover {
          color:${t.ref.palette.neutral[1e3]};
        }
        .item-views-number span {
          display: inline-block;
          vertical-align: middle;
        }
        .template-item-btn-box {
          margin-left: ${e.polished.rem(-4)};
        }
      }
      .description-con {
        & {
          background-color: ${e.polished.rgba(t.ref.palette.white,.8)};
          left:0;
          top:0;
          right:0;
          bottom:0;
          box-sizing: border-box;
          padding:${e.polished.rem(16)};
          color:${t.ref.palette.neutral[1100]};
          font-size:${.75}rem;
          opacity: 0;
          transition: all ease .2s;
          overflow-y:scroll;
        }
        div {

        }
      }
      .dropdown-toggle svg.jimu-icon {
        transform: rotate(0deg);
        margin-right: 3px;
      }
      .app-list-detailview-pic:hover .description-con {
        opacity: 1;
      }
      .publish-status {
        background: ${t.sys.color.warning.light};
        height: ${e.polished.rem(18)};
        line-height: ${e.polished.rem(18)};
        right: ${e.polished.rem(8)};
        top: ${e.polished.rem(8)};
        color: ${t.ref.palette.white};
        padding: 0 ${e.polished.rem(6)};
        border-radius: 2px;
        font-size: ${e.polished.rem(10)};
        box-sizing: border-box;
        font-weight: bold;
      }
      .list-publish-status {
        max-width: ${e.polished.rem(100)};
        margin: 0 ${e.polished.rem(16)} 0 ${e.polished.rem(10)};
        min-width: ${e.polished.rem(40)};
        text-align: center;
      }
      .Published {
        color: ${t.ref.palette.white};
        background: ${t.sys.color.success.light};
      }
      .Changed {
        color: ${t.ref.palette.white};
        background: ${t.sys.color.error.light};
      }
      .list-view-link-con {
        width: ${e.polished.rem(541)};
      }
      .item-list-con {
        & {
          height:${e.polished.rem(44)};
          background: ${t.ref.palette.neutral[500]};
          border: 2px solid ${t.ref.palette.neutral[400]};;
          transition: all ease .3s;
        }
        .item-list-name-con {
          padding-left:${e.polished.rem(76)};
          font-size:${1}rem;
          color:${t.ref.palette.neutral[1100]};
          flex-grow: 1;
          max-width: 36%;
        }
        .item-list-owner {
          width: ${e.polished.rem(160)};
          box-sizing: border-box;
        }
        .item-list-time {
          width: ${e.polished.rem(99)};
        }
        .app-list-views {
          width: ${e.polished.rem(80)};
        }
        .item-list-icon-con {
          padding-right:0;
          width: ${e.polished.rem(167)};
        }

        .item-list-icon-con>div {
          height: ${e.polished.rem(24)};
        }
        .item-list-name-con-dev {
          max-width: 46%;
        }
        .item-list-name-con-default {
          max-width: 83%;
        }
        .app-list-h3 {
          color:${t.ref.palette.neutral[1e3]};
        }
        .item-list-border-l {
          border-left: 1px solid ${t.sys.color.secondary.dark};
          box-sizing:border-box;
          padding-left:${e.polished.rem(16)};
          height:${e.polished.rem(24)};
          margin-top:${e.polished.rem(8)};
          box-sizing: border-box;
        }

      }
      @media only screen and (min-width: 1280px) {
        .list-view-link-con {
          width: ${e.polished.rem(541)};
        }
        .widget-builder-app-list-screen {
          width:${e.polished.rem(1100)};
        }
        .app-list-filterbar .search-con {
            width:${e.polished.rem(400)};
        }
        .app-list-filterbar .filterbar-input {
          width: ${e.polished.rem(170)};
          margin-right:${e.polished.rem(20)};
        }
        .item-list-con {
          .item-list-name-con {
            max-width: 53%;
          }
          .item-list-name-con-dev {
            max-width: 60%;
          }
          .item-list-name-con-default {
            max-width: 88%;
          }
        }
      }
      @media only screen and (min-width: 1400px) {
        .list-view-link-con {
          width: ${e.polished.rem(817)};
        }
        .widget-builder-app-list-screen {
            width:${e.polished.rem(1372)};
        }
        .app-list-filterbar .filterbar-input {
          width: ${e.polished.rem(200)};
        }
        .item-list-con {
          .item-list-name-con{
            max-width: 48%;
          }
          .item-list-owner {
            width: ${e.polished.rem(260)};
          }
          .item-list-time {
            width: ${e.polished.rem(159)};
          }
          .app-list-views {
            width: ${e.polished.rem(106)};
          }
          .item-list-name-con-dev {
            max-width: 59%;
          }
          .item-list-name-con-default {
            max-width: 90%;
          }
        }
      }

      @media only screen and (min-width: 1680px) {
        .list-view-link-con {
          width: ${e.polished.rem(1345)};
        }
        .widget-builder-app-list-screen {
            width:${e.polished.rem(1645)};
        }
        .item-list-con {
          .item-list-name-con{
            max-width: 57.5%;
          }
          .item-list-name-con-dev {
            max-width: 64%;
          }
          .item-list-name-con-default {
            max-width: 90%;
          }
        }
      }
    }
  `}var _e=n(921),He=n.n(_e),qe=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};const We=t=>{const i=window.SVG,{className:s}=t,a=qe(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:o,src:He()},a)):e.React.createElement("svg",Object.assign({className:o},a))};var Qe=n(340),Ke=n(655),Ye=n.n(Ke),Ze=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};const Je=t=>{const i=window.SVG,{className:s}=t,a=Ze(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:o,src:Ye()},a)):e.React.createElement("svg",Object.assign({className:o},a))};class Xe extends e.React.PureComponent{constructor(e){super(e),this.getTextAndIndexById=(e,t)=>{let{text:i}=this.state;return e.forEach(((e,s)=>{t===e.value&&(i=e.text)})),i},this.toggleDropdown=()=>{const{dropdownOpen:e}=this.state;this.setState({dropdownOpen:!e})},this.optionClick=(e,t,i)=>{const{onChange:s,onOptionClick:a,value:o}=this.props;this.setState({text:t}),this.toggleDropdown(),o!==i&&s&&s(i),a&&a(i)},this.state={dropdownOpen:!1,text:""}}componentDidMount(){}getStyle(){const t=this.props.theme;return e.css`
      .dropdown button,
      .dropdown button:not(:disabled):not(.disabled):active, .dropdown button:not(:disabled):not(.disabled):hover  {
        background: ${t.ref.palette.neutral[300]};
        padding-right: 0;
      }
      .dropdown button {
        color: ${t.ref.palette.black};
      }
      .dropdown span {
        display: flex;
        align-items: center;
        svg {
          margin-right: ${e.polished.rem(6)};
        }
      }
    `}getDropdownStyle(){const t=this.props.theme;return e.css`
      & {
        background: ${t.sys.color.secondary.main};
        border: 1px solid ${t.sys.color.secondary.main};
        border-radius: 2px;
        font-size: ${e.polished.rem(14)};
        padding: 0;
      }
      .dropdown-menu--inner {
        max-height: ${e.polished.rem(200)};
      }
      .dropdown-menu--inner .active {
        background: ${t.sys.color.primary.main};
      }
      .icon-con {
        width: ${e.polished.rem(12)};
        height: ${e.polished.rem(12)};
        display: inline-block;
        vertical-align: middle;
        margin-right: ${e.polished.rem(8)};
      }
      .icon-con svg {
        display: block;
      }
    `}render(){const{dropdownOpen:t}=this.state,{dropDownData:i,isShowSelectIcon:s,className:a,value:o}=this.props,l=this.getTextAndIndexById(i,o);return(0,e.jsx)("div",{className:(0,e.classNames)("d-inline-block align-middle",a),css:this.getStyle()},(0,e.jsx)(m.Dropdown,{size:"sm",toggle:this.toggleDropdown,isOpen:t,className:"h-100",autoWidth:!0,menuItemCheckMode:"singleCheck",activeIcon:s},(0,e.jsx)(m.DropdownButton,{size:"sm",type:"tertiary",arrow:!1,className:"dropdown d-flex filterbar-input",title:l},(0,e.jsx)("div",{className:"flex-grow-1 text-left text-truncate"},l),(0,e.jsx)(Je,{size:"s",className:"toollist-item-icon"})),(0,e.jsx)(m.DropdownMenu,{css:this.getDropdownStyle()},i.map(((t,i)=>(0,e.jsx)(m.DropdownItem,{key:i,onClick:e=>{this.optionClick(e,t.text,t.value)},className:(0,e.classNames)({active:o===t.value}),title:t.text,active:o===t.value},(0,e.jsx)("div",{className:"text-truncate"},t.text)))))))}}const et=(0,g.withTheme)(Xe);var tt=n(578),it=n.n(tt),st=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};const at=t=>{const i=window.SVG,{className:s}=t,a=st(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:o,src:it()},a)):e.React.createElement("svg",Object.assign({className:o},a))};var ot=n(962),lt=n.n(ot),rt=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};const nt=t=>{const i=window.SVG,{className:s}=t,a=rt(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:o,src:lt()},a)):e.React.createElement("svg",Object.assign({className:o},a))};var pt=n(170),dt=n.n(pt),ct=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};const mt=t=>{const i=window.SVG,{className:s}=t,a=ct(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:o,src:dt()},a)):e.React.createElement("svg",Object.assign({className:o},a))},{useRef:ht}=e.React,ut=t=>{const i=ht(),s=ht(),a=ht(),o=ht(!1),{className:l,onScrollTop:r,onScroll:n,onScrollBottom:p}=t,d=e.css`
    & {
      overflow-y: auto;
      overflow-y: overlay;
    }
    .top-marking, .bottom-marking {
      width: 3px;
      height: 3px;
      right: 0;
    }
    .top-marking {
      top: 0;
    }
    .bottom-marking {
      bottom: 10px;
    }
    .list-scroll-con {
      padding-top: 1px;
    }
  `,c=(e,t,i,s)=>{const a=new IntersectionObserver((function(e,t){const s=e[0].intersectionRatio>0;i&&i(s)}),s||{root:t});return a.observe(e),a},m=e=>{r&&r(e)},h=e=>{p&&p(e)};return(0,e.jsx)("div",{className:(0,e.classNames)("w-100 h-100",l),css:d,ref:e=>{e&&!o.current&&(c(null==s?void 0:s.current,null==i?void 0:i.current,h),c(null==a?void 0:a.current,null==i?void 0:i.current,m),o.current=!0)}},(0,e.jsx)("div",{className:"position-relative w-100 list-scroll-con",onScroll:()=>{n&&n()}},(0,e.jsx)("span",{className:"top-marking position-absolute",ref:a}),null==t?void 0:t.children,(0,e.jsx)("span",{className:"bottom-marking position-absolute",ref:s})))};var gt=n(508),vt=n.n(gt),ft=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};const wt=t=>{const i=window.SVG,{className:s}=t,a=ft(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:o,src:vt()},a)):e.React.createElement("svg",Object.assign({className:o},a))},{AppHigherVersionStateType:xt,checkAppHigherVersionState:bt}=e.utils,yt=t=>{const i=e.hooks.useTranslation(m.defaultMessages,e.defaultMessages,v),s=(0,g.useTheme)(),{className:a,appItem:o,isExperiencesTemplate:l,portalUrl:r,folderUrl:n,selectedApp:p,onItemSelected:d,showVersionRemindPopper:c}=t,h=e.css`
    & {
      width: ${e.polished.rem(244)};
      height: ${e.polished.rem(280)};
      margin: 0 ${e.polished.rem(15)} ${e.polished.rem(30)} ${e.polished.rem(15)};
      border: 1px solid ${s.ref.palette.neutral[400]};
      background: ${s.ref.palette.neutral[500]};
      display: inline-block;
      cursor: pointer;
    }
    .card-checkmark {
      background-color: var(--sys-color-primary-dark) !important;
    }
    .app-version-remind {
      color: var(--sys-color-warning-main);
      .jimu-icon {
        margin-right: 0;
      }
    }
    .title-con {
      width: 0;
    }
    .app-item-link {
      text-decoration: none;
    }
    .app-thumbnail-con {
      background-size: cover;
      background-position: center center;
      background-repeat: no-repeat;
      height: 56%;
    }
    .card-info-con {
      & {
        padding: ${e.polished.rem(12)};
      }
      h2 {
        font-size: ${e.polished.rem(16)};
        line-height: ${e.polished.rem(20)};
        color: ${s.ref.palette.neutral[1100]};
        height: ${e.polished.rem(36)};
      }
      .mt13 {
        margin-top: ${e.polished.rem(13)};
      }
      .mt10 {
        margin-top: ${e.polished.rem(4)};
      }
    }
  `,u=()=>{d(o)};return(0,e.jsx)(m.Card,{className:(0,e.classNames)("import-card-item",a),css:h,onClick:()=>{if((null==p?void 0:p.id)===(null==o?void 0:o.id))d(null);else{const e=bt(null==o?void 0:o.asMutable({deep:!0}));e===xt.Published||e===xt.Both?c(l,u):u()}},active:(null==p?void 0:p.id)===(null==o?void 0:o.id)},(0,e.jsx)("div",{className:"app-thumbnail-con w-100",style:{backgroundImage:"url("+(()=>{const t=o.thumbnail,{id:i}=o;let s=t;const a=l?"templateDefaultthumb.png":"defaultthumb.png",p=e.SessionManager.getInstance().getSessionByUrl(r),d=p&&(null==p?void 0:p.token)?"?token="+p.token:"";return s=s?`${r}/sharing/rest/content/items/${i}/info/${t}${d}`:n+`./dist/runtime/assets/${a}`,s})()+")"}}),(0,e.jsx)(m.CardBody,{className:"card-info-con"},(0,e.jsx)("h2",{title:o.title,className:"text-truncate w-100 d-flex"},(0,e.jsx)("div",{className:"flex-grow-1 text-truncate title-con"},o.title),bt(null==o?void 0:o.asMutable({deep:!0}))!==xt.None&&(0,e.jsx)("div",{className:"ml-2 app-version-remind",title:(()=>{switch(bt(null==o?void 0:o.asMutable({deep:!0}))){case xt.Both:return i(l?"templateVersionRemind":"experienceVersionRemind");case xt.Draft:return i(l?"draftTemplateVersionRemind":"draftExperienceVersionRemind");case xt.Published:return i(l?"publishedTemplateVersionRemind":"publishedExperienceVersionRemind")}})()},(0,e.jsx)(I,null))),(0,e.jsx)("div",{className:"app-list-h3 mt13"},o.modified&&(0,e.jsx)(e.FormattedDate,{value:new Date(o.modified),year:"numeric",month:"2-digit",day:"2-digit"})),(0,e.jsx)("div",{className:"d-flex align-items-center mt10"},(0,e.jsx)("div",{className:"flex-grow-1"},o.owner),(0,e.jsx)(m.Button,{type:"tertiary",size:"sm",title:i("details"),target:"_blank",href:`${r}/home/item.html?id=${o.id}`,icon:!0},(0,e.jsx)(wt,null)))))},jt=t=>e.css`
    &.widget-ds-setting-add-data-popup {
      max-width: ${e.polished.rem(5e5)};
      margin: 0;
    }
    .selector-right-header{
      padding: ${e.polished.rem(23)} ${e.polished.rem(20)} ${e.polished.rem(12)} ${e.polished.rem(20)};
    }
    .widget-builder-app-list-screen {
      width:${e.polished.rem(830)};
      margin: auto;
      height: calc(100% - 65px);
      .p-15 {
        padding-left: ${e.polished.rem(15)};
        padding-right: ${e.polished.rem(15)};
      }
    }
    .filterbar-input {
      width: ${e.polished.rem(140)};
      margin-right:${e.polished.rem(10)};
      height:${e.polished.rem(32)};
      line-height:${e.polished.rem(32)};
      cursor: pointer;
      display: inline-block;
      vertical-align: middle;
    }
    .classify-con {
      margin-left: auto;
      margin-right: auto;
      width: 100%;
      padding-top: ${e.polished.rem(30)};
      padding-bottom: ${e.polished.rem(30)};
    }
    @media only screen and (min-width: 1280px) {
      .widget-builder-app-list-screen {
        width:${e.polished.rem(1104)};
      }
    }
    @media only screen and (min-width: 1400px) {
      .widget-builder-app-list-screen {
          width:${e.polished.rem(1378)};
      }
    }
    @media only screen and (min-width: 1680px) {
      .widget-builder-app-list-screen {
          width:${e.polished.rem(1654)};
      }
    }
    .template-title {
      font-size: ${e.polished.rem(14)};
      color:${t.ref.palette.neutral[900]};
      .navbar-nav button.nav-link {
        & {
          color:${t.ref.palette.neutral[900]};
        }
        &:hover, &:focus {
          color:${t.ref.palette.black};
        }
      }
      .tap-link a.active {
        font-weight:500;
      }
      .header-nav-bar-con {
        padding:0;
        .navbar-nav {
          border: none;
        }
        .nav-item {
          flex: auto;
        }
      }
      a {
        width:auto;
      }
      .nav-item a.nav-link {
        width: auto;
        white-space: nowrap;
        color: inherit;
      }
      .nav-item a.nav-link:hover, .nav-item a.nav-link:focus {
        color: ${t.ref.palette.black};
      }
      .tap-margin-r {
        margin-right:${e.polished.rem(12)};
      }
    }
    .app-item-list-con {
      height: calc(100% - 189px);
      padding-bottom: ${e.polished.rem(30)};
    }
    .portal-app-classify-con .filterbar-input {
      margin-right: 0 !important;
    }
    .loading-con {
      position: fixed;
      left: 0;
      top: 0;
      right: 0;
      bottom: 0;
      background: ${e.polished.rgba(t.ref.palette.white,.2)};
    }
    .item-selected-con{
      width: ${e.polished.rem(300)};
      background-color: ${t.ref.palette.neutral[600]};
      box-shadow: 0 0 10px 4px ${e.polished.rgba(t.ref.palette.white,.3)};
      position: absolute;
      right: 30px;
      bottom: 30px;
      z-index: 2;
      .added-ds-items{
        max-height: ${e.polished.rem(500)};
        overflow-y: auto;
        overflow-x: hidden;
      }
      .small-done-btn{
        max-width: ${e.polished.rem(100)};
      }
    }
    .item-selector-search {
      width: ${e.polished.rem(300)};
    }
  `;class Nt extends e.React.PureComponent{constructor(e){super(e),this.getEmptyText=()=>{const{isTemplateList:e,accessType:i}=this.props;let{emptyTextTop:s,emptyTextBottom:a}=this.state;switch(i){case t.Me:case t.Anyone:e?(s=this.nls("noItemsYet"),a=this.nls("templateEmptyText")):s=this.nls("createExperience");break;case t.NotMe:s=this.nls("sharedEmptyText");break;case t.MyFavorites:s=this.nls("noItemsYet"),a=this.nls("favoritesEmptyText");break;case t.Public:s=this.nls("noPublicItems");break;case t.Default:s=this.nls("noItemsYet")}this.setState({emptyTextTop:s,emptyTextBottom:a})},this.nls=e=>this.props.intl?this.props.intl.formatMessage({id:e,defaultMessage:v[e]}):e,this.state={emptyTextTop:"",emptyTextBottom:""}}componentDidMount(){this.getEmptyText()}getStyle(){var t,i,s,a;const o=this.props.theme,l=null!==(i=null===(t=null==o?void 0:o.ref.palette)||void 0===t?void 0:t.neutral[900])&&void 0!==i?i:"#a8a8a8",r=null!==(a=null===(s=null==o?void 0:o.ref.palette)||void 0===s?void 0:s.neutral[1e3])&&void 0!==a?a:"#c5c5c5",n=this.props.folderUrl+"./dist/runtime/assets/empty.png",p=this.props.folderUrl+"./dist/runtime/assets/no_item.png";return e.css`
      & {
        width: 100%;
        margin-top: ${e.polished.rem(120)};
      }
      div {
        text-align: center;
      }
      .empty-con {
        width: 100%;
        top: 50%;
      }
      .icon-con {
        width: ${e.polished.rem(458)};
        height: ${e.polished.rem(303)};
        background: url(${n}) no-repeat left top;
        background-size: contain;
        margin: 0 auto;
        opacity: 0.4;
      }
      .search-empty {
        background-image: url(${p});
        height: ${e.polished.rem(458/1.32)};
      }
      .create-experience {
        color: ${r};
        font-size: ${e.polished.rem(16)};
        line-height: ${e.polished.rem(16)};
        margin-top: ${e.polished.rem(30)};
        font-weight: 500;
      }
      .remind-to-click {
        color: ${l};
        font-size: ${e.polished.rem(14)};
        line-height: ${e.polished.rem(14)};
        margin-top: ${e.polished.rem(20)};
      }
      .remind-to-click span {
        color: ${r};
        font-weight: 500;
      }
      @media only screen and (max-width: 1600px) {
        & {
          margin-top: ${e.polished.rem(80)};
        }
      }
      @media only screen and (max-width: 1360px) {
        & {
          width: 100%;
          margin-top: ${e.polished.rem(0)};
        }
        .icon-con {
          width: ${e.polished.rem(200)};
          height: ${e.polished.rem(132)};
        }
        .search-empty {
          height: ${e.polished.rem(200/1.32)};
        }
        .create-experience {
          margin-top: ${e.polished.rem(20)};
        }
        .remind-to-click {
          margin-top: ${e.polished.rem(10)};
        }
      }
      @media only screen and (max-width: 1176px) {
        & {
          margin-top: ${e.polished.rem(20)};
        }
      }
    `}render(){const{accessType:i,isTemplateList:s,searchText:a,isImportAppListEmpty:o}=this.props,{emptyTextTop:l,emptyTextBottom:r}=this.state,n=this.props.intl.formatMessage({id:"toCreate",defaultMessage:v.toCreate},{createNewElement:(0,e.jsx)("span",{key:"toCreate"},"+ ",this.nls("newApp"))});return(0,e.jsx)("div",{css:this.getStyle(),className:"app-list-empty-con"},0===a.length&&!o&&(0,e.jsx)("div",{className:"empty-con"},(0,e.jsx)("div",{className:"icon-con"}),l&&(0,e.jsx)("div",{className:"create-experience"},l),r&&(0,e.jsx)("div",{className:"create-experience"},r),!s&&(i===t.Me||i===t.Anyone)&&(0,e.jsx)("div",{className:"remind-to-click"},n)),0===a.length&&o&&(0,e.jsx)("div",{className:"empty-con"},(0,e.jsx)("div",{className:"icon-con"}),(0,e.jsx)("div",{className:"create-experience"},this.nls("noItemsYet"))),a.length>0&&(0,e.jsx)("div",{className:"empty-con"},(0,e.jsx)("div",{className:"icon-con search-empty"}),(0,e.jsx)("div",{className:"create-experience"},s?this.nls("noTemplates"):this.nls("noSearchResult"))))}}const St=(0,g.withTheme)(Nt),{useRef:It,useEffect:$t,useState:Ot}=e.React;var Tt;!function(e){e.My="My",e.MyGroup="MyGroup",e.MyOrganization="MyOrganization"}(Tt||(Tt={}));const kt=t=>{const a=e.hooks.useTranslation(v,m.defaultMessages,e.defaultMessages),l=(0,g.useTheme)(),r=It(),n=It(null),p=It(!1),d=It(0),c=It(!1),h=It([]),u=It(i.AllFolder),w=It(s.AllGroup),x=It(Qe.SortOrder.Desc),b=It(o.Modified),j=It(Tt.My),{isOpen:N,folderList:S,groupList:I,sortData:$,isExperiencesTemplate:O,portalUrl:T,folderUrl:k,intl:E,toggle:M,refreshAppList:A,setErrorMessage:P,toggleErrorPopper:D,showVersionRemindPopper:C}=t,[L,R]=Ot(Tt.My),[F,U]=Ot(""),[B,V]=Ot(i.AllFolder),[z,G]=Ot(s.AllGroup),[_,H]=Ot(Qe.SortOrder.Desc),[q,W]=Ot(o.Modified),[Q,K]=Ot([]),[Y,Z]=Ot(!1),[J,X]=Ot(null);$t((()=>{u.current=B,w.current=z,x.current=_,b.current=q,j.current=L,p.current=!1,N&&(ie(!1),se(F),X(null))}),[N,_,q,B,L,z]),$t((()=>{N&&((null==F?void 0:F.length)>2||0===(null==F?void 0:F.length))&&(ie(!1),p.current=!1,n.current(F))}),[F]),$t((()=>{h.current=Q}),[Q]),$t((()=>{n.current=e.lodash.debounce(se,400)}),[N]);const ee=()=>{M&&M()},te=e=>{L!==e&&(X(null),R(e))},ie=(e=!1)=>{c.current=e},se=e=>{const t=ae(e);t&&(Z(!0),f.appServices.searchApp(t,f.SearchType.Portal).then((e=>{const t=e.results;p.current=!0;let i=[];i=c.current?h.current.concat(t):t,K(i),d.current=(null==e?void 0:e.total)||0,Z(!1)}),(()=>{Z(!1)})))},ae=e=>{const t=le();return{start:t.start,q:oe(e),sortField:b.current,sortOrder:x.current,num:t.num}},oe=t=>{var a;const o=e.SessionManager.getInstance().getMainSession(),l=(0,e.getAppStore)().getState().user,r=window.isExpressBuilder?'typekeywords: "ExpressExperienceApp"':'NOT typekeywords: "ExpressExperienceApp"',n=`${O?'type: "Web Experience Template"':'type: "Web Experience"'} ${r}`,p=t?`AND (${t})`:"";if(!o)return`${n} ${p}`;const d=null===(a=null==l?void 0:l.groups)||void 0===a?void 0:a.map((e=>e.id)),c=(null==o?void 0:o.username)||"",m=(null==d?void 0:d.length)>0?d.join(" OR "):"",h="(access:shared OR access:public OR access:org)";switch(j.current){case Tt.My:return u.current===i.AllFolder?`${n} orgid:${null==l?void 0:l.orgId} AND owner:${c} ${p}`:`${n} ownerfolder: ${u.current} AND owner:${c} ${p}`;case Tt.MyGroup:return w.current===s.AllGroup?`group: (${m}) ${h} ${n} ${p}`:`group: (${w.current}) ${h} ${n} ${p}`;case Tt.MyOrganization:return`orgid:${null==l?void 0:l.orgId} ${n}  ${p}`}},le=()=>{const e={num:re(),start:1};return c.current?(e.start=h.current.length+1,e):e},re=()=>{if(null==r?void 0:r.current){const e=r.current.clientWidth,t=r.current.clientHeight;return Math.ceil(t/244)*Math.ceil(e/238)||30}return 30},ne=()=>{const e=_===Qe.SortOrder.Asc?Qe.SortOrder.Desc:Qe.SortOrder.Asc;H(e)},pe=e=>{const t=e?e.setIn(["isLocalApp"],!1).setIn(["portalUrl"],T):null;X(t)};return(0,e.jsx)(m.Modal,{isOpen:N,css:jt(l),toggle:ee,contentClassName:"border-0 h-100",className:"widget-ds-setting-add-data-popup w-100 h-100",keyboard:!1},(0,e.jsx)("div",{className:"h-100 d-flex flex-column"},(0,e.jsx)("div",{className:"selector-right-header w-100 d-flex justify-content-end"},(0,e.jsx)(m.Button,{type:"tertiary",size:"sm",icon:!0,className:"close-icon",onClick:()=>{M()},title:a("close"),"aria-label":a("close")},(0,e.jsx)(y,{size:"l"}))),(0,e.jsx)("div",{className:"template-title widget-builder-app-list-screen flex-grow-1 d-flex flex-column"},(0,e.jsx)("div",{className:"d-flex w-100 p-15"},(0,e.jsx)(m.Navbar,{className:"header-nav-bar-con flex-grow-1",border:!1,light:!0},(0,e.jsx)(m.Nav,{underline:!0,navbar:!0,justified:!0,fill:!0,"data-testid":"template-menu"},(0,e.jsx)(m.NavItem,{className:"tap-link tap-margin-r",title:a("myContent"),onClick:()=>{te(Tt.My)}},(0,e.jsx)(m.NavLink,{tag:"button",active:L===Tt.My},a("myContent"))),(0,e.jsx)(m.NavItem,{className:"tap-link tap-margin-r",title:a("myOrganization"),onClick:()=>{te(Tt.MyOrganization)}},(0,e.jsx)(m.NavLink,{tag:"button",active:L===Tt.MyOrganization},a("myOrganization"))),(0,e.jsx)(m.NavItem,{className:"tap-link tap-margin-r",title:a("myGroup"),onClick:()=>{te(Tt.MyGroup)}},(0,e.jsx)(m.NavLink,{tag:"button",active:L===Tt.MyGroup},a("myGroup"))))),(0,e.jsx)("div",{className:"item-selector-search"},(0,e.jsx)(m.TextInput,{prefix:(0,e.jsx)(mt,{size:"m",className:"hint-paper"}),onKeyDown:e=>{const t=e.target.value;"Enter"===e.key&&t&&(ie(!1),p.current=!1,n.current(t))},placeholder:a("search"),onChange:e=>{const t=e.target.value;U(t)},className:"search-input w-100",value:F,allowClear:!0}))),(0,e.jsx)("div",{className:"classify-con d-flex p-15"},(0,e.jsx)("div",{className:"flex-grow-1"},L===Tt.My&&(0,e.jsx)(et,{onChange:e=>{V(e)},value:B,isShowSelectIcon:!0,dropDownData:S}),L===Tt.MyGroup&&(0,e.jsx)(et,{onChange:e=>{G(e)},value:z,isShowSelectIcon:!0,dropDownData:(()=>{const t=null==I?void 0:I.filter((e=>e.value!==s.Org));return(0,e.Immutable)(t)})()})),(0,e.jsx)("div",{className:"d-flex align-items-center portal-app-classify-con"},(0,e.jsx)("div",{className:"mr-2"},a("sortBy")),(0,e.jsx)(et,{onChange:e=>{W(e)},value:q,isShowSelectIcon:!0,dropDownData:$}),(0,e.jsx)("div",{className:"item-selector-sort-order"},_===Qe.SortOrder.Desc?(0,e.jsx)(m.Button,{type:"tertiary",icon:!0,onClick:ne,title:a("descending"),"aria-label":a("descending")},(0,e.jsx)(at,{size:"m"})):(0,e.jsx)(m.Button,{type:"tertiary",icon:!0,onClick:ne,title:a("ascending"),"aria-label":a("ascending")},(0,e.jsx)(nt,{size:"m"}))))),(0,e.jsx)("div",{className:"flex-grow-1 app-item-list-con",ref:r},(0,e.jsx)(ut,{className:"scroll-con",onScrollBottom:e=>{var t;e&&p.current&&d.current>(null===(t=h.current)||void 0===t?void 0:t.length)&&(ie(!0),se(F))}},Q.map(((t,i)=>(0,e.jsx)(yt,{appItem:(0,e.Immutable)(t),key:i,portalUrl:T,isExperiencesTemplate:O,folderUrl:k,onItemSelected:pe,selectedApp:J,showVersionRemindPopper:C}))),0===(null==Q?void 0:Q.length)&&!Y&&(0,e.jsx)(St,{searchText:F,isTemplateList:O,accessType:L,intl:E,portalUrl:T,folderUrl:k,isImportAppListEmpty:!0}))),J&&(0,e.jsx)("div",{className:"item-selected-con d-flex align-items-center py-4 px-4"},(0,e.jsx)("div",{className:"d-flex align-items-center flex-grow-1"},(0,e.jsx)("span",{className:"mr-2"},"1"),(0,e.jsx)("span",{className:"mr-2"},a("selected"))),(0,e.jsx)("div",{className:"small-done-btn"},(0,e.jsx)(m.Button,{onClick:()=>{var e;e=null==J?void 0:J.asMutable({deep:!0}),Z(!0),f.appServices.importAppFromPortal(e).then((e=>{Z(!1),A(!1),ee()}),(t=>{var i,s;Z(!1),ee(),(null==t?void 0:t.errMsg)&&(null===(i=null==t?void 0:t.errMsg)||void 0===i?void 0:i.errCode)?P(a("importUpperVersion",{APP_NAME:e.title,VERSION_NUMBER:(null===(s=null==t?void 0:t.errMsg)||void 0===s?void 0:s.portalAppversion)||""})):P(a("importFailure",{APP_NAME:e.title})),D()}))},type:"primary",className:"text-truncate w-100",title:a("done"),"aria-label":a("done")},a("done")))),Y&&(0,e.jsx)("div",{className:"loading-con"},(0,e.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%"},className:"jimu-primary-loading"})))))},Et=t=>{const{okText:i,cancelText:s,isOpen:a,errorMessage:o,headerText:l,confirmButtonType:r,isShowWarningIcon:n,toggle:p,onConfirm:d,onCancel:c}=t,h=e.css`
    .warning-icon {
      color: var(--sys-color-warning-main);
    }
    .modal-content {
      border: none;
    }
    .header {
      border-bottom: none;
      padding-bottom: ${e.polished.rem(20)};
      h4 {
        font-size: ${e.polished.rem(16)};
        margin: 0%;
      }
    }
    .content-con {
      padding-left: ${e.polished.rem(27)};
    }
    .modal-body, .modal-footer {
      padding: ${e.polished.rem(30)};
    }
  `;return(0,e.jsx)(m.Modal,{className:(0,e.classNames)("d-flex justify-content-center"),isOpen:a,centered:!0,toggle:p,onClick:e=>{(e=>{e.stopPropagation()})(e)},css:h},(0,e.jsx)(m.ModalBody,null,l&&(0,e.jsx)("div",{className:"item-delete-header d-flex align-items-center header"},n&&(0,e.jsx)(I,{size:"l",className:"mr-1 warning-icon"}),(0,e.jsx)("h4",{className:"flex-grow-1"},l)),o&&(0,e.jsx)("div",{className:"content-con"},o)),(0,e.jsx)(m.ModalFooter,null,i&&(0,e.jsx)(m.Button,{type:r||"danger",onClick:()=>{d&&d(),p()}},i),s&&(0,e.jsx)(m.Button,{type:"secondary",onClick:()=>{c&&c(),p()}},s)))},{useState:Mt,useRef:At}=e.React;var Pt;!function(e){e.My="My",e.MyGroup="MyGroup",e.MyOrganization="MyOrganization"}(Pt||(Pt={}));const Dt=t=>{const i=At(null),s=At(null),a=At(!1),o=e.hooks.useTranslation(v,m.defaultMessages,e.defaultMessages),{folderUrl:l,portalUrl:r,isExperiencesTemplate:n,folderList:p,groupList:d,sortData:c,intl:h,refreshAppList:u,toggleLoading:g}=t,w=e.css`
    .file-input {
      left: 0;
      right: 0;
      top: 0;
      bottom: 0;
      opacity: 0;
    }
  `,[x,b]=Mt(!1),[y,j]=Mt(!1),[N,S]=Mt(!1),[I,$]=Mt(!1),[O,T]=Mt(""),[k,E]=Mt(""),[M,A]=Mt(""),P=()=>{S(!N)},D=()=>{j(!y)},C=()=>{var e,t;const s=i.current.files;return(null===(t=null===(e=null==s?void 0:s[0])||void 0===e?void 0:e.name)||void 0===t?void 0:t.replace(/\.zip/,""))||""},L=e=>{g(e),a.current=e},R=e=>{L(!0),f.appServices.importAppFromZip(e).then((t=>{L(!1);const s=(null==t?void 0:t.error)||null;let a;if(s){switch(s.errorCode){case"003":a=o(n?"importTemplatePortalUrlErr":"importExperiencePortalUrlErr",{PORTAL_URL:s.portalUrl}),A(a);break;case"004":case"006":a=o(n?"importTemplateTypeErr":"importExperienceTypeErr"),A(a);break;case"002":const t=o(n?"importFullModeTemplateErr":"importFullModeExperienceErr",{TITLE:null==e?void 0:e.title}),i=o(n?"importExpressModeTemplateErr":"importExpressModeExperienceErr",{TITLE:null==e?void 0:e.title});a=window.isExpressBuilder?i:t,A(a);break;default:A(o("importFailure",{APP_NAME:C()}))}S(!0)}else u();i.current.value=null}),(e=>{L(!1),A(o("importFailure",{APP_NAME:C()})),i.current.value=null,S(!0)}))},F=()=>{$(!I)},U=()=>{F(),s.current&&s.current()},B=(e,t)=>{const i=o(e?"templateHigherVersionRemind":"experienceHigherVersionRemind"),a=o(e?"templateHigherVersion":"experienceHigherVersion");T(i),E(a),$(!0),t&&(s.current=t)};return(0,e.jsx)("div",{className:"import-app-con"},(0,e.jsx)(m.Dropdown,{size:"sm",toggle:e=>{var t;const i=null===(t=null==e?void 0:e.currentTarget)||void 0===t?void 0:t.className;if((null==i?void 0:i.indexOf("file-con"))>-1)return!1;b(!x)},isOpen:x,className:"h-100",autoWidth:!0},(0,e.jsx)(m.DropdownButton,{size:"lg",className:"dropdown d-flex filterbar-input",title:o("actionsLabel")},(0,e.jsx)(We,{autoFlip:!0,className:"app-list-newapp-icon mr-2"}),o("actionsLabel")),(0,e.jsx)(m.DropdownMenu,{css:w},(0,e.jsx)(m.DropdownItem,{size:"lg",onClick:D,title:o("importAction")},o("importAction")),(0,e.jsx)(m.DropdownItem,{size:"lg",className:"position-relative file-con",title:o("uploadAction")},(0,e.jsx)("input",{ref:i,className:"position-absolute file-input w-100 h-100",type:"file",accept:".zip",onChange:t=>{var s,l;if(a.current)return!1;const p=i.current.files,d=n?"Web Experience Template":"Web Experience",c=(0,e.getAppStore)().getState().user;if(!(null==p?void 0:p[0]))return!1;const m=null===(l=null===(s=null==p?void 0:p[0])||void 0===s?void 0:s.name)||void 0===l?void 0:l.replace(/\.zip/,""),h=[d,"Ready To Use","JavaScript","status: Draft"];window.isExpressBuilder&&h.push("ExpressExperienceApp");const u={description:"",owner:null==c?void 0:c.username,tags:[],thumbnail:null,title:m,type:d,snippet:"",typeKeywords:h,currentVersion:e.version,portalUrl:r,username:null==c?void 0:c.username,appZip:null==p?void 0:p[0]};L(!0),f.appServices.checkImportAppVersion(u).then((e=>{L(!1);const t=(null==e?void 0:e.error)||null;if(t&&"001"===t.errorCode)A(o("importFailure",{APP_NAME:C()})),S(!0);else if(null==e?void 0:e.isHeightVersionApp){B(n,(()=>{R(u)}))}else R(u)}))},title:o("uploadAction")}),o("uploadAction")))),(0,e.jsx)(kt,{isOpen:y,toggle:D,folderList:p,groupList:d,sortData:c,isExperiencesTemplate:n,portalUrl:r,folderUrl:l,intl:h,refreshAppList:u,setErrorMessage:e=>{A(null==e?void 0:e.replace(/\$/gi," "))},toggleErrorPopper:P,showVersionRemindPopper:B}),(0,e.jsx)(Et,{isOpen:N,isShowWarningIcon:!0,toggle:P,headerText:o("uploadImageError"),errorMessage:M,onConfirm:P,okText:o("ok")}),(0,e.jsx)(Et,{isOpen:I,toggle:F,errorMessage:O,headerText:k,onConfirm:U,cancelText:o("commonModalCancel"),okText:o("actionsLabel"),isShowWarningIcon:!0,confirmButtonType:"primary"}))};var Ct=n(357),Lt=n.n(Ct),Rt=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};const Ft=t=>{const i=window.SVG,{className:s}=t,a=Rt(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:o,src:Lt()},a)):e.React.createElement("svg",Object.assign({className:o},a))};var Ut=n(131),Bt=n.n(Ut),Vt=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(s=Object.getOwnPropertySymbols(e);a<s.length;a++)t.indexOf(s[a])<0&&Object.prototype.propertyIsEnumerable.call(e,s[a])&&(i[s[a]]=e[s[a]])}return i};const zt=t=>{const i=window.SVG,{className:s}=t,a=Vt(t,["className"]),o=(0,e.classNames)("jimu-icon jimu-icon-component",s);return i?e.React.createElement(i,Object.assign({className:o,src:Bt()},a)):e.React.createElement("svg",Object.assign({className:o},a))};var Gt=function(e,t,i,s){return new(i||(i=Promise))((function(a,o){function l(e){try{n(s.next(e))}catch(e){o(e)}}function r(e){try{n(s.throw(e))}catch(e){o(e)}}function n(e){var t;e.done?a(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(l,r)}n((s=s.apply(e,t||[])).next())}))};class _t extends e.React.PureComponent{constructor(l){super(l),this.searchPromise=null,this.isLoadModuleForBuilder=!0,this.scrollPosition=0,this.isHasPreload=!1,this.nextStart=null,this.appListTotal=null,this.isHadSearchList=!1,this.preloadData=()=>{if(!(0,e.getAppStore)().getState().portalSelf)return!1;this.getRole(),this.checkUserPrivilege(),this.getFoldersAndGroup(),this.getParamsAndRefresh(),this.initDropdownData(),this.contentNode&&(this.contentNode.addEventListener("scroll",this.onScrollHandle.bind(this)),this.contentNode.scrollTop=_t.scrollTop),this.isHasPreload=!0},this.preloadModule=()=>{if(!this.isLoadModuleForBuilder)return!1;const t=[e.moduleLoader.loadModule("jimu-arcgis"),e.moduleLoader.loadModule("jimu-for-builder"),e.moduleLoader.loadModule("jimu-layouts/layout-runtime.js"),e.moduleLoader.loadModule("jimu-for-builder/service.js"),e.moduleLoader.loadModule("jimu-layouts/layout-builder.js"),e.moduleLoader.loadModule("jimu-ui/advanced/style-setting-components.js"),e.moduleLoader.loadModule("jimu-ui/basic/color-picker.js"),e.moduleLoader.loadModule("jimu-ui/advanced/setting-components.js"),e.moduleLoader.loadModule("jimu-ui/advanced/data-source-selector.js"),e.moduleLoader.loadModule("jimu-ui/basic/item-selector.js"),e.moduleLoader.loadModule("jimu-ui/advanced/resource-selector.js"),e.moduleLoader.loadModule("jimu-core/data-source.js"),e.moduleLoader.loadModule("jimu-ui/basic/imagecrop.js"),e.moduleLoader.loadModule("jimu-core/react-dom/server.js")];Promise.all(t).then((e=>{this.isLoadModuleForBuilder=!1}))},this.getRole=()=>{var e,t;let{userRole:i}=this.state;switch(null===(t=null===(e=this.props)||void 0===e?void 0:e.user)||void 0===t?void 0:t.role){case d.OrgAdmin:i=d.OrgAdmin;break;case d.OrgPublisher:i=d.OrgPublisher;break;case d.OrgUser:i=d.OrgUser;break;default:i=d.CustomRoles}this.setState({userRole:i})},this.initDropdownData=()=>{const{sortDropdownData:e,classifyDropdownData:i,userRole:s}=this.state;window.jimuConfig.isDevEdition||2!==(null==i?void 0:i.length)||(e.push({value:"numViews",text:this.nls("applistViews")}),i.push({value:t.MyFavorites,text:this.nls("myFavorites")}),i.push({value:t.NotMe,text:this.nls("sharedWithMe")})),window.jimuConfig.isDevEdition&&s===d.OrgAdmin&&i.push({value:t.NotMe,text:this.nls("sharedWithMe")}),this.setState({sortDropdownData:e,classifyDropdownData:i})},this.getGroupList=()=>{var t;const i=(null===(t=this.props.user)||void 0===t?void 0:t.groups)||(0,e.Immutable)([]),a=[{value:s.AllGroup,text:this.nls("allApp")},{value:s.Org,text:this.nls("myOrganization",!0)}],{updateGroupIdData:o}=this.state;i.forEach((e=>{const t={value:e.id,text:e.title};e.capabilities.indexOf("updateitemcontrol")>-1&&o.push(e.id),a.push(t)})),this.setState({groupListData:a,updateGroupIdData:o})},this.getFolderList=()=>f.appServices.getFolders({num:1}).then((e=>{const t=e||[];this.initFolderListData(t)}),(e=>Promise.reject(e))),this.initFolderListData=e=>{const{user:t}=this.props,s=(null==t?void 0:t.username)||"",a=[{value:i.AllFolder,text:this.nls("allApp")}];s&&a.push({value:"root",text:s}),e.forEach((e=>{const t={value:e.id,text:e.title};a.push(t)})),this.setState({folderListData:a})},this.nls=(e,t=!1)=>t?this.props.intl?this.props.intl.formatMessage({id:e,defaultMessage:m.defaultMessages[e]}):e:this.props.intl?this.props.intl.formatMessage({id:e,defaultMessage:v[e]}):e,this.getRequestOption=(t,i=!1,s=r.My)=>{let a=(0,e.Immutable)({});a=a.merge({q:this.getSharedRequestOptionAttrQ(s)}),t&&(a="title"===t?a.merge({sortField:t,sortOrder:"asc"}):a.merge({sortField:t,sortOrder:"desc"})),window.jimuConfig.isDevEdition&&(a=a.merge({portalUrl:this.props.portalUrl}));const o=this.getPageNumAndStartNum(i,s);return a=a.merge({num:o.num,start:o.start}),a},this.getPageNumAndStartNum=(e,t=r.Group)=>{const i={num:30,start:1},{exbAdminTemplate:s,myTemplate:a}=this.state;if(e)if(t===r.ExbAdmin)i.start=s.length+1;else i.start=a.length+1;return i},this.getSharedRequestOptionAttrQ=(t=r.Group)=>{const{groupId:i,folderId:s,userRole:a,searchTextForRequest:o}=this.state,{isExpressMode:l}=this.props,n=e.SessionManager.getInstance().getMainSession(),p=this.props.user,c=this.getExperienceType(),{isTemplateList:m}=this.props.config,h=(null==p?void 0:p.favGroupId)||"",u=(null==n?void 0:n.username)||"",g=o?`(${o})`:"";if(!n||!p)return`type: ${c} ${g}`;const v=(null==p?void 0:p.groups.map((e=>e.id)))||[],f=`${`type: ${this.getExperienceType()}`} ${l?'typekeywords: "ExpressExperienceApp"':'NOT typekeywords: "ExpressExperienceApp"'}`,w=v.length>0?v.join(" OR "):"",x=w?"OR "+w:"",b=`NOT owner:${u}`,y="(access:shared OR access:public OR access:org)",j=a===d.OrgAdmin?"(access:org OR access:private)":"access:org",N=a===d.OrgAdmin?"(access:org OR access:private)":"(access:org)",S=m?N:j,I=w?`((orgid:${null==p?void 0:p.orgId} ${j}) OR (group: (${w}) ${y}))`:`(orgid:${null==p?void 0:p.orgId} ${j})`,$=`(orgid:${null==p?void 0:p.orgId} ${S}) OR (group: (${h} ${x}))`;switch(t){case r.Group:return`group:(${i}) ${f} ${y} NOT owner:${u} ${g}`;case r.Org:return`orgid:${null==p?void 0:p.orgId} ${f} ${j} NOT owner:${u} ${g}`;case r.OrgAndGroupNotMe:return`${I} ${f} ${b} ${g}`;case r.All:return window.jimuConfig.isDevEdition?a===d.OrgAdmin?`${f} ${g}`:`${f} AND owner:${u} ${g}`:`${f} (${$} OR (owner:${u} AND NOT owner:ExB_team)) ${g}`;case r.ExbAdmin:return`type: "Web Experience Template" AND owner:ExB_team ${g}`;case r.My:return`${f} orgid:${null==p?void 0:p.orgId} AND owner:${u} ${g}`;case r.Folder:return`${f} ownerfolder: ${s} AND owner:${u} ${g}`;case r.Favorites:case r.AllFavorites:return`group: "${h}" ${f} ${g}`;case r.PubLic:return`${f} access:public NOT owner:${u} AND NOT owner:ExB_team ${g}`}},this.refresh=(e,t=!1)=>{e&&(this.searchPromise=null,this.searchPromise=this.appServiceSearchApp(e),this.searchPromise.then((e=>{const i=e.results;this.searchPromise?(this.refreshSetState(i,t),this.nextStart=e.nextStart,this.appListTotal=e.total,this.setState({isLoadSkeleton:!1,loading:!1})):this.setState({isLoadSkeleton:!1})}),(()=>{this.setState({isLoadSkeleton:!1,loading:!1})})))},this.refreshSetState=(t,i=!1)=>{const s=i?this.state.apps.asMutable({deep:!0}):[],a=i?this.state.myTemplate.asMutable({deep:!0}):[];let o=[];o=i?a.concat(t):t,t=this.initAppInfo(t),this.isHadSearchList=!0,this.setState({myTemplate:(0,e.Immutable)(o),apps:(0,e.Immutable)(s.concat(t))},(()=>{this.getItemsGroups((0,e.Immutable)(t),!1,i),this.getItemsGroups((0,e.Immutable)(t),!0,i)})),clearTimeout(this.preloadModulesTimeout),this.preloadModulesTimeout=setTimeout((()=>{this.preloadModule()}),1e3)},this.initAppInfo=e=>{const{userRole:t}=this.state;return e.map((e=>{var i;return e.isLocalApp=window.jimuConfig.isDevEdition,e.portalUrl=null===(i=null==this?void 0:this.props)||void 0===i?void 0:i.portalUrl,e.userRole=t,e}))},this.getItemsGroups=(i,s=!1,a=!1)=>{if(window.jimuConfig.isDevEdition)return!1;const o=this.props.user,l=null==o?void 0:o.favGroupId,{updateGroupIdData:r,accessType:n}=this.state,p=a?this.state.allFavoritesIdData.asMutable({deep:!0}):[],d=a?this.state.updateGroupItemId.asMutable({deep:!0}):[];if(n===t.Me&&s||0===i.length||s&&0===r.length)return!1;let c=s?d:p;const m={items:i.map((e=>e.id)).join(","),groups:s?r.join(","):l};f.appServices.getAppGroups(m).then((t=>{var i,a;for(const e in t)null===(a=null===(i=t[e])||void 0===i?void 0:i.items)||void 0===a||a.forEach((e=>{c=c.concat([e.itemId])}));s?this.setState({updateGroupItemId:(0,e.Immutable)(c)}):this.setState({allFavoritesIdData:(0,e.Immutable)(c)})}))},this.appServiceSearchApp=e=>Gt(this,void 0,void 0,(function*(){return yield f.appServices.searchApp(e,f.SearchType.Other)})),this.newApp=()=>{let t=`${window.jimuConfig.mountPath}builder/`;const i=this.getFolderIdForCreateApp();t=window.jimuConfig.useStructuralUrl?`${t}page/template`:`${t}?page=template`;const s=this.getQueryString("locale");s&&(t=e.urlUtils.appendQueryParam(t,"locale",s)),i&&(t=e.urlUtils.appendQueryParam(t,"folderId",i)),this.props.isExpressMode&&(t=e.urlUtils.appendQueryParam(t,"mode","express")),t=e.urlUtils.appendQueryParam(t,"redirect","homePage"),this.getQueryString("__env__")&&(t=e.urlUtils.appendQueryParam(t,"__env__",this.getQueryString("__env__"))),window.location.assign(t)},this.deleteApp=e=>{this.checkAndShowReadOnlyRemind()||(this.setState({loading:!0}),f.appServices.deleteApp(e).then((()=>{this.setState({loading:!1}),this.removeItem(e)}),(e=>{const t="CONT_0048"===(null==e?void 0:e.code)?this.nls("unableDelete",!0):this.nls("deleteError",!0);this.setState({loading:!1,isShowAlertPopup:!0,alertPopupMessage:t})})))},this.refreshList=(e=!0)=>{this.setState({filterTitle:this.props.config.isTemplateList?this.nls("templateLabelByModified"):this.nls("labelByModified")}),e&&this.setState({searchText:""}),setTimeout((()=>{this.getParamsAndRefresh()}),1e3)},this.getFilterTitle=()=>{},this.duplicateAppItem=e=>{if(this.checkAndShowReadOnlyRemind())return;this.setState({loading:!0});const t=this.getFolderIdForCreateApp();f.appServices.duplicateApp(e,t).then((e=>{this.setState({loading:!1}),e&&this.refreshList(!1)}),(e=>{const t=e&&e.indexOf("Resource does not exist")>-1?this.nls("noResource"):this.nls("duplicateError");this.setState({loading:!1,isShowAlertPopup:!0,alertPopupMessage:t})}))},this.toggleLoading=e=>{this.setState({loading:e})},this.createApp=e=>{if(this.checkAndShowReadOnlyRemind())return;let t=this.getQueryString("locale");t=t?`&locale=${t}`:"",this.setState({loading:!0});const i=this.getFolderIdForCreateApp();f.appServices.createAppByItemTemplateInfo(e,i).then((e=>{if(e){const i=window.jimuConfig.mountPath+"builder/?id="+e+t;window.location.href=i}this.setState({loading:!1})}),(e=>{const t=e&&e.indexOf("Resource does not exist")>-1?this.nls("noResource"):this.nls("createApplicationError");this.setState({loading:!1,isShowAlertPopup:!0,alertPopupMessage:t})}))},this.checkAndShowReadOnlyRemind=()=>{const t=(0,e.getAppStore)().getState().portalSelf;return(null==t?void 0:t.isReadOnly)&&this.setState({isShowAlertPopup:!0,alertPopupMessage:this.nls("remindTextForReadonlyMode")}),null==t?void 0:t.isReadOnly},this.switchListView=e=>{this.setState({isDetailContent:e})},this.accessChange=e=>{let{subclassification:a}=this.state;e===t.Me?a=i.AllFolder:e===t.NotMe&&(a=s.AllGroup),this.setState({accessType:e,subclassification:a,subclassificationValue:a},(()=>{this.getParamsAndRefresh()}))},this.sharedAccessChange=e=>{const t=e.target.value;if(t===a.Default){const e=this.props.config.isTemplateList?this.nls("templateLabelByTitle"):this.nls("labelByTitle");this.setState({filterField:"title",filterTitle:e})}this.setState({sharedAccesstype:t},(()=>{this.getParamsAndRefresh()}))},this.filterFieldChange=e=>{let t="";const{isTemplateList:i}=this.props.config;switch(e){case o.Title:t=i?this.nls("templateLabelByTitle"):this.nls("labelByTitle");break;case o.NumViews:t=i?this.nls("templateLabelByView"):this.nls("labelByView");break;case o.Modified:t=i?this.nls("templateLabelByModified"):this.nls("labelByModified");break;case o.Created:t=i?this.nls("templateLabelByLastCreated"):this.nls("labelByLastCreated")}this.setState({filterField:e,filterTitle:t},(()=>{0!==this.state.apps.length&&this.getParamsAndRefresh()}))},this.handleKeydown=e=>{const t=e.target.value;"Enter"===e.key&&t&&this.setState({searchTextForRequest:t},(()=>{clearTimeout(this.onSearchTextInputed),this.getParamsAndRefresh()}))},this.searchTextChange=e=>{const t=e.target.value,i=t.length<3&&t.length>0;let{searchTextForRequest:s}=this.state;s=i?s:t,this.setState({searchText:t,searchTextForRequest:s},(()=>{if(i)return!1;clearTimeout(this.onSearchTextInputed),this.onSearchTextInputed=setTimeout((()=>{this.getParamsAndRefresh()}),500)}))},this.clearSearchText=()=>{const{searchTextForRequest:e}=this.state;clearTimeout(this.onSearchTextInputed),this.setState({searchText:"",searchTextForRequest:""},(()=>{e&&this.getParamsAndRefresh()}))},this._matchearchText=e=>{const{searchText:t}=this.state;return!t||!e||e.toLowerCase().indexOf(t.toLowerCase())>-1},this.getSubclassification=e=>{let{folderId:a,groupId:o,subclassification:l}=this.state;const{accessType:r}=this.state;switch(r){case t.Me:e===i.AllFolder?(l=i.AllFolder,a=""):(l=i.OtherFolder,a=e);break;case t.NotMe:e===s.AllGroup||e===s.Org?(l=e,o=""):(l=s.OtherGroup,o=e)}this.setState({folderId:a,groupId:o,subclassification:l,subclassificationValue:e},(()=>{this.getParamsAndRefresh()}))},this.favoriteToggle=(e,t)=>Gt(this,void 0,void 0,(function*(){if(this.checkAndShowReadOnlyRemind())return;const i=this.props.user,s={everyone:!1,org:!1,groups:null==i?void 0:i.favGroupId,items:t};return this.setState({loading:!0}),e?yield this.removeFromFavorites(s):yield this.addToFavorite(s)})),this.addToFavorite=t=>Gt(this,void 0,void 0,(function*(){const i=this.state.allFavoritesIdData.asMutable();return yield f.appServices.addToFavorites(t).then((s=>Gt(this,void 0,void 0,(function*(){return i.push(t.items),this.setState({allFavoritesIdData:(0,e.Immutable)(i),loading:!1}),yield Promise.resolve(s)}))),(e=>Gt(this,void 0,void 0,(function*(){return this.setState({loading:!1}),yield Promise.reject(e)}))))})),this.removeFromFavorites=i=>Gt(this,void 0,void 0,(function*(){const{accessType:s,allFavoritesIdData:a}=this.state,o=a.filter((e=>e!==i.items));return f.appServices.removeFromFavorites(i).then((a=>Gt(this,void 0,void 0,(function*(){return this.setState({loading:!1,allFavoritesIdData:(0,e.Immutable)(o)}),s===t.MyFavorites&&this.removeItem(i.items),yield Promise.resolve(a)}))),(e=>Gt(this,void 0,void 0,(function*(){return this.setState({loading:!1}),yield Promise.reject(e)}))))})),this.removeItem=t=>{const i=this.state.apps.asMutable({deep:!0}),s=this.state.myTemplate.asMutable({deep:!0}),a=i.filter((e=>e.id!==t)),o=s.filter((e=>e.id!==t));this.setState({apps:(0,e.Immutable)(a),myTemplate:(0,e.Immutable)(o)})},this.getSubclassificationData=e=>{const{folderListData:i,groupListData:s}=this.state;let a=[];return e===t.Me&&(a=i),e===t.NotMe&&(a=s),a},this.isShowClassifyDropdown=()=>{const i=!!e.SessionManager.getInstance().getMainSession(),s=window.jimuConfig.isDevEdition,{accessType:a}=this.state;return i&&(a===t.Me||a===t.NotMe)&&!s},this.checkUserPrivilege=()=>Gt(this,void 0,void 0,(function*(){const{CheckTarget:t}=e.privilegeUtils,{capabilities:i}=this.state;yield e.privilegeUtils.checkExbAccess(t.AppList).then((e=>{this.setState({valid:null==e?void 0:e.valid,invalidMessage:null==e?void 0:e.invalidMessage,capabilities:(null==e?void 0:e.capabilities)||i,isPrivilegeCheckEnd:!0})}))})),this.toggleAlertPopup=()=>{this.setState({isShowAlertPopup:!this.state.isShowAlertPopup,alertPopupMessage:""})},this.filterUserFolder=()=>this.state.folderListData.map((e=>e.value.includes("root")?{value:"/",text:e.text}:e)).filter((e=>!e.value.includes("AllFolder"))),this.updateAppList=(t,i)=>{if(!t)return;const s=this.state.apps.asMutable({deep:!0}),a=s[i];s[i]=Object.assign(Object.assign({},a),t),this.setState({apps:(0,e.Immutable)(s)})},this.isShowAccessTypeDropdown=()=>{const{userRole:t}=this.state;return!!e.SessionManager.getInstance().getMainSession()&&(!window.jimuConfig.isDevEdition||!(!window.jimuConfig.isDevEdition||t!==d.OrgAdmin))},this.getItemRowNumber=()=>{var e;const t=null===(e=this.appListContainer)||void 0===e?void 0:e.clientWidth;return Math.floor(t/244)},this.state={apps:(0,e.Immutable)([]),exbAdminTemplate:(0,e.Immutable)([]),myTemplate:(0,e.Immutable)([]),isDetailContent:!0,accessType:t.Me,filterTitle:this.props.config.isTemplateList?this.nls("templateLabelByModified"):this.nls("labelByModified"),filterField:o.Modified,searchText:"",searchTextForRequest:"",loading:!1,isLoadSkeleton:!1,experienceType:f.AppType.ExperienceType,sharedAccesstype:a.Default,isRoleViewer:!0,folderId:"",groupId:"",subclassification:i.AllFolder,subclassificationValue:i.AllFolder,folderListData:[],groupListData:[],allFavoritesIdData:(0,e.Immutable)([]),updateGroupIdData:[],updateGroupItemId:(0,e.Immutable)([]),userRole:d.CustomRoles,valid:!0,invalidMessage:"",isShowAlertPopup:!1,alertPopupMessage:"",isPrivilegeCheckEnd:!1,capabilities:{canCreateExperience:!1,canDeleteExperience:!1,canShareExperience:!1,canUpdateExperience:!1,canViewExperience:!1},classifyDropdownData:[{value:t.Anyone,text:this.nls("allApp")},{value:t.Me,text:this.nls("ownByMe")}],sortDropdownData:[{value:o.Modified,text:this.nls("orderByModified")},{value:o.Title,text:this.nls("orderByTitle")},{value:o.Created,text:this.nls("lastCreated",!0)}]},this.onScrollHandle=this.onScrollHandle.bind(this)}componentDidMount(){const{portalUrl:e}=this.props;e&&!this.isHasPreload&&this.preloadData()}componentDidUpdate(e,t){const{config:i,queryObject:s,portalUrl:a,isExpressMode:o}=this.props,l=i.isTemplateList||!1,r="templatelist"===(null==s?void 0:s.views),n=(null==e?void 0:e.portalUrl)!==a,p=this.state.userRole!==t.userRole,d=r===l&&!this.isHasPreload;(n||d||p)&&this.preloadData(),((null==e?void 0:e.user)!==this.props.user&&this.isHasPreload||o!==e.isExpressMode)&&this.getParamsAndRefresh(),(null==e?void 0:e.user)!==this.props.user&&this.getRole()}getFoldersAndGroup(){this.getFolderList(),this.getGroupList()}onScrollHandle(e){const t=e.target.clientHeight,i=e.target.scrollHeight-2,s=e.target.scrollTop;if(s>this.scrollPosition){const e=t+s>=i;!this.state.isLoadSkeleton&&e&&0!==this.state.apps.length&&this.getParamsAndRefresh(!0)}this.scrollPosition=s}componentWillUnmount(){this.contentNode&&(this.contentNode.removeEventListener("scroll",this.onScrollHandle.bind(this)),_t.scrollTop=this.contentNode.scrollTop)}getExperienceType(){let e=f.AppType.ExperienceType;return this.props.config.isTemplateList&&(e=f.AppType.TemplateType),this.setState({experienceType:e}),`"${e}"`}getQueryString(t){return e.queryString.parse(window.location.search)[t]||""}getParamsAndRefresh(a=!1){const o=this.nextStart,l=this.appListTotal,n=o&&l&&(o>l||o<0)&&a;if(!this.props.user||n)return;a?this.isHadSearchList=!1:(this.nextStart=null,this.appListTotal=null,this.setState({apps:(0,e.Immutable)([])})),this.setState({isLoadSkeleton:!0});const{accessType:p,subclassification:d}=this.state;if(p===t.Default)return this.setState({isLoadSkeleton:!1}),!1;let c=r.My;switch(p){case t.Me:c=d===i.AllFolder?r.My:r.Folder;break;case t.Anyone:c=r.All;break;case t.NotMe:c=d===s.AllGroup?r.OrgAndGroupNotMe:d===s.Org?r.Org:r.Group;break;case t.MyFavorites:c=r.Favorites;break;case t.Public:c=r.PubLic}const m=this.getRequestOption(this.state.filterField,a,c);this.refresh(m,a)}experiencesRefresh(e=!1){const t=this.getRequestOption(this.state.filterField,e);this.setState({isLoadSkeleton:!0}),this.refresh(t,e)}getFolderIdForCreateApp(){const{folderId:e}=this.state,t=!e.includes("root");return e&&!window.jimuConfig.isDevEdition&&t?e:null}render(){const{isDetailContent:t,loading:i,accessType:s,classifyDropdownData:a,sortDropdownData:o,subclassificationValue:l,allFavoritesIdData:r,capabilities:n,updateGroupItemId:p,valid:d,invalidMessage:c,apps:h,isShowAlertPopup:g,alertPopupMessage:v,searchText:f,isPrivilegeCheckEnd:w,isLoadSkeleton:x,folderListData:b,groupListData:y}=this.state,j=this.props.config.isTemplateList||!1,N=this.getSubclassificationData(s),S=this.getItemRowNumber(),I={deleteApp:this.deleteApp,refreshList:this.refreshList,duplicateAppItem:this.duplicateAppItem,createApp:this.createApp,favoriteToggle:this.favoriteToggle,getFolderList:this.getFolderList,checkAndShowReadOnlyRemind:this.checkAndShowReadOnlyRemind,isLoadSkeleton:x,theme:this.props.theme,skeletonNum:S};return d||this.props.isTest?(0,e.jsx)(u.Provider,{value:I},(0,e.jsx)("div",{css:Ge(this.props.theme),className:"h-100","data-testid":"app-list"},(0,e.jsx)("div",{className:"widget-builder-app-list bg-default h-100"},(0,e.jsx)("div",{className:"banner-con bg-default"},(0,e.jsx)("div",{className:"widget-builder-app-list-screen"},(0,e.jsx)("div",{style:{overflow:"hidden"},className:"app-list-search-container"},(0,e.jsx)("div",{className:"app-list-banner d-flex justify-content-between",style:{position:"relative"}},(0,e.jsx)("h3",{className:" list-title flex-grow-1"},this.state.filterTitle),window.jimuConfig.isDevEdition&&(0,e.jsx)("div",null,(0,e.jsx)(Dt,{folderList:(0,e.Immutable)(b),groupList:(0,e.Immutable)(y),sortData:(0,e.Immutable)(o),isExperiencesTemplate:j,portalUrl:this.props.portalUrl,folderUrl:this.props.context.folderUrl,intl:this.props.intl,refreshAppList:this.refreshList,toggleLoading:this.toggleLoading})),!j&&n.canCreateExperience&&(0,e.jsx)(m.Button,{className:"float-left btn-lg pt-0 pb-0 app-list-newapp mr-5",size:"lg",type:"primary",onClick:this.newApp},(0,e.jsx)(ge,{autoFlip:!0,className:"app-list-newapp-icon"}),this.nls("newApp"))))),(0,e.jsx)("div",{className:"app-list-filterbar "},(0,e.jsx)("div",{className:"d-flex justify-content-between align-items-center app-list-filterbar-title widget-builder-app-list-screen"},(0,e.jsx)("div",{className:"search-con d-flex position-relative"},(0,e.jsx)(m.TextInput,{className:"float-left app-list-searchbox app-list-h1 flex-sm-fill",placeholder:this.nls("homePageSearch"),"aria-label":this.nls("homePageSearch"),onChange:this.searchTextChange,value:f,prefix:(0,e.jsx)(mt,{autoFlip:!1,className:"app-list-searchIconFill"}),allowClear:!0,ref:e=>{this.searchInput=e},onKeyDown:e=>{this.handleKeydown(e)}})),(0,e.jsx)("div",{className:"text-right align-middle"},this.isShowAccessTypeDropdown()&&(0,e.jsx)(et,{onChange:this.accessChange,value:s,isShowSelectIcon:!0,dropDownData:(0,e.Immutable)(a)}),this.isShowClassifyDropdown()&&N.length>0&&(0,e.jsx)(et,{onChange:this.getSubclassification,value:l,isShowSelectIcon:!0,dropDownData:(0,e.Immutable)(N)}),(0,e.jsx)(et,{onChange:this.filterFieldChange,value:this.state.filterField,isShowSelectIcon:!0,dropDownData:(0,e.Immutable)(o)}),(0,e.jsx)("div",{className:"app-list-switchview-con","data-testid":"icon-view-con"},(0,e.jsx)(m.ButtonGroup,null,(0,e.jsx)(m.Tooltip,{placement:"bottom",title:this.nls("cardView")},(0,e.jsx)(m.Button,{icon:!0,className:(0,e.classNames)("app-list-switchview jimu-outline-inside",t?"":"default-active-switch-button"),variant:t?"contained":"text",color:t?"primary":"default",onClick:()=>{this.switchListView(!0)},"data-testid":"icon-view-card","aria-pressed":t},(0,e.jsx)(Ft,{autoFlip:!0,className:"app-list-iconfill app-list-iconmargin",size:14}))),(0,e.jsx)(m.Tooltip,{placement:"bottom",title:this.nls("listView")},(0,e.jsx)(m.Button,{icon:!0,"data-testid":"icon-view-list","aria-pressed":!t,variant:t?"text":"contained",color:t?"default":"primary",className:(0,e.classNames)("app-list-switchview jimu-outline-inside app-list-switchview-btton app-list-switchview-right",t?"default-active-switch-button":""),onClick:()=>{this.switchListView(!1)}},(0,e.jsx)(zt,{autoFlip:!0,className:"app-list-iconfill app-list-iconmargin",size:14}))))))))),(0,e.jsx)("div",{className:"app-list-item-scroll-con",ref:e=>{this.contentNode=e},tabIndex:-1},(0,e.jsx)("div",{className:"widget-builder-app-list-screen",ref:e=>{this.appListContainer=e}},(0,e.jsx)("div",{className:"app-list-content",id:"itemContent"},(0,e.jsx)(ze,{isDetailContent:this.state.isDetailContent,portalUrl:this.props.portalUrl,intl:this.props.intl,folderUrl:this.props.context.folderUrl,apps:h,switchListView:this.switchListView,isTemplateList:j,allFavoritesIdData:r,capabilities:n,updateGroupItemId:p,folderListData:this.filterUserFolder(),isPrivilegeCheckEnd:w,updateAppList:this.updateAppList}))),h.length<1&&!i&&!x&&this.isHadSearchList&&(0,e.jsx)(St,{searchText:f,isTemplateList:j,accessType:s,intl:this.props.intl,portalUrl:this.props.portalUrl,folderUrl:this.props.context.folderUrl}))),this.state.loading&&(0,e.jsx)("div",{className:"loading-con"},(0,e.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%"},className:"jimu-primary-loading"})),(0,e.jsx)(m.AlertPopup,{isOpen:g,title:this.nls("popUpTitle"),hideCancel:!0,toggle:this.toggleAlertPopup},(0,e.jsx)("div",{style:{fontSize:"1rem"}},v)))):(0,e.jsx)("div",{css:Ge(this.props.theme),className:"invalid-message position-absolute"},c)}}_t.scrollTop=0,_t.mapExtraStateProps=(e,t)=>{var i,s;return{queryObject:e.queryObject,isExpressMode:null===(s=null===(i=e.widgetsState)||void 0===i?void 0:i.header)||void 0===s?void 0:s.isExpressMode}};const Ht=_t;function qt(e){n.p=e}})(),p})())}}}));