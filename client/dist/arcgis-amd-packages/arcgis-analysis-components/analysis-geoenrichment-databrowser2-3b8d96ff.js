define(["exports","./index-60d8a971","./index2-31657c04"],(function(e,t,a){"use strict";const s="analysis--rtl",i=t.proxyCustomElement(class extends t.H{constructor(){super(),this.__registerHost(),this.analysisDataBrowserSelectionChange=t.createEvent(this,"analysisDataBrowserSelectionChange",7),this.analysisDataBrowserClose=t.createEvent(this,"analysisDataBrowserClose",7),this.onBackButtonClick=async()=>{void 0!==this.dataBrowserElement&&await this.dataBrowserElement.back()},this.close=()=>{void 0!==this.containerRef&&(this.containerRef.open=!1)},this.onSelectButtonClick=()=>{const e=this.dataBrowserElement.widget._shoppingCart._content,t=[];Object.values(e).map((e=>{!1===a.isEmptyDataItem(e?.group?.value)&&!0===this.dataBrowserElement.widget.selection.includes(e.group.value)&&t.push({value:e.group.value,label:e.label})}));const s=this.dataBrowserElement.widget.countryID,i=this.dataBrowserElement.widget.hierarchyID,r=this.dataBrowserElement.widget._pages?.categories?._countrySelect?._countries?.[s],n=r?.hierarchies?.find((e=>e.ID===i)),o=r?.name,l=n?.alias,c={selectedValues:t,countryId:s,hierarchyId:i,countryAlias:o,hierarchyAlias:l};this.analysisDataBrowserSelectionChange.emit(c),this.close()},this.onClose=()=>{this.analysisDataBrowserClose.emit()},this.onOpen=()=>{void 0!==this.dataBrowserElement&&void 0!==this.dataBrowserElement.widget&&!1===a.isEmptyDataItem(this.value)&&(this.dataBrowserElement.countryId=this.countryId,this.dataBrowserElement.widget.hierarchyID=this.hierarchyId,this.dataBrowserElement.widget.selection=this.value)},this.showBackButton=!1,this.value=void 0,this.countryId=void 0,this.hierarchyId=void 0,this.portal=void 0}portalChange(e){this.geoenrichmentUrl=e?.helperServices?.geoenrichment?.url??"https://geoenrichdev.arcgis.com/arcgis/rest/services/World/GeoenrichmentServer"}async componentWillLoad(){({strings:this.strings,locale:this.locale,dir:this.dir}=await a.fetchComponentLocaleStrings(this.hostElement,t.getAssetPath("."))),this.portalChange(this.portal)}componentDidLoad(){try{setTimeout((()=>requestAnimationFrame((()=>this.containerRef?.setFocus()))),1)}catch{}}render(){return this.renderModal()}renderModal(){return t.h("calcite-modal",{class:"databrowser-modal-variables",open:!0,escapeDisabled:!0,outsideCloseDisabled:!0,focusTrapDisabled:!0,onCalciteModalOpen:this.onOpen,onCalciteModalClose:this.onClose,ref:e=>this.containerRef=e},t.h("div",{slot:"header"},this.strings.header),t.h("div",{slot:"content",class:"databrowser-modal-content"},this.renderDataBrowser()),!0===this.showBackButton&&t.h("calcite-button",{slot:"back",kind:"neutral",appearance:"outline",iconStart:"chevron-left",width:"full",onClick:this.onBackButtonClick},this.strings.back),t.h("calcite-button",{slot:"secondary",width:"full",appearance:"outline",onClick:this.close},this.strings.cancel),t.h("calcite-button",{slot:"primary",width:"full",onClick:this.onSelectButtonClick},this.strings.select))}renderDataBrowser(){return t.h("arcgis-geoenrichment-databrowser",{locale:this.locale,class:{[s]:"rtl"===this.dir},allowHierarchies:!0,countryId:this.countryId??"US",geoenrichmentUrl:this.geoenrichmentUrl,displayAllGlobalVariables:!0,hideApplyButton:!0,hideBackButton:!0,hideCancelButton:!0,hidePageBackButton:!0,ref:e=>{this.dataBrowserElement=e},onPageLoaded:()=>this.showBackButton=!1===a.isEmptyDataItem(this.dataBrowserElement?.widget?.currentPageId)&&"categories"!==this.dataBrowserElement?.widget?.currentPageId})}static get assetsDirs(){return["t9n"]}get hostElement(){return this}static get watchers(){return{portal:["portalChange"]}}static get style(){return":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:#d4d4d4;--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh}.databrowser-modal-content{height:100%}.databrowser-modal-variables{--calcite-modal-height:min(700px, calc(60vh + 100px));--calcite-modal-content-padding:0px}.esri4GEDataBrowser_Title{display:none}.esri4GEWizard_Buttons{display:flex}.esri4GEPopup .esri4GEOnDemandSelectFlowListPopup .esri4GEOnDemandSelectVeryTallList500Popup{top:20px}"}},[0,"analysis-geoenrichment-databrowser",{value:[8],countryId:[513,"country-id"],hierarchyId:[513,"hierarchy-id"],portal:[16],showBackButton:[32]},void 0,{portal:["portalChange"]}]);function r(){"undefined"!=typeof customElements&&["analysis-geoenrichment-databrowser"].forEach((e=>{"analysis-geoenrichment-databrowser"===e&&(customElements.get(e)||customElements.define(e,i))}))}r(),e.AnalysisGeoenrichmentDatabrowser=i,e.defineCustomElement=r}));