define(["exports","./index-60d8a971","./index2-31657c04","./utils-c381fe27","./analysis-label2-5082e9b8","./analysis-spatial-reference-selector2-7ee3390b","./analysis-tree2-ccbef938"],(function(e,t,s,a,i,n,l){"use strict";const r=t.proxyCustomElement(class extends t.H{constructor(){super(),this.__registerHost(),this.analysisSpatialReferenceInputChange=t.createEvent(this,"analysisSpatialReferenceInputChange",7),this.analysisHelpClick=t.createEvent(this,"analysisHelpClick",7),this.createPopover=e=>{this.spatialReferencePopover&&(this.spatialReferencePopover.remove(),this.spatialReferencePopover=void 0),this.spatialReferencePopover=document.createElement("calcite-popover");const t={autoClose:!0,dir:this.dir,focusTrapDisabled:!0,heading:this.strings.browseCoordinateSystems,closable:!0,open:!0,referenceElement:e.target};Object.assign(this.spatialReferencePopover,t),this.spatialReferencePopover.addEventListener("calcitePopoverClose",this.handleSpatialReferenceClose);const s=document.createElement("analysis-spatial-reference-selector");s.hideCategories=this.hideCategories,s.value=this.value,s.addEventListener("analysisSpatialReferenceValueChange",this.handleSpatialReferenceChange),s.addEventListener("analysisSpatialReferenceSelectorDismissed",this.handleSpatialReferenceClose),this.spatialReferencePopover.append(s),document.body.append(this.spatialReferencePopover),setTimeout((()=>requestAnimationFrame((()=>{this.spatialReferencePopover.open=!0,this.spatialReferencePopover?.setFocus()}))),1)},this.validate=()=>(this.required&&void 0===this.value?this.errorMessage=s.formatMessage(this.strings.isRequired,{label:this.label}):this.errorMessage=void 0,void 0===this.errorMessage),this.handleSpatialReferenceChange=e=>{this.value={latestWkid:e.detail.latestWkid,wkid:e.detail.latestWkid},this.analysisSpatialReferenceInputChange.emit(this.value)},this.handleSpatialReferenceClose=()=>{this.spatialReferencePopover?.remove(),this.spatialReferencePopover=void 0,this.validate()},this.label=void 0,this.required=!1,this.hideCategories=void 0,this.value=void 0,this.errorMessage=void 0}onValueChange(){var e,t;void 0!==this.value&&((e=this.value).wkid??(e.wkid=this.value.latestWkid),(t=this.value).latestWkid??(t.latestWkid=this.value.wkid)),this.validate()}async componentWillLoad(){var e,a;({strings:this.strings,dir:this.dir}=await s.fetchComponentLocaleStrings(this.hostElement,t.getAssetPath("."))),void 0!==this.value&&((e=this.value).wkid??(e.wkid=this.value.latestWkid),(a=this.value).latestWkid??(a.latestWkid=this.value.wkid))}disconnectedCallback(){this.spatialReferencePopover?.remove()}async checkValidity(){this.validate();const e=void 0===this.errorMessage||""===this.errorMessage;return Promise.resolve(e)}render(){const e=s.isEmptyDataItem(this.value)?this.strings.browseCoordinateSystems:s.getSpatialReferenceDescription(this.value?.latestWkid)??this.strings.browseCoordinateSystems;return t.h(t.Host,{key:"c121a64ddeb9d572f4baf2d5e6a8383337b6bc88"},void 0!==this.label&&""!==this.label?t.h("analysis-label",{label:this.label,required:this.required,onAnalysisLabelHelpActionClick:()=>this.analysisHelpClick.emit()}):null,t.h("calcite-button",{key:"5ea5efc4c475c379e6fa89043d72a2a859f123db",width:"full",appearance:"outline",kind:"neutral","icon-end":"chevron-down",alignment:"icon-end-space-between",onClick:this.createPopover,class:"select-button",scale:a.UIDefaults.Scale},e),t.h("calcite-input-message",{key:"28abaab4e532aca546639d17db3dea5ff8b2315d",status:"invalid",scale:a.UIDefaults.Scale,hidden:void 0===this.errorMessage,icon:"exclamationMarkTriangle"},this.errorMessage))}static get assetsDirs(){return["t9n"]}get hostElement(){return this}static get watchers(){return{value:["onValueChange"]}}static get style(){return":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:#d4d4d4;--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh}:host{display:flex;flex-direction:column;width:var(--analysis-component-default-width)}.select-button{margin-bottom:var(--analysis-half-spacing)}"}},[0,"analysis-spatial-reference-input",{label:[513],required:[516],hideCategories:[16],value:[1040],errorMessage:[513,"error-message"],checkValidity:[64]},void 0,{value:["onValueChange"]}]);function o(){"undefined"!=typeof customElements&&["analysis-spatial-reference-input","analysis-label","analysis-spatial-reference-selector","analysis-tree"].forEach((e=>{switch(e){case"analysis-spatial-reference-input":customElements.get(e)||customElements.define(e,r);break;case"analysis-label":customElements.get(e)||i.defineCustomElement();break;case"analysis-spatial-reference-selector":customElements.get(e)||n.defineCustomElement();break;case"analysis-tree":customElements.get(e)||l.defineCustomElement()}}))}o(),e.AnalysisSpatialReferenceInput=r,e.defineCustomElement=o}));