define(["exports","./index-60d8a971","./index2-31657c04","./primitiveFactory-642234d0","./analysis-areal-unit-input2-9ceb8348","./analysis-attribute-expression2-5251ae6f","./analysis-boolean-input2-a0db9269","./analysis-chip-group2-3b7294c8","./analysis-data-file-input2-68b023f4","./analysis-dataset-input2-77abd4cf","./analysis-dataset-input-popover2-13d82070","./analysis-date-input2-37fdaf39","./analysis-expression-group2-c43af168","./analysis-field-input2-d81e7661","./analysis-field-select2-d08f3f3d","./analysis-folder-input2-09c578a5","./analysis-geoenrichment-databrowser2-3b8d96ff","./analysis-geoenrichment-input2-f90aaac7","./analysis-help-popover2-2306cbe6","./analysis-item-browser2-326c174c","./analysis-item-input2-fe9e764d","./analysis-label2-5082e9b8","./analysis-layer-input2-25808e07","./analysis-layer-input-popover2-6f865570","./analysis-linear-unit-input2-46cd6e1e","./analysis-multiple-input2-4cf30ddf","./analysis-number-input2-b2684230","./analysis-overwrite2-ccd6b26e","./analysis-query-builder2-d6563e02","./analysis-query-entry2-6efeefcb","./analysis-query-input2-5b2823aa","./analysis-query-modal2-ef038098","./analysis-query-target-select2-d19b2afa","./analysis-sketch2-e4a035bf","./analysis-spatial-expression2-00a2b684","./analysis-spatial-reference-input2-222f4953","./analysis-spatial-reference-selector2-7ee3390b","./analysis-string-input2-ef684699","./analysis-summary-fields2-4f53abcb","./analysis-summary-fields-popover2-89ee90ce","./analysis-traffic-time-input2-a2781b31","./analysis-tree2-ccbef938","./analysis-unsupported-input2-35d6cead","./analysis-workflow-select2-d920e56b","./analysis-workflow-select-popover2-9dff6cd7","./get-ead8032d","./set-33619955","./_baseGet-1781da83","./isEqual-9b8f87d3"],(function(e,a,s,t,n,i,l,r,o,u,m,c,p,y,d,f,h,g,v,b,E,C,k,I,w,q,_,P,x,V,M,z,H,U,A,$,D,K,L,S,O,R,T,j,F,N,G,B,W){"use strict";const J={Vertical:"vertical",Horizontal:"horizontal"};function Q(e,a,s){for(var t=-1,n=a.length,i={};++t<n;){var l=a[t],r=B.baseGet(e,l);s(r,l)&&G.baseSet(i,B.castPath(l,e),r)}return i}const X=p.flatRest((function(e,a){return null==e?{}:function(e,a){return Q(e,a,(function(a,s){return I.hasIn(e,s)}))}(e,a)})),Y="key-value",Z={groupContainer:`${Y}__group-container`,groupLabel:`${Y}__group-label-text`,groupHorizontal:`${Y}__horizontal-layout`,groupAction:`${Y}__group-action`,groupActionHorizontal:`${Y}__group-action-horizontal`,errorMessage:`${Y}__error-message`};function ee(e){return void 0!==e.name}const ae=a.proxyCustomElement(class extends a.H{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.analysisKeyValueChange=a.createEvent(this,"analysisKeyValueChange",7),this.analysisHelpClick=a.createEvent(this,"analysisHelpClick",7),this.mappedElementMap=new Map,this.updateValue=(e,a)=>{const s=this.mappedElementMap.get(e),t=a;N.get(this.value,e)!==t&&(this.value={...this.value},G.set(this.value,e,t),void 0!==s&&(s.value=t,this.validateParameter(e)),this.analysisKeyValueChange.emit({path:e,value:this.value}))},this.parameterValueChanged=e=>{const a=this.mappedElementMap.get(e);void 0!==a&&(this.value={...this.value},G.set(this.value,e,a.value),this.validate()),this.analysisKeyValueChange.emit({path:e,value:this.value})},this.setAnalysisRef=(e,a)=>{null!=a?this.mappedElementMap.set(e,a):this.mappedElementMap.delete(e)},this.value=void 0,this.parameterInfos=void 0,this.UIparameterInfos=void 0,this.doCalciteInputChangeOnCommit=void 0,this.label=void 0,this.required=void 0,this.validationParams=void 0,this.errorMessage=void 0,this.layout=void 0}parameterInfosChange(e,a){const t=[];this.combinedParameterInfos?.forEach((e=>{"object"==typeof e&&(t.push(e.name),void 0!==a||s.isEmptyDataItem(this.value)?this.updateValue(e.name,e.value):e.value=this.value[e.name]??e.value)})),this.value=X(this.value,t),this.analysisKeyValueChange.emit({path:"init",value:this.value})}UIparameterInfosChange(e,a){W.isEqual(e,a)||(s.isEmptyDataItem(this.value)&&(this.value={}),this.combinedParameterInfos?.forEach((e=>{if(void 0!==e.name&&"object"==typeof this.value)if(!1===e.visible)delete this.value[e.name];else{const a=this.value[e.name]??e.value??e.defaultValue;this.updateValue(e.name,a)}})))}get combinedParameterInfos(){let e=this.parameterInfos??[];return void 0!==this.UIparameterInfos&&(e=this.UIparameterInfos.filter(ee).map((e=>{const a=this.parameterInfos?.find((a=>a.name===e.name));return{...a,...e}}))),e}componentWillLoad(){this.UIparameterInfosChange(this.UIparameterInfos),this.analysisKeyValueChange.emit({path:"init",value:this.value})}render(){return a.h(a.Host,{key:"620aaea91eb31fd8ab85341b3c93a72e8f944632"},a.h("analysis-label",{key:"507c9327e38224f72e53ef233cf673e83d7e0bf1",label:this.label,required:!1,onAnalysisLabelHelpActionClick:()=>this.analysisHelpClick.emit()}),this.renderParameters(this.combinedParameterInfos),this.renderErrorMessage())}renderErrorMessage(){const e=!1===s.isEmptyDataItem(this.validationParams?.message)||void 0!==this.errorMessage,t=s.formatValidationParamsMessage(s.getValidationParamsMessageFromErrorKey({},this.validationParams)),n=void 0!==this.validationParams?s.getUIInputStatusFromMessageType(this.validationParams.type):s.UIInputStatus.INVALID;return a.h("calcite-input-message",{class:Z.errorMessage,hidden:!e,icon:"exclamationMarkTriangle",scale:s.UIDefaults.Scale,status:n},t??this.errorMessage)}renderParameters(e,s,t){return e?.length>0&&a.h("div",null,void 0!==s?a.h("div",{class:Z.groupLabel},t):null,a.h("div",{class:Z.groupContainer},e?.map((e=>{const t=void 0!==s?`${s}[${e.name}]`:`${e.name}`,n=e.visible??!0;return e?.parameterInfos&&!e.dataType.includes("MultiValue")?this.renderParameters(e.parameterInfos,t,e.label??e.displayName??e.name):n&&a.h("div",{class:this.layout===J.Horizontal?Z.groupHorizontal:""},a.h("analysis-label",{class:Z.groupLabel,label:e.label??e.displayName??e.name,hideHelp:!0,required:!0===this.required||"required"in e&&!0===e.required}),a.h("div",{class:this.layout===J.Horizontal?Z.groupActionHorizontal:Z.groupAction},this.renderDefaultComponent(e,t)))}))))}renderDefaultComponent(e,s){const n=N.get(this.value,s);return a.h(t.AnalysisPrimitiveParameter,{key:s,required:this.required,...e,label:"",onValueChange:()=>this.parameterValueChanged(`${s}`),onSetRef:e=>this.setAnalysisRef(`${s}`,e),value:n,doCalciteInputChangeOnCommit:this.doCalciteInputChangeOnCommit})}async checkValidity(){const e=await this.validate(),{message:a,type:s}=this.validationParams||{},t=!1==(void 0!==a)||!0==("informative"===s);return!0===e&&void 0===this.errorMessage&&!0===t}async validate(){const e=Array.from(this.mappedElementMap.keys()).map((async e=>this.validateParameter(e)));return(await Promise.all(e)).every((e=>!0===e))}async validateParameter(e){const a=this.mappedElementMap.get(e),s=this.combinedParameterInfos.find((a=>a.name===e))??{};let t=!0;if(void 0!==a)if("checkValidity"in a)t=await a.checkValidity();else{const e="required"in s&&s.required;t=!1==(!0===this.required||!0===e)||void 0!==a.value}return t}static get assetsDirs(){return["t9n"]}get hostElement(){return this}static get watchers(){return{parameterInfos:["parameterInfosChange"],UIparameterInfos:["UIparameterInfosChange"]}}static get style(){return":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:#d4d4d4;--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh}:host{height:100%;margin-bottom:var(--analysis-half-spacing)}.key-value__group-container{display:flex;flex-direction:column;border:1px var(--calcite-color-border-1) solid;border-radius:var(--calcite-border-radius);padding:var(--analysis-half-spacing) var(--analysis-half-spacing) 0 var(--analysis-half-spacing);margin-bottom:var(--analysis-half-spacing)}.key-value__group-label-text{margin-bottom:var(--analysis-quarter-spacing);align-self:center;width:48%;font-size:var(--calcite-font-size--2)}.key-value__group-action{align-self:flex-end;width:100%}.key-value__group-action-horizontal{align-self:flex-end;width:50%}.key-value__horizontal-layout{display:flex;width:var(--analysis-component-default-width);justify-content:space-between}.key-value__error-message{margin-top:var(--analysis-quarter-spacing)}"}},[1,"analysis-key-value",{value:[1040],parameterInfos:[16],UIparameterInfos:[16],doCalciteInputChangeOnCommit:[4,"do-calcite-input-change-on-commit"],label:[513],required:[516],validationParams:[16],layout:[1],errorMessage:[32],checkValidity:[64]},void 0,{parameterInfos:["parameterInfosChange"],UIparameterInfos:["UIparameterInfosChange"]}]);function se(){"undefined"!=typeof customElements&&["analysis-key-value","analysis-areal-unit-input","analysis-attribute-expression","analysis-boolean-input","analysis-chip-group","analysis-data-file-input","analysis-dataset-input","analysis-dataset-input-popover","analysis-date-input","analysis-expression-group","analysis-field-input","analysis-field-select","analysis-folder-input","analysis-geoenrichment-databrowser","analysis-geoenrichment-input","analysis-help-popover","analysis-item-browser","analysis-item-input","analysis-label","analysis-layer-input","analysis-layer-input-popover","analysis-linear-unit-input","analysis-multiple-input","analysis-number-input","analysis-overwrite","analysis-query-builder","analysis-query-entry","analysis-query-input","analysis-query-modal","analysis-query-target-select","analysis-sketch","analysis-spatial-expression","analysis-spatial-reference-input","analysis-spatial-reference-selector","analysis-string-input","analysis-summary-fields","analysis-summary-fields-popover","analysis-traffic-time-input","analysis-tree","analysis-unsupported-input","analysis-workflow-select","analysis-workflow-select-popover"].forEach((e=>{switch(e){case"analysis-key-value":customElements.get(e)||customElements.define(e,ae);break;case"analysis-areal-unit-input":customElements.get(e)||n.defineCustomElement();break;case"analysis-attribute-expression":customElements.get(e)||i.defineCustomElement();break;case"analysis-boolean-input":customElements.get(e)||l.defineCustomElement();break;case"analysis-chip-group":customElements.get(e)||r.defineCustomElement();break;case"analysis-data-file-input":customElements.get(e)||o.defineCustomElement();break;case"analysis-dataset-input":customElements.get(e)||u.defineCustomElement();break;case"analysis-dataset-input-popover":customElements.get(e)||m.defineCustomElement();break;case"analysis-date-input":customElements.get(e)||c.defineCustomElement();break;case"analysis-expression-group":customElements.get(e)||p.defineCustomElement();break;case"analysis-field-input":customElements.get(e)||y.defineCustomElement();break;case"analysis-field-select":customElements.get(e)||d.defineCustomElement();break;case"analysis-folder-input":customElements.get(e)||f.defineCustomElement();break;case"analysis-geoenrichment-databrowser":customElements.get(e)||h.defineCustomElement();break;case"analysis-geoenrichment-input":customElements.get(e)||g.defineCustomElement();break;case"analysis-help-popover":customElements.get(e)||v.defineCustomElement();break;case"analysis-item-browser":customElements.get(e)||b.defineCustomElement();break;case"analysis-item-input":customElements.get(e)||E.defineCustomElement();break;case"analysis-label":customElements.get(e)||C.defineCustomElement();break;case"analysis-layer-input":customElements.get(e)||k.defineCustomElement();break;case"analysis-layer-input-popover":customElements.get(e)||I.defineCustomElement();break;case"analysis-linear-unit-input":customElements.get(e)||w.defineCustomElement();break;case"analysis-multiple-input":customElements.get(e)||q.defineCustomElement();break;case"analysis-number-input":customElements.get(e)||_.defineCustomElement();break;case"analysis-overwrite":customElements.get(e)||P.defineCustomElement();break;case"analysis-query-builder":customElements.get(e)||x.defineCustomElement();break;case"analysis-query-entry":customElements.get(e)||V.defineCustomElement();break;case"analysis-query-input":customElements.get(e)||M.defineCustomElement();break;case"analysis-query-modal":customElements.get(e)||z.defineCustomElement();break;case"analysis-query-target-select":customElements.get(e)||H.defineCustomElement();break;case"analysis-sketch":customElements.get(e)||U.defineCustomElement();break;case"analysis-spatial-expression":customElements.get(e)||A.defineCustomElement();break;case"analysis-spatial-reference-input":customElements.get(e)||$.defineCustomElement();break;case"analysis-spatial-reference-selector":customElements.get(e)||D.defineCustomElement();break;case"analysis-string-input":customElements.get(e)||K.defineCustomElement();break;case"analysis-summary-fields":customElements.get(e)||L.defineCustomElement();break;case"analysis-summary-fields-popover":customElements.get(e)||S.defineCustomElement();break;case"analysis-traffic-time-input":customElements.get(e)||O.defineCustomElement();break;case"analysis-tree":customElements.get(e)||R.defineCustomElement();break;case"analysis-unsupported-input":customElements.get(e)||T.defineCustomElement();break;case"analysis-workflow-select":customElements.get(e)||j.defineCustomElement();break;case"analysis-workflow-select-popover":customElements.get(e)||F.defineCustomElement()}}))}se(),e.AnalysisKeyValue=ae,e.AnalysisToolUILayout=J,e.basePickBy=Q,e.defineCustomElement=se,e.pick$1=X}));