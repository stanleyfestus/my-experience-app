define(["exports","./index-60d8a971","./index2-31657c04","./utils-c381fe27","./analysis-label2-5082e9b8","./isEqual-9b8f87d3"],(function(e,t,i,s,a,l){"use strict";const o=t.proxyCustomElement(class extends t.H{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.analysisStringInputChange=t.createEvent(this,"analysisStringInputChange",7),this.analysisHelpClick=t.createEvent(this,"analysisHelpClick",7),this.segmentedItems=[],this.layoutUpdating=!1,this.setErrorMessage=e=>{this.isValid=void 0===e,this.errorMessage=e},this.validateSingleInput=e=>{let t;if(!0===this.required&&""===e&&(t=i.formatMessage(this.strings.requiredError,{label:this.label})),e.length<(this.minLength??-1)&&""!==e&&(t=i.formatMessage(this.strings.minLengthError,{label:this.label,minLength:i.formatNumberToLocale(this.minLength??-1)})),e.length>=(this.maxLength??Number.MAX_SAFE_INTEGER)&&(t=i.formatMessage(this.strings.maxLengthError,{label:this.label,maxLength:i.formatNumberToLocale(this.maxLength??Number.MAX_SAFE_INTEGER)})),void 0!==this.invalidCharactersRegex){const s=i.getRegExFromString(this.invalidCharactersRegex);void 0!==s&&!0===s.test(e)&&(t=i.formatMessage(this.strings.invalidCharacterError,{label:this.label}))}return this.setErrorMessage(t),void 0===t},this.validateInput=()=>{let e;if(this.required||void 0!==this.maxLength||void 0!==this.invalidCharactersRegex||void 0!==this.minLength)if("multi"!==this.selectionMode){const e=this.value??"";this.validateSingleInput(e)}else{const t=this.value??[];if(0===t.length)e=i.formatMessage(this.strings.requiredError,{label:this.label}),this.setErrorMessage(e);else{let s=!0;for(let e=0;e<t.length;e+=1)this.validateSingleInput(t[e]??"")||(s=!1);this.isValid=s,!1===s&&(e=i.formatMessage(this.strings.choiceListBadInput,{label:this.label}),this.setErrorMessage(e))}}},this.adjustLayout=()=>{const e=this.segmentedControl?.firstChild?.clientWidth;this.layout=void 0!==e&&e*this.segmentedControl.childElementCount<this.hostElement.clientWidth?"horizontal":"vertical"},this.renderInput=()=>{const e=this.doCalciteInputChangeOnCommit?{onCalciteInputChange:this.inputChanged}:{onCalciteInputInput:this.inputChanged};return t.h("calcite-input",{scale:s.UIDefaults.Scale,type:this.showAsTextArea?"textarea":"text",readOnly:this.readOnly,value:this.value,status:this.isValid?i.UIInputStatus.VALID:i.UIInputStatus.INVALID,placeholder:this.placeholderText??this.strings.inputPlaceholderText,...e})},this.renderCombobox=()=>{const e="multi"===this.selectionMode&&void 0===this.choiceList||!0===this.allowCustomValues,a=void 0!==this.errorMessage?i.UIInputStatus.INVALID:i.getUIInputStatusFromMessageType(this.validationParams?.type),l=[];if(Array.isArray(this.choiceList)&&l.push(...this.choiceList),e&&void 0!==this.initialValues){const e=new Set(l),t="multi"===this.selectionMode?this.initialValues:[this.initialValues];for(const i of t)e.has(i)||l.push(i)}const o="multi"===this.selectionMode?this.strings.multiSelectComboboxPlaceholderText:this.strings.comboboxPlaceholderText;return t.h("calcite-combobox",{scale:s.UIDefaults.Scale,status:a,label:this.strings.choiceList,disabled:this.readOnly,maxItems:this.maxItems,selectionMode:"multi"!==this.selectionMode?this.required?"single-persist":"single":"multiple",placeholder:this.placeholderText??o,placeholderIcon:this.placeholderIcon,allowCustomValues:e,onCalciteComboboxChange:this.comboboxChanged,clearDisabled:"multi"!==this.selectionMode},l.map((e=>this.buildComboBoxItem(e))))},this.buildComboBoxItem=e=>{let i,a=!1;return a="multi"!==this.selectionMode?this.value===e:void 0!==this.value&&this.value.includes(e),i=void 0===this.choiceListLabels?e:this.allowCustomValues?this.choiceListLabels[e]??e:this.choiceListLabels[e],t.h("calcite-combobox-item",{key:e,value:e,textLabel:i,icon:void 0!==this.choiceListIcons?this.choiceListIcons[e]:void 0,selected:a,scale:s.UIDefaults.Scale})},this.renderRadioGroup=()=>{const e=this.choiceList;return t.h("calcite-segmented-control",{class:"segmented-control",scale:s.UIDefaults.Scale,onCalciteSegmentedControlChange:this.segmentedControlChange,ref:e=>this.segmentedControl=e,layout:this.layout},e?.map((e=>this.buildRadioGroupItem(e))))},this.buildRadioGroupItem=e=>{const i=void 0!==this.choiceListLabels?this.choiceListLabels[e]:e;return t.h("calcite-segmented-control-item",{value:e,checked:e===this.value,ref:e=>{null!=e&&(e.focus=Function.prototype,this.segmentedItems.push(e))}},i)},this.renderRadioButtonGroup=()=>{const e=this.choiceList;return t.h("calcite-radio-button-group",{name:this.label,scale:s.UIDefaults.Scale,layout:"vertical",onCalciteRadioButtonGroupChange:this.radioButtonGroupChange},e?.map((e=>this.buildRadioButton(e))))},this.buildRadioButton=e=>{const i=void 0!==this.choiceListLabels?this.choiceListLabels[e]:e;return t.h("calcite-label",{layout:"inline",scale:s.UIDefaults.Scale},t.h("calcite-radio-button",{value:e,checked:e===this.value}),i)},this.renderCheckList=()=>t.h(t.Fragment,null,this.showSelectAllForCheckList?this.renderCheckBox(!0,this.strings.selectAll):null,this.choiceList?.filter((e=>void 0!==e))?.map((e=>this.renderCheckBox(!1,e)))),this.toggleCheckListSelectAll=e=>{const t=e.target.checked?[...this.choiceList??[]]:[];this.checkListChange(t)},this.toggleCheckBoxSingleSelection=(e,t)=>{let i=e;i=e.includes(t)?i.filter((e=>e!==t)):[...i,t],this.checkListChange(i)},this.renderCheckBox=(e,i)=>{const a=e?this.strings.selectAll:this.choiceListLabels?.[i]??i,l=Array.isArray(this.value)?[...this.value]:[],o=e?l.length===this.choiceList?.length:l.includes(i),h=e&&!o&&l.length>0;return t.h("calcite-label",{layout:"inline",scale:s.UIDefaults.Scale},t.h("calcite-checkbox",{scale:s.UIDefaults.Scale,value:a,checked:o,indeterminate:h,onCalciteCheckboxChange:t=>{e?this.toggleCheckListSelectAll(t):this.toggleCheckBoxSingleSelection(l,i)}}),a)},this.inputChanged=e=>{null!==e.target&&(this.value=e.target.value,this.validateInput(),this.analysisStringInputChange.emit())},this.comboboxChanged=e=>{const t=e.target;if(null!==t){if("multi"===this.selectionMode)this.value=t.selectedItems.filter((e=>void 0!==e?.value)).map((e=>e.value));else{const[e]=t.selectedItems;this.value=e?.value}this.validateInput(),this.analysisStringInputChange.emit()}},this.segmentedControlChange=e=>{const t=e.target;null!==t&&(this.value=t.value??"",this.validateInput(),this.analysisStringInputChange.emit())},this.radioButtonGroupChange=e=>{null!==e?.target&&(this.value=e.target.selectedItem.value,this.validateInput(),this.analysisStringInputChange.emit())},this.checkListChange=e=>{this.value=e,this.validateInput(),this.analysisStringInputChange.emit()},this.value=void 0,this.label=void 0,this.validationParams=void 0,this.required=void 0,this.doCalciteInputChangeOnCommit=!1,this.maxLength=void 0,this.minLength=void 0,this.invalidCharactersRegex=void 0,this.selectionMode=void 0,this.readOnly=!1,this.choiceList=void 0,this.choiceListIcons=void 0,this.choiceListLabels=void 0,this.placeholderText=void 0,this.placeholderIcon=void 0,this.showAsRadioGroup=!1,this.showAsRadioButtonGroup=!1,this.showAsCheckList=!1,this.showSelectAllForCheckList=!1,this.showAsTextArea=!1,this.useDefaultOnReset=!1,this.allowCustomValues=!1,this.maxItems=10,this.hideHelp=!1,this.isValid=!0,this.errorMessage=void 0,this.layout=void 0}updatedSelectionMode(){this.initialValues=this.value}updatedChoiceList(e,t){if(!l.isEqual(t,e)){let t=this.value;const i=(Array.isArray(t)?t:void 0!==t?[t]:[]).filter((t=>e?.includes(t)));t="multi"===this.selectionMode?i:i[0],this.useDefaultOnReset&&0===i.length&&(t=void 0!==e?"multi"===this.selectionMode?[e[0]]:e[0]:void 0),l.isEqual(t,this.value)||(this.value=t,this.analysisStringInputChange.emit())}}async componentWillLoad(){({strings:this.strings}=await i.fetchComponentLocaleStrings(this.hostElement,t.getAssetPath("."))),void 0===this.value&&this.updatedChoiceList(this.choiceList,void 0),this.initialValues=this.value}async checkValidity(){return this.validateInput(),Promise.resolve(this.isValid)}componentDidLoad(){void 0!==this.segmentedControl&&(this.resizeObserver=new ResizeObserver((()=>{0!==this.hostElement.clientWidth?this.layoutUpdating?this.layoutUpdating=!1:(this.layoutUpdating=!0,this.adjustLayout()):this.layout="horizontal"})),this.resizeObserver.observe(this.hostElement)),setTimeout((()=>{this.segmentedItems.forEach((e=>delete e?.focus)),this.segmentedItems=[]}),250)}disconnectedCallback(){this.resizeObserver?.disconnect()}render(){let e;e=void 0===this.choiceList||0===this.choiceList.length?"multi"!==this.selectionMode?this.renderInput():this.renderCombobox():!0===this.showAsCheckList?this.renderCheckList():"multi"!==this.selectionMode&&!0===this.showAsRadioGroup?this.renderRadioGroup():"multi"!=this.selectionMode&&!0===this.showAsRadioButtonGroup?this.renderRadioButtonGroup():this.renderCombobox();const a=!1===this.isValid,l=i.formatValidationParamsMessage(i.getValidationParamsMessageFromErrorKey(this.strings,this.validationParams)),o=!1===i.isEmptyDataItem(l)||!0===a,h=void 0!==this.errorMessage?i.UIInputStatus.INVALID:i.getUIInputStatusFromMessageType(this.validationParams?.type);return t.h(t.Host,{key:"cf38a54e153609ca3c6716299d03b78592a4627e"},t.h("calcite-label",{key:"a80a0fb23c18bd4708b07306526d059432f30344",class:"label",scale:s.UIDefaults.Scale},""!==this.label?t.h("analysis-label",{label:this.label,required:this.required,onAnalysisLabelHelpActionClick:()=>this.analysisHelpClick.emit(),hideHelp:this.hideHelp}):null,e,t.h("calcite-input-message",{key:"2278021b58f933f55648ba2d42907ee1af560c5a",status:h,hidden:!o,scale:s.UIDefaults.Scale,icon:"exclamationMarkTriangle"},this.errorMessage??l)))}static get assetsDirs(){return["t9n"]}get hostElement(){return this}static get watchers(){return{selectionMode:["updatedSelectionMode"],choiceList:["updatedChoiceList"]}}static get style(){return":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:#d4d4d4;--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh}:host{display:flex;width:var(--analysis-component-default-width);--calcite-color-border-input:var(--analysis-ui-border-input)}.label{width:var(--analysis-component-default-width)}.segmented-control:not([layout]){visibility:hidden;position:absolute}"}},[1,"analysis-string-input",{value:[1537],label:[513],validationParams:[16],required:[516],doCalciteInputChangeOnCommit:[4,"do-calcite-input-change-on-commit"],maxLength:[514,"max-length"],minLength:[514,"min-length"],invalidCharactersRegex:[513,"invalid-characters-regex"],selectionMode:[513,"selection-mode"],readOnly:[516,"read-only"],choiceList:[16],choiceListIcons:[16],choiceListLabels:[16],placeholderText:[513,"placeholder-text"],placeholderIcon:[513,"placeholder-icon"],showAsRadioGroup:[516,"show-as-radio-group"],showAsRadioButtonGroup:[516,"show-as-radio-button-group"],showAsCheckList:[516,"show-as-check-list"],showSelectAllForCheckList:[516,"show-select-all-for-check-list"],showAsTextArea:[516,"show-as-text-area"],useDefaultOnReset:[516,"use-default-on-reset"],allowCustomValues:[516,"allow-custom-values"],maxItems:[514,"max-items"],hideHelp:[516,"hide-help"],isValid:[32],errorMessage:[32],layout:[32],checkValidity:[64]},void 0,{selectionMode:["updatedSelectionMode"],choiceList:["updatedChoiceList"]}]);function h(){"undefined"!=typeof customElements&&["analysis-string-input","analysis-label"].forEach((e=>{switch(e){case"analysis-string-input":customElements.get(e)||customElements.define(e,o);break;case"analysis-label":customElements.get(e)||a.defineCustomElement()}}))}h(),e.AnalysisStringInput=o,e.defineCustomElement=h}));