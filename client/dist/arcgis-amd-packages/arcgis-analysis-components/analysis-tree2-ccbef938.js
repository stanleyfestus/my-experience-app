define(["exports","./index-60d8a971","./utils-c381fe27"],(function(e,t,s){"use strict";const a=t.proxyCustomElement(class extends t.H{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.analysisTreeValueChange=t.createEvent(this,"analysisTreeValueChange",7),this.treeItemsOpen=new Set,this.handleMutations=e=>{e.forEach((e=>{if("attributes"===e.type&&"expanded"===e.attributeName){const t=e.target;"key"in t.dataset&&void 0!==t.dataset.key&&this.treeItemsOpen.has(t.dataset.key)!==t.expanded&&this.toggleTreeItem(t.dataset.key)}}))},this.toggleTreeItem=e=>{this.treeItemsOpen.has(e)?this.treeItemsOpen.delete(e):this.treeItemsOpen.add(e),this.buildJSXTree()},this.data={},this.value=void 0,this.renderedTree=[]}onDataChange(){this.setupComponent()}componentWillLoad(){this.setupComponent()}componentDidLoad(){this.setupObserver()}disconnectedCallback(){this.observer?.disconnect()}setupComponent(){this.treeItemsOpen.clear(),this.buildJSXTree()}setupObserver(){this.observer=new MutationObserver(this.handleMutations);const e=this.hostElement.shadowRoot??this.hostElement;this.observer.observe(e,{attributes:!0,subtree:!0,attributeFilter:["expanded"]})}buildJSXTree(){const e=t=>{const s=[];for(const a in t){const i=t[a];let n;"object"==typeof i&&(n=this.treeItemsOpen.has(a)?e(i):[this.createTreeItem("placeholder","placeholder")]);const r="object"==typeof i?a:i;s.push(this.createTreeItem(a,r,n))}return s};this.renderedTree=e(this.data)}createTreeItem(e,s,a){return t.h("calcite-tree-item",{key:`${e}-item`,"data-key":e,selected:this.value===e,"aria-selected":this.value===e,expanded:this.treeItemsOpen.has(e),"aria-expanded":this.treeItemsOpen.has(e),onClick:void 0!==a?()=>this.toggleTreeItem(e):void 0},s,void 0!==a&&t.h("calcite-tree",{key:`${e}-child-tree`,slot:"children"},a))}handleTreeSelect(e){const t=e.target,s=t?.selectedItems[0]?.dataset.key;if(void 0!==s)if(!0===s.includes("placeholder")){const e=t?.selectedItems[0].parentElement?.dataset.key;void 0!==e&&this.treeItemsOpen.add(e),this.buildJSXTree()}else this.value=s,this.analysisTreeValueChange.emit()}render(){return t.h(t.Host,{key:"bccf2b67391128b3c78e5038140d02fbc38a01c7"},t.h("div",{key:"83ad9bb3de2e65f9755093cff2bbe3b67197f988"},t.h("calcite-tree",{key:"base-tree",scale:s.UIDefaults.Scale,onCalciteTreeSelect:e=>this.handleTreeSelect(e)},this.renderedTree)))}get hostElement(){return this}static get watchers(){return{data:["onDataChange"]}}static get style(){return":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:#d4d4d4;--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh}:host{overflow-y:auto;overflow-x:hidden;scroll-behavior:smooth;height:100%;width:100%}"}},[1,"analysis-tree",{data:[16],value:[1537],renderedTree:[32]},void 0,{data:["onDataChange"]}]);function i(){"undefined"!=typeof customElements&&["analysis-tree"].forEach((e=>{"analysis-tree"===e&&(customElements.get(e)||customElements.define(e,a))}))}i(),e.AnalysisTree=a,e.defineCustomElement=i}));