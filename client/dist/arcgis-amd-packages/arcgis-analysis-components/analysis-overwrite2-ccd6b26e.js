define(["require","exports","./index-60d8a971","./index2-31657c04","esri/portal/Portal","esri/identity/IdentityManager","esri/request","esri/core/urlUtils","esri/geometry/Point","esri/geometry/Polyline","esri/geometry/Polygon","esri/core/reactiveUtils","esri/rest/support/Query","esri/core/promiseUtils","esri/portal/PortalItemResource","esri/geometry/support/jsonUtils","esri/Color","esri/layers/FeatureLayer","esri/layers/Layer","esri/symbols/LineSymbolMarker","esri/layers/support/MosaicRule","esri/portal/PortalItem","esri/renderers/SimpleRenderer","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleMarkerSymbol","esri/config","esri/layers/MapNotesLayer","esri/layers/support/Field","esri/renderers/Renderer","esri/rest/support/FeatureSet","esri/rest/support/ParameterValue","esri/core/lang","esri/geometry/Extent","esri/geometry/geometryEngine","esri/layers/ImageryLayer","esri/smartMapping/raster/renderers/stretch","esri/layers/support/RasterFunction","esri/rest/support/AlgorithmicColorRamp","esri/rest/support/MultipartColorRamp","esri/rest/geoprocessor","esri/portal/PortalUser","esri/smartMapping/statistics/uniqueValues","esri/rest/support/JobInfo","esri/layers/GroupLayer","esri/core/sql","esri/rest/support/GPMessage","./utils-c381fe27","./analysis-boolean-input2-a0db9269","./analysis-folder-input2-09c578a5","./analysis-help-popover2-2306cbe6","./analysis-item-browser2-326c174c","./analysis-label2-5082e9b8","./analysis-string-input2-ef684699","./debounce-c1955a21"],(function(e,t,r,n,o,i,a,s,l,c,u,f,h,d,p,g,y,m,v,b,w,$,j,_,O,k,S,M,P,A,I,E,x,T,C,N,L,B,F,U,D,z,R,H,q,V,G,W,J,K,Y,Q,Z,X,ee){"use strict";function te(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var re=te(o),ne=te(i),oe=te(a),ie=te(m),ae=te($),se=te(S),le=te(P),ce=te(A),ue=te(I),fe=function(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}(D),he={exports:{}};function de(e,t,r,n){var o=function(e){return null==e||"number"==typeof e||"boolean"==typeof e}(n)?n:r(n),i=t.get(o);return void 0===i&&(i=e.call(this,n),t.set(o,i)),i}function pe(e,t,r){var n=Array.prototype.slice.call(arguments,3),o=r(n),i=t.get(o);return void 0===i&&(i=e.apply(this,n),t.set(o,i)),i}function ge(e,t,r,n,o){return r.bind(t,e,n,o)}function ye(e,t){return ge(e,this,1===e.length?de:pe,t.cache.create(),t.serializer)}function me(){return JSON.stringify(arguments)}function ve(){this.cache=Object.create(null)}ve.prototype.has=function(e){return e in this.cache},ve.prototype.get=function(e){return this.cache[e]},ve.prototype.set=function(e,t){this.cache[e]=t};var be={create:function(){return new ve}};he.exports=function(e,t){var r=t&&t.cache?t.cache:be,n=t&&t.serializer?t.serializer:me;return(t&&t.strategy?t.strategy:ye)(e,{cache:r,serializer:n})},he.exports.strategies={variadic:function(e,t){return ge(e,this,pe,t.cache.create(),t.serializer)},monadic:function(e,t){return ge(e,this,de,t.cache.create(),t.serializer)}};var we=he.exports,$e="object"==typeof global&&global&&global.Object===Object&&global,je="object"==typeof self&&self&&self.Object===Object&&self,_e=$e||je||Function("return this")(),Oe=_e.Symbol,ke=Object.prototype,Se=ke.hasOwnProperty,Me=ke.toString,Pe=Oe?Oe.toStringTag:void 0,Ae=Object.prototype.toString,Ie="[object Null]",Ee="[object Undefined]",xe=Oe?Oe.toStringTag:void 0;function Te(e){return null==e?void 0===e?Ee:Ie:xe&&xe in Object(e)?function(e){var t=Se.call(e,Pe),r=e[Pe];try{e[Pe]=void 0;var n=!0}catch(e){}var o=Me.call(e);return n&&(t?e[Pe]=r:delete e[Pe]),o}(e):function(e){return Ae.call(e)}(e)}function Ce(e){return null!=e&&"object"==typeof e}var Ne="[object Symbol]";function Le(e){return"symbol"==typeof e||Ce(e)&&Te(e)==Ne}function Be(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}var Fe=Array.isArray,Ue=1/0,De=Oe?Oe.prototype:void 0,ze=De?De.toString:void 0;function Re(e){if("string"==typeof e)return e;if(Fe(e))return Be(e,Re)+"";if(Le(e))return ze?ze.call(e):"";var t=e+"";return"0"==t&&1/e==-Ue?"-0":t}function He(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function qe(e){return e}var Ve="[object AsyncFunction]",Ge="[object Function]",We="[object GeneratorFunction]",Je="[object Proxy]";function Ke(e){if(!He(e))return!1;var t=Te(e);return t==Ge||t==We||t==Ve||t==Je}var Ye,Qe=_e["__core-js_shared__"],Ze=(Ye=/[^.]+$/.exec(Qe&&Qe.keys&&Qe.keys.IE_PROTO||""))?"Symbol(src)_1."+Ye:"",Xe=Function.prototype.toString;function et(e){if(null!=e){try{return Xe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var tt=/^\[object .+?Constructor\]$/,rt=Function.prototype,nt=Object.prototype,ot=rt.toString,it=nt.hasOwnProperty,at=RegExp("^"+ot.call(it).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function st(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!He(e)||(t=e,Ze&&Ze in t))&&(Ke(e)?at:tt).test(et(e));var t}(r)?r:void 0}var lt=st(_e,"WeakMap"),ct=Object.create,ut=function(){function e(){}return function(t){if(!He(t))return{};if(ct)return ct(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function ft(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var ht=Date.now;function dt(e){return function(){return e}}var pt,gt,yt,mt=function(){try{var e=st(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),vt=mt,bt=vt?function(e,t){return vt(e,"toString",{configurable:!0,enumerable:!1,value:dt(t),writable:!0})}:qe,wt=(pt=bt,gt=0,yt=0,function(){var e=ht(),t=16-(e-yt);if(yt=e,t>0){if(++gt>=800)return arguments[0]}else gt=0;return pt.apply(void 0,arguments)}),$t=wt;function jt(e){return e!=e}function _t(e,t){return!(null==e||!e.length)&&function(e,t){return t==t?function(e,t){for(var r=-1,n=e.length;++r<n;)if(e[r]===t)return r;return-1}(e,t):function(e,t){for(var r=e.length,n=-1;++n<r;)if(t(e[n],n,e))return n;return-1}(e,jt)}(e,t)>-1}var Ot=9007199254740991,kt=/^(?:0|[1-9]\d*)$/;function St(e,t){var r=typeof e;return!!(t=null==t?Ot:t)&&("number"==r||"symbol"!=r&&kt.test(e))&&e>-1&&e%1==0&&e<t}function Mt(e,t,r){"__proto__"==t&&vt?vt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Pt(e,t){return e===t||e!=e&&t!=t}var At=Object.prototype.hasOwnProperty;function It(e,t,r){var n=e[t];At.call(e,t)&&Pt(n,r)&&(void 0!==r||t in e)||Mt(e,t,r)}function Et(e,t,r,n){var o=!r;r||(r={});for(var i=-1,a=t.length;++i<a;){var s=t[i],l=n?n(r[s],e[s],s,r,e):void 0;void 0===l&&(l=e[s]),o?Mt(r,s,l):It(r,s,l)}return r}var xt=Math.max;function Tt(e,t,r){return t=xt(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=xt(n.length-t,0),a=Array(i);++o<i;)a[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=r(a),ft(e,this,s)}}function Ct(e,t){return $t(Tt(e,t,qe),e+"")}var Nt=9007199254740991;function Lt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Nt}function Bt(e){return null!=e&&Lt(e.length)&&!Ke(e)}function Ft(e){return Ct((function(t,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,a=o>2?r[2]:void 0;for(i=e.length>3&&"function"==typeof i?(o--,i):void 0,a&&function(e,t,r){if(!He(r))return!1;var n=typeof t;return!!("number"==n?Bt(r)&&St(t,r.length):"string"==n&&t in r)&&Pt(r[t],e)}(r[0],r[1],a)&&(i=o<3?void 0:i,o=1),t=Object(t);++n<o;){var s=r[n];s&&e(t,s,n,i)}return t}))}var Ut=Object.prototype;function Dt(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ut)}function zt(e){return Ce(e)&&"[object Arguments]"==Te(e)}var Rt=Object.prototype,Ht=Rt.hasOwnProperty,qt=Rt.propertyIsEnumerable,Vt=zt(function(){return arguments}())?zt:function(e){return Ce(e)&&Ht.call(e,"callee")&&!qt.call(e,"callee")},Gt=Vt,Wt="object"==typeof t&&t&&!t.nodeType&&t,Jt=Wt&&"object"==typeof module&&module&&!module.nodeType&&module,Kt=Jt&&Jt.exports===Wt?_e.Buffer:void 0,Yt=(Kt?Kt.isBuffer:void 0)||function(){return!1},Qt={};function Zt(e){return function(t){return e(t)}}Qt["[object Float32Array]"]=Qt["[object Float64Array]"]=Qt["[object Int8Array]"]=Qt["[object Int16Array]"]=Qt["[object Int32Array]"]=Qt["[object Uint8Array]"]=Qt["[object Uint8ClampedArray]"]=Qt["[object Uint16Array]"]=Qt["[object Uint32Array]"]=!0,Qt["[object Arguments]"]=Qt["[object Array]"]=Qt["[object ArrayBuffer]"]=Qt["[object Boolean]"]=Qt["[object DataView]"]=Qt["[object Date]"]=Qt["[object Error]"]=Qt["[object Function]"]=Qt["[object Map]"]=Qt["[object Number]"]=Qt["[object Object]"]=Qt["[object RegExp]"]=Qt["[object Set]"]=Qt["[object String]"]=Qt["[object WeakMap]"]=!1;var Xt="object"==typeof t&&t&&!t.nodeType&&t,er=Xt&&"object"==typeof module&&module&&!module.nodeType&&module,tr=er&&er.exports===Xt&&$e.process,rr=function(){try{return er&&er.require&&er.require("util").types||tr&&tr.binding&&tr.binding("util")}catch(e){}}(),nr=rr&&rr.isTypedArray,or=nr?Zt(nr):function(e){return Ce(e)&&Lt(e.length)&&!!Qt[Te(e)]},ir=or,ar=Object.prototype.hasOwnProperty;function sr(e,t){var r=Fe(e),n=!r&&Gt(e),o=!r&&!n&&Yt(e),i=!r&&!n&&!o&&ir(e),a=r||n||o||i,s=a?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],l=s.length;for(var c in e)!t&&!ar.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||St(c,l))||s.push(c);return s}function lr(e,t){return function(r){return e(t(r))}}var cr=lr(Object.keys,Object),ur=Object.prototype.hasOwnProperty;function fr(e){if(!Dt(e))return cr(e);var t=[];for(var r in Object(e))ur.call(e,r)&&"constructor"!=r&&t.push(r);return t}function hr(e){return Bt(e)?sr(e):fr(e)}var dr=Object.prototype.hasOwnProperty;Ft((function(e,t){if(Dt(t)||Bt(t))Et(t,hr(t),e);else for(var r in t)dr.call(t,r)&&It(e,r,t[r])}));var pr=Object.prototype.hasOwnProperty;function gr(e){return Bt(e)?sr(e,!0):function(e){if(!He(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=Dt(e),r=[];for(var n in e)("constructor"!=n||!t&&pr.call(e,n))&&r.push(n);return r}(e)}Ft((function(e,t,r,n){Et(t,gr(t),e,n)}));var yr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mr=/^\w*$/;function vr(e,t){if(Fe(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Le(e))||mr.test(e)||!yr.test(e)||null!=t&&e in Object(t)}var br=st(Object,"create"),wr=Object.prototype.hasOwnProperty,$r=Object.prototype.hasOwnProperty;function jr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function _r(e,t){for(var r=e.length;r--;)if(Pt(e[r][0],t))return r;return-1}jr.prototype.clear=function(){this.__data__=br?br(null):{},this.size=0},jr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},jr.prototype.get=function(e){var t=this.__data__;if(br){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return wr.call(t,e)?t[e]:void 0},jr.prototype.has=function(e){var t=this.__data__;return br?void 0!==t[e]:$r.call(t,e)},jr.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=br&&void 0===t?"__lodash_hash_undefined__":t,this};var Or=Array.prototype.splice;function kr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}kr.prototype.clear=function(){this.__data__=[],this.size=0},kr.prototype.delete=function(e){var t=this.__data__,r=_r(t,e);return!(r<0||(r==t.length-1?t.pop():Or.call(t,r,1),--this.size,0))},kr.prototype.get=function(e){var t=this.__data__,r=_r(t,e);return r<0?void 0:t[r][1]},kr.prototype.has=function(e){return _r(this.__data__,e)>-1},kr.prototype.set=function(e,t){var r=this.__data__,n=_r(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var Sr=st(_e,"Map");function Mr(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function Pr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Pr.prototype.clear=function(){this.size=0,this.__data__={hash:new jr,map:new(Sr||kr),string:new jr}},Pr.prototype.delete=function(e){var t=Mr(this,e).delete(e);return this.size-=t?1:0,t},Pr.prototype.get=function(e){return Mr(this,e).get(e)},Pr.prototype.has=function(e){return Mr(this,e).has(e)},Pr.prototype.set=function(e,t){var r=Mr(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};function Ar(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(Ar.Cache||Pr),r}Ar.Cache=Pr;var Ir,Er,xr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Tr=/\\(\\)?/g,Cr=(Ir=Ar((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(xr,(function(e,r,n,o){t.push(n?o.replace(Tr,"$1"):r||e)})),t}),(function(e){return 500===Er.size&&Er.clear(),e})),Er=Ir.cache,Ir);function Nr(e,t){return Fe(e)?e:vr(e,t)?[e]:Cr(function(e){return null==e?"":Re(e)}(e))}var Lr=1/0;function Br(e){if("string"==typeof e||Le(e))return e;var t=e+"";return"0"==t&&1/e==-Lr?"-0":t}function Fr(e,t){for(var r=0,n=(t=Nr(t,e)).length;null!=e&&r<n;)e=e[Br(t[r++])];return r&&r==n?e:void 0}function Ur(e,t,r){var n=null==e?void 0:Fr(e,t);return void 0===n?r:n}function Dr(e,t){for(var r=-1,n=t.length,o=e.length;++r<n;)e[o+r]=t[r];return e}var zr=Oe?Oe.isConcatSpreadable:void 0;function Rr(e){return Fe(e)||Gt(e)||!!(zr&&e&&e[zr])}function Hr(e,t,r,n,o){var i=-1,a=e.length;for(r||(r=Rr),o||(o=[]);++i<a;){var s=e[i];t>0&&r(s)?t>1?Hr(s,t-1,r,n,o):Dr(o,s):n||(o[o.length]=s)}return o}function qr(e){return null!=e&&e.length?Hr(e,1):[]}function Vr(e){return $t(Tt(e,void 0,qr),e+"")}var Gr=lr(Object.getPrototypeOf,Object),Wr="[object Object]",Jr=Function.prototype,Kr=Object.prototype,Yr=Jr.toString,Qr=Kr.hasOwnProperty,Zr=Yr.call(Object);function Xr(e){if(!Ce(e)||Te(e)!=Wr)return!1;var t=Gr(e);if(null===t)return!0;var r=Qr.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Yr.call(r)==Zr}function en(e){var t=this.__data__=new kr(e);this.size=t.size}Ct((function(e,t){try{return ft(e,void 0,t)}catch(e){return function(e){if(!Ce(e))return!1;var t=Te(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Xr(e)}(e)?e:new Error(e)}})),en.prototype.clear=function(){this.__data__=new kr,this.size=0},en.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},en.prototype.get=function(e){return this.__data__.get(e)},en.prototype.has=function(e){return this.__data__.has(e)},en.prototype.set=function(e,t){var r=this.__data__;if(r instanceof kr){var n=r.__data__;if(!Sr||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Pr(n)}return r.set(e,t),this.size=r.size,this};var tn="object"==typeof t&&t&&!t.nodeType&&t,rn=tn&&"object"==typeof module&&module&&!module.nodeType&&module,nn=rn&&rn.exports===tn?_e.Buffer:void 0,on=nn?nn.allocUnsafe:void 0;function an(){return[]}var sn=Object.prototype.propertyIsEnumerable,ln=Object.getOwnPropertySymbols,cn=ln?function(e){return null==e?[]:(e=Object(e),function(t){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];s=a,sn.call(e,s)&&(i[o++]=a)}var s;return i}(ln(e)))}:an,un=cn,fn=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Dr(t,un(e)),e=Gr(e);return t}:an;function hn(e,t,r){var n=t(e);return Fe(e)?n:Dr(n,r(e))}function dn(e){return hn(e,hr,un)}function pn(e){return hn(e,gr,fn)}var gn=st(_e,"DataView"),yn=st(_e,"Promise"),mn=st(_e,"Set"),vn="[object Map]",bn="[object Promise]",wn="[object Set]",$n="[object WeakMap]",jn="[object DataView]",_n=et(gn),On=et(Sr),kn=et(yn),Sn=et(mn),Mn=et(lt),Pn=Te;(gn&&Pn(new gn(new ArrayBuffer(1)))!=jn||Sr&&Pn(new Sr)!=vn||yn&&Pn(yn.resolve())!=bn||mn&&Pn(new mn)!=wn||lt&&Pn(new lt)!=$n)&&(Pn=function(e){var t=Te(e),r="[object Object]"==t?e.constructor:void 0,n=r?et(r):"";if(n)switch(n){case _n:return jn;case On:return vn;case kn:return bn;case Sn:return wn;case Mn:return $n}return t});var An=Pn,In=Object.prototype.hasOwnProperty,En=_e.Uint8Array;function xn(e){var t=new e.constructor(e.byteLength);return new En(t).set(new En(e)),t}var Tn=/\w*$/,Cn=Oe?Oe.prototype:void 0,Nn=Cn?Cn.valueOf:void 0,Ln="[object Boolean]",Bn="[object Date]",Fn="[object Map]",Un="[object Number]",Dn="[object RegExp]",zn="[object Set]",Rn="[object String]",Hn="[object Symbol]",qn="[object ArrayBuffer]",Vn="[object DataView]",Gn="[object Float32Array]",Wn="[object Float64Array]",Jn="[object Int8Array]",Kn="[object Int16Array]",Yn="[object Int32Array]",Qn="[object Uint8Array]",Zn="[object Uint8ClampedArray]",Xn="[object Uint16Array]",eo="[object Uint32Array]";var to=rr&&rr.isMap,ro=to?Zt(to):function(e){return Ce(e)&&"[object Map]"==An(e)},no=ro,oo=rr&&rr.isSet,io=oo?Zt(oo):function(e){return Ce(e)&&"[object Set]"==An(e)},ao=io,so="[object Arguments]",lo="[object Function]",co="[object Object]",uo={};function fo(e,t,r,n,o,i){var a,s=1&t,l=2&t,c=4&t;if(r&&(a=o?r(e,n,o,i):r(e)),void 0!==a)return a;if(!He(e))return e;var u=Fe(e);if(u){if(a=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&In.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(e),!s)return function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}(e,a)}else{var f=An(e),h=f==lo||"[object GeneratorFunction]"==f;if(Yt(e))return function(e,t){if(t)return e.slice();var r=e.length,n=on?on(r):new e.constructor(r);return e.copy(n),n}(e,s);if(f==co||f==so||h&&!o){if(a=l||h?{}:function(e){return"function"!=typeof e.constructor||Dt(e)?{}:ut(Gr(e))}(e),!s)return l?function(e,t){return Et(e,fn(e),t)}(e,function(e,t){return e&&Et(t,gr(t),e)}(a,e)):function(e,t){return Et(e,un(e),t)}(e,function(e,t){return e&&Et(t,hr(t),e)}(a,e))}else{if(!uo[f])return o?e:{};a=function(e,t,r){var n,o,i,a=e.constructor;switch(t){case qn:return xn(e);case Ln:case Bn:return new a(+e);case Vn:return function(e,t){var r=t?xn(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case Gn:case Wn:case Jn:case Kn:case Yn:case Qn:case Zn:case Xn:case eo:return function(e,t){var r=t?xn(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}(e,r);case Fn:return new a;case Un:case Rn:return new a(e);case Dn:return(i=new(o=e).constructor(o.source,Tn.exec(o))).lastIndex=o.lastIndex,i;case zn:return new a;case Hn:return n=e,Nn?Object(Nn.call(n)):{}}}(e,f,s)}}i||(i=new en);var d=i.get(e);if(d)return d;i.set(e,a),ao(e)?e.forEach((function(n){a.add(fo(n,t,r,n,e,i))})):no(e)&&e.forEach((function(n,o){a.set(o,fo(n,t,r,o,e,i))}));var p=u?void 0:(c?l?pn:dn:l?gr:hr)(e);return function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r););}(p||e,(function(n,o){p&&(n=e[o=n]),It(a,o,fo(n,t,r,o,e,i))})),a}function ho(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Pr;++t<r;)this.add(e[t])}function po(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function go(e,t){return e.has(t)}uo[so]=uo["[object Array]"]=uo["[object ArrayBuffer]"]=uo["[object DataView]"]=uo["[object Boolean]"]=uo["[object Date]"]=uo["[object Float32Array]"]=uo["[object Float64Array]"]=uo["[object Int8Array]"]=uo["[object Int16Array]"]=uo["[object Int32Array]"]=uo["[object Map]"]=uo["[object Number]"]=uo[co]=uo["[object RegExp]"]=uo["[object Set]"]=uo["[object String]"]=uo["[object Symbol]"]=uo["[object Uint8Array]"]=uo["[object Uint8ClampedArray]"]=uo["[object Uint16Array]"]=uo["[object Uint32Array]"]=!0,uo["[object Error]"]=uo[lo]=uo["[object WeakMap]"]=!1,ho.prototype.add=ho.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ho.prototype.has=function(e){return this.__data__.has(e)};var yo=1,mo=2;function vo(e,t,r,n,o,i){var a=r&yo,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=i.get(e),u=i.get(t);if(c&&u)return c==t&&u==e;var f=-1,h=!0,d=r&mo?new ho:void 0;for(i.set(e,t),i.set(t,e);++f<s;){var p=e[f],g=t[f];if(n)var y=a?n(g,p,f,t,e,i):n(p,g,f,e,t,i);if(void 0!==y){if(y)continue;h=!1;break}if(d){if(!po(t,(function(e,t){if(!go(d,t)&&(p===e||o(p,e,r,n,i)))return d.push(t)}))){h=!1;break}}else if(p!==g&&!o(p,g,r,n,i)){h=!1;break}}return i.delete(e),i.delete(t),h}function bo(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function wo(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var $o=1,jo=2,_o="[object Boolean]",Oo="[object Date]",ko="[object Error]",So="[object Map]",Mo="[object Number]",Po="[object RegExp]",Ao="[object Set]",Io="[object String]",Eo="[object Symbol]",xo="[object ArrayBuffer]",To="[object DataView]",Co=Oe?Oe.prototype:void 0,No=Co?Co.valueOf:void 0,Lo=1,Bo=Object.prototype.hasOwnProperty,Fo=1,Uo="[object Arguments]",Do="[object Array]",zo="[object Object]",Ro=Object.prototype.hasOwnProperty;function Ho(e,t,r,n,o){return e===t||(null==e||null==t||!Ce(e)&&!Ce(t)?e!=e&&t!=t:function(e,t,r,n,o,i){var a=Fe(e),s=Fe(t),l=a?Do:An(e),c=s?Do:An(t),u=(l=l==Uo?zo:l)==zo,f=(c=c==Uo?zo:c)==zo,h=l==c;if(h&&Yt(e)){if(!Yt(t))return!1;a=!0,u=!1}if(h&&!u)return i||(i=new en),a||ir(e)?vo(e,t,r,n,o,i):function(e,t,r,n,o,i,a){switch(r){case To:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case xo:return!(e.byteLength!=t.byteLength||!i(new En(e),new En(t)));case _o:case Oo:case Mo:return Pt(+e,+t);case ko:return e.name==t.name&&e.message==t.message;case Po:case Io:return e==t+"";case So:var s=bo;case Ao:var l=n&$o;if(s||(s=wo),e.size!=t.size&&!l)return!1;var c=a.get(e);if(c)return c==t;n|=jo,a.set(e,t);var u=vo(s(e),s(t),n,o,i,a);return a.delete(e),u;case Eo:if(No)return No.call(e)==No.call(t)}return!1}(e,t,l,r,n,o,i);if(!(r&Fo)){var d=u&&Ro.call(e,"__wrapped__"),p=f&&Ro.call(t,"__wrapped__");if(d||p){var g=d?e.value():e,y=p?t.value():t;return i||(i=new en),o(g,y,r,n,i)}}return!!h&&(i||(i=new en),function(e,t,r,n,o,i){var a=r&Lo,s=dn(e),l=s.length;if(l!=dn(t).length&&!a)return!1;for(var c=l;c--;){var u=s[c];if(!(a?u in t:Bo.call(t,u)))return!1}var f=i.get(e),h=i.get(t);if(f&&h)return f==t&&h==e;var d=!0;i.set(e,t),i.set(t,e);for(var p=a;++c<l;){var g=e[u=s[c]],y=t[u];if(n)var m=a?n(y,g,u,t,e,i):n(g,y,u,e,t,i);if(!(void 0===m?g===y||o(g,y,r,n,i):m)){d=!1;break}p||(p="constructor"==u)}if(d&&!p){var v=e.constructor,b=t.constructor;v==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(d=!1)}return i.delete(e),i.delete(t),d}(e,t,r,n,o,i))}(e,t,r,n,Ho,o))}var qo=1,Vo=2;function Go(e){return e==e&&!He(e)}function Wo(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}}function Jo(e,t){return null!=e&&t in Object(e)}function Ko(e,t){return null!=e&&function(e,t,r){for(var n=-1,o=(t=Nr(t,e)).length,i=!1;++n<o;){var a=Br(t[n]);if(!(i=null!=e&&r(e,a)))break;e=e[a]}return i||++n!=o?i:!!(o=null==e?0:e.length)&&Lt(o)&&St(a,o)&&(Fe(e)||Gt(e))}(e,t,Jo)}var Yo=1,Qo=2;function Zo(e){return"function"==typeof e?e:null==e?qe:"object"==typeof e?Fe(e)?(n=e[0],o=e[1],vr(n)&&Go(o)?Wo(Br(n),o):function(e){var t=Ur(e,n);return void 0===t&&t===o?Ko(e,n):Ho(o,t,Yo|Qo)}):(r=function(e){for(var t=hr(e),r=t.length;r--;){var n=t[r],o=e[n];t[r]=[n,o,Go(o)]}return t}(t=e),1==r.length&&r[0][2]?Wo(r[0][0],r[0][1]):function(e){return e===t||function(e,t,r,n){var o=r.length,i=o;if(null==e)return!i;for(e=Object(e);o--;){var a=r[o];if(a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++o<i;){var s=(a=r[o])[0],l=e[s],c=a[1];if(a[2]){if(void 0===l&&!(s in e))return!1}else{var u,f=new en;if(!(void 0===u?Ho(c,l,qo|Vo,n,f):u))return!1}}return!0}(e,0,r)}):function(e){return vr(e)?(t=Br(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return Fr(t,e)}}(e);var t}(e);var t,r,n,o}function Xo(e){return Ce(e)&&Bt(e)}function ei(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}var ti=Math.min;function ri(e){return Xo(e)?e:[]}Ct((function(e){var t=ei(e),r=Be(e,ri);return t===ei(r)?t=void 0:r.pop(),r.length&&r[0]===e[0]?function(e,t,r){for(var n=_t,o=e[0].length,i=e.length,a=i,s=Array(i),l=1/0,c=[];a--;){var u=e[a];a&&t&&(u=Be(u,Zt(t))),l=ti(u.length,l),s[a]=t||o>=120&&u.length>=120?new ho(a&&u):void 0}u=e[0];var f=-1,h=s[0];e:for(;++f<o&&c.length<l;){var d=u[f],p=t?t(d):d;if(d=0!==d?d:0,!(h?go(h,p):n(c,p,r))){for(a=i;--a;){var g=s[a];if(!(g?go(g,p):n(e[a],p,r)))continue e}h&&h.push(p),c.push(d)}}return c}(r,Zo(t)):[]}));var ni=Object.prototype.hasOwnProperty;function oi(e,t){return null==(e=function(e,t){return t.length<2?e:Fr(e,function(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(o);++n<o;)i[n]=e[n+t];return i}(t,0,-1))}(e,t=Nr(t,e)))||delete e[Br(ei(t))]}function ii(e){return Xr(e)?void 0:e}var ai=Vr((function(e,t){var r={};if(null==e)return r;var n=!1;t=Be(t,(function(t){return t=Nr(t,e),n||(n=t.length>1),t})),Et(e,pn(e),r),n&&(r=fo(r,7,ii));for(var o=t.length;o--;)oi(r,t[o]);return r}));function si(e,t,r,n){if(!He(e))return e;for(var o=-1,i=(t=Nr(t,e)).length,a=i-1,s=e;null!=s&&++o<i;){var l=Br(t[o]),c=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(o!=a){var u=s[l];void 0===(c=n?n(u,l,s):void 0)&&(c=He(u)?u:St(t[o+1])?[]:{})}It(s,l,c),s=s[l]}return e}Vr((function(e,t){return null==e?{}:function(e,t){return function(e,t,r){for(var n=-1,o=t.length,i={};++n<o;){var a=t[n],s=Fr(e,a);r(0,a)&&si(i,Nr(a,e),s)}return i}(e,t,(function(t,r){return Ko(e,r)}))}(e,t)}));var li=Math.floor,ci=Math.min;var ui=mn&&1/wo(new mn([,-0]))[1]==1/0?function(e){return new mn(e)}:function(){};function fi(e){return null==e||"string"==typeof e&&""===e||Xr(e)&&function(e){if(null==e)return!0;if(Bt(e)&&(Fe(e)||"string"==typeof e||"function"==typeof e.splice||Yt(e)||ir(e)||Gt(e)))return!e.length;var t=An(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(Dt(e))return!fr(e).length;for(var r in e)if(ni.call(e,r))return!1;return!0}(e)||Array.isArray(e)&&e.length<1||"object"==typeof e&&!1===Fe(e)&&function(e){let t=!0;if("object"==typeof e&&!1===Fe(e))for(const r in e){const n=e?.[r];if(!0===e.hasOwnProperty(r)&&null!=n&&""!==n){t=!1;break}}return t}(e)}async function hi(e,t){return oe.default(e,t)}Ct((function(e){var t=ei(e);return Xo(t)&&(t=void 0),function(e,t,r){var n=-1,o=_t,i=e.length,a=!0,s=[],l=s;if(i>=200){var c=t?null:ui(e);if(c)return wo(c);a=!1,o=go,l=new ho}else l=t?[]:s;e:for(;++n<i;){var u=e[n],f=t?t(u):u;if(u=0!==u?u:0,a&&f==f){for(var h=l.length;h--;)if(l[h]===f)continue e;t&&l.push(f),s.push(u)}else o(l,f,r)||(l!==s&&l.push(f),s.push(u))}return s}(Hr(e,1,Xo,!0),Zo(t))}));const di={Arabic:"ar",Bosnian:"bs",Bulgarian:"bg",Catalan:"ca",Czech:"cs",Danish:"da",German:"de",Greek:"el",English:"en",EnglishUSA:"en-US",Spanish:"es",Estonian:"et",Finnish:"fi",French:"fr",Hebrew:"he",Croatian:"hr",Hungarian:"hu",Indonesian:"id",Italian:"it",Japanese:"ja",Korean:"ko",Lithuanian:"lt",Latvian:"lv",NorwegianBokml:"nb",Dutch:"nl",Polish:"pl",PortugueseBrazil:"pt-BR",PortuguesePortugal:"pt-PT",Romanian:"ro",Russian:"ru",Serbian:"sr",Slovenian:"sl",Slovak:"sk",Swedish:"sv",Thai:"th",Turkish:"tr",Ukrainian:"uk",Vietnamese:"vi",ChineseChina:"zh-CN",ChineseHongKong:"zh-HK",ChineseTaiwan:"zh-TW"},pi=[...Object.values(di),"ar-u-nu-latn","en-AU","en-GB","es-ES","es-MX","de-AT","de-CH","de-DE","it-CH","it-IT"],gi=[di.Arabic,di.Hebrew];function yi(e=document.documentElement){const t=function e(t){let r;return r=void 0===t||t===document||t===window?null:t.closest("[lang]")||e(t.getRootNode().host),r}(e);const r=t?.lang??window.navigator.language,n=function(e){let t=di.English;if(void 0!==e){const r=Object.values(di),n=r.filter((e=>-1!==e.indexOf("-")));if(-1!==e.indexOf("-")){const[t,r]=e.split("-");e=`${t}-${r.toUpperCase()}`}if(!0===n.includes(e))t=e;else{const n=function(e){const t=e?.match(/^([a-z]{2})-([A-Z]{1,2})$/);let r=di.English;return null!=t&&t?.length>1?r=t[1]:2===e?.length&&e.toLowerCase()===e&&(r=e),r}(e);!0===r.includes(n)&&(t=n)}}return t}(r),o=function(e){let t=pi.find((t=>t===e));if(void 0===t&&(t=e),void 0!==t&&-1!==t.indexOf("-")){const[e,r]=t.split("-");t=`${e}-${r.toUpperCase()}`}return"ar"===t&&(t="ar-u-nu-latn"),t}(r);return{locale:n,rtl:gi.includes(n),formatLocale:o}}class mi extends Error{constructor(e,t,r,n){super(t),this.name=e,this.details=r,this.cause=n}}const vi="networkError";var bi=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")},wi=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return bi()}try{return __global__||bi()}finally{delete Object.prototype.__global__}}(),$i="object"==typeof globalThis&&globalThis&&globalThis.Array===Array?globalThis:wi,ji=$i,_i={object:!0,symbol:!0},Oi={exports:{}},ki=function(e){return null!=e},Si=ki,Mi={object:!0,function:!0,undefined:!0},Pi=function(e){if(!function(e){return!!Si(e)&&hasOwnProperty.call(Mi,typeof e)}(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}},Ai=/^\s*class[\s{/}]/,Ii=Function.prototype.toString,Ei=function(e){return null!=e},xi=Ei,Ti=Object.keys,Ci=function(){try{return!0}catch(e){return!1}}()?Object.keys:function(e){return Ti(xi(e)?Object(e):e)},Ni=Ei,Li=Ci,Bi=Math.max,Fi=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}()?Object.assign:function(e,t){var r,n,o,i=Bi(arguments.length,2);for(e=Object(function(e){if(!Ni(e))throw new TypeError("Cannot use null or undefined");return e}(e)),o=function(n){try{e[n]=t[n]}catch(e){r||(r=e)}},n=1;n<i;++n)Li(t=arguments[n]).forEach(o);if(void 0!==r)throw r;return e},Ui=Ei,Di=Array.prototype.forEach,zi=Object.create,Ri="razdwatrzy",Hi=String.prototype.indexOf,qi="function"==typeof Ri.contains&&!0===Ri.contains("dwa")&&!1===Ri.contains("foo")?String.prototype.contains:function(e){return Hi.call(this,e,arguments[1])>-1},Vi=ki,Gi=function(e){return!!function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!Pi(e)}(e)&&!Ai.test(Ii.call(e))},Wi=Fi,Ji=function(e){var t=zi(null);return Di.call(arguments,(function(e){Ui(e)&&function(e,t){var r;for(r in e)t[r]=e[r]}(Object(e),t)})),t},Ki=qi,Yi=Oi.exports=function(e,t){var r,n,o,i,a;return arguments.length<2||"string"!=typeof e?(i=t,t=e,e=null):i=arguments[2],Vi(e)?(r=Ki.call(e,"c"),n=Ki.call(e,"e"),o=Ki.call(e,"w")):(r=o=!0,n=!1),a={value:t,configurable:r,enumerable:n,writable:o},i?Wi(Ji(i),a):a};Yi.gs=function(e,t,r){var n,o,i,a;return"string"!=typeof e?(i=r,r=t,t=e,e=null):i=arguments[3],Vi(t)?Gi(t)?Vi(r)?Gi(r)||(i=r,r=void 0):r=void 0:(i=t,t=r=void 0):t=void 0,Vi(e)?(n=Ki.call(e,"c"),o=Ki.call(e,"e")):(n=!0,o=!1),a={get:t,set:r,configurable:n,enumerable:o},i?Wi(Ji(i),a):a};var Qi,Zi,Xi,ea=function(e){if(!function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&"Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag])}(e))throw new TypeError(e+" is not a symbol");return e},ta=Oi.exports,ra=Object.create,na=Object.defineProperty,oa=Object.prototype,ia=ra(null),aa=Oi.exports,sa=$i.Symbol,la=Oi.exports,ca=ea,ua=Object.create(null),fa=Oi.exports,ha=ea,da=$i.Symbol,pa=function(e){for(var t,r,n=0;ia[e+(n||"")];)++n;return ia[e+=n||""]=!0,na(oa,t="@@"+e,ta.gs(null,(function(e){r||(r=!0,na(this,t,ta(e)),r=!1)}))),t},ga=Object.create,ya=Object.defineProperties,ma=Object.defineProperty;if("function"==typeof da)try{String(da()),Xi=!0}catch(e){}else da=null;Zi=function(e){if(this instanceof Zi)throw new TypeError("Symbol is not a constructor");return Qi(e)};var va=Qi=function e(t){var r;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return Xi?da(t):(r=ga(Zi.prototype),t=void 0===t?"":String(t),ya(r,{__description__:fa("",t),__name__:fa("",pa(t))}))};(function(e){Object.defineProperties(e,{hasInstance:aa("",sa&&sa.hasInstance||e("hasInstance")),isConcatSpreadable:aa("",sa&&sa.isConcatSpreadable||e("isConcatSpreadable")),iterator:aa("",sa&&sa.iterator||e("iterator")),match:aa("",sa&&sa.match||e("match")),replace:aa("",sa&&sa.replace||e("replace")),search:aa("",sa&&sa.search||e("search")),species:aa("",sa&&sa.species||e("species")),split:aa("",sa&&sa.split||e("split")),toPrimitive:aa("",sa&&sa.toPrimitive||e("toPrimitive")),toStringTag:aa("",sa&&sa.toStringTag||e("toStringTag")),unscopables:aa("",sa&&sa.unscopables||e("unscopables"))})})(Qi),function(e){Object.defineProperties(e,{for:la((function(t){return ua[t]?ua[t]:ua[t]=e(String(t))})),keyFor:la((function(e){var t;for(t in ca(e),ua)if(ua[t]===e)return t}))})}(Qi),ya(Zi.prototype,{constructor:fa(Qi),toString:fa("",(function(){return this.__name__}))}),ya(Qi.prototype,{toString:fa((function(){return"Symbol ("+ha(this).__description__+")"})),valueOf:fa((function(){return ha(this)}))}),ma(Qi.prototype,Qi.toPrimitive,fa("",(function(){var e=ha(this);return"symbol"==typeof e?e:e.toString()}))),ma(Qi.prototype,Qi.toStringTag,fa("c","Symbol")),ma(Zi.prototype,Qi.toStringTag,fa("c",Qi.prototype[Qi.toStringTag])),ma(Zi.prototype,Qi.toPrimitive,fa("c",Qi.prototype[Qi.toPrimitive])),(!function(){var e=ji.Symbol;return"function"==typeof e&&(e("test symbol"),!!_i[typeof e.iterator]&&!!_i[typeof e.toPrimitive]&&!!_i[typeof e.toStringTag])}()?va:$i.Symbol)("-");var ba={exports:{}};function wa(e,t,r,n){var o=function(e){return null==e||"number"==typeof e||"boolean"==typeof e}(n)?n:r(n),i=t.get(o);return void 0===i&&(i=e.call(this,n),t.set(o,i)),i}function $a(e,t,r){var n=Array.prototype.slice.call(arguments,3),o=r(n),i=t.get(o);return void 0===i&&(i=e.apply(this,n),t.set(o,i)),i}function ja(e,t,r,n,o){return r.bind(t,e,n,o)}function _a(e,t){return ja(e,this,1===e.length?wa:$a,t.cache.create(),t.serializer)}function Oa(){return JSON.stringify(arguments)}function ka(){this.cache=Object.create(null)}ka.prototype.has=function(e){return e in this.cache},ka.prototype.get=function(e){return this.cache[e]},ka.prototype.set=function(e,t){this.cache[e]=t};var Sa={create:function(){return new ka}};ba.exports=function(e,t){var r=t&&t.cache?t.cache:Sa,n=t&&t.serializer?t.serializer:Oa;return(t&&t.strategy?t.strategy:_a)(e,{cache:r,serializer:n})},ba.exports.strategies={variadic:function(e,t){return ja(e,this,$a,t.cache.create(),t.serializer)},monadic:function(e,t){return ja(e,this,wa,t.cache.create(),t.serializer)}};var Ma=ba.exports;const Pa=["SingleLine","Address","Address2","Address3","Neighborhood","City","Subregion","Region","Postal","PostalExt","CountryCode"];Ma((async({data:e,toolUIStrings:t})=>{const r=ff(e,"geocodeServiceURL");let n;try{({data:{detailedCountries:n}}=await hi(`${r}?f=json`,{responseType:"json"}))}catch(e){return[]}const{locale:o}=yi(),i=n.map((e=>{const t=e.localizedNames,r=o.length>2&&o;let n;if("boolean"!=typeof r&&(n=t[r]),void 0===n){const e=2===o.length?o:o.slice(0,2);if(n=t[e],void 0===n){const r=Object.keys(t).find((t=>t.startsWith(e)));void 0!==r&&(n=t[r])}}return null!=n&&""!==n||(n=t[di.English]??t[di.EnglishUSA]),{name:e.name,label:n}}));if(!0==(null!==r.match(/(arcgis.com\/arcgis\/rest\/services\/world\/geocodeserver).*/gi)||null!==r.match(/(\/servers\/[\da-z\.-]+\/rest\/services\/world\/geocodeserver).*/gi))){const e={name:"",label:t?.world??"World"};i.splice(function(e,t,r){return function(e,t,r){var n=0,o=null==e?0:e.length;if(0===o)return 0;for(var i=(t=r(t))!=t,a=null===t,s=Le(t),l=void 0===t;n<o;){var c=li((n+o)/2),u=r(e[c]),f=void 0!==u,h=null===u,d=u==u,p=Le(u);if(i)var g=d;else g=l?d&&f:a?d&&f&&!h:s?d&&f&&!h&&!p:!h&&!p&&u<t;g?n=c+1:o=c}return ci(o,4294967294)}(e,t,Zo(r))}(i,e,"label"),0,e)}return i}),{serializer:e=>{const{data:{geocodeServiceURL:t}}=e;return t??"EMPTY_KEY"}}),Ma((async(e,t)=>{const r=function(e,t){const{locale:r}=yi(),n=ff(e,"geocodeServiceURL");let o={asyncGeocodeUrl:t.helperServices.asyncGeocode.url,geocodeServiceURL:n,locale:r};const i=df(Ur(e,"inputFileItem.itemId"),t),a=ff(e,"inputTable");if(fi(i?.id))fi(a?.url)||(o={...o,inputTable:{url:a.url,serviceToken:a.serviceToken}});else{const e="CSV"===i.type?"csv":"xlsx";o={...o,inputFileItem:{itemid:i.id},inputFileParameters:{fileType:e,headerRowExists:"true",columnDelimiter:"",textQualifier:""}}}return o}(e,t);let n,o,i;try{n=await hf(r)}catch(e){return{geocodeParameters:void 0,addressFields:[],labels:{},values:[]}}try{o=JSON.parse(n.field_info),i=JSON.parse(n.field_mapping).reduce(((e,t)=>({...e,[t[1]]:t[0]})),{})}catch(e){return{addressFields:[],labels:{},values:[]}}const a=o.map((e=>e[0])),s=a.reduce(((e,t)=>({...e,[t]:t})),{});return{geocodeParameters:n,addressFields:a,labels:s,values:Pa.map((e=>i[e]))}}),{serializer:e=>{const{geocodeServiceURL:t,inputFileItem:r,inputTable:n}=e[0],o=r?.itemId,i=n?.url;return fi(t)||fi(o)&&fi(i)?"EMPTY_KEY":`${t}${o}${i}`}});async function Aa(t,r){const n=await async function(t=yi().locale){let r=await new Promise((function(t,r){e(["./errors.t9n.en-ce308737-cf24ee9c-48ea8dca"],t,r)}));switch(t){case di.Arabic:r=await new Promise((function(t,r){e(["./errors.t9n.ar-f8377309-1aad0481-ab4b9b0a"],t,r)}));break;case di.Bosnian:r=await new Promise((function(t,r){e(["./errors.t9n.bs-f2c9b84a-3d2ee799-1a3a9ea8"],t,r)}));break;case di.Bulgarian:r=await new Promise((function(t,r){e(["./errors.t9n.bg-133a00eb-9381b5d2-046196ad"],t,r)}));break;case di.Catalan:r=await new Promise((function(t,r){e(["./errors.t9n.ca-77be1fde-bfdbb7f7-0391a281"],t,r)}));break;case di.Czech:r=await new Promise((function(t,r){e(["./errors.t9n.cs-f3fc2bfe-ccf9116d-651ce242"],t,r)}));break;case di.Danish:r=await new Promise((function(t,r){e(["./errors.t9n.da-5ec130da-2eac5ab3-6b2199b1"],t,r)}));break;case di.German:r=await new Promise((function(t,r){e(["./errors.t9n.de-30e5bc06-622b714c-70f91bc2"],t,r)}));break;case di.Greek:r=await new Promise((function(t,r){e(["./errors.t9n.el-268ac2eb-8aae0536-fa46e495"],t,r)}));break;case di.EnglishUSA:r=await new Promise((function(t,r){e(["./errors.t9n.en-US-80efbc69-4658b72b-f3c9564a"],t,r)}));break;case di.Spanish:r=await new Promise((function(t,r){e(["./errors.t9n.es-d3d3a2a1-757b1c92-5a285643"],t,r)}));break;case di.Estonian:r=await new Promise((function(t,r){e(["./errors.t9n.et-63de1418-5126050e-01ae5962"],t,r)}));break;case di.Finnish:r=await new Promise((function(t,r){e(["./errors.t9n.fi-552ab92d-7ac33552-843b07d9"],t,r)}));break;case di.French:r=await new Promise((function(t,r){e(["./errors.t9n.fr-1fa5274f-08adf72d-0f2e6c99"],t,r)}));break;case di.Hebrew:r=await new Promise((function(t,r){e(["./errors.t9n.he-adf10d0c-8c9da6b2-63e231cf"],t,r)}));break;case di.Croatian:r=await new Promise((function(t,r){e(["./errors.t9n.hr-f7fb1505-bda74f07-1404041a"],t,r)}));break;case di.Hungarian:r=await new Promise((function(t,r){e(["./errors.t9n.hu-5430a54d-9fbe54ff-d02ab7e8"],t,r)}));break;case di.Indonesian:r=await new Promise((function(t,r){e(["./errors.t9n.id-746523e5-1b2f84fb-7c190fa7"],t,r)}));break;case di.Italian:r=await new Promise((function(t,r){e(["./errors.t9n.it-8c6248d0-74baeb17-33b86898"],t,r)}));break;case di.Japanese:r=await new Promise((function(t,r){e(["./errors.t9n.ja-d370e16c-5dd9b917-181a576f"],t,r)}));break;case di.Korean:r=await new Promise((function(t,r){e(["./errors.t9n.ko-900b2d44-d1fd22f1-e53f4126"],t,r)}));break;case di.Lithuanian:r=await new Promise((function(t,r){e(["./errors.t9n.lt-f44bb816-48d2ba1f-23994bbc"],t,r)}));break;case di.Latvian:r=await new Promise((function(t,r){e(["./errors.t9n.lv-7fc4c488-10efa040-885ce19e"],t,r)}));break;case di.NorwegianBokml:r=await new Promise((function(t,r){e(["./errors.t9n.nb-f931c678-d32422ca-99fced89"],t,r)}));break;case di.Dutch:r=await new Promise((function(t,r){e(["./errors.t9n.nl-02c8b052-2273d98f-d08d18b3"],t,r)}));break;case di.Polish:r=await new Promise((function(t,r){e(["./errors.t9n.pl-2cd523f1-4296abfb-7f03fcd2"],t,r)}));break;case di.PortugueseBrazil:r=await new Promise((function(t,r){e(["./errors.t9n.pt-BR-646a39d3-20e9d2ab-20873ad7"],t,r)}));break;case di.PortuguesePortugal:r=await new Promise((function(t,r){e(["./errors.t9n.pt-PT-ee7824f7-f8820d70-54542067"],t,r)}));break;case di.Romanian:r=await new Promise((function(t,r){e(["./errors.t9n.ro-caa360ce-c1b1bf3a-da640632"],t,r)}));break;case di.Russian:r=await new Promise((function(t,r){e(["./errors.t9n.ru-f3a5da28-c0ba25f7-768ad138"],t,r)}));break;case di.Serbian:r=await new Promise((function(t,r){e(["./errors.t9n.sr-1a1e960a-9871b67c-3cbf5f21"],t,r)}));break;case di.Slovak:r=await new Promise((function(t,r){e(["./errors.t9n.sk-71a84901-de956294-0ca3a355"],t,r)}));break;case di.Slovenian:r=await new Promise((function(t,r){e(["./errors.t9n.sl-3acdb6c1-f5f857cb-c1e3c554"],t,r)}));break;case di.Swedish:r=await new Promise((function(t,r){e(["./errors.t9n.sv-2fb5a793-804a8164-dd18c81a"],t,r)}));break;case di.Thai:r=await new Promise((function(t,r){e(["./errors.t9n.th-f9ad2a56-ada1e6ce-84bf244d"],t,r)}));break;case di.Turkish:r=await new Promise((function(t,r){e(["./errors.t9n.tr-c4eb0d2c-2570c955-43a81ce7"],t,r)}));break;case di.Ukrainian:r=await new Promise((function(t,r){e(["./errors.t9n.uk-3e6d1c47-c1f6ffcf-5f4ad235"],t,r)}));break;case di.Vietnamese:r=await new Promise((function(t,r){e(["./errors.t9n.vi-52d3215d-16c33d78-145289bb"],t,r)}));break;case di.ChineseChina:r=await new Promise((function(t,r){e(["./errors.t9n.zh-CN-6d00e0ac-4fb47dc9-665e1f22"],t,r)}));break;case di.ChineseHongKong:r=await new Promise((function(t,r){e(["./errors.t9n.zh-HK-db005b60-2d482ef9-5bb317b1"],t,r)}));break;case di.ChineseTaiwan:r=await new Promise((function(t,r){e(["./errors.t9n.zh-TW-b88afa6b-f65a4e08-4edde9d7"],t,r)}))}return r}(),o=n[t]??n.defaultError;throw new mi(t,o,{type:"analysis_ui"},r)}var Ia=Object.defineProperty,Ea={},xa=e=>"object"==(e=typeof e)||"function"===e;((e,t)=>{for(var r in t)Ia(e,r,{get:t[r],enumerable:!0})})({},{err:()=>Ca,map:()=>Na,ok:()=>Ta,unwrap:()=>Fa,unwrapErr:()=>Ua});var Ta=e=>({isOk:!0,isErr:!1,value:e}),Ca=e=>({isOk:!1,isErr:!0,value:e});function Na(e,t){if(e.isOk){const r=t(e.value);return r instanceof Promise?r.then((e=>Ta(e))):Ta(r)}if(e.isErr){const t=e.value;return Ca(t)}throw"should never get here"}var La,Ba,Fa=e=>{if(e.isOk)return e.value;throw e.value},Ua=e=>{if(e.isErr)return e.value;throw e.value},Da=(e,t,...r)=>{let n=null,o=null,i=!1,a=!1;const s=[],l=t=>{for(let r=0;r<t.length;r++)n=t[r],Array.isArray(n)?l(n):null!=n&&"boolean"!=typeof n&&((i="function"!=typeof e&&!xa(n))&&(n=String(n)),i&&a?s[s.length-1].$text$+=n:s.push(i?za(null,n):n),a=i)};if(l(r),t){t.key&&(o=t.key);{const e=t.className||t.class;e&&(t.class="object"!=typeof e?e:Object.keys(e).filter((t=>e[t])).join(" "))}}if("function"==typeof e)return e(null===t?{}:t,s,Ha);const c=za(e,null);return c.$attrs$=t,s.length>0&&(c.$children$=s),c.$key$=o,c},za=(e,t)=>({$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null,$key$:null}),Ra={},Ha={forEach:(e,t)=>e.map(qa).forEach(t),map:(e,t)=>e.map(qa).map(t).map(Va)},qa=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),Va=e=>{if("function"==typeof e.vtag){const t={...e.vattrs};return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),Da(e.vtag,t,...e.vchildren||[])}const t=za(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},Ga=new WeakMap,Wa=(e,t)=>"sc-"+e.$tagName$,Ja=(e,t,r,n,o,i)=>{if(r!==n){let a=Os(e,t),s=t.toLowerCase();if("class"===t){const t=e.classList,o=Ya(r),i=Ya(n);t.remove(...o.filter((e=>e&&!i.includes(e)))),t.add(...i.filter((e=>e&&!o.includes(e))))}else if("style"===t){for(const t in r)n&&null!=n[t]||(t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(const t in n)r&&n[t]===r[t]||(t.includes("-")?e.style.setProperty(t,n[t]):e.style[t]=n[t])}else if("key"===t);else if("ref"===t)n&&n(e);else if(a||"o"!==t[0]||"n"!==t[1]){const s=xa(n);if((a||s&&null!==n)&&!o)try{if(e.tagName.includes("-"))e[t]=n;else{const o=null==n?"":n;"list"===t?a=!1:null!=r&&e[t]==o||(e[t]=o)}}catch(e){}null==n||!1===n?!1===n&&""!==e.getAttribute(t)||e.removeAttribute(t):(!a||4&i||o)&&!s&&(n=!0===n?"":n,e.setAttribute(t,n))}else if(t="-"===t[2]?t.slice(3):Os(Ms,s)?s.slice(2):s[2]+t.slice(3),r||n){const o=t.endsWith(Qa);t=t.replace(Za,""),r&&As.rel(e,t,r,o),n&&As.ael(e,t,n,o)}}},Ka=/\s/,Ya=e=>e?e.split(Ka):[],Qa="Capture",Za=new RegExp(Qa+"$"),Xa=(e,t,r,n)=>{const o=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,i=e&&e.$attrs$||Ea,a=t.$attrs$||Ea;for(n of es(Object.keys(i)))n in a||Ja(o,n,i[n],void 0,r,t.$flags$);for(n of es(Object.keys(a)))Ja(o,n,i[n],a[n],r,t.$flags$)};function es(e){return e.includes("ref")?[...e.filter((e=>"ref"!==e)),"ref"]:e}var ts,rs=!1,ns=!1,os=(e,t,r,n)=>{const o=t.$children$[r];let i,a,s=0;if(null!==o.$text$)i=o.$elm$=Ps.createTextNode(o.$text$);else if(i=o.$elm$=Ps.createElement(o.$tag$),Xa(null,o,ns),null!=La&&i["s-si"]!==La&&i.classList.add(i["s-si"]=La),o.$children$)for(s=0;s<o.$children$.length;++s)a=os(e,o,s),a&&i.appendChild(a);return i["s-hn"]=Ba,i},is=(e,t,r,n,o,i)=>{let a,s=e;for(s.shadowRoot&&s.tagName===Ba&&(s=s.shadowRoot);o<=i;++o)n[o]&&(a=os(null,r,o),a&&(n[o].$elm$=a,s.insertBefore(a,t)))},as=(e,t,r)=>{for(let n=t;n<=r;++n){const t=e[n];if(t){const e=t.$elm$;cs(t),e&&e.remove()}}},ss=(e,t,r=!1)=>e.$tag$===t.$tag$&&(!!r||e.$key$===t.$key$),ls=(e,t,r=!1)=>{const n=t.$elm$=e.$elm$,o=e.$children$,i=t.$children$,a=t.$tag$,s=t.$text$;null===s?(("slot"!==a||rs)&&Xa(e,t,ns),null!==o&&null!==i?((e,t,r,n,o=!1)=>{let i,a,s=0,l=0,c=0,u=0,f=t.length-1,h=t[0],d=t[f],p=n.length-1,g=n[0],y=n[p];for(;s<=f&&l<=p;)if(null==h)h=t[++s];else if(null==d)d=t[--f];else if(null==g)g=n[++l];else if(null==y)y=n[--p];else if(ss(h,g,o))ls(h,g,o),h=t[++s],g=n[++l];else if(ss(d,y,o))ls(d,y,o),d=t[--f],y=n[--p];else if(ss(h,y,o))ls(h,y,o),e.insertBefore(h.$elm$,d.$elm$.nextSibling),h=t[++s],y=n[--p];else if(ss(d,g,o))ls(d,g,o),e.insertBefore(d.$elm$,h.$elm$),d=t[--f],g=n[++l];else{for(c=-1,u=s;u<=f;++u)if(t[u]&&null!==t[u].$key$&&t[u].$key$===g.$key$){c=u;break}c>=0?(a=t[c],a.$tag$!==g.$tag$?i=os(t&&t[l],r,c):(ls(a,g,o),t[c]=void 0,i=a.$elm$),g=n[++l]):(i=os(t&&t[l],r,l),g=n[++l]),i&&h.$elm$.parentNode.insertBefore(i,h.$elm$)}s>f?is(e,null==n[p+1]?null:n[p+1].$elm$,r,n,l,p):l>p&&as(t,s,f)})(n,o,t,i,r):null!==i?(null!==e.$text$&&(n.textContent=""),is(n,null,t,i,0,i.length-1)):null!==o&&as(o,0,o.length-1)):e.$text$!==s&&(n.data=s)},cs=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(cs)},us=(e,t)=>{if(e.$flags$|=16,!(4&e.$flags$))return((e,t)=>{t&&!e.$onRenderResolve$&&t["s-p"]&&t["s-p"].push(new Promise((t=>e.$onRenderResolve$=t)))})(e,e.$ancestorComponent$),Ls((()=>fs(e,t)));e.$flags$|=512},fs=(e,t)=>{const r=(e.$cmpMeta$.$tagName$,()=>{}),n=e.$lazyInstance$;let o;return t&&(e.$flags$|=256,e.$queuedListeners$&&(e.$queuedListeners$.map((([e,t])=>ws(n,e,t))),e.$queuedListeners$=void 0),o=ws(n,"componentWillLoad")),o=hs(o,(()=>ws(n,"componentWillRender"))),r(),hs(o,(()=>ps(e,n,t)))},hs=(e,t)=>ds(e)?e.then(t):t(),ds=e=>e instanceof Promise||e&&e.then&&"function"==typeof e.then,ps=async(e,t,r)=>{var n;const o=e.$hostElement$,i=(e.$cmpMeta$.$tagName$,()=>{}),a=o["s-rc"];r&&(e=>{const t=e.$cmpMeta$,r=e.$hostElement$,n=t.$flags$,o=(t.$tagName$,()=>{}),i=((e,t)=>{var r;const n=Wa(t),o=Ss.get(n);if(e=11===e.nodeType?e:Ps,o)if("string"==typeof o){e=e.head||e;let i,a=Ga.get(e);if(a||Ga.set(e,a=new Set),!a.has(n)){{i=Ps.createElement("style"),i.innerHTML=o;const t=null!=(r=As.$nonce$)?r:function(e){var t,r,n;return null!=(n=null==(r=null==(t=e.head)?void 0:t.querySelector('meta[name="csp-nonce"]'))?void 0:r.getAttribute("content"))?n:void 0}(Ps);null!=t&&i.setAttribute("nonce",t),e.insertBefore(i,e.querySelector("link"))}4&t.$flags$&&(i.innerHTML+="slot-fb{display:contents}slot-fb[hidden]{display:none}"),a&&a.add(n)}}else e.adoptedStyleSheets.includes(o)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,o]);return n})(r.shadowRoot?r.shadowRoot:r.getRootNode(),t);10&n&&(r["s-sc"]=i,r.classList.add(i+"-h")),o()})(e);const s=(e.$cmpMeta$.$tagName$,()=>{});ys(e,t,o,r),a&&(a.map((e=>e())),o["s-rc"]=void 0),s(),i();{const t=null!=(n=o["s-p"])?n:[],r=()=>ms(e);0===t.length?r():(Promise.all(t).then(r),e.$flags$|=4,t.length=0)}},gs=null,ys=(e,t,r,n)=>{try{gs=t,t=t.render(),e.$flags$&=-17,e.$flags$|=2,((e,t,r=!1)=>{const n=e.$hostElement$,o=e.$cmpMeta$,i=e.$vnode$||za(null,null),a=(s=t)&&s.$tag$===Ra?t:Da(null,null,t);var s;if(Ba=n.tagName,o.$attrsToReflect$&&(a.$attrs$=a.$attrs$||{},o.$attrsToReflect$.map((([e,t])=>a.$attrs$[t]=n[e]))),r&&a.$attrs$)for(const e of Object.keys(a.$attrs$))n.hasAttribute(e)&&!["key","ref","style","class"].includes(e)&&(a.$attrs$[e]=n[e]);a.$tag$=null,a.$flags$|=4,e.$vnode$=a,a.$elm$=i.$elm$=n.shadowRoot||n,La=n["s-sc"],rs=!!(1&o.$flags$),ls(i,a,r)})(e,t,n)}catch(t){ks(t,e.$hostElement$)}return gs=null,null},ms=e=>{e.$cmpMeta$.$tagName$;const t=e.$hostElement$,r=e.$lazyInstance$,n=e.$ancestorComponent$;ws(r,"componentDidRender"),64&e.$flags$?ws(r,"componentDidUpdate"):(e.$flags$|=64,$s(t),ws(r,"componentDidLoad"),e.$onReadyResolve$(t),n||bs()),e.$onInstanceResolve$(t),e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),512&e.$flags$&&Ns((()=>us(e,!1))),e.$flags$&=-517},vs=e=>{{const t=_s(e),r=t.$hostElement$.isConnected;return r&&2==(18&t.$flags$)&&us(t,!1),r}},bs=e=>{$s(Ps.documentElement),Ns((()=>(e=>{const t=As.ce("appload",{detail:{namespace:"raster-function-editor"}});return e.dispatchEvent(t),t})(Ms)))},ws=(e,t,r)=>{if(e&&e[t])try{return e[t](r)}catch(e){ks(e)}},$s=e=>e.classList.add("hydrated"),js=new WeakMap,_s=e=>js.get(e),Os=(e,t)=>t in e,ks=(e,t)=>(0,console.error)(e,t),Ss=new Map,Ms="undefined"!=typeof window?window:{},Ps=Ms.document||{head:{}},As={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,r,n)=>e.addEventListener(t,r,n),rel:(e,t,r,n)=>e.removeEventListener(t,r,n),ce:(e,t)=>new CustomEvent(e,t)},Is=!1,Es=[],xs=[],Ts=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(e){ks(e)}e.length=0},Cs=()=>{Ts(Es),Ts(xs),(Is=Es.length>0)&&As.raf(Cs)},Ns=e=>Promise.resolve(undefined).then(e),Ls=(ts=xs,e=>{ts.push(e),Is||(Is=!0,4&As.$flags$?Ns(Cs):As.raf(Cs))});const Bs="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},Fs="object"==typeof Bs&&Bs&&Bs.Object===Object&&Bs;var Us="object"==typeof self&&self&&self.Object===Object&&self;const Ds=Fs||Us||Function("return this")(),zs=Ds.Symbol;var Rs=Object.prototype,Hs=Rs.hasOwnProperty,qs=Rs.toString,Vs=zs?zs.toStringTag:void 0,Gs=Object.prototype.toString,Ws="[object Null]",Js="[object Undefined]",Ks=zs?zs.toStringTag:void 0;function Ys(e){return null==e?void 0===e?Js:Ws:Ks&&Ks in Object(e)?function(e){var t=Hs.call(e,Vs),r=e[Vs];try{e[Vs]=void 0;var n=!0}catch(e){}var o=qs.call(e);return n&&(t?e[Vs]=r:delete e[Vs]),o}(e):function(e){return Gs.call(e)}(e)}function Qs(e){return null!=e&&"object"==typeof e}const Zs=Array.isArray;function Xs(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function el(e){return e}var tl="[object AsyncFunction]",rl="[object Function]",nl="[object GeneratorFunction]",ol="[object Proxy]";function il(e){if(!Xs(e))return!1;var t=Ys(e);return t==rl||t==nl||t==tl||t==ol}const al=Ds["__core-js_shared__"];var sl=function(){var e=/[^.]+$/.exec(al&&al.keys&&al.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ll=Function.prototype.toString;function cl(e){if(null!=e){try{return ll.call(e)}catch(e){}try{return e+""}catch(e){}}return""}var ul=/^\[object .+?Constructor\]$/,fl=Function.prototype,hl=Object.prototype,dl=fl.toString,pl=hl.hasOwnProperty,gl=RegExp("^"+dl.call(pl).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function yl(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Xs(e)||function(e){return!!sl&&sl in e}(e))&&(il(e)?gl:ul).test(cl(e))}(r)?r:void 0}const ml=yl(Ds,"WeakMap");function vl(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var bl=Date.now;function wl(e){return function(){return e}}var $l=function(){try{var e=yl(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();const jl=$l;var _l=jl?function(e,t){return jl(e,"toString",{configurable:!0,enumerable:!1,value:wl(t),writable:!0})}:el,Ol=function(e){var t=0,r=0;return function(){var n=bl(),o=16-(n-r);if(r=n,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(_l);const kl=Ol;var Sl=9007199254740991,Ml=/^(?:0|[1-9]\d*)$/;function Pl(e,t){var r=typeof e;return!!(t=null==t?Sl:t)&&("number"==r||"symbol"!=r&&Ml.test(e))&&e>-1&&e%1==0&&e<t}function Al(e,t,r){"__proto__"==t&&jl?jl(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Il(e,t){return e===t||e!=e&&t!=t}var El=Object.prototype.hasOwnProperty;function xl(e,t,r){var n=e[t];El.call(e,t)&&Il(n,r)&&(void 0!==r||t in e)||Al(e,t,r)}var Tl=Math.max;function Cl(e,t){return kl(function(e,t,r){return t=Tl(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,i=Tl(n.length-t,0),a=Array(i);++o<i;)a[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=r(a),vl(e,this,s)}}(e,t,el),e+"")}var Nl=9007199254740991;function Ll(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Nl}function Bl(e){return null!=e&&Ll(e.length)&&!il(e)}var Fl=Object.prototype;function Ul(e){return Qs(e)&&"[object Arguments]"==Ys(e)}var Dl=Object.prototype,zl=Dl.hasOwnProperty,Rl=Dl.propertyIsEnumerable,Hl=Ul(function(){return arguments}())?Ul:function(e){return Qs(e)&&zl.call(e,"callee")&&!Rl.call(e,"callee")};const ql=Hl;var Vl="object"==typeof t&&t&&!t.nodeType&&t,Gl=Vl&&"object"==typeof module&&module&&!module.nodeType&&module,Wl=Gl&&Gl.exports===Vl?Ds.Buffer:void 0;const Jl=(Wl?Wl.isBuffer:void 0)||function(){return!1};var Kl={};Kl["[object Float32Array]"]=Kl["[object Float64Array]"]=Kl["[object Int8Array]"]=Kl["[object Int16Array]"]=Kl["[object Int32Array]"]=Kl["[object Uint8Array]"]=Kl["[object Uint8ClampedArray]"]=Kl["[object Uint16Array]"]=Kl["[object Uint32Array]"]=!0,Kl["[object Arguments]"]=Kl["[object Array]"]=Kl["[object ArrayBuffer]"]=Kl["[object Boolean]"]=Kl["[object DataView]"]=Kl["[object Date]"]=Kl["[object Error]"]=Kl["[object Function]"]=Kl["[object Map]"]=Kl["[object Number]"]=Kl["[object Object]"]=Kl["[object RegExp]"]=Kl["[object Set]"]=Kl["[object String]"]=Kl["[object WeakMap]"]=!1;var Yl="object"==typeof t&&t&&!t.nodeType&&t,Ql=Yl&&"object"==typeof module&&module&&!module.nodeType&&module,Zl=Ql&&Ql.exports===Yl&&Fs.process,Xl=function(){try{return Ql&&Ql.require&&Ql.require("util").types||Zl&&Zl.binding&&Zl.binding("util")}catch(e){}}(),ec=Xl&&Xl.isTypedArray,tc=ec?function(e){return function(t){return e(t)}}(ec):function(e){return Qs(e)&&Ll(e.length)&&!!Kl[Ys(e)]};const rc=tc;var nc=Object.prototype.hasOwnProperty;var oc,ic=Object.prototype.hasOwnProperty;oc=function(e,t,r,n){!function(e,t,r,n){var o=!r;r||(r={});for(var i=-1,a=t.length;++i<a;){var s=t[i],l=n?n(r[s],e[s],s,r,e):void 0;void 0===l&&(l=e[s]),o?Al(r,s,l):xl(r,s,l)}}(t,function(e){return Bl(e)?function(e,t){var r=Zs(e),n=!r&&ql(e),o=!r&&!n&&Jl(e),i=!r&&!n&&!o&&rc(e),a=r||n||o||i,s=a?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],l=s.length;for(var c in e)!t&&!nc.call(e,c)||a&&("length"==c||o&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Pl(c,l))||s.push(c);return s}(e,!0):function(e){if(!Xs(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Fl)}(e),r=[];for(var n in e)("constructor"!=n||!t&&ic.call(e,n))&&r.push(n);return r}(e)}(t),e,n)},Cl((function(e,t){var r=-1,n=t.length,o=n>1?t[n-1]:void 0,i=n>2?t[2]:void 0;for(o=oc.length>3&&"function"==typeof o?(n--,o):void 0,i&&function(e,t,r){if(!Xs(r))return!1;var n=typeof t;return!!("number"==n?Bl(r)&&Pl(t,r.length):"string"==n&&t in r)&&Il(r[t],e)}(t[0],t[1],i)&&(o=n<3?void 0:o,n=1),e=Object(e);++r<n;){var a=t[r];a&&oc(e,a,0,o)}return e}));const ac=yl(Object,"create");var sc=Object.prototype.hasOwnProperty,lc=Object.prototype.hasOwnProperty;function cc(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function uc(e,t){for(var r=e.length;r--;)if(Il(e[r][0],t))return r;return-1}cc.prototype.clear=function(){this.__data__=ac?ac(null):{},this.size=0},cc.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},cc.prototype.get=function(e){var t=this.__data__;if(ac){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return sc.call(t,e)?t[e]:void 0},cc.prototype.has=function(e){var t=this.__data__;return ac?void 0!==t[e]:lc.call(t,e)},cc.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ac&&void 0===t?"__lodash_hash_undefined__":t,this};var fc=Array.prototype.splice;function hc(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}hc.prototype.clear=function(){this.__data__=[],this.size=0},hc.prototype.delete=function(e){var t=this.__data__,r=uc(t,e);return!(r<0||(r==t.length-1?t.pop():fc.call(t,r,1),--this.size,0))},hc.prototype.get=function(e){var t=this.__data__,r=uc(t,e);return r<0?void 0:t[r][1]},hc.prototype.has=function(e){return uc(this.__data__,e)>-1},hc.prototype.set=function(e,t){var r=this.__data__,n=uc(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};const dc=yl(Ds,"Map");function pc(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function gc(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}gc.prototype.clear=function(){this.size=0,this.__data__={hash:new cc,map:new(dc||hc),string:new cc}},gc.prototype.delete=function(e){var t=pc(this,e).delete(e);return this.size-=t?1:0,t},gc.prototype.get=function(e){return pc(this,e).get(e)},gc.prototype.has=function(e){return pc(this,e).has(e)},gc.prototype.set=function(e,t){var r=pc(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};var yc=function(e,t){return function(r){return e(t(r))}}(Object.getPrototypeOf,Object);const mc=yc;var vc=Function.prototype,bc=Object.prototype,wc=vc.toString,$c=bc.hasOwnProperty,jc=wc.call(Object);Cl((function(e,t){try{return vl(e,void 0,t)}catch(e){return function(e){if(!Qs(e))return!1;var t=Ys(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!function(e){if(!Qs(e)||"[object Object]"!=Ys(e))return!1;var t=mc(e);if(null===t)return!0;var r=$c.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&wc.call(r)==jc}(e)}(e)?e:new Error(e)}})),"object"==typeof t&&t&&!t.nodeType&&t&&"object"==typeof module&&module&&!module.nodeType&&module;const _c=yl(Ds,"DataView"),Oc=yl(Ds,"Promise"),kc=yl(Ds,"Set");var Sc="[object Map]",Mc="[object Promise]",Pc="[object Set]",Ac="[object WeakMap]",Ic="[object DataView]",Ec=cl(_c),xc=cl(dc),Tc=cl(Oc),Cc=cl(kc),Nc=cl(ml),Lc=Ys;(_c&&Lc(new _c(new ArrayBuffer(1)))!=Ic||dc&&Lc(new dc)!=Sc||Oc&&Lc(Oc.resolve())!=Mc||kc&&Lc(new kc)!=Pc||ml&&Lc(new ml)!=Ac)&&(Lc=function(e){var t=Ys(e),r="[object Object]"==t?e.constructor:void 0,n=r?cl(r):"";if(n)switch(n){case Ec:return Ic;case xc:return Sc;case Tc:return Mc;case Cc:return Pc;case Nc:return Ac}return t});const Bc=e=>!("isConnected"in e)||e.isConnected,Fc=(()=>{let e;return(...t)=>{e&&clearTimeout(e),e=setTimeout((()=>{e=0,(e=>{for(let t of e.keys())e.set(t,e.get(t).filter(Bc))})(...t)}),2e3)}})(),Uc=e=>"function"==typeof e?e():e;var Dc={exports:{}};function zc(e,t,r,n){var o=function(e){return null==e||"number"==typeof e||"boolean"==typeof e}(n)?n:r(n),i=t.get(o);return void 0===i&&(i=e.call(this,n),t.set(o,i)),i}function Rc(e,t,r){var n=Array.prototype.slice.call(arguments,3),o=r(n),i=t.get(o);return void 0===i&&(i=e.apply(this,n),t.set(o,i)),i}function Hc(e,t,r,n,o){return r.bind(t,e,n,o)}function qc(e,t){return Hc(e,this,1===e.length?zc:Rc,t.cache.create(),t.serializer)}function Vc(){return JSON.stringify(arguments)}function Gc(){this.cache=Object.create(null)}Gc.prototype.has=function(e){return e in this.cache},Gc.prototype.get=function(e){return this.cache[e]},Gc.prototype.set=function(e,t){this.cache[e]=t};var Wc={create:function(){return new Gc}};Dc.exports=function(e,t){var r=t&&t.cache?t.cache:Wc,n=t&&t.serializer?t.serializer:Vc;return(t&&t.strategy?t.strategy:qc)(e,{cache:r,serializer:n})},Dc.exports.strategies={variadic:function(e,t){return Hc(e,this,Rc,t.cache.create(),t.serializer)},monadic:function(e,t){return Hc(e,this,zc,t.cache.create(),t.serializer)}};const Jc=Dc.exports;Jc((async e=>{const t=new re.default({url:e});t.authMode="immediate";try{await t.load()}catch(e){console.error(e)}return t}));const Kc=Jc((async e=>{const{restUrl:t}=e,r=`${t}/portals/helpmap`;let n;try{const e=await async function(e){return oe.default(e,{query:{f:"json"},responseType:"json",method:"auto"})}(r);n=await(e.data?.helpMap)??void 0}catch(e){n=void 0}return console.log(n),n}),{serializer:e=>`${e[0]}-${e[1]?.url}`}),Yc=(()=>{const e=((e,t=(e,t)=>e!==t)=>{const r=Uc(e);let n=new Map(Object.entries(null!=r?r:{}));const o={dispose:[],get:[],set:[],reset:[]},i=()=>{var t;n=new Map(Object.entries(null!==(t=Uc(e))&&void 0!==t?t:{})),o.reset.forEach((e=>e()))},a=e=>(o.get.forEach((t=>t(e))),n.get(e)),s=(e,r)=>{const i=n.get(e);t(r,i,e)&&(n.set(e,r),o.set.forEach((t=>t(e,r,i))))},l="undefined"==typeof Proxy?{}:new Proxy(r,{get:(e,t)=>a(t),ownKeys:e=>Array.from(n.keys()),getOwnPropertyDescriptor:()=>({enumerable:!0,configurable:!0}),has:(e,t)=>n.has(t),set:(e,t,r)=>(s(t,r),!0)}),c=(e,t)=>(o[e].push(t),()=>{((e,t)=>{const r=e.indexOf(t);r>=0&&(e[r]=e[e.length-1],e.length--)})(o[e],t)});return{state:l,get:a,set:s,on:c,onChange:(t,r)=>{const n=c("set",((e,n)=>{e===t&&r(n)})),o=c("reset",(()=>r(Uc(e)[t])));return()=>{n(),o()}},use:(...e)=>{const t=e.reduce(((e,t)=>(t.set&&e.push(c("set",t.set)),t.get&&e.push(c("get",t.get)),t.reset&&e.push(c("reset",t.reset)),t.dispose&&e.push(c("dispose",t.dispose)),e)),[]);return()=>t.forEach((e=>e()))},dispose:()=>{o.dispose.forEach((e=>e())),i()},reset:i,forceUpdate:e=>{const t=n.get(e);o.set.forEach((r=>r(e,t,t)))}}})({portal:void 0,assetPath:void 0,coreStrings:void 0,selectedFileName:void 0,isRightToLeft:!1,rftId:void 0,canUpdateItem:!1,activeRFxTemplates:[],portalHelpMap:void 0,currentViewport:void 0},void 0);return e.use((()=>{const e=new Map;return{dispose:()=>e.clear(),get:t=>{gs&&((e,t,r)=>{const n=e.get(t);n?n.includes(r)||n.push(r):e.set(t,[r])})(e,t,gs)},set:t=>{const r=e.get(t);r&&e.set(t,r.filter(vs)),Fc(e)},reset:()=>{e.forEach((e=>e.forEach(vs))),Fc(e)}}})()),e})(),Qc=Yc.state;Yc.onChange("portal",(async e=>{void 0!==e&&e.isPortal&&(Qc.portalHelpMap=await Kc(e))}));const Zc={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function Xc(e,t,r){r<0&&++r,r>1&&--r;const n=6*r;return n<1?e+(t-e)*n:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function eu(e,t,r){return[e,t,r]}function tu(){return eu(1,1,1)}function ru(){return eu(1,0,0)}function nu(){return eu(0,1,0)}function ou(){return eu(0,0,1)}const iu=tu(),au=ru(),su=nu(),lu=ou();Object.freeze(Object.defineProperty({__proto__:null,ONES:iu,UNIT_X:au,UNIT_Y:su,UNIT_Z:lu,ZEROS:[0,0,0],clone:function(e){return[e[0],e[1],e[2]]},create:function(){return[0,0,0]},createView:function(e,t){return new Float64Array(e,t,3)},fromArray:function(e){const t=[0,0,0],r=Math.min(3,e.length);for(let n=0;n<r;++n)t[n]=e[n];return t},fromValues:eu,ones:tu,unitX:ru,unitY:nu,unitZ:ou,zeros:function(){return[0,0,0]}},Symbol.toStringTag,{value:"Module"}));let cu=1e-6;function uu(){return cu}const fu=Math.random,hu=Math.PI/180,du=180/Math.PI;function pu(e){const t=e[0],r=e[1],n=e[2];return Math.sqrt(t*t+r*r+n*n)}function gu(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function yu(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function mu(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function vu(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function bu(e,t){const r=t[0]-e[0],n=t[1]-e[1],o=t[2]-e[2];return Math.sqrt(r*r+n*n+o*o)}function wu(e,t){const r=t[0]-e[0],n=t[1]-e[1],o=t[2]-e[2];return r*r+n*n+o*o}function $u(e){const t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function ju(e,t){const r=t[0],n=t[1],o=t[2];let i=r*r+n*n+o*o;return i>0&&(i=1/Math.sqrt(i),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i),e}function _u(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}Object.freeze(Object.defineProperty({__proto__:null,RANDOM:fu,equals:function(e,t){return Math.abs(e-t)<=cu*Math.max(1,Math.abs(e),Math.abs(t))},getEpsilon:uu,setEpsilon:function(e){cu=e},toDegree:function(e){return e*du},toRadian:function(e){return e*hu}},Symbol.toStringTag,{value:"Module"}));const Ou=[0,0,0],ku=[0,0,0],Su=yu,Mu=mu,Pu=vu,Au=bu,Iu=wu,Eu=pu,xu=$u;function Tu(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function Cu(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function Nu(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function Lu(e,t){const r=t[0]-e[0],n=t[1]-e[1],o=t[2]-e[2],i=t[3]-e[3];return Math.sqrt(r*r+n*n+o*o+i*i)}function Bu(e,t){const r=t[0]-e[0],n=t[1]-e[1],o=t[2]-e[2],i=t[3]-e[3];return r*r+n*n+o*o+i*i}function Fu(e){const t=e[0],r=e[1],n=e[2],o=e[3];return Math.sqrt(t*t+r*r+n*n+o*o)}function Uu(e){const t=e[0],r=e[1],n=e[2],o=e[3];return t*t+r*r+n*n+o*o}Object.freeze(Object.defineProperty({__proto__:null,abs:function(e,t){return e[0]=Math.abs(t[0]),e[1]=Math.abs(t[1]),e[2]=Math.abs(t[2]),e},add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e},angle:function(e,t){gu(Ou,e),gu(ku,t),ju(Ou,Ou),ju(ku,ku);const r=_u(Ou,ku);return r>1?0:r<-1?Math.PI:Math.acos(r)},bezier:function(e,t,r,n,o,i){const a=1-i,s=a*a,l=i*i,c=s*a,u=3*i*s,f=3*l*a,h=l*i;return e[0]=t[0]*c+r[0]*u+n[0]*f+o[0]*h,e[1]=t[1]*c+r[1]*u+n[1]*f+o[1]*h,e[2]=t[2]*c+r[2]*u+n[2]*f+o[2]*h,e},ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e},copy:gu,cross:function(e,t,r){const n=t[0],o=t[1],i=t[2],a=r[0],s=r[1],l=r[2];return e[0]=o*l-i*s,e[1]=i*a-n*l,e[2]=n*s-o*a,e},direction:function(e,t,r){const n=r[0]-t[0],o=r[1]-t[1],i=r[2]-t[2];let a=n*n+o*o+i*i;return a>0?(a=1/Math.sqrt(a),e[0]=n*a,e[1]=o*a,e[2]=i*a,e):(e[0]=0,e[1]=0,e[2]=0,e)},dist:Au,distance:bu,div:Pu,divide:vu,dot:_u,equals:function(e,t){if(e===t)return!0;const r=e[0],n=e[1],o=e[2],i=t[0],a=t[1],s=t[2],l=uu();return Math.abs(r-i)<=l*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-a)<=l*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(o-s)<=l*Math.max(1,Math.abs(o),Math.abs(s))},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e},hermite:function(e,t,r,n,o,i){const a=i*i,s=a*(2*i-3)+1,l=a*(i-2)+i,c=a*(i-1),u=a*(3-2*i);return e[0]=t[0]*s+r[0]*l+n[0]*c+o[0]*u,e[1]=t[1]*s+r[1]*l+n[1]*c+o[1]*u,e[2]=t[2]*s+r[2]*l+n[2]*c+o[2]*u,e},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e},len:Eu,length:pu,lerp:function(e,t,r,n){const o=t[0],i=t[1],a=t[2];return e[0]=o+n*(r[0]-o),e[1]=i+n*(r[1]-i),e[2]=a+n*(r[2]-a),e},max:function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e},min:function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e},mul:Mu,multiply:mu,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e},normalize:ju,random:function(e,t){t=t||1;const r=fu,n=2*r()*Math.PI,o=2*r()-1,i=Math.sqrt(1-o*o)*t;return e[0]=Math.cos(n)*i,e[1]=Math.sin(n)*i,e[2]=o*t,e},rotateX:function(e,t,r,n){const o=[],i=[];return o[0]=t[0]-r[0],o[1]=t[1]-r[1],o[2]=t[2]-r[2],i[0]=o[0],i[1]=o[1]*Math.cos(n)-o[2]*Math.sin(n),i[2]=o[1]*Math.sin(n)+o[2]*Math.cos(n),e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e},rotateY:function(e,t,r,n){const o=[],i=[];return o[0]=t[0]-r[0],o[1]=t[1]-r[1],o[2]=t[2]-r[2],i[0]=o[2]*Math.sin(n)+o[0]*Math.cos(n),i[1]=o[1],i[2]=o[2]*Math.cos(n)-o[0]*Math.sin(n),e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e},rotateZ:function(e,t,r,n){const o=[],i=[];return o[0]=t[0]-r[0],o[1]=t[1]-r[1],o[2]=t[2]-r[2],i[0]=o[0]*Math.cos(n)-o[1]*Math.sin(n),i[1]=o[0]*Math.sin(n)+o[1]*Math.cos(n),i[2]=o[2],e[0]=i[0]+r[0],e[1]=i[1]+r[1],e[2]=i[2]+r[2],e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e},scale:function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e},scaleAndAdd:function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e},set:function(e,t,r,n){return e[0]=t,e[1]=r,e[2]=n,e},sign:function(e,t){return e[0]=Math.sign(t[0]),e[1]=Math.sign(t[1]),e[2]=Math.sign(t[2]),e},sqrDist:Iu,sqrLen:xu,squaredDistance:wu,squaredLength:$u,str:function(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"},sub:Su,subtract:yu,transformMat3:function(e,t,r){const n=t[0],o=t[1],i=t[2];return e[0]=n*r[0]+o*r[3]+i*r[6],e[1]=n*r[1]+o*r[4]+i*r[7],e[2]=n*r[2]+o*r[5]+i*r[8],e},transformMat4:function(e,t,r){const n=t[0],o=t[1],i=t[2];return e[0]=r[0]*n+r[4]*o+r[8]*i+r[12],e[1]=r[1]*n+r[5]*o+r[9]*i+r[13],e[2]=r[2]*n+r[6]*o+r[10]*i+r[14],e},transformQuat:function(e,t,r){const n=r[0],o=r[1],i=r[2],a=r[3],s=t[0],l=t[1],c=t[2];let u=o*c-i*l,f=i*s-n*c,h=n*l-o*s,d=o*h-i*f,p=i*u-n*h,g=n*f-o*u;const y=2*a;return u*=y,f*=y,h*=y,d*=2,p*=2,g*=2,e[0]=s+u+d,e[1]=l+f+p,e[2]=c+h+g,e}},Symbol.toStringTag,{value:"Module"}));const Du=Tu,zu=Cu,Ru=Nu,Hu=Lu,qu=Bu,Vu=Fu,Gu=Uu;Object.freeze(Object.defineProperty({__proto__:null,add:function(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e},ceil:function(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e},copy:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},dist:Hu,distance:Lu,div:Ru,divide:Nu,dot:function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]},equals:function(e,t){const r=e[0],n=e[1],o=e[2],i=e[3],a=t[0],s=t[1],l=t[2],c=t[3],u=uu();return Math.abs(r-a)<=u*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-s)<=u*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-l)<=u*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(i-c)<=u*Math.max(1,Math.abs(i),Math.abs(c))},exactEquals:function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},floor:function(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e},inverse:function(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e},len:Vu,length:Fu,lerp:function(e,t,r,n){const o=t[0],i=t[1],a=t[2],s=t[3];return e[0]=o+n*(r[0]-o),e[1]=i+n*(r[1]-i),e[2]=a+n*(r[2]-a),e[3]=s+n*(r[3]-s),e},max:function(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e},min:function(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e},mul:zu,multiply:Cu,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e},normalize:function(e,t){const r=t[0],n=t[1],o=t[2],i=t[3];let a=r*r+n*n+o*o+i*i;return a>0&&(a=1/Math.sqrt(a),e[0]=r*a,e[1]=n*a,e[2]=o*a,e[3]=i*a),e},random:function(e,t){const r=fu;let n,o,i,a,s,l;t=t||1;do{n=2*r()-1,o=2*r()-1,s=n*n+o*o}while(s>=1);do{i=2*r()-1,a=2*r()-1,l=i*i+a*a}while(l>=1);const c=Math.sqrt((1-s)/l);return e[0]=t*n,e[1]=t*o,e[2]=t*i*c,e[3]=t*a*c,e},round:function(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e},scale:function(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e},scaleAndAdd:function(e,t,r,n){return e[0]=t[0]+r[0]*n,e[1]=t[1]+r[1]*n,e[2]=t[2]+r[2]*n,e[3]=t[3]+r[3]*n,e},set:function(e,t,r,n,o){return e[0]=t,e[1]=r,e[2]=n,e[3]=o,e},sqrDist:qu,sqrLen:Gu,squaredDistance:Bu,squaredLength:Uu,str:function(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"},sub:Du,subtract:Tu,transformMat4:function(e,t,r){const n=t[0],o=t[1],i=t[2],a=t[3];return e[0]=r[0]*n+r[4]*o+r[8]*i+r[12]*a,e[1]=r[1]*n+r[5]*o+r[9]*i+r[13]*a,e[2]=r[2]*n+r[6]*o+r[10]*i+r[14]*a,e[3]=r[3]*n+r[7]*o+r[11]*i+r[15]*a,e},transformQuat:function(e,t,r){const n=t[0],o=t[1],i=t[2],a=r[0],s=r[1],l=r[2],c=r[3],u=c*n+s*i-l*o,f=c*o+l*n-a*i,h=c*i+a*o-s*n,d=-a*n-s*o-l*i;return e[0]=u*c+d*-a+f*-l-h*-s,e[1]=f*c+d*-s+h*-a-u*-l,e[2]=h*c+d*-l+u*-s-f*-a,e[3]=t[3],e}},Symbol.toStringTag,{value:"Module"}));const Wu=new Float32Array(1),Ju=new DataView(new ArrayBuffer(Float64Array.BYTES_PER_ELEMENT)),Ku=BigInt("1000000");let Yu;function Qu(e){return"function"==typeof Yu[e]?Yu[e]=Yu[e](globalThis):Yu[e]}function Zu(e){if(!e||"object"!=typeof e||"function"==typeof e)return e;const t=function(e){if(function(e){return"Int8Array"===e?.constructor?.name}(e)||function(e){return"Uint8Array"===e?.constructor?.name}(e)||function(e){return"Uint8ClampedArray"===e?.constructor?.name}(e)||function(e){return"Int16Array"===e?.constructor?.name}(e)||function(e){return"Uint16Array"===e?.constructor?.name}(e)||function(e){return"Int32Array"===e?.constructor?.name}(e)||function(e){return"Uint32Array"===e?.constructor?.name}(e)||function(e){return"Float32Array"===e?.constructor?.name}(e)||function(e){return"Float64Array"===e?.constructor?.name}(e))return e.slice();if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const t=new Map;for(const[r,n]of e)t.set(r,Zu(n));return t}if(e instanceof Set){const t=new Set;for(const r of e)t.add(Zu(r));return t}return null}(e);if(null!=t)return t;if(function(e){return"function"==typeof e.clone}(e))return e.clone();if(function(e){return"function"==typeof e.map&&"function"==typeof e.forEach}(e))return e.map(Zu);if(function(e){return"function"==typeof e.notifyChange&&"function"==typeof e.watch}(e))return e.clone();const r={};for(const t of Object.getOwnPropertyNames(e))r[t]=Zu(e[t]);return r}function Xu(e,t,r){return t?Object.keys(t).reduce(((e,n)=>{let o=e[n],i=t[n];return o===i?e:void 0===o?(e[n]=Zu(i),e):(Array.isArray(i)||Array.isArray(e)?(o=o?Array.isArray(o)?e[n]=o.concat():e[n]=[o]:e[n]=[],i&&(Array.isArray(i)||(i=[i]),r?i.forEach((e=>{o.includes(e)||o.push(e)})):e[n]=i.concat())):i&&"object"==typeof i?e[n]=Xu(o,i,r):e.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(e[n]=i),e)}),e||{}):e}!function(e){const t=function(e){return Ju.setFloat64(0,e),Ju.getBigInt64(0)}(e=Math.abs(e)),r=function(e){return Ju.setBigInt64(0,e),Ju.getFloat64(0)}(t<=Ku?Ku:t-Ku);Math.abs(e-r)}(1),Wu[0]=34028234663852886e22,Wu[0],Yu=globalThis.dojoConfig?.has||globalThis.esriConfig?.has?{...globalThis.dojoConfig?.has,...globalThis.esriConfig?.has}:{},Qu.add=(e,t,r,n)=>((n||void 0===Yu[e])&&(Yu[e]=t),r&&Qu(e)),Qu.cache=Yu,Qu.add("esri-deprecation-warnings",!0),Qu.add("esri-force-fullscreen-debug",!1),(()=>{Qu.add("host-webworker",void 0!==globalThis.WorkerGlobalScope&&self instanceof globalThis.WorkerGlobalScope);const e="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location===location&&window.document===document;if(Qu.add("host-browser",e),Qu.add("host-node","object"==typeof globalThis.process&&globalThis.process.versions?.node&&globalThis.process.versions.v8),Qu.add("dom",e),Qu("host-browser")){const e=navigator,t=e.userAgent,r=e.appVersion,n=parseFloat(r);if(Qu.add("wp",parseFloat(t.split("Windows Phone")[1])||void 0),Qu.add("msapp",parseFloat(t.split("MSAppHost/")[1])||void 0),Qu.add("khtml",r.includes("Konqueror")?n:void 0),Qu.add("edge",parseFloat(t.split("Edge/")[1])||void 0),Qu.add("opr",parseFloat(t.split("OPR/")[1])||void 0),Qu.add("webkit",!Qu("wp")&&!Qu("edge")&&parseFloat(t.split("WebKit/")[1])||void 0),Qu.add("chrome",!Qu("edge")&&!Qu("opr")&&parseFloat(t.split("Chrome/")[1])||void 0),Qu.add("android",!Qu("wp")&&parseFloat(t.split("Android ")[1])||void 0),Qu.add("safari",!r.includes("Safari")||Qu("wp")||Qu("chrome")||Qu("android")||Qu("edge")||Qu("opr")?void 0:parseFloat(r.split("Version/")[1])),Qu.add("mac",r.includes("Macintosh")),!Qu("wp")&&/(iPhone|iPod|iPad)/.test(t)){const e=RegExp.$1.replace(/P/,"p"),r=/OS ([\d_]+)/.test(t)?RegExp.$1:"1",n=parseFloat(r.replace(/_/,".").replaceAll("_",""));Qu.add(e,n),Qu.add("ios",n)}Qu("webkit")||(!t.includes("Gecko")||Qu("wp")||Qu("khtml")||Qu("edge")||Qu.add("mozilla",n),Qu("mozilla")&&Qu.add("ff",parseFloat(t.split("Firefox/")[1]||t.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),r=/iPhone/i.test(e);t&&Qu.add("esri-mobile",t),r&&Qu.add("esri-iPhone",r),Qu.add("esri-geolocation",!!navigator.geolocation)}Qu.add("esri-wasm","WebAssembly"in globalThis),Qu.add("esri-shared-array-buffer",(()=>{const e="SharedArrayBuffer"in globalThis,t=!1===globalThis.crossOriginIsolated;return e&&!t})),Qu.add("wasm-simd",(()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])))),Qu.add("esri-atomics","Atomics"in globalThis),Qu.add("esri-workers","Worker"in globalThis),Qu.add("web-feat:cache","caches"in globalThis),Qu.add("esri-workers-arraybuffer-transfer",!Qu("safari")||Number(Qu("safari"))>=12),Qu.add("workers-pool-size",8),Qu.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),Qu.add("featurelayer-simplify-payload-size-factors",[1,1,4]),Qu.add("featurelayer-animation-enabled",!0),Qu.add("featurelayer-snapshot-enabled",!0),Qu.add("featurelayer-snapshot-point-min-threshold",8e4),Qu.add("featurelayer-snapshot-point-max-threshold",4e5),Qu.add("featurelayer-snapshot-point-coverage",.1),Qu.add("featurelayer-advanced-symbols",!1),Qu.add("featurelayer-pbf",!0),Qu.add("featurelayer-pbf-statistics",!1),Qu.add("feature-layers-workers",!0),Qu.add("feature-polyline-generalization-factor",1),Qu.add("mapview-transitions-duration",200),Qu.add("mapview-srswitch-adjust-rotation-scale-threshold",24e6),Qu.add("mapserver-pbf-version-support",10.81),Qu.add("mapservice-popup-identify-max-tolerance",20),Qu.add("heatmap-allow-raster-fallback",!1),Qu.add("heatmap-force-raster",!1),Qu("host-webworker")||Qu("host-browser")&&(Qu.add("esri-csp-restrictions",(()=>{try{new Function}catch{return!0}return!1})),Qu.add("esri-image-decode",(()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then((()=>{Qu.add("esri-image-decode",!0,!0,!0)})).catch((()=>{Qu.add("esri-image-decode",!1,!0,!0)}))}return!1})),Qu.add("esri-url-encodes-apostrophe",(()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")})))})();const ef={analysisTheme:{accentColor:[255,127,0],textColor:"white"},apiKey:void 0,applicationName:"",applicationUrl:globalThis.location?.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",userPrivilegesApplied:!1,portalUrl:"https://www.arcgis.com",routeServiceUrl:"https://route-api.arcgis.com/arcgis/rest/services/World/Route/NAServer/Route_World",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{crossOriginNoCorsDomains:null,httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,priority:"high",proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(function(e,t,r=!1){Xu(e,t,r)}(ef,globalThis.esriConfig,!0),delete ef.has),!ef.assetsPath){{const e="4.27.0";ef.assetsPath=`https://cdn.jsdelivr.net/npm/@arcgis/core@${e}-next.20230526/assets`}ef.defaultAssetsPath=ef.assetsPath}const tf={info:0,warn:1,error:2,none:3};class rf{constructor(e){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},null!=e.level&&(this.level=e.level),null!=e.writer&&(this.writer=e.writer),this._module=e.module,rf._loggers.set(this.module,this);const t=this.module.lastIndexOf(".");-1!==t&&(this._parent=rf.getLogger(this.module.slice(0,t)))}get module(){return this._module}get parent(){return this._parent}error(...e){this._log("error","always",...e)}warn(...e){this._log("warn","always",...e)}info(...e){this._log("info","always",...e)}errorOnce(...e){this._log("error","once",...e)}warnOnce(...e){this._log("warn","once",...e)}infoOnce(...e){this._log("info","once",...e)}errorOncePerTick(...e){this._log("error","oncePerTick",...e)}warnOncePerTick(...e){this._log("warn","oncePerTick",...e)}infoOncePerTick(...e){this._log("info","oncePerTick",...e)}get test(){const e=this;return{loggedMessages:e._loggedMessages,clearLoggedWarnings:()=>e._loggedMessages.warn.clear()}}static get test(){return{resetLoggers(e=new Map){const t=rf._loggers;return rf._loggers=e,t},set throttlingDisabled(e){rf._throttlingDisabled=e}}}static getLogger(e){return e="string"!=typeof e?e.declaredClass:e,rf._loggers.get(e)||new rf({module:e})}_log(e,t,...r){if(this._matchLevel(e)){if("always"!==t&&!rf._throttlingDisabled){const n=this._argsToKey(r),o=this._loggedMessages[e].get(n);if("once"===t&&null!=o||"oncePerTick"===t&&o&&o>=rf._tickCounter)return;this._loggedMessages[e].set(n,rf._tickCounter),rf._scheduleTickCounterIncrement()}for(const t of ef.log.interceptors)if(t(e,this.module,...r))return;this._inheritedWriter()(e,this.module,...r)}}_parentWithMember(e,t){let r=this;for(;null!=r;){const t=r[e];if(null!=t)return t;r=r.parent}return t}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(e,t,...r){console[e](`[${t}]`,...r)}_matchLevel(e){const t=ef.log.level||"warn";return tf[this._parentWithMember("level",t)]<=tf[e]}_argsToKey(...e){return function(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}(JSON.stringify(e,((e,t)=>"object"!=typeof t||Array.isArray(t)?t:"[Object]")))}static _scheduleTickCounterIncrement(){rf._tickCounterScheduled||(rf._tickCounterScheduled=!0,Promise.resolve().then((()=>{rf._tickCounter++,rf._tickCounterScheduled=!1})))}}function nf(e){return function(e){return Math.min(Math.max(e,0),255)}(null==(t=e)?t:Math.round(parseFloat(t)));var t}function of(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e}rf._loggers=new Map,rf._tickCounter=0,rf._tickCounterScheduled=!1,rf._throttlingDisabled=!1,rf.getLogger("esri.core.accessorSupport.ensureTypes");class af{static blendColors(e,t,r,n=new af){return n.r=Math.round(e.r+(t.r-e.r)*r),n.g=Math.round(e.g+(t.g-e.g)*r),n.b=Math.round(e.b+(t.b-e.b)*r),n.a=e.a+(t.a-e.a)*r,n._sanitize()}static fromRgb(e,t){const r=e.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(r){const e=r[2].split(/\s*,\s*/),n=r[1];if("rgb"===n&&3===e.length||"rgba"===n&&4===e.length){const r=e[0];if("%"===r.charAt(r.length-1)){const r=e.map((e=>2.56*parseFloat(e)));return 4===e.length&&(r[3]=parseFloat(e[3])),af.fromArray(r,t)}return af.fromArray(e.map((e=>parseFloat(e))),t)}if("hsl"===n&&3===e.length||"hsla"===n&&4===e.length)return af.fromArray(function(e,t,r,n=1){const o=(e%360+360)%360/360,i=r<=.5?r*(t+1):r+t-r*t,a=2*r-i;return[Math.round(255*Xc(a,i,o+1/3)),Math.round(255*Xc(a,i,o)),Math.round(255*Xc(a,i,o-1/3)),n]}(parseFloat(e[0]),parseFloat(e[1])/100,parseFloat(e[2])/100,parseFloat(e[3])),t)}return null}static fromHex(e,t=new af){if(4!==e.length&&7!==e.length||"#"!==e[0])return null;const r=4===e.length?4:8,n=(1<<r)-1;let o=Number("0x"+e.substr(1));return isNaN(o)?null:(["b","g","r"].forEach((e=>{const i=o&n;o>>=r,t[e]=4===r?17*i:i})),t.a=1,t)}static fromArray(e,t=new af){return t._set(Number(e[0]),Number(e[1]),Number(e[2]),Number(e[3])),isNaN(t.a)&&(t.a=1),t._sanitize()}static fromString(e,t){const r=Zc[n=e]||Zc[n.toLowerCase()]?function(e){return Zc[e]??Zc[e.toLowerCase()]}(e):null;var n;return r&&af.fromArray(r,t)||af.fromRgb(e,t)||af.fromHex(e,t)}static fromJSON(e){return e&&new af([e[0],e[1],e[2],e[3]/255])}static toUnitRGB(e){return null!=e?[e.r/255,e.g/255,e.b/255]:null}static toUnitRGBA(e){return null!=e?[e.r/255,e.g/255,e.b/255,null!=e.a?e.a:1]:null}constructor(e){this.r=255,this.g=255,this.b=255,this.a=1,e&&this.setColor(e)}get isBright(){return.299*this.r+.587*this.g+.114*this.b>=127}setColor(e){return"string"==typeof e?af.fromString(e,this):Array.isArray(e)?af.fromArray(e,this):(this._set(e.r??0,e.g??0,e.b??0,e.a??1),e instanceof af||this._sanitize()),this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const e=this.r.toString(16),t=this.g.toString(16),r=this.b.toString(16);return`#${e.length<2?"0"+e:e}${t.length<2?"0"+t:t}${r.length<2?"0"+r:r}`}toCss(e=!1){const t=this.r+", "+this.g+", "+this.b;return e?`rgba(${t}, ${this.a})`:`rgb(${t})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(e=af.AlphaMode.ALWAYS){const t=nf(this.r),r=nf(this.g),n=nf(this.b);return e===af.AlphaMode.ALWAYS||1!==this.a?[t,r,n,nf(255*this.a)]:[t,r,n]}clone(){return new af(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}equals(e){return null!=e&&e.r===this.r&&e.g===this.g&&e.b===this.b&&e.a===this.a}_sanitize(){return this.r=Math.round(of(this.r,0,255)),this.g=Math.round(of(this.g,0,255)),this.b=Math.round(of(this.b,0,255)),this.a=of(this.a,0,1),this}_set(e,t,r,n){this.r=e,this.g=t,this.b=r,this.a=n}}af.prototype.declaredClass="esri.Color",function(e){var t;(t=e.AlphaMode||(e.AlphaMode={}))[t.ALWAYS=0]="ALWAYS",t[t.UNLESS_OPAQUE=1]="UNLESS_OPAQUE"}(af||(af={})),new class{constructor(e,t={ignoreUnknown:!1,useNumericKeys:!1}){this._jsonToAPI=e,this._options=t,this.apiValues=[],this.jsonValues=[],this._apiToJSON=this._invertMap(e),this.apiValues=this._getKeysSorted(this._apiToJSON),this.jsonValues=this._getKeysSorted(this._jsonToAPI),this.read=e=>this.fromJSON(e),this.write=(e,t,r)=>{const n=this.toJSON(e);void 0!==n&&function(e,t,r){const n=e.split("."),o=n.pop(),i=function(e,t,r){let n=r;for(const t of e){if(null==n)return;t in n||(n[t]={}),n=n[t]}return n}(n,0,r);i&&o&&(i[o]=t)}(r,n,t)},this.write.isJSONMapWriter=!0}toJSON(e){if(null==e)return null;if(this._apiToJSON.hasOwnProperty(e)){const t=this._apiToJSON[e];return this._options.useNumericKeys?+t:t}return this._options.ignoreUnknown?void 0:e}fromJSON(e){return null!=e&&this._jsonToAPI.hasOwnProperty(e)?this._jsonToAPI[e]:this._options.ignoreUnknown?void 0:e}_invertMap(e){const t={};for(const r in e)t[e[r]]=r;return t}_getKeysSorted(e){const t=[];for(const r in e)t.push(r);return t.sort(),t}}({Aspect:"aspect","Black to White":"black-to-white","Blue Bright":"blue-bright","Blue Light to Dark":"blue-light-to-dark","Blue-Green Bright":"blue-green-bright","Blue-Green Light to Dark":"blue-green-light-to-dark","Brown Light to Dark":"brown-light-to-dark","Brown to Blue Green Diverging, Bright":"brown-to-blue-green-diverging-right","Brown to Blue Green Diverging, Dark":"brown-to-blue-green-diverging-dark","Coefficient Bias":"coefficient-bias","Cold to Hot Diverging":"cold-to-hot-diverging","Condition Number":"condition-number","Cyan to Purple":"cyan-to-purple","Cyan-Light to Blue-Dark":"cyan-light-to-blue-dark",Distance:"distance","Elevation #1":"elevation1","Elevation #2":"elevation2",Errors:"errors","Gray Light to Dark":"gray-light-to-dark","Green Bright":"green-bright","Green Light to Dark":"green-light-to-dark","Green to Blue":"green-to-blue","Orange Bright":"orange-bright","Orange Light to Dark":"orange-light-to-dark","Partial Spectrum":"partial-spectrum","Partial Spectrum 1 Diverging":"partial-spectrum-1-diverging","Partial Spectrum 2 Diverging":"partial-spectrum-2-diverging","Pink to YellowGreen Diverging, Bright":"pink-to-yellow-green-diverging-bright","Pink to YellowGreen Diverging, Dark":"pink-to-yellow-green-diverging-dark",Precipitation:"precipitation",Prediction:"prediction","Purple Bright":"purple-bright","Purple to Green Diverging, Bright":"purple-to-green-diverging-bright","Purple to Green Diverging, Dark":"purple-to-green-diverging-dark","Purple-Blue Bright":"purple-blue-bright","Purple-Blue Light to Dark":"purple-blue-light-to-dark","Purple-Red Bright":"purple-red-bright","Purple-Red Light to Dark":"purple-red-light-to-dark","Red Bright":"red-bright","Red Light to Dark":"red-light-to-dark","Red to Blue Diverging, Bright":"red-to-blue-diverging-bright","Red to Blue Diverging, Dark":"red-to-blue-diverging-dark","Red to Green":"red-to-green","Red to Green Diverging, Bright":"red-to-green-diverging-bright","Red to Green Diverging, Dark":"red-to-green-diverging-dark",Slope:"slope","Spectrum-Full Bright":"spectrum-full-bright","Spectrum-Full Dark":"spectrum-full-dark","Spectrum-Full Light":"spectrum-full-light",Surface:"surface",Temperature:"temperature","White to Black":"white-to-black","Yellow to Dark Red":"yellow-to-dark-red","Yellow to Green to Dark Blue":"yellow-to-green-to-dark-blue","Yellow to Red":"yellow-to-red","Yellow-Green Bright":"yellow-green-bright","Yellow-Green Light to Dark":"yellow-green-light-to-dark"});function sf(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=t?t.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=e.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(sf.Cache||gc),r}sf.Cache=gc;var lf=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,cf=/\\(\\)?/g;function uf(e){e??(e="standard");let t="";return t="raster"===e?"_ra":"",t}function ff(e,t){return Ur(e,t)}!function(){var e=sf((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(lf,(function(e,r,n,o){t.push(n?o.replace(cf,"$1"):r||e)})),t}),(function(t){return 500===e.size&&e.clear(),t})).cache}(),Ar((async e=>{const{locale:t,name:r,assetPrefix:n,analysisEngine:o,memoizedHelper:i}=e,a=`${r.toLowerCase()}${uf(o)}`;let s,l,c,u;const f=`${n}/tool-ui-json/${a}.tool.ui.json`,h=`${n}/tool-json/${a}.tool.json`,d=`${n}/t9n/${a}/${a}.t9n.${t}.json`,p=`${n}/t9n/common.t9n.${t}.json`;let g=t;t===di.English||t===di.EnglishUSA?g="":g===di.NorwegianBokml&&(g="no");const y=`${n}/help/${""!==g?g+"/":""}${r}${uf(o)}.html`;try{u=await i(h),s=await i(f),l=await i(d),c=await i(p),l={...c,...l}}catch{s=void 0}return{toolJson:u,toolUIJson:s,toolT9n:l,toolHelpFilePath:y}})),Ar((e=>{const t={};let r;if(void 0!==e.featureSet){if(t.source=ue.default.fromJSON(e.featureSet).features,r=e.layerDefinition,void 0!==r.fields&&(t.fields=r.fields.map((e=>le.default.fromJSON(e)))),void 0!==r.objectIdField&&(t.objectIdField=r.objectIdField),void 0!==r.geometryType){let e="point";switch(r.geometryType){case"esriGeometryMultipoint":e="multipoint";break;case"esriGeometryPoint":e="point";break;case"esriGeometryPolygon":e="polygon";break;case"esriGeometryPolyline":e="polyline"}t.geometryType=e}void 0!==r.spatialReference&&(t.spatialReference=r.spatialReference),void 0!==r.drawingInfo?.renderer&&(t.renderer=ce.default.fromJSON(r.drawingInfo.renderer))}return new ie.default(t)})),Ar((async(e,t)=>{let r=!1;if(!0===window.location.href.includes("://localhost:")||void 0===t)r=!0;else{const n=`${e}${e.indexOf("?")>-1?"&":"?"}f=json`;se.default.request.proxyUrl=`${t}/sharing/proxy`;try{r=!1===fi((await hi(n,{useProxy:!0})).data)}catch(e){r=!1}}return!0===r?e:void 0})),Ma((async e=>{const{url:t}=e,r=`${t}/sharing/rest/community/self`,n=ne.default.findCredential(r);let o;void 0!==n&&(o=n.token);const i={query:{returnUserLicensedItems:!0,token:o,f:"json"}};try{const{data:{userLicensedItems:e}}=await hi(r,i);return[...e.map((({entitlements:e})=>e))].flat()}catch(e){await Aa(vi)}return[]}),{serializer:e=>`${e.user.username}`}),Ma((e=>{const t=new Set(e.map((e=>e.id)));return Array.from(t).map((t=>e.find((e=>e.id===t))))}),{serializer:e=>Array.isArray(e)?e.map((e=>e?.id)).join("-"):""}),Ma((async e=>{let t={isMultidimensional:!1};const r="imagery-tile"===e.type?e.rasterInfo.multidimensionalInfo:e.multidimensionalInfo,n=e.multidimensionalSubset;if(null!=r){const o=null!=n?e.getMultidimensionalSubsetVariables():r.variables;if(void 0!==o&&o.length>0){const e=[],r=[],n={},i={},a={},s={},l={},c={},u={};o.forEach(((t,o)=>{let a="";const f=t.name;t.dimensions.forEach(((t,r)=>{const h=t.name;-1===e.indexOf(h)&&e.push(h);const d=r>0?`,${h}=${t.values?.length}`:`${h}=${t.values?.length}`;if(a=a.concat(d),0===r&&(i[f]={}),void 0===n[h]&&(n[h]=[]),i[f][h]=t.values,0===o){const e=t.values;if(void 0!==e)if("StdTime"!==h||void 0!==t.unit&&"ISO8601"!==t.unit)Array.isArray(e)&&"number"==typeof e[0]?s[h]=l[h]=e.map(String):Array.isArray(e[0])&&Array.isArray(e[1])&&(s[h]=e[0].map(String),l[h]=e[1].map(String));else{const t=[],r=[],n={},o={};e.forEach((e=>{if("number"==typeof e){const i=new Date(e),a=i.toLocaleString(),s=i.toISOString();t.push(s),r.push(s),n[s]=a,o[s]=a}else if(Array.isArray(e)){const i=new Date(e[0]),a=new Date(e[1]),s=i.toISOString(),l=a.toISOString();t.push(s),r.push(l),n[s]=i.toLocaleString(),o[l]=a.toLocaleString()}})),s[h]=t,l[h]=r,c[h]=n,u[h]=o}}n[h].push(f)})),r.push({name:f,alias:`${f}[${a}](${t.description})`,type:"string"})}));for(const e in n){const t=r.filter((t=>n[e].indexOf(t.name)>-1));a[e]={id:"1",name:e,description:"DimensionVariables",getFields:()=>Promise.resolve(t)}}t={isMultidimensional:!0,dimensions:e,dimensionVariableDatasets:a,dimensionValues:i,variablesDataset:{id:"1",name:"Variables",description:"Variables",getFields:()=>Promise.resolve(r)},dimensionMinValues:s,dimensionMaxValues:l,dimensionMinValuesWithLabels:c,dimensionMaxValuesWithLabels:u}}}const o="imagery"===e.type?await e.generateRasterInfo(e.rasterFunction):e.rasterInfo;return t.rasterInfo=o,t}));const hf=async e=>{const{asyncGeocodeUrl:t}=e,r=await fe.submitJob(`${t}/AnalyzeGeocodeInput`,{...ai(e,"asyncGeocodeUrl"),f:"json"});return await r.waitForJobCompletion(),(await r.fetchResultData("geocodeParameters")).value},df=Ma(((e,t)=>new ae.default({id:e,portal:t})),{serializer:e=>`${e[0]}-${e[1]?.url}`});Ma((async e=>{const{restUrl:t}=e,r=`${t}/portals/helpmap`;let n;try{const e=await oe.default(r,{query:{f:"json"},responseType:"json",method:"auto"});n=await(e.data?.helpMap)??void 0}catch(e){n=void 0}return n}),{serializer:e=>`${e[0]}-${e[1]?.url}`}),we((async e=>{const t=new re.default({url:e});t.authMode="immediate";try{await t.load()}catch(e){await Aa("portalLoadError")}return t}));const pf="standard",gf="geoanalytics",yf="raster";function mf(e,t,r=!1){let n=t.helperServices.analysis.url;switch(e){case gf:n=t.helperServices.geoanalytics.url;break;case yf:n=t.helperServices.rasterAnalytics.url;break;case pf:n=r?t.helperServices.asyncGeocode.url:t.helperServices.analysis.url}return n}const vf=e=>{const t=Array.from(e).map((e=>{let t;return t="object"==typeof e&&void 0!==e.id?e.id:e,t}));return JSON.stringify(t)},bf=we((async(e,t,r)=>{const n=`${mf(t,r,"BatchGeocode"===e)}/${e}?f=json`,o=await oe.default(n,{responseType:"json",authMode:"no-prompt"}),i=await o.data;return i.parameters?.forEach((e=>{null===e.defaultValue&&(e.defaultValue=void 0)})),i}),{serializer:vf}),wf=we((async(e,t)=>{const r=mf(e,t),n=await oe.default(`${r}?f=json`,{responseType:"json"}),{data:{tasks:o}}=n,i=o.map((r=>bf(r,e,t)));return await Promise.all(i)}),{serializer:vf});we((async(e,t)=>{let r=[];return r=void 0!==t?await wf(t,e):[...await wf(pf,e),...await wf(yf,e),...await wf(gf,e)],new Map(r.map((e=>[e.name.toLowerCase(),e])))}),{serializer:vf}),we((async e=>{const{helperServices:t}=e;let r;if(void 0!==t.routingUtilities){const e=await fe.execute(`${t.routingUtilities.url}/GetTravelModes?f=json`),{results:[{value:{features:n}},{value:o}]}=e;r={travelModes:n.map((e=>JSON.parse(e.attributes.TravelMode))),defaultTravelModeId:o}}return r}),{serializer:vf});const $f=we((async e=>(await oe.default(`${e}?f=json`,{responseType:"json"})).data)),jf=we((async(e,t)=>{const r=`${e}/${t}?f=json`,n=await oe.default(r,{responseType:"json",authMode:"no-prompt"}),o=await(n?.data);return void 0!==o?.parameters&&o.parameters?.forEach((e=>{null===e.defaultValue&&(e.defaultValue=void 0)})),o}));function _f(e,t){const{mode:r,helpUrl:n,helpId:o,heading:i,referenceElement:a,isHelpFileExternalAsset:s,portalHelpMap:l,portal:c,helpFileName:u,learnMoreBaseUrl:f,learnMoreUrl:h,analysisEngine:d,offsetDistance:p,offsetSkidding:g,externalHelpMap:y,helpMode:m}=t;return void 0!==e&&(W.removeOpenableDomElement(e),e=void 0),e=function(e){const{mode:t,helpUrl:r,helpId:n,heading:o,referenceElement:i,isHelpFileExternalAsset:a,portalHelpMap:s,portal:l,helpFileName:c,learnMoreBaseUrl:u,learnMoreUrl:f,analysisEngine:h,placement:d,offsetDistance:p,offsetSkidding:g,externalHelpMap:y,helpMode:m}=e,v=document.createElement("analysis-help-popover");return v.mode=t??"web-analysis",v.helpUrl=r,v.helpId=n,v.heading=o,v.referenceElement=i,v.placement=d??"leading-start",v.isHelpFileExternalAsset=a,v.portalHelpMap=s,v.portal=l,v.helpFileName=c,v.analysisEngine=h,v.learnMoreBaseUrl=u,v.learnMoreUrl=f,v.helpMode=m,void 0!==p&&(v.offsetDistance=p),void 0!==g&&(v.offsetSkidding=g),v.externalHelpMap=y,v}({mode:r,helpUrl:n,helpId:o,heading:i,referenceElement:a,isHelpFileExternalAsset:s,portalHelpMap:l,portal:c,helpFileName:u,analysisEngine:d,learnMoreBaseUrl:f,learnMoreUrl:h,offsetDistance:p,offsetSkidding:g,externalHelpMap:y,helpMode:m}),W.addOpenableDomElement(document,e),e}we((async e=>{const t=await oe.default(`${e}?f=json`,{responseType:"json"}),{data:{tasks:r}}=t,n=r.map((t=>jf(e,t)));return await Promise.all(n)})),we((async(e,t)=>{let r,n;try{r=await jf(e,t),n=await $f(e)}catch(e){throw"OAUTH_0070"===e.details?.messageCode?new mi("accessBlocked",e.message,e.details):new mi("webToolFailedFetch",e.message,e.details)}return r.serviceInfo=n,{...r,serviceInfo:n}}));const Of="top-spacing",kf="intermediateData",Sf="hostedLayer",Mf="overwriteExistingLayer",Pf=r.proxyCustomElement(class extends r.H{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.analysisOverwriteValueChange=r.createEvent(this,"analysisOverwriteValueChange",7),this.analysisHelpPopoverOpen=r.createEvent(this,"analysisHelpPopoverOpen",7),this.filter='(type: "Feature Service")',this.itemBrowserBucketOptions=["my","favorites","group","org"],this.handleAnalysisHelpPopoverClose=()=>{n.removeOpenableDomElement(this.toolHelpPopover),this.toolHelpPopover?.removeEventListener("analysisHelpPopoverClose",this.handleAnalysisHelpPopoverClose),this.toolHelpPopover=void 0},this.updateValue=()=>{let e;if(this.overwriteMode===Sf||this.overwriteMode===Mf&&void 0!==this.selectedOverwriteItem){const t=this.folderId??this.folderInputRef?.value??"";e={serviceProperties:{name:this.outputName},itemProperties:this.overwriteExistingLayer?{overwrite:!0,folderId:t}:{folderId:t},overwriteMode:this.overwriteMode},e.itemProperties=this.selectedOverwriteItem?{...e.itemProperties,id:this.selectedOverwriteItem.id}:e.itemProperties,e=this.serializeOutputName(e,this.toolData)}else this.overwriteMode===Mf&&void 0===this.selectedOverwriteItem&&(e={serviceProperties:{name:""},itemProperties:{},overwriteMode:this.overwriteMode});this.value=e,this.analysisOverwriteValueChange.emit(this.value)},this.formatUnavailableItemErrorMessage=e=>{let t=this.strings.itemNameTaken;return!1===e?t=this.strings.noPermissionToOverwrite:this.overwriteMode===Mf?t=this.strings.cannotUndoOverwrite:this.overwriteMode===Sf&&!0===this.overwriteExistingLayer&&(t=this.strings.layerExistsOverwritten),{message:t,uiInputStatus:this.overwriteExistingLayer&&e?n.UIInputStatus.IDLE:n.UIInputStatus.INVALID}},this.validateOutputName=async()=>{if(this.isOutputNameTaken=!1,!n.isNotEmpty(this.outputName))return void(this.error={message:this.strings.requiredError,uiInputStatus:n.UIInputStatus.INVALID});if(!1===n.outputNameValidation([this.outputName]))return void(this.error={message:this.strings.specialCharactersInServiceNameError,uiInputStatus:n.UIInputStatus.INVALID});const e=await async function(e){const{portal:{url:t,id:r},itemType:n,includeItemId:o=!1}=e,{serviceName:i}=e,a=`${t}/sharing/rest/portals/${r}/isServiceNameAvailable?f=json`,s={query:{f:"json",name:i,type:n,includeitemid:o}};let l={available:!0};try{const e=await oe.default(a,s);l=void 0!==e.data.itemId?{available:e.data.available,itemId:e.data.itemId,inRecycleBin:e.data.inRecycleBin}:{available:e.data.available,inRecycleBin:e.data.inRecycleBin}}catch(e){await Aa(vi)}return l}({portal:this.portal,itemType:"Feature Service",serviceName:this.outputName,includeItemId:!0}),{itemId:t,available:r,inRecycleBin:o}=e??{};if(!0===o)this.error={message:this.strings.recycleBinError,uiInputStatus:n.UIInputStatus.INVALID};else if(!1===r&&n.isNotEmpty(t)){this.isOutputNameTaken=!0;const e=await n.getPortalItemById(t),r=n.isUserItem(e,this.portal.user);!0===this.overwriteExistingLayer&&(this.folderId=e.ownerFolder),this.error=this.formatUnavailableItemErrorMessage(r)}else!1===r&&!1===n.isNotEmpty(t)?this.error={message:this.strings.noPermissionToOverwrite,uiInputStatus:n.UIInputStatus.INVALID}:this.error=void 0},this.debouncedValidateOutputName=ee.debounce(this.validateOutputName,500),this.setOutputNameFromSelectedItem=e=>{this.overwriteExistingLayer=!0,this.outputName=e.name??n.getServiceName(e.url),this.isOutputNameTaken=!0,this.folderId=e.ownerFolder,n.isUserItem(e,this.portal.user)?(this.selectedOverwriteItem=e,this.error={message:this.strings.cannotUndoOverwrite,uiInputStatus:n.UIInputStatus.IDLE}):this.error={message:this.strings.noPermissionToOverwrite,uiInputStatus:n.UIInputStatus.INVALID}},this.renderItemBrowser=()=>r.h(r.Fragment,null,r.h("analysis-label",{class:Of,label:this.strings.overwriteLayer,ref:e=>this.itemBrowserRef=e,required:!0,onAnalysisLabelHelpActionClick:()=>{this.createHelpPopover(this.strings.overwriteLayer,"existingLayerToOverwrite",this.itemBrowserRef)}}),this.selectedOverwriteItem?this.renderSelectedLayer():r.h("calcite-button",{class:"item-browser-layer-button",scale:n.UIDefaults.Scale,appearance:"outline",kind:"neutral",iconStart:"add-layer",onMouseOver:this.addTooltip,onMouseOut:this.removeTooltip,onClick:this.handleOpenItemBrowserClick},this.strings.layer),this.showItemBrowser&&r.h("arcgis-tunnel",{reference:this.hostElement},r.h("analysis-item-browser",{bucketOptions:this.itemBrowserBucketOptions,header:this.strings.selectLayerToOverwrite,portal:this.portal,hideAddToMap:!0,selectionMode:"single",filter:this.filter,user:this.portal?.user,onAnalysisItemBrowserClose:this.handleItemBrowserClose,onAnalysisItemBrowserSelection:this.handleItemBrowserSelection})),this.renderErrorMessage()),this.renderStringInput=()=>r.h(r.Fragment,null,r.h("analysis-label",{class:Of,label:this.strings.outputName,ref:e=>this.outputNameLabelRef=e,required:!0,onAnalysisLabelHelpActionClick:()=>{this.createHelpPopover(this.strings.outputName,"outputName",this.outputNameLabelRef)}}),r.h("div",{class:"string-item-browser-input-wrapper"},r.h("calcite-input",{class:"calcite-input",scale:n.UIDefaults.Scale,type:"text",value:this.outputName,status:this.error?.uiInputStatus,placeholder:this.strings.enterUniqueName,onCalciteInputInput:this.handleStringInputChange})),this.renderErrorMessage()),this.renderLayerOverwriteCheckbox=()=>r.h("div",{class:"layer-overwrite-checkbox"},r.h("analysis-boolean-input",{ref:e=>this.layerOverwriteCheckboxRef=e,label:this.strings.layerExistsAutomaticallyOverwrite,onAnalysisBooleanInputChange:this.handleLayerOverwriteBooleanInputChange,value:this.overwriteExistingLayer,onAnalysisHelpClick:()=>{this.createHelpPopover(this.strings.overwrite,"layerExistsAutomaticallyOverwrite",this.layerOverwriteCheckboxRef)}})),this.renderFolderInput=()=>r.h("analysis-folder-input",{ref:e=>this.folderInputRef=e,label:this.strings.saveInFolder,value:this.folderId,user:this.portal?.user,disabled:this.isOutputNameTaken,onAnalysisFolderInputChange:this.handleFolderInputChange,onAnalysisHelpClick:()=>{this.createHelpPopover(this.strings.saveInFolder,"saveResultIn",this.folderInputRef)}}),this.renderErrorMessage=()=>void 0!==this.error?.message&&void 0!==this.error?.uiInputStatus&&r.h("calcite-input-message",{class:"error-message",status:this.error.uiInputStatus,hidden:!1,scale:n.UIDefaults.Scale,icon:"exclamationMarkTriangle"},this.error.message),this.handleOverwriteModeChange=async()=>{this.overwriteMode=this.stringInputRef.value,this.overwriteMode===Sf?await this.validateOutputName():this.overwriteMode===Mf&&void 0===this.selectedOverwriteItem?this.error={message:this.strings.requiredError,uiInputStatus:n.UIInputStatus.INVALID}:this.overwriteMode===Mf&&void 0!==this.selectedOverwriteItem&&this.setOutputNameFromSelectedItem(this.selectedOverwriteItem),this.updateValue()},this.addTooltip=e=>{const t=e.target;void 0===this.tooltipElement&&(this.tooltipElement=document.createElement("calcite-tooltip"),this.tooltipElement.placement="bottom",this.tooltipElement.innerText=this.strings.chooseLayerToOverwrite,this.tooltipElement.offsetDistance=14,this.tooltipElement.referenceElement=t),n.addOpenableDomElement(document,this.tooltipElement)},this.removeTooltip=()=>{n.removeOpenableDomElement(this.tooltipElement)},this.handleStringInputChange=async e=>{const t=e.target.value;this.outputName=t,await this.debouncedValidateOutputName(),this.updateValue()},this.handleLayerOverwriteBooleanInputChange=async e=>{const t=e.target.value;this.overwriteExistingLayer=t,await this.validateOutputName(),this.updateValue()},this.handleFolderInputChange=e=>{const t=e.target.value;t!==this.folderId&&(this.folderId=t,this.updateValue())},this.handleItemBrowserSelection=e=>{const t=e.detail;this.setOutputNameFromSelectedItem(t),this.updateValue()},this.handleRemoveSelectedItem=async()=>{this.selectedOverwriteItem=void 0,this.outputName="",this.overwriteExistingLayer=!1,this.folderId=void 0,await this.validateOutputName(),this.updateValue()},this.handleOpenItemBrowserClick=()=>{this.showItemBrowser=!0},this.handleItemBrowserClose=()=>{this.showItemBrowser=!1},this.value=void 0,this.toolData=void 0,this.required=!1,this.portal=void 0,this.toolHelpFilePath=void 0,this.isOutputNameTaken=!1,this.selectedOverwriteItem=void 0,this.overwriteExistingLayer=!0,this.outputName="",this.error=void 0,this.showItemBrowser=!1,this.folderId=void 0,this.overwriteMode=kf}async componentWillLoad(){let e="";({strings:this.strings,locale:e}=await n.fetchComponentLocaleStrings(this.hostElement,r.getAssetPath("."))),!0===n.isNotEmpty(this.value)&&(this.outputName=this.value.serviceProperties?.name??"",this.overwriteExistingLayer=this.value.itemProperties?.overwrite??!1,this.folderId=this.value.itemProperties?.folderId,this.overwriteMode=this.value.overwriteMode??Sf,!0===n.isNotEmpty(this.value.itemProperties?.id)&&(this.selectedOverwriteItem=await n.getPortalItemById(this.value.itemProperties.id)),await this.validateOutputName()),this.portalChange(this.portal),this.updateValue(),this.setToolHelpFilePath(e)}disconnectedCallback(){this.toolHelpPopover?.removeEventListener("analysisHelpPopoverClose",this.handleAnalysisHelpPopoverClose),n.removeOpenableDomElement(this.toolHelpPopover)}portalChange(e){void 0!==e?.user&&(this.itemBrowserBucketOptions=n.isAdmin(e.user)?["my","favorites","group","org"]:["my","favorites"])}get hasError(){return this.error?.uiInputStatus===n.UIInputStatus.INVALID}async checkValidity(){const e=void 0===this.error||!1===this.hasError;return Promise.resolve(e)}setToolHelpFilePath(e){if(void 0===this.toolHelpFilePath){let t=e;switch(e){case n.SupportedLocales.English:case n.SupportedLocales.EnglishUSA:t="";break;case n.SupportedLocales.NorwegianBokml:t="no"}this.toolHelpFilePath=r.getAssetPath(`assets/help/${""!==t?t+"/":""}AnalysisOverwrite.html`)}}serializeOutputName(e,t){const r=n.setOutputNameServiceNameCapabilities(e,t);return void 0!==t.itemProperties&&(r.itemProperties={...r.itemProperties,...t.itemProperties}),r}createHelpPopover(e,t,r){n.removeHelpPopovers(),void 0!==this.toolHelpPopover&&(this.toolHelpPopover.removeEventListener("analysisHelpPopoverClose",this.handleAnalysisHelpPopoverClose),this.toolHelpPopover=void 0),void 0!==this.toolHelpFilePath&&(this.toolHelpPopover=_f(this.toolHelpPopover,{heading:e,helpFileName:"AnalysisOverwrite",helpId:t,helpUrl:this.toolHelpFilePath,isHelpFileExternalAsset:!0,learnMoreBaseUrl:this.portal?.sourceJSON.helpBase??void 0,portal:this.portal,referenceElement:r}),this.toolHelpPopover.addEventListener("analysisHelpPopoverClose",this.handleAnalysisHelpPopoverClose),this.analysisHelpPopoverOpen.emit())}renderSelectedLayer(){const e=this.selectedOverwriteItem.name??n.getServiceName(this.selectedOverwriteItem.url),t=n.formatMessage(this.strings.layerAction,{layerName:e});return r.h("calcite-list",{class:"selected-layer"},r.h("calcite-list-item",{key:this.selectedOverwriteItem.id,label:e,description:this.selectedOverwriteItem.type},r.h("calcite-action",{"data-layerId":this.selectedOverwriteItem.id,text:t,label:t,slot:"actions-end",appearance:"transparent",icon:"x",onClick:this.handleRemoveSelectedItem})))}render(){return r.h(r.Host,{key:"53de99cf78472167122e3759141c993a4bd0d1b5"},r.h("analysis-string-input",{key:"0064f6659f33585f0db1b4ff8927b28149574544",label:this.strings.resultType,required:!0,value:this.overwriteMode,ref:e=>this.stringInputRef=e,onAnalysisHelpClick:()=>{this.createHelpPopover(this.strings.resultType,"resultType",this.stringInputRef)},choiceList:[kf,Sf,Mf],choiceListLabels:{[kf]:this.strings.createIntermediateData,[Sf]:this.strings.createHostedLayer,[Mf]:this.strings.overwriteExistingLayer},onAnalysisStringInputChange:this.handleOverwriteModeChange}),this.overwriteMode===kf&&r.h("calcite-input-message",{key:"d9f05b612a72f1e69b6e050f16ec9057a996bf29",class:Of,status:"idle",hidden:!1,scale:n.UIDefaults.Scale,icon:"exclamationMarkTriangle"},this.strings.intermediateDataWarning),this.overwriteMode===Sf&&r.h("div",{key:"fd6cd4be0b2741ccca61a0e1c58d95475d11d125"},this.renderStringInput(),this.renderLayerOverwriteCheckbox(),this.renderFolderInput()),this.overwriteMode===Mf&&this.renderItemBrowser())}static get assetsDirs(){return["t9n"]}get hostElement(){return this}static get watchers(){return{portal:["portalChange"]}}static get style(){return":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:#d4d4d4;--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh}:host{display:block}.error-message{margin-top:var(--analysis-half-spacing)}.string-item-browser-input-wrapper{display:flex;gap:var(--analysis-half-spacing)}.layer-overwrite-checkbox{margin:var(--analysis-half-spacing) 0}.calcite-input{flex-grow:1}.selected-layer{border:1px solid var(--calcite-color-border-input);margin-bottom:var(--analysis-half-spacing)}.calcite-dropdown{width:100%}.item-browser-layer-button{width:100%}.top-spacing{margin-top:var(--analysis-half-spacing)}.negative-top-spacing{margin-top:calc(-1 * var(--analysis-half-spacing))}"}},[1,"analysis-overwrite",{value:[1040],toolData:[16],required:[516],portal:[16],toolHelpFilePath:[1537,"tool-help-file-path"],overwriteMode:[1025,"overwrite-mode"],isOutputNameTaken:[32],selectedOverwriteItem:[32],overwriteExistingLayer:[32],outputName:[32],error:[32],showItemBrowser:[32],folderId:[32],checkValidity:[64]},void 0,{portal:["portalChange"]}]);function Af(){"undefined"!=typeof customElements&&["analysis-overwrite","analysis-boolean-input","analysis-folder-input","analysis-help-popover","analysis-item-browser","analysis-label","analysis-string-input"].forEach((e=>{switch(e){case"analysis-overwrite":customElements.get(e)||customElements.define(e,Pf);break;case"analysis-boolean-input":customElements.get(e)||J.defineCustomElement();break;case"analysis-folder-input":customElements.get(e)||K.defineCustomElement();break;case"analysis-help-popover":customElements.get(e)||Y.defineCustomElement();break;case"analysis-item-browser":customElements.get(e)||Q.defineCustomElement();break;case"analysis-label":customElements.get(e)||Z.defineCustomElement();break;case"analysis-string-input":customElements.get(e)||X.defineCustomElement()}}))}Af(),t.AnalysisOverwrite=Pf,t.defineCustomElement=Af,t.showHelp=_f}));