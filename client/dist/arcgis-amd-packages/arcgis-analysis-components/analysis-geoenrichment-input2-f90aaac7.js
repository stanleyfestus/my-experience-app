define(["exports","./index-60d8a971","./index2-31657c04","./utils-c381fe27","./analysis-geoenrichment-databrowser2-3b8d96ff","./analysis-label2-5082e9b8"],(function(e,t,a,s,i,l){"use strict";const r="list-item-border",n=t.proxyCustomElement(class extends t.H{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.analysisGeoenrichmentInputChange=t.createEvent(this,"analysisGeoenrichmentInputChange",7),this.analysisHelpClick=t.createEvent(this,"analysisHelpClick",7),this.doValidate=!1,this.renderAddVariable=()=>t.h("calcite-button",{width:"full",appearance:"outline",kind:"neutral","icon-start":"plus",scale:s.UIDefaults.Scale,onClick:this.openDataBrowser},this.strings.addVariableLabel),this.renderSelectedVariables=()=>{const e=this.value?.analysisVariables?.map(((e,a)=>t.h("calcite-value-list-item",{key:e,label:this.value?.labels?.[a]??e,value:e,class:r,removable:!0,onCalciteListItemRemove:this.onListItemRemove})));return t.h("calcite-value-list",null,e)},this.onListItemRemove=e=>{const t=e.target,a=t?.value;if(void 0!==this.value){let{analysisVariables:e,labels:s}=this.value;e=e?.filter((e=>e!==a)),s=s?.filter((e=>e!==t?.label)),this.doValidate=!0,this.value=0===e?.length?void 0:Object.assign({},this.value,{analysisVariables:e,labels:s})}this.analysisGeoenrichmentInputChange.emit()},this.openDataBrowser=()=>{this.dataBrowserElement=document.createElement("analysis-geoenrichment-databrowser"),this.dataBrowserElement.addEventListener("analysisDataBrowserSelectionChange",this.onSelectedVariables),this.dataBrowserElement.addEventListener("analysisDataBrowserClose",this.closeModal),document.body.appendChild(this.dataBrowserElement),this.dataBrowserElement.value=this.value?.analysisVariables,this.dataBrowserElement.portal=this.portal,this.dataBrowserElement.countryId=this.countryId,this.dataBrowserElement.hierarchyId=this.hierarchyId},this.closeModal=()=>{void 0!==this.dataBrowserElement&&(this.dataBrowserElement.removeEventListener("analysisDataBrowserSelectionChange",this.onSelectedVariables),this.dataBrowserElement.removeEventListener("analysisDataBrowserClose",this.closeModal),this.dataBrowserElement.remove(),this.dataBrowserElement=void 0)},this.onSelectedVariables=e=>{const{selectedValues:t,countryId:a,hierarchyId:s,countryAlias:i,hierarchyAlias:l}=e.detail;this.countryId=a,this.hierarchyId=s;const[r,n]=t.reduce(((e,t)=>{const[a,s]=e;return a.push(t.value),s.push(t.label),[a,s]}),[[],[]]);this.doValidate=!0,this.value={country:this.countryId,hierarchy:this.hierarchyId,countryAlias:i,hierarchyAlias:l,analysisVariables:r,labels:n},this.analysisGeoenrichmentInputChange.emit(),this.closeModal()},this.validate=()=>{let e;return this.required&&!0===a.isEmptyDataItem(this.value?.analysisVariables)?(e=!1,this.error=this.strings.requiredInputMessage):(e=!0,this.error=void 0),e},this.error=void 0,this.value=void 0,this.required=!1,this.label=void 0,this.portal=void 0}valueChange(e){this.countryId=e?.country??void 0,this.hierarchyId=e?.hierarchy??void 0,!0===this.doValidate&&this.validate()}get hasError(){return void 0!==this.error}async componentWillLoad(){({strings:this.strings}=await a.fetchComponentLocaleStrings(this.hostElement,t.getAssetPath("."))),(this.value?.analysisVariables?.length??0)>0&&(this.doValidate=!0),void 0!==this.value&&this.valueChange(this.value)}disconnectedCallback(){this.closeModal()}async checkValidity(){const e=this.validate();return Promise.resolve(e)}render(){const e=(this.value?.analysisVariables?.length??0)>0?this.renderSelectedVariables():null;return t.h(t.Host,{key:"8a02199b99cdd877921a3d0875aaffbbc7467701"},!1===a.isEmptyDataItem(this.label)?t.h("analysis-label",{label:this.label,required:this.required,onAnalysisLabelHelpActionClick:()=>this.analysisHelpClick.emit()}):null,e,this.renderAddVariable(),t.h("calcite-input-message",{key:"f5e4fc2034e7bc77001b8dfe5b3df35a81ed4b83",status:"invalid",scale:s.UIDefaults.Scale,hidden:!this.hasError,icon:"exclamationMarkTriangle"},this.error))}static get assetsDirs(){return["t9n"]}get hostElement(){return this}static get watchers(){return{value:["valueChange"]}}static get style(){return":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:#d4d4d4;--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh}.list-item-border{border:1px solid var(--analysis-ui-border-input);box-shadow:none}"}},[1,"analysis-geoenrichment-input",{value:[1040],required:[516],label:[513],portal:[16],error:[32],checkValidity:[64]},void 0,{value:["valueChange"]}]);function o(){"undefined"!=typeof customElements&&["analysis-geoenrichment-input","analysis-geoenrichment-databrowser","analysis-label"].forEach((e=>{switch(e){case"analysis-geoenrichment-input":customElements.get(e)||customElements.define(e,n);break;case"analysis-geoenrichment-databrowser":customElements.get(e)||i.defineCustomElement();break;case"analysis-label":customElements.get(e)||l.defineCustomElement()}}))}o(),e.AnalysisGeoenrichmentInput=n,e.defineCustomElement=o}));