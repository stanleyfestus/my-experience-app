define(["exports","./index-60d8a971","./index2-31657c04","./utils-c381fe27"],(function(e,t,s,i){"use strict";const a="custom-input-label",l=t.proxyCustomElement(class extends t.H{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.analysisMultipleInputChange=t.createEvent(this,"analysisMultipleInputChange",7),this.renderCombobox=()=>{const{choiceList:e,errorMessage:a,value:l,scale:n,placeholderText:o}=this,r=void 0!==this.errorMessage,h=e?.map((e=>{const t=void 0!==l&&l.includes(e);return this.buildComboBoxItem(e,t)})),u=s.formatValidationParamsMessage(this.validationParams),c=!1===s.isEmptyDataItem(u)||!0===r,d=r?s.UIInputStatus.INVALID:s.getUIInputStatusFromMessageType(this.validationParams?.type);return t.h("calcite-label",{scale:n},t.h("calcite-combobox",{label:this.label,scale:n,selectionMode:"multiple",placeholder:o??this.strings.defaultPlaceholder,onCalciteComboboxChange:this.handleComboboxChange},h),t.h("calcite-input-message",{status:d,scale:i.UIDefaults.Scale,hidden:!c,icon:"exclamationMarkTriangle"},a??u))},this.buildComboBoxItem=(e,s)=>t.h("calcite-combobox-item",{key:e,value:e,textLabel:e,selected:s}),this.buildChip=e=>t.h("calcite-chip",{closable:!0,scale:i.UIDefaults.Scale,value:e,key:e,onCalciteChipClose:this.handleChipClose},s.formatNumberToLocale(e)),this.handleComboboxChange=e=>{const t=e.target?.selectedItems,s=t?.map((e=>e.value));Array.isArray(s)&&0!==s.length||!0!==this.required?(this.value=s,this.analysisMultipleInputChange.emit(this.value),this.errorMessage=this.validate(this.value),this.checkUnderMinValues()):this.errorMessage=this.strings.requiredInputMessage},this.handleNewChip=()=>{if(this.isAtMaxValues)return;const e=this.inputElement?.value;if(void 0!==e&&""!==e&&(this.errorMessage=this.validate([e]),this.isValid)){const t=new Set([...this.value??[],e]);this.value=Array.from(t),this.analysisMultipleInputChange.emit(this.value),void 0!==this.inputElement&&(this.inputElement.value=""),this.errorMessage=this.validate(this.value),this.checkUnderMinValues()}},this.handleKeyDown=e=>{"Tab"===e?.key&&""!==this.inputElement?.value&&(e.preventDefault(),this.handleNewChip())},this.handleChipClose=async e=>{const t=e?.target,s=t?.value,i=t?.previousElementSibling,a=this.value.filter((e=>e!==s));this.value=a,this.analysisMultipleInputChange.emit(this.value),this.errorMessage=this.validate(this.value),this.checkUnderMinValues(),await(i?.setFocus())},this.checkUnderMinValues=()=>{const e=this.validationOptions?.minValues;void 0!==e&&(this.errorMessage=this.isUnderMinValues?s.formatMessage(this.strings.minValuesMessage,{minValues:s.formatNumberToLocale(e)}):this.errorMessage)},this.value=void 0,this.label=void 0,this.placeholderText=void 0,this.dataType="number",this.choiceList=void 0,this.scale=i.UIDefaults.Scale,this.required=void 0,this.validationParams=void 0,this.validationOptions=void 0,this.errorMessage=void 0}get isValid(){return void 0===this.errorMessage||""===this.errorMessage}get isOverMaxValues(){const e=this.validationOptions?.maxValues??Number.MAX_SAFE_INTEGER;return this.value?.length>e}get isAtMaxValues(){const e=this.validationOptions?.maxValues??Number.MAX_SAFE_INTEGER;return this.value?.length===e}get isUnderMinValues(){const e=this.validationOptions?.minValues??0;return this.value?.length<e}async checkValidity(){this.isOverMaxValues&&(this.errorMessage=s.formatMessage(this.strings.maxValuesMessage,{maxValues:s.formatNumberToLocale(this.validationOptions?.maxValues)})),0!==this.value?.length&&this.isUnderMinValues&&(this.errorMessage=s.formatMessage(this.strings.minValuesMessage,{minValues:s.formatNumberToLocale(this.validationOptions?.minValues)}));const e="informative"!==this.validationParams?.type;return this.errorMessage=this.validate(this.value)??this.errorMessage??(e?this.validationParams?.message:void 0),Promise.resolve(this.isValid)}async componentWillLoad(){({strings:this.strings}=await s.fetchComponentLocaleStrings(this.hostElement,t.getAssetPath(".")))}render(){return void 0!==this.choiceList&&this.choiceList.length>0?this.renderCombobox():this.renderNoChoiceList()}renderNoChoiceList(){const e=void 0!==this.errorMessage;let l,n=!1;void 0!==this.validationOptions?.maxValues&&(n=!e&&this.isAtMaxValues,l=s.formatMessage(this.strings.maxValuesMessage,{maxValues:s.formatNumberToLocale(this.validationOptions.maxValues)}));const o=s.formatValidationParamsMessage(this.validationParams),r=!0===e||!0===n,h=!1===s.isEmptyDataItem(o)||r,u=r?s.UIInputStatus.INVALID:s.getUIInputStatusFromMessageType(this.validationParams?.type),c=r?s.UIInputStatus.INVALID:s.isEmptyDataItem(this.validationParams)?s.UIInputStatus.IDLE:s.getUIInputStatusFromMessageType(this.validationParams?.type);return t.h(t.Host,null,t.h("calcite-label",{scale:this.scale,class:a},this.label,t.h("calcite-input",{disabled:this.isAtMaxValues,type:this.dataType,placeholder:this.placeholderText??this.strings.defaultPlaceholder,scale:this.scale,status:c,numberButtonType:"none",max:this.validationOptions?.max,min:this.validationOptions?.min,step:!0===this.validationOptions?.isFloatType?"any":1,onCalciteInputChange:this.handleNewChip,onKeyDown:this.handleKeyDown,ref:e=>this.inputElement=e},t.h("calcite-button",{disabled:this.isAtMaxValues,scale:this.scale,slot:"action",onClick:this.handleNewChip,"icon-start":"plus"},this.strings.add)),t.h("calcite-input-message",{class:a,status:u,scale:i.UIDefaults.Scale,hidden:!h,icon:"exclamationMarkTriangle"},this.errorMessage??l??o)),t.h("div",{class:"chip-container"},this.value?.map((e=>this.buildChip(e)))))}validate(e=this.value){let t;if(!0!==this.required||void 0!==e&&0!==e?.length)if("number"===this.dataType){const a={required:!1,...this.validationOptions},l=e=>i.validateNumber(s.parseNumber(e),a),n=e?.map(l).find((e=>void 0!==e)),{min:o,max:r}=a,h={min:s.formatNumberToLocale(o),max:s.formatNumberToLocale(r)};t=void 0!==n?s.formatMessage(this.strings[n],h):void 0}else t=void 0;else t=this.strings.requiredInputMessage;return t}static get assetsDirs(){return["t9n"]}get hostElement(){return this}static get style(){return":root{--analysis-quarter-spacing:0.25rem;--analysis-half-spacing:0.5rem;--analysis-three-quarter-spacing:0.75rem;--analysis-full-spacing:1rem;--analysis-component-default-width:100%;--analysis-ui-border-input:#d4d4d4;--analysis-label-font-size:var(--calcite-font-size--2);--analysis-popover-content-min-height-s:7.5rem;--analysis-popover-content-min-height-m:8.75rem;--analysis-popover-content-max-height:60vh;--analysis-popover-content-height:45vh}:host{--calcite-color-border-input:var(--analysis-ui-border-input)}.chip-container{display:flex;flex-wrap:wrap;gap:0.25rem}.custom-input-label{margin-bottom:var(--analysis-quarter-spacing)/2}"}},[1,"analysis-multiple-input",{value:[1040],label:[513],placeholderText:[513,"placeholder-text"],dataType:[513,"data-type"],choiceList:[16],scale:[1],required:[516],validationParams:[16],validationOptions:[16],errorMessage:[1025,"error-message"],checkValidity:[64]}]);function n(){"undefined"!=typeof customElements&&["analysis-multiple-input"].forEach((e=>{"analysis-multiple-input"===e&&(customElements.get(e)||customElements.define(e,l))}))}n(),e.AnalysisMultipleInput=l,e.defineCustomElement=n}));