define(["exports","./analysis-tool-settings2-8834f999","./analysis-tool-standard-settings2-f1305125","./index2-672b5477","./shared-components-01868776","./store-f238135f","./analysis-tool-context-f3d1c605","./popover-utils-293df12e"],(function(t,e,n,r,a,i,o,s){"use strict";var c,l,u,f=Date.now,d=n.defineProperty$1?function(t,e){return n.defineProperty$1(t,"toString",{configurable:!0,enumerable:!1,value:(r=e,function(){return r}),writable:!0});var r}:function(t){return t},p=(c=d,l=0,u=0,function(){var t=f(),e=16-(t-u);if(u=t,e>0){if(++l>=800)return arguments[0]}else l=0;return c.apply(void 0,arguments)});const v=p;var h=Math.max;function y(t,e){for(var r=0,a=(e=n.castPath(e,t)).length;null!=t&&r<a;)t=t[n.toKey(e[r++])];return r&&r==a?t:void 0}var g=n.Symbol$1?n.Symbol$1.isConcatSpreadable:void 0;function b(t){return n.isArray$1(t)||e.isArguments$1(t)||!!(g&&t&&t[g])}function m(t,n,r,a,i){var o=-1,s=t.length;for(r||(r=b),i||(i=[]);++o<s;){var c=t[o];n>0&&r(c)?n>1?m(c,n-1,r,a,i):e.arrayPush(i,c):a||(i[i.length]=c)}return i}function S(t){return null!=t&&t.length?m(t,1):[]}function O(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new n.MapCache;++e<r;)this.add(t[e])}function x(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}O.prototype.add=O.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},O.prototype.has=function(t){return this.__data__.has(t)};var E=1,A=2;function _(t,e,n,r,a,i){var o=n&E,s=t.length,c=e.length;if(s!=c&&!(o&&c>s))return!1;var l=i.get(t),u=i.get(e);if(l&&u)return l==e&&u==t;var f=-1,d=!0,p=n&A?new O:void 0;for(i.set(t,e),i.set(e,t);++f<s;){var v=t[f],h=e[f];if(r)var y=o?r(h,v,f,e,t,i):r(v,h,f,t,e,i);if(void 0!==y){if(y)continue;d=!1;break}if(p){if(!x(e,(function(t,e){if(o=e,!p.has(o)&&(v===t||a(v,t,n,r,i)))return p.push(e);var o}))){d=!1;break}}else if(v!==h&&!a(v,h,n,r,i)){d=!1;break}}return i.delete(t),i.delete(e),d}function C(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function j(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var w=1,$=2,k="[object Boolean]",L="[object Date]",R="[object Error]",P="[object Map]",D="[object Number]",M="[object RegExp]",I="[object Set]",K="[object String]",T="[object Symbol]",B="[object ArrayBuffer]",z="[object DataView]",H=n.Symbol$1?n.Symbol$1.prototype:void 0,q=H?H.valueOf:void 0,F=1,U=Object.prototype.hasOwnProperty,N=1,V="[object Arguments]",G="[object Array]",J="[object Object]",Q=Object.prototype.hasOwnProperty;function W(t,r,a,i,o){return t===r||(null==t||null==r||!n.isObjectLike(t)&&!n.isObjectLike(r)?t!=t&&r!=r:function(t,r,a,i,o,s){var c=n.isArray$1(t),l=n.isArray$1(r),u=c?G:e.getTag$1(t),f=l?G:e.getTag$1(r),d=(u=u==V?J:u)==J,p=(f=f==V?J:f)==J,v=u==f;if(v&&e.isBuffer$1(t)){if(!e.isBuffer$1(r))return!1;c=!0,d=!1}if(v&&!d)return s||(s=new e.Stack),c||e.isTypedArray$1(t)?_(t,r,a,i,o,s):function(t,r,a,i,o,s,c){switch(a){case z:if(t.byteLength!=r.byteLength||t.byteOffset!=r.byteOffset)return!1;t=t.buffer,r=r.buffer;case B:return!(t.byteLength!=r.byteLength||!s(new e.Uint8Array$1(t),new e.Uint8Array$1(r)));case k:case L:case D:return n.eq(+t,+r);case R:return t.name==r.name&&t.message==r.message;case M:case K:return t==r+"";case P:var l=C;case I:var u=i&w;if(l||(l=j),t.size!=r.size&&!u)return!1;var f=c.get(t);if(f)return f==r;i|=$,c.set(t,r);var d=_(l(t),l(r),i,o,s,c);return c.delete(t),d;case T:if(q)return q.call(t)==q.call(r)}return!1}(t,r,u,a,i,o,s);if(!(a&N)){var h=d&&Q.call(t,"__wrapped__"),y=p&&Q.call(r,"__wrapped__");if(h||y){var g=h?t.value():t,b=y?r.value():r;return s||(s=new e.Stack),o(g,b,a,i,s)}}return!!v&&(s||(s=new e.Stack),function(t,n,r,a,i,o){var s=r&F,c=e.getAllKeys(t),l=c.length;if(l!=e.getAllKeys(n).length&&!s)return!1;for(var u=l;u--;){var f=c[u];if(!(s?f in n:U.call(n,f)))return!1}var d=o.get(t),p=o.get(n);if(d&&p)return d==n&&p==t;var v=!0;o.set(t,n),o.set(n,t);for(var h=s;++u<l;){var y=t[f=c[u]],g=n[f];if(a)var b=s?a(g,y,f,n,t,o):a(y,g,f,t,n,o);if(!(void 0===b?y===g||i(y,g,r,a,o):b)){v=!1;break}h||(h="constructor"==f)}if(v&&!h){var m=t.constructor,S=n.constructor;m==S||!("constructor"in t)||!("constructor"in n)||"function"==typeof m&&m instanceof m&&"function"==typeof S&&S instanceof S||(v=!1)}return o.delete(t),o.delete(n),v}(t,r,a,i,o,s))}(t,r,a,i,W,o))}function X(t,e){return null!=t&&e in Object(t)}function Y(t,r){return function(t,e,r){for(var a=-1,i=e.length,o={};++a<i;){var s=e[a],c=y(t,s);r(0,s)&&n.baseSet(o,n.castPath(s,t),c)}return o}(t,r,(function(r,a){return function(t,r){return null!=t&&function(t,r,a){for(var i=-1,o=(r=n.castPath(r,t)).length,s=!1;++i<o;){var c=n.toKey(r[i]);if(!(s=null!=t&&a(t,c)))break;t=t[c]}return s||++i!=o?s:!!(o=null==t?0:t.length)&&e.isLength(o)&&n.isIndex(c,o)&&(n.isArray$1(t)||e.isArguments$1(t))}(t,r,X)}(t,a)}))}var Z=function(t){return v(function(t,e,n){return e=h(void 0===e?t.length-1:e,0),function(){for(var r=arguments,a=-1,i=h(r.length-e,0),o=Array(i);++a<i;)o[a]=r[e+a];a=-1;for(var s=Array(e+1);++a<e;)s[a]=r[a];return s[e]=n(o),function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,s)}}(t,void 0,S),t+"")}((function(t,e){return null==t?{}:Y(t,e)}));const tt=Z,et={modal:{width:"s",kind:"warning"},buttonPrimary:{slot:"primary"},buttonSecondary:{slot:"secondary",appearance:"outline"},header:{slot:"header",style:"\n      display: flex;\n      align-items: center;\n      justify-content: flex-start;\n    "},headerIcon:{icon:"exclamation-mark-triangle-f",style:"\n      margin: 0 1rem;\n      --calcite-ui-icon-color: var(--calcite-color-status-warning);\n    "},content:{slot:"content"}},nt=(t,e,n,r=!1)=>{const a=document.createElement(t);var i,o;return i=a,o=n,Object.keys(o).forEach((t=>{i.setAttribute(t,o[t])})),r?a.innerHTML=e:a.innerText=e,a};t.cloneDeep=function(t){return e.baseClone(t,5)},t.createCreditThresholdModalElement=function(t,e){const{modal:n,buttonPrimary:a,buttonSecondary:i,header:o,headerIcon:c,content:l}=et,{continueRun:u,cancelRun:f,thresholdExceeded:d,creditEstimate:p,creditThreshold:v,creditReductionHint:h,heading:y}=t,g=nt("calcite-modal","",n),b=nt("div","",o),m=nt("div",y,{}),S=nt("calcite-icon","",c);b.appendChild(S),b.appendChild(m);const O=nt("calcite-button",u,a),x=nt("calcite-button",f,i),E=nt("div","",l);E.appendChild(nt("p",d,{})),E.appendChild(nt("p",p+"\n"+v,{})),E.appendChild(nt("p",r.formatMessage(h,{docLink:e}),{},!0)),g.appendChild(b),g.appendChild(E),g.appendChild(O),g.appendChild(x);const A=new Promise((t=>{const e=n=>{let r=!1;r=n.target.getAttribute("slot")===et.buttonPrimary.slot,g.removeEventListener("calciteModalClose",e),O.removeEventListener("click",e),x.removeEventListener("click",e),g.open=!1,s.removeOpenableDomElement(g),t(r)};g.addEventListener("calciteModalClose",e),O.addEventListener("click",e),x.addEventListener("click",e)}));return{modalElement:g,modalResult:A}},t.isEqual=function(t,e){return W(t,e)},t.setContextFromHistory=function(t){r.isEmptyDataItem(t)?(i.state.context={},i.state.settingsSelectedOutSpatialRefOption=a.OutSROptions.SameAsInput,i.state.settingsSelectedExtentOption=a.ExtentOptions.Default):(r.isEmptyDataItem(t?.outSR)?i.state.settingsSelectedOutSpatialRefOption=a.OutSROptions.SameAsInput:i.state.settingsSelectedOutSpatialRefOption=a.OutSROptions.BrowseCS,r.isEmptyDataItem(t?.extent)?i.state.settingsSelectedExtentOption=a.ExtentOptions.Default:i.state.settingsSelectedExtentOption=a.ExtentOptions.Coordinates,i.state.context=t??{})},t.setContextFromMapLevel=function(t,e,n){void 0!==n&&(i.state.mapLevelContext=n);const{settingsSelectedExtentOption:r,settingsSelectedOutSpatialRefOption:a,context:s}=i.state.mapLevelContext;void 0!==r&&(i.state.settingsSelectedExtentOption=r),void 0!==a&&(i.state.settingsSelectedOutSpatialRefOption=a);const c=t?.environmentSettings,l=[];void 0!==c?(void 0!==c.standard?l.push(...c.standard):l.push(...o.AnalysisStandardContextKeys),void 0!==c.raster?l.push(...c.raster):"raster"===e&&l.push(...o.AnalysisRasterContextKeys)):(l.push(...o.AnalysisStandardContextKeys),"raster"===e&&l.push(...o.AnalysisRasterContextKeys)),i.state.context=tt(s??{},l)}}));